/*! For license information please see main.ffe7a8fa.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,r)=>{var n=r(853),a=r(43),s=r(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(o(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),k=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var _=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=_&&e[_]||e["@@iterator"])?e:null}var L=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===L?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case p:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case N:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case k:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return M(e(t))}catch(r){}}return null}var O=Array.isArray,D=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},F=[],I=-1;function B(e){return{current:e}}function z(e){0>I||(e.current=F[I],F[I]=null,I--)}function W(e,t){I++,F[I]=e.current,e.current=t}var U=B(null),H=B(null),V=B(null),G=B(null);function q(e,t){switch(W(V,t),W(H,e),W(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?au(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=su(t=au(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(U),W(U,e)}function $(){z(U),z(H),z(V)}function K(e){null!==e.memoizedState&&W(G,e);var t=U.current,r=su(t,e.type);t!==r&&(W(H,e),W(U,r))}function Y(e){H.current===e&&(z(U),z(H)),G.current===e&&(z(G),Ku._currentValue=P)}var X=Object.prototype.hasOwnProperty,J=n.unstable_scheduleCallback,Q=n.unstable_cancelCallback,Z=n.unstable_shouldYield,ee=n.unstable_requestPaint,te=n.unstable_now,re=n.unstable_getCurrentPriorityLevel,ne=n.unstable_ImmediatePriority,ae=n.unstable_UserBlockingPriority,se=n.unstable_NormalPriority,oe=n.unstable_LowPriority,ie=n.unstable_IdlePriority,le=n.log,ce=n.unstable_setDisableYieldValue,de=null,ue=null;function he(e){if("function"===typeof le&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ge(e)/fe|0)|0},ge=Math.log,fe=Math.LN2;var pe=256,xe=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var a=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var i=134217727&n;return 0!==i?0!==(n=i&~s)?a=be(n):0!==(o&=i)?a=be(o):r||0!==(r=i&~e)&&(a=be(r)):0!==(i=n&~s)?a=be(i):0!==o?a=be(o):r||0!==(r=n&~e)&&(a=be(r)),0===a?0:0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(r=t&-t)||32===s&&0!==(4194048&r))?t:a}function ve(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=pe;return 0===(4194048&(pe<<=1))&&(pe=256),e}function je(){var e=xe;return 0===(62914560&(xe<<=1))&&(xe=4194304),e}function Ne(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Se(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-me(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194090&r}function Ee(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-me(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _e(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Te(){var e=R.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Le=Math.random().toString(36).slice(2),Me="__reactFiber$"+Le,Oe="__reactProps$"+Le,De="__reactContainer$"+Le,Re="__reactEvents$"+Le,Pe="__reactListeners$"+Le,Fe="__reactHandles$"+Le,Ie="__reactResources$"+Le,Be="__reactMarker$"+Le;function ze(e){delete e[Me],delete e[Oe],delete e[Re],delete e[Pe],delete e[Fe]}function We(e){var t=e[Me];if(t)return t;for(var r=e.parentNode;r;){if(t=r[De]||r[Me]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=yu(e);null!==e;){if(r=e[Me])return r;e=yu(e)}return t}r=(e=r).parentNode}return null}function Ue(e){if(e=e[Me]||e[De]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ve(e){var t=e[Ie];return t||(t=e[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Be]=!0}var qe=new Set,$e={};function Ke(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for($e[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Xe,Je,Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,r){if(a=t,X.call(et,a)||!X.call(Ze,a)&&(Qe.test(a)?et[a]=!0:(Ze[a]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var a}function rt(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function nt(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function at(e){if(void 0===Xe)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Je=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Je}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(a){var n=a}Reflect.construct(e,[],r)}else{try{r.call()}catch(s){n=s}e.call(r.prototype)}}else{try{throw Error()}catch(o){n=o}(r=e())&&"function"===typeof r.catch&&r.catch(function(){})}}catch(ug){if(ug&&n&&"string"===typeof ug.stack)return[ug.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),o=s[0],i=s[1];if(o&&i){var l=o.split("\n"),c=i.split("\n");for(a=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(n===l.length||a===c.length)for(n=l.length-1,a=c.length-1;1<=n&&0<=a&&l[n]!==c[a];)a--;for(;1<=n&&0<=a;n--,a--)if(l[n]!==c[a]){if(1!==n||1!==a)do{if(n--,0>--a||l[n]!==c[a]){var d="\n"+l[n].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=n&&0<=a);break}}}finally{st=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?at(r):""}function it(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return at("Activity");default:return""}}function lt(e){try{var t="";do{t+=it(e),e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=dt(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function ft(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function pt(e,t,r,n,a,s,o,i){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ct(t)):null!=r?bt(e,o,ct(r)):null!=n&&e.removeAttribute("value"),null==a&&null!=s&&(e.defaultChecked=!!s),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+ct(i):e.removeAttribute("name")}function xt(e,t,r,n,a,s,o,i){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=r){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;r=null!=r?""+ct(r):"",t=null!=t?""+ct(t):r,i||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:a)&&"symbol"!==typeof n&&!!n,e.checked=i?e.checked:!!n,e.defaultChecked=!!n,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function bt(e,t,r){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function yt(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ct(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function vt(e,t,r){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+ct(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(o(92));if(O(n)){if(1<n.length)throw Error(o(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=ct(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function wt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var jt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"===typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!==typeof r||0===r||jt.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function St(e,t,r){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&r[a]!==n&&Nt(e,a,n)}else for(var s in t)t.hasOwnProperty(s)&&Nt(e,s,t[s])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function Lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Ot=null;function Dt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var r=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(pt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n[Oe]||null;if(!a)throw Error(o(90));pt(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&ht(n)}break e;case"textarea":vt(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&yt(e,!!r.multiple,t,!1)}}}var Rt=!1;function Pt(e,t,r){if(Rt)return e(t,r);Rt=!0;try{return e(t)}finally{if(Rt=!1,(null!==Mt||null!==Ot)&&(Wc(),Mt&&(t=Mt,e=Ot,Ot=Mt=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Ft(e,t){var r=e.stateNode;if(null===r)return null;var n=r[Oe]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var It=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(It)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Oh){Bt=!1}var Wt=null,Ut=null,Ht=null;function Vt(){if(Ht)return Ht;var e,t,r=Ut,n=r.length,a="value"in Wt?Wt.value:Wt.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===a[s-t];t++);return Ht=a.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function $t(){return!1}function Kt(e){function t(t,r,n,a,s){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?qt:$t,this.isPropagationStopped=$t,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Yt,Xt,Jt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt(Qt),er=h({},Qt,{view:0,detail:0}),tr=Kt(er),rr=h({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),nr=Kt(rr),ar=Kt(h({},rr,{dataTransfer:0})),sr=Kt(h({},er,{relatedTarget:0})),or=Kt(h({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),ir=Kt(h({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),lr=Kt(h({},Qt,{data:0})),cr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ur={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ur[e])&&!!t[e]}function mr(){return hr}var gr=Kt(h({},er,{key:function(e){if(e.key){var t=cr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),fr=Kt(h({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),pr=Kt(h({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr})),xr=Kt(h({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),br=Kt(h({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),yr=Kt(h({},Qt,{newState:0,oldState:0})),vr=[9,13,27,32],kr=It&&"CompositionEvent"in window,wr=null;It&&"documentMode"in document&&(wr=document.documentMode);var jr=It&&"TextEvent"in window&&!wr,Nr=It&&(!kr||wr&&8<wr&&11>=wr),Sr=String.fromCharCode(32),Cr=!1;function Er(e,t){switch(e){case"keyup":return-1!==vr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ar(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var _r=!1;var Tr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Tr[e.type]:"textarea"===t}function Mr(e,t,r,n){Mt?Ot?Ot.push(n):Ot=[n]:Mt=n,0<(t=Vd(t,"onChange")).length&&(r=new Zt("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Or=null,Dr=null;function Rr(e){Pd(e,0)}function Pr(e){if(ht(He(e)))return e}function Fr(e,t){if("change"===e)return t}var Ir=!1;if(It){var Br;if(It){var zr="oninput"in document;if(!zr){var Wr=document.createElement("div");Wr.setAttribute("oninput","return;"),zr="function"===typeof Wr.oninput}Br=zr}else Br=!1;Ir=Br&&(!document.documentMode||9<document.documentMode)}function Ur(){Or&&(Or.detachEvent("onpropertychange",Hr),Dr=Or=null)}function Hr(e){if("value"===e.propertyName&&Pr(Dr)){var t=[];Mr(t,Dr,e,Lt(e)),Pt(Rr,t)}}function Vr(e,t,r){"focusin"===e?(Ur(),Dr=r,(Or=t).attachEvent("onpropertychange",Hr)):"focusout"===e&&Ur()}function Gr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pr(Dr)}function qr(e,t){if("click"===e)return Pr(t)}function $r(e,t){if("input"===e||"change"===e)return Pr(t)}var Kr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yr(e,t){if(Kr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!X.call(t,a)||!Kr(e[a],t[a]))return!1}return!0}function Xr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jr(e,t){var r,n=Xr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xr(n)}}function Qr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=mt((e=t.contentWindow).document)}return t}function en(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tn=It&&"documentMode"in document&&11>=document.documentMode,rn=null,nn=null,an=null,sn=!1;function on(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;sn||null==rn||rn!==mt(n)||("selectionStart"in(n=rn)&&en(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},an&&Yr(an,n)||(an=n,0<(n=Vd(nn,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rn)))}function ln(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cn={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},dn={},un={};function hn(e){if(dn[e])return dn[e];if(!cn[e])return e;var t,r=cn[e];for(t in r)if(r.hasOwnProperty(t)&&t in un)return dn[e]=r[t];return e}It&&(un=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);var mn=hn("animationend"),gn=hn("animationiteration"),fn=hn("animationstart"),pn=hn("transitionrun"),xn=hn("transitionstart"),bn=hn("transitioncancel"),yn=hn("transitionend"),vn=new Map,kn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){vn.set(e,t),Ke(t,[e])}kn.push("scrollEnd");var jn=new WeakMap;function Nn(e,t){if("object"===typeof e&&null!==e){var r=jn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:lt(t)},jn.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Sn=[],Cn=0,En=0;function An(){for(var e=Cn,t=En=Cn=0;t<e;){var r=Sn[t];Sn[t++]=null;var n=Sn[t];Sn[t++]=null;var a=Sn[t];Sn[t++]=null;var s=Sn[t];if(Sn[t++]=null,null!==n&&null!==a){var o=n.pending;null===o?a.next=a:(a.next=o.next,o.next=a),n.pending=a}0!==s&&Mn(r,a,s)}}function _n(e,t,r,n){Sn[Cn++]=e,Sn[Cn++]=t,Sn[Cn++]=r,Sn[Cn++]=n,En|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Tn(e,t,r,n){return _n(e,t,r,n),On(e)}function Ln(e,t){return _n(e,null,null,t),On(e)}function Mn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var a=!1,s=e.return;null!==s;)s.childLanes|=r,null!==(n=s.alternate)&&(n.childLanes|=r),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(a=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,a&&null!==t&&(a=31-me(r),null===(n=(e=s.hiddenUpdates)[a])?e[a]=[t]:n.push(t),t.lane=536870912|r),s):null}function On(e){if(50<Mc)throw Mc=0,Oc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dn={};function Rn(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(e,t,r,n){return new Rn(e,t,r,n)}function Fn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function In(e,t){var r=e.alternate;return null===r?((r=Pn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Bn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zn(e,t,r,n,a,s){var i=0;if(n=e,"function"===typeof e)Fn(e)&&(i=1);else if("string"===typeof e)i=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,r,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Pn(31,r,t,a)).elementType=E,e.lanes=s,e;case p:return Wn(r.children,a,s,t);case x:i=8,a|=24;break;case b:return(e=Pn(12,r,t,2|a)).elementType=b,e.lanes=s,e;case j:return(e=Pn(13,r,t,a)).elementType=j,e.lanes=s,e;case N:return(e=Pn(19,r,t,a)).elementType=N,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case k:i=10;break e;case v:i=9;break e;case w:i=11;break e;case S:i=14;break e;case C:i=16,n=null;break e}i=29,r=Error(o(130,null===e?"null":typeof e,"")),n=null}return(t=Pn(i,r,t,a)).elementType=e,t.type=n,t.lanes=s,t}function Wn(e,t,r,n){return(e=Pn(7,e,n,t)).lanes=r,e}function Un(e,t,r){return(e=Pn(6,e,null,t)).lanes=r,e}function Hn(e,t,r){return(t=Pn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vn=[],Gn=0,qn=null,$n=0,Kn=[],Yn=0,Xn=null,Jn=1,Qn="";function Zn(e,t){Vn[Gn++]=$n,Vn[Gn++]=qn,qn=e,$n=t}function ea(e,t,r){Kn[Yn++]=Jn,Kn[Yn++]=Qn,Kn[Yn++]=Xn,Xn=e;var n=Jn;e=Qn;var a=32-me(n)-1;n&=~(1<<a),r+=1;var s=32-me(t)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Jn=1<<32-me(t)+a|r<<a|n,Qn=s+e}else Jn=1<<s|r<<a|n,Qn=e}function ta(e){null!==e.return&&(Zn(e,1),ea(e,1,0))}function ra(e){for(;e===qn;)qn=Vn[--Gn],Vn[Gn]=null,$n=Vn[--Gn],Vn[Gn]=null;for(;e===Xn;)Xn=Kn[--Yn],Kn[Yn]=null,Qn=Kn[--Yn],Kn[Yn]=null,Jn=Kn[--Yn],Kn[Yn]=null}var na=null,aa=null,sa=!1,oa=null,ia=!1,la=Error(o(519));function ca(e){throw fa(Nn(Error(o(418,"")),e)),la}function da(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Me]=e,t[Oe]=n,r){case"dialog":Fd("cancel",t),Fd("close",t);break;case"iframe":case"object":case"embed":Fd("load",t);break;case"video":case"audio":for(r=0;r<Dd.length;r++)Fd(Dd[r],t);break;case"source":Fd("error",t);break;case"img":case"image":case"link":Fd("error",t),Fd("load",t);break;case"details":Fd("toggle",t);break;case"input":Fd("invalid",t),xt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ut(t);break;case"select":Fd("invalid",t);break;case"textarea":Fd("invalid",t),kt(t,n.value,n.defaultValue,n.children),ut(t)}"string"!==typeof(r=n.children)&&"number"!==typeof r&&"bigint"!==typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Xd(t.textContent,r)?(null!=n.popover&&(Fd("beforetoggle",t),Fd("toggle",t)),null!=n.onScroll&&Fd("scroll",t),null!=n.onScrollEnd&&Fd("scrollend",t),null!=n.onClick&&(t.onclick=Jd),t=!0):t=!1,t||ca(e)}function ua(e){for(na=e.return;na;)switch(na.tag){case 5:case 13:return void(ia=!1);case 27:case 3:return void(ia=!0);default:na=na.return}}function ha(e){if(e!==na)return!1;if(!sa)return ua(e),sa=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ou(e.type,e.memoizedProps)),t=!t),t&&aa&&ca(e),ua(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){aa=xu(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}aa=null}}else 27===r?(r=aa,mu(e.type)?(e=bu,bu=null,aa=e):aa=r):aa=na?xu(e.stateNode.nextSibling):null;return!0}function ma(){aa=na=null,sa=!1}function ga(){var e=oa;return null!==e&&(null===yc?yc=e:yc.push.apply(yc,e),oa=null),e}function fa(e){null===oa?oa=[e]:oa.push(e)}var pa=B(null),xa=null,ba=null;function ya(e,t,r){W(pa,t._currentValue),t._currentValue=r}function va(e){e._currentValue=pa.current,z(pa)}function ka(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wa(e,t,r,n){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var s=a.dependencies;if(null!==s){var i=a.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),ka(s.return,r,e),n||(i=null);break e}s=l.next}}else if(18===a.tag){if(null===(i=a.return))throw Error(o(341));i.lanes|=r,null!==(s=i.alternate)&&(s.lanes|=r),ka(i,r,e),i=null}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===e){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}}function ja(e,t,r,n){e=null;for(var a=t,s=!1;null!==a;){if(!s)if(0!==(524288&a.flags))s=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var i=a.alternate;if(null===i)throw Error(o(387));if(null!==(i=i.memoizedProps)){var l=a.type;Kr(a.pendingProps.value,i.value)||(null!==e?e.push(l):e=[l])}}else if(a===G.current){if(null===(i=a.alternate))throw Error(o(387));i.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Ku):e=[Ku])}a=a.return}null!==e&&wa(t,e,r,n),t.flags|=262144}function Na(e){for(e=e.firstContext;null!==e;){if(!Kr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Sa(e){xa=e,ba=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ca(e){return Aa(xa,e)}function Ea(e,t){return null===xa&&Sa(e),Aa(e,t)}function Aa(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===ba){if(null===e)throw Error(o(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return r}var _a="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ta=n.unstable_scheduleCallback,La=n.unstable_NormalPriority,Ma={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oa(){return{controller:new _a,data:new Map,refCount:0}}function Da(e){e.refCount--,0===e.refCount&&Ta(La,function(){e.controller.abort()})}var Ra=null,Pa=0,Fa=0,Ia=null;function Ba(){if(0===--Pa&&null!==Ra){null!==Ia&&(Ia.status="fulfilled");var e=Ra;Ra=null,Fa=0,Ia=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var za=D.S;D.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ra){var r=Ra=[];Pa=0,Fa=_d(),Ia={status:"pending",value:void 0,then:function(e){r.push(e)}}}Pa++,t.then(Ba,Ba)}(0,t),null!==za&&za(e,t)};var Wa=B(null);function Ua(){var e=Wa.current;return null!==e?e:nc.pooledCache}function Ha(e,t){W(Wa,null===t?Wa.current:t.pool)}function Va(){var e=Ua();return null===e?null:{parent:Ma._currentValue,pool:e}}var Ga=Error(o(460)),qa=Error(o(474)),$a=Error(o(542)),Ka={then:function(){}};function Ya(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xa(){}function Ja(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Xa,Xa),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xa,Xa);else{if(null!==(e=nc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Qa=t,Ga}}var Qa=null;function Za(){if(null===Qa)throw Error(o(459));var e=Qa;return Qa=null,e}function es(e){if(e===Ga||e===$a)throw Error(o(483))}var ts=!1;function rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ns(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function as(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&rc)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=On(e),Mn(e,null,r),t}return _n(e,n,t,r),On(e)}function os(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ee(e,r)}}function is(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===s?a=s=o:s=s.next=o,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Ia)throw Ia}}function ds(e,t,r,n){ls=!1;var a=e.updateQueue;ts=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var l=i,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(o=0,d=c=l=null,i=s;;){var m=-536870913&i.lane,g=m!==i.lane;if(g?(sc&m)===m:(n&m)===m){0!==m&&m===Fa&&(ls=!0),null!==d&&(d=d.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var f=e,p=i;m=t;var x=r;switch(p.tag){case 1:if("function"===typeof(f=p.payload)){u=f.call(x,u,m);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=p.payload)?f.call(x,u,m):f)||void 0===m)break e;u=h({},u,m);break e;case 2:ts=!0}}null!==(m=i.callback)&&(e.flags|=64,g&&(e.flags|=8192),null===(g=a.callbacks)?a.callbacks=[m]:g.push(m))}else g={lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=g,l=u):d=d.next=g,o|=m;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(g=i).next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===s&&(a.shared.lanes=0),mc|=o,e.lanes=o,e.memoizedState=u}}function us(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hs(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)us(r[e],t)}var ms=B(null),gs=B(0);function fs(e,t){W(gs,e=uc),W(ms,t),uc=e|t.baseLanes}function ps(){W(gs,uc),W(ms,ms.current)}function xs(){uc=gs.current,z(ms),z(gs)}var bs=0,ys=null,vs=null,ks=null,ws=!1,js=!1,Ns=!1,Ss=0,Cs=0,Es=null,As=0;function _s(){throw Error(o(321))}function Ts(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Kr(e[r],t[r]))return!1;return!0}function Ls(e,t,r,n,a,s){return bs=s,ys=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?qo:$o,Ns=!1,s=r(n,a),Ns=!1,js&&(s=Os(t,r,n,a)),Ms(e),s}function Ms(e){D.H=Go;var t=null!==vs&&null!==vs.next;if(bs=0,ks=vs=ys=null,ws=!1,Cs=0,Es=null,t)throw Error(o(300));null===e||Ei||null!==(e=e.dependencies)&&Na(e)&&(Ei=!0)}function Os(e,t,r,n){ys=e;var a=0;do{if(js&&(Es=null),Cs=0,js=!1,25<=a)throw Error(o(301));if(a+=1,ks=vs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}D.H=Ko,s=t(r,n)}while(js);return s}function Ds(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?zs(t):t,e=e.useState()[0],(null!==vs?vs.memoizedState:null)!==e&&(ys.flags|=1024),t}function Rs(){var e=0!==Ss;return Ss=0,e}function Ps(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Fs(e){if(ws){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ws=!1}bs=0,ks=vs=ys=null,js=!1,Cs=Ss=0,Es=null}function Is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ks?ys.memoizedState=ks=e:ks=ks.next=e,ks}function Bs(){if(null===vs){var e=ys.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===ks?ys.memoizedState:ks.next;if(null!==t)ks=t,vs=e;else{if(null===e){if(null===ys.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===ks?ys.memoizedState=ks=e:ks=ks.next=e}return ks}function zs(e){var t=Cs;return Cs+=1,null===Es&&(Es=[]),e=Ja(Es,e,t),t=ys,null===(null===ks?t.memoizedState:ks.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?qo:$o),e}function Ws(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zs(e);if(e.$$typeof===k)return Ca(e)}throw Error(o(438,String(e)))}function Us(e){var t=null,r=ys.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=ys.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=A;return t.index++,r}function Hs(e,t){return"function"===typeof t?t(e):t}function Vs(e){return Gs(Bs(),vs,e)}function Gs(e,t,r){var n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=r;var a=e.baseQueue,s=n.pending;if(null!==s){if(null!==a){var i=a.next;a.next=s.next,s.next=i}t.baseQueue=a=s,n.pending=null}if(s=e.baseState,null===a)e.memoizedState=s;else{var l=i=null,c=null,d=t=a.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(sc&h)===h:(bs&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Fa&&(u=!0);else{if((bs&m)===m){d=d.next,m===Fa&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,i=s):c=c.next=h,ys.lanes|=m,mc|=m}h=d.action,Ns&&r(s,h),s=d.hasEagerState?d.eagerState:r(s,h)}else m={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=m,i=s):c=c.next=m,ys.lanes|=h,mc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?i=s:c.next=l,!Kr(s,e.memoizedState)&&(Ei=!0,u&&null!==(r=Ia)))throw r;e.memoizedState=s,e.baseState=i,e.baseQueue=c,n.lastRenderedState=s}return null===a&&(n.lanes=0),[e.memoizedState,n.dispatch]}function qs(e){var t=Bs(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(null!==a){r.pending=null;var i=a=a.next;do{s=e(s,i.action),i=i.next}while(i!==a);Kr(s,t.memoizedState)||(Ei=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function $s(e,t,r){var n=ys,a=Bs(),s=sa;if(s){if(void 0===r)throw Error(o(407));r=r()}else r=t();var i=!Kr((vs||a).memoizedState,r);if(i&&(a.memoizedState=r,Ei=!0),a=a.queue,xo(2048,8,Xs.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||null!==ks&&1&ks.memoizedState.tag){if(n.flags|=2048,go(9,{destroy:void 0,resource:void 0},Ys.bind(null,n,a,r,t),null),null===nc)throw Error(o(349));s||0!==(124&bs)||Ks(n,t,r)}return r}function Ks(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ys.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ys(e,t,r,n){t.value=r,t.getSnapshot=n,Js(t)&&Qs(e)}function Xs(e,t,r){return r(function(){Js(t)&&Qs(e)})}function Js(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Kr(e,r)}catch(n){return!0}}function Qs(e){var t=Ln(e,2);null!==t&&Pc(t,e,2)}function Zs(e){var t=Is();if("function"===typeof e){var r=e;if(e=r(),Ns){he(!0);try{r()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function eo(e,t,r,n){return e.baseState=r,Gs(e,vs,"function"===typeof n?n:Hs)}function to(e,t,r,n,a){if(Uo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==D.T?r(!0):s.isTransition=!1,n(s),null===(r=t.pending)?(s.next=t.pending=s,ro(t,s)):(s.next=r.next,t.pending=r.next=s)}}function ro(e,t){var r=t.action,n=t.payload,a=e.state;if(t.isTransition){var s=D.T,o={};D.T=o;try{var i=r(a,n),l=D.S;null!==l&&l(o,i),no(e,t,i)}catch(c){so(e,t,c)}finally{D.T=s}}else try{no(e,t,s=r(a,n))}catch(d){so(e,t,d)}}function no(e,t,r){null!==r&&"object"===typeof r&&"function"===typeof r.then?r.then(function(r){ao(e,t,r)},function(r){return so(e,t,r)}):ao(e,t,r)}function ao(e,t,r){t.status="fulfilled",t.value=r,oo(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,ro(e,r)))}function so(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,oo(t),t=t.next}while(t!==n)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function io(e,t){return t}function lo(e,t){if(sa){var r=nc.formState;if(null!==r){e:{var n=ys;if(sa){if(aa){t:{for(var a=aa,s=ia;8!==a.nodeType;){if(!s){a=null;break t}if(null===(a=xu(a.nextSibling))){a=null;break t}}a="F!"===(s=a.data)||"F"===s?a:null}if(a){aa=xu(a.nextSibling),n="F!"===a.data;break e}}ca(n)}n=!1}n&&(t=r[0])}}return(r=Is()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},r.queue=n,r=Bo.bind(null,ys,n),n.dispatch=r,n=Zs(!1),s=Wo.bind(null,ys,!1,n.queue),a={state:t,dispatch:null,action:e,pending:null},(n=Is()).queue=a,r=to.bind(null,ys,a,s,r),a.dispatch=r,n.memoizedState=e,[t,r,!1]}function co(e){return uo(Bs(),vs,e)}function uo(e,t,r){if(t=Gs(e,t,io)[0],e=Vs(Hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var n=zs(t)}catch(o){if(o===Ga)throw $a;throw o}else n=t;var a=(t=Bs()).queue,s=a.dispatch;return r!==t.memoizedState&&(ys.flags|=2048,go(9,{destroy:void 0,resource:void 0},ho.bind(null,a,r),null)),[n,s,e]}function ho(e,t){e.action=t}function mo(e){var t=Bs(),r=vs;if(null!==r)return uo(t,r,e);Bs(),t=t.memoizedState;var n=(r=Bs()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function go(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=ys.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function fo(){return Bs().memoizedState}function po(e,t,r,n){var a=Is();n=void 0===n?null:n,ys.flags|=e,a.memoizedState=go(1|t,{destroy:void 0,resource:void 0},r,n)}function xo(e,t,r,n){var a=Bs();n=void 0===n?null:n;var s=a.memoizedState.inst;null!==vs&&null!==n&&Ts(n,vs.memoizedState.deps)?a.memoizedState=go(t,s,r,n):(ys.flags|=e,a.memoizedState=go(1|t,s,r,n))}function bo(e,t){po(8390656,8,e,t)}function yo(e,t){xo(2048,8,e,t)}function vo(e,t){return xo(4,2,e,t)}function ko(e,t){return xo(4,4,e,t)}function wo(e,t){if("function"===typeof t){e=e();var r=t(e);return function(){"function"===typeof r?r():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function jo(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,xo(4,4,wo.bind(null,t,e),r)}function No(){}function So(e,t){var r=Bs();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&Ts(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Co(e,t){var r=Bs();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&Ts(t,n[1]))return n[0];if(n=e(),Ns){he(!0);try{e()}finally{he(!1)}}return r.memoizedState=[n,t],n}function Eo(e,t,r){return void 0===r||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=r,e=Rc(),ys.lanes|=e,mc|=e,r)}function Ao(e,t,r,n){return Kr(r,t)?r:null!==ms.current?(e=Eo(e,r,n),Kr(e,t)||(Ei=!0),e):0===(42&bs)?(Ei=!0,e.memoizedState=r):(e=Rc(),ys.lanes|=e,mc|=e,t)}function _o(e,t,r,n,a){var s=R.p;R.p=0!==s&&8>s?s:8;var o=D.T,i={};D.T=i,Wo(e,!1,t,r);try{var l=a(),c=D.S;if(null!==c&&c(i,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var d=function(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(e){r.push(e)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var e=0;e<r.length;e++)(0,r[e])(t)},function(e){for(n.status="rejected",n.reason=e,e=0;e<r.length;e++)(0,r[e])(void 0)}),n}(l,n);zo(e,t,d,Dc())}else zo(e,t,n,Dc())}catch(u){zo(e,t,{then:function(){},status:"rejected",reason:u},Dc())}finally{R.p=s,D.T=o}}function To(){}function Lo(e,t,r,n){if(5!==e.tag)throw Error(o(476));var a=Mo(e).queue;_o(e,a,t,P,null===r?To:function(){return Oo(e),r(n)})}function Mo(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:P},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Oo(e){zo(e,Mo(e).next.queue,{},Dc())}function Do(){return Ca(Ku)}function Ro(){return Bs().memoizedState}function Po(){return Bs().memoizedState}function Fo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Dc(),n=ss(t,e=as(r),r);return null!==n&&(Pc(n,t,r),os(n,t,r)),t={cache:Oa()},void(e.payload=t)}t=t.return}}function Io(e,t,r){var n=Dc();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Uo(e)?Ho(t,r):null!==(r=Tn(e,t,r,n))&&(Pc(r,e,n),Vo(r,t,n))}function Bo(e,t,r){zo(e,t,r,Dc())}function zo(e,t,r,n){var a={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Uo(e))Ho(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,i=s(o,r);if(a.hasEagerState=!0,a.eagerState=i,Kr(i,o))return _n(e,t,a,0),null===nc&&An(),!1}catch(l){}if(null!==(r=Tn(e,t,a,n)))return Pc(r,e,n),Vo(r,t,n),!0}return!1}function Wo(e,t,r,n){if(n={lane:2,revertLane:_d(),action:n,hasEagerState:!1,eagerState:null,next:null},Uo(e)){if(t)throw Error(o(479))}else null!==(t=Tn(e,r,n,2))&&Pc(t,e,2)}function Uo(e){var t=e.alternate;return e===ys||null!==t&&t===ys}function Ho(e,t){js=ws=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Vo(e,t,r){if(0!==(4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ee(e,r)}}var Go={readContext:Ca,use:Ws,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useLayoutEffect:_s,useInsertionEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useSyncExternalStore:_s,useId:_s,useHostTransitionStatus:_s,useFormState:_s,useActionState:_s,useOptimistic:_s,useMemoCache:_s,useCacheRefresh:_s},qo={readContext:Ca,use:Ws,useCallback:function(e,t){return Is().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:bo,useImperativeHandle:function(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,po(4194308,4,wo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return po(4194308,4,e,t)},useInsertionEffect:function(e,t){po(4,2,e,t)},useMemo:function(e,t){var r=Is();t=void 0===t?null:t;var n=e();if(Ns){he(!0);try{e()}finally{he(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=Is();if(void 0!==r){var a=r(t);if(Ns){he(!0);try{r(t)}finally{he(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=Io.bind(null,ys,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Is().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,r=Bo.bind(null,ys,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:No,useDeferredValue:function(e,t){return Eo(Is(),e,t)},useTransition:function(){var e=Zs(!1);return e=_o.bind(null,ys,e.queue,!0,!1),Is().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=ys,a=Is();if(sa){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===nc)throw Error(o(349));0!==(124&sc)||Ks(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,bo(Xs.bind(null,n,s,e),[e]),n.flags|=2048,go(9,{destroy:void 0,resource:void 0},Ys.bind(null,n,s,r,t),null),r},useId:function(){var e=Is(),t=nc.identifierPrefix;if(sa){var r=Qn;t="\xab"+t+"R"+(r=(Jn&~(1<<32-me(Jn)-1)).toString(32)+r),0<(r=Ss++)&&(t+="H"+r.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(r=As++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Do,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Is();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Wo.bind(null,ys,!0,r),r.dispatch=t,[e,t]},useMemoCache:Us,useCacheRefresh:function(){return Is().memoizedState=Fo.bind(null,ys)}},$o={readContext:Ca,use:Ws,useCallback:So,useContext:Ca,useEffect:yo,useImperativeHandle:jo,useInsertionEffect:vo,useLayoutEffect:ko,useMemo:Co,useReducer:Vs,useRef:fo,useState:function(){return Vs(Hs)},useDebugValue:No,useDeferredValue:function(e,t){return Ao(Bs(),vs.memoizedState,e,t)},useTransition:function(){var e=Vs(Hs)[0],t=Bs().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:$s,useId:Ro,useHostTransitionStatus:Do,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Bs(),0,e,t)},useMemoCache:Us,useCacheRefresh:Po},Ko={readContext:Ca,use:Ws,useCallback:So,useContext:Ca,useEffect:yo,useImperativeHandle:jo,useInsertionEffect:vo,useLayoutEffect:ko,useMemo:Co,useReducer:qs,useRef:fo,useState:function(){return qs(Hs)},useDebugValue:No,useDeferredValue:function(e,t){var r=Bs();return null===vs?Eo(r,e,t):Ao(r,vs.memoizedState,e,t)},useTransition:function(){var e=qs(Hs)[0],t=Bs().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:$s,useId:Ro,useHostTransitionStatus:Do,useFormState:mo,useActionState:mo,useOptimistic:function(e,t){var r=Bs();return null!==vs?eo(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Us,useCacheRefresh:Po},Yo=null,Xo=0;function Jo(e){var t=Xo;return Xo+=1,null===Yo&&(Yo=[]),Ja(Yo,e,t)}function Qo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===m)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ei(e){return(0,e._init)(e._payload)}function ti(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=In(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Un(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===p?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&ei(s)===t.type)?(Qo(t=a(t,r.props),r),t.return=e,t):(Qo(t=zn(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Hn(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Wn(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Un(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case g:return Qo(r=zn(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case f:return(t=Hn(t,e.mode,r)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),r)}if(O(t)||T(t))return(t=Wn(t,e.mode,r,null)).return=e,t;if("function"===typeof t.then)return h(e,Jo(t),r);if(t.$$typeof===k)return h(e,Ea(e,t),r);Zo(e,t)}return null}function m(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case g:return r.key===a?c(e,t,r,n):null;case f:return r.key===a?d(e,t,r,n):null;case C:return m(e,t,r=(a=r._init)(r._payload),n)}if(O(r)||T(r))return null!==a?null:u(e,t,r,n,null);if("function"===typeof r.then)return m(e,t,Jo(r),n);if(r.$$typeof===k)return m(e,t,Ea(e,r),n);Zo(e,r)}return null}function x(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case g:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case f:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case C:return x(e,t,r,n=(0,n._init)(n._payload),a)}if(O(n)||T(n))return u(t,e=e.get(r)||null,n,a,null);if("function"===typeof n.then)return x(e,t,r,Jo(n),a);if(n.$$typeof===k)return x(e,t,r,Ea(t,n),a);Zo(t,n)}return null}function b(l,c,d,u){if("object"===typeof d&&null!==d&&d.type===p&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case g:e:{for(var y=d.key;null!==c;){if(c.key===y){if((y=d.type)===p){if(7===c.tag){r(l,c.sibling),(u=a(c,d.props.children)).return=l,l=u;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===C&&ei(y)===c.type){r(l,c.sibling),Qo(u=a(c,d.props),d),u.return=l,l=u;break e}r(l,c);break}t(l,c),c=c.sibling}d.type===p?((u=Wn(d.props.children,l.mode,u,d.key)).return=l,l=u):(Qo(u=zn(d.type,d.key,d.props,null,l.mode,u),d),u.return=l,l=u)}return i(l);case f:e:{for(y=d.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(l,c.sibling),(u=a(c,d.children||[])).return=l,l=u;break e}r(l,c);break}t(l,c),c=c.sibling}(u=Hn(d,l.mode,u)).return=l,l=u}return i(l);case C:return b(l,c,d=(y=d._init)(d._payload),u)}if(O(d))return function(a,o,i,l){for(var c=null,d=null,u=o,g=o=0,f=null;null!==u&&g<i.length;g++){u.index>g?(f=u,u=null):f=u.sibling;var p=m(a,u,i[g],l);if(null===p){null===u&&(u=f);break}e&&u&&null===p.alternate&&t(a,u),o=s(p,o,g),null===d?c=p:d.sibling=p,d=p,u=f}if(g===i.length)return r(a,u),sa&&Zn(a,g),c;if(null===u){for(;g<i.length;g++)null!==(u=h(a,i[g],l))&&(o=s(u,o,g),null===d?c=u:d.sibling=u,d=u);return sa&&Zn(a,g),c}for(u=n(u);g<i.length;g++)null!==(f=x(u,a,g,i[g],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?g:f.key),o=s(f,o,g),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(a,e)}),sa&&Zn(a,g),c}(l,c,d,u);if(T(d)){if("function"!==typeof(y=T(d)))throw Error(o(150));return function(a,i,l,c){if(null==l)throw Error(o(151));for(var d=null,u=null,g=i,f=i=0,p=null,b=l.next();null!==g&&!b.done;f++,b=l.next()){g.index>f?(p=g,g=null):p=g.sibling;var y=m(a,g,b.value,c);if(null===y){null===g&&(g=p);break}e&&g&&null===y.alternate&&t(a,g),i=s(y,i,f),null===u?d=y:u.sibling=y,u=y,g=p}if(b.done)return r(a,g),sa&&Zn(a,f),d;if(null===g){for(;!b.done;f++,b=l.next())null!==(b=h(a,b.value,c))&&(i=s(b,i,f),null===u?d=b:u.sibling=b,u=b);return sa&&Zn(a,f),d}for(g=n(g);!b.done;f++,b=l.next())null!==(b=x(g,a,f,b.value,c))&&(e&&null!==b.alternate&&g.delete(null===b.key?f:b.key),i=s(b,i,f),null===u?d=b:u.sibling=b,u=b);return e&&g.forEach(function(e){return t(a,e)}),sa&&Zn(a,f),d}(l,c,d=y.call(d),u)}if("function"===typeof d.then)return b(l,c,Jo(d),u);if(d.$$typeof===k)return b(l,c,Ea(l,d),u);Zo(l,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(r(l,c.sibling),(u=a(c,d)).return=l,l=u):(r(l,c),(u=Un(d,l.mode,u)).return=l,l=u),i(l)):r(l,c)}return function(e,t,r,n){try{Xo=0;var a=b(e,t,r,n);return Yo=null,a}catch(o){if(o===Ga||o===$a)throw o;var s=Pn(29,o,null,e.mode);return s.lanes=n,s.return=e,s}}}var ri=ti(!0),ni=ti(!1),ai=B(null),si=null;function oi(e){var t=e.alternate;W(di,1&di.current),W(ai,e),null===si&&(null===t||null!==ms.current||null!==t.memoizedState)&&(si=e)}function ii(e){if(22===e.tag){if(W(di,di.current),W(ai,e),null===si){var t=e.alternate;null!==t&&null!==t.memoizedState&&(si=e)}}else li()}function li(){W(di,di.current),W(ai,ai.current)}function ci(e){z(ai),si===e&&(si=null),z(di)}var di=B(0);function ui(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||pu(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hi(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:h({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var mi={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Dc(),a=as(n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=ss(e,a,n))&&(Pc(t,e,n),os(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Dc(),a=as(n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=ss(e,a,n))&&(Pc(t,e,n),os(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Dc(),n=as(r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=ss(e,n,r))&&(Pc(t,e,r),os(t,e,r))}};function gi(e,t,r,n,a,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Yr(r,n)||!Yr(a,s))}function fi(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function pi(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var a in r===t&&(r=h({},r)),e)void 0===r[a]&&(r[a]=e[a]);return r}var xi="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bi(e){xi(e)}function yi(e){console.error(e)}function vi(e){xi(e)}function ki(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function wi(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function ji(e,t,r){return(r=as(r)).tag=3,r.payload={element:null},r.callback=function(){ki(e,t)},r}function Ni(e){return(e=as(e)).tag=3,e}function Si(e,t,r,n){var a=r.type.getDerivedStateFromError;if("function"===typeof a){var s=n.value;e.payload=function(){return a(s)},e.callback=function(){wi(t,r,n)}}var o=r.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){wi(t,r,n),"function"!==typeof a&&(null===Nc?Nc=new Set([this]):Nc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Ci=Error(o(461)),Ei=!1;function Ai(e,t,r,n){t.child=null===e?ni(t,null,r,n):ri(t,e.child,r,n)}function _i(e,t,r,n,a){r=r.render;var s=t.ref;if("ref"in n){var o={};for(var i in n)"ref"!==i&&(o[i]=n[i])}else o=n;return Sa(t),n=Ls(e,t,r,o,s,a),i=Rs(),null===e||Ei?(sa&&i&&ta(t),t.flags|=1,Ai(e,t,n,a),t.child):(Ps(e,t,a),Yi(e,t,a))}function Ti(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Fn(s)||void 0!==s.defaultProps||null!==r.compare?((e=zn(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Li(e,t,s,n,a))}if(s=e.child,!Xi(e,a)){var o=s.memoizedProps;if((r=null!==(r=r.compare)?r:Yr)(o,n)&&e.ref===t.ref)return Yi(e,t,a)}return t.flags|=1,(e=In(s,n)).ref=t.ref,e.return=t,t.child=e}function Li(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(Yr(s,n)&&e.ref===t.ref){if(Ei=!1,t.pendingProps=n=s,!Xi(e,a))return t.lanes=e.lanes,Yi(e,t,a);0!==(131072&e.flags)&&(Ei=!0)}}return Ri(e,t,r,n,a)}function Mi(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(0!==(128&t.flags)){if(n=null!==s?s.baseLanes|r:r,null!==e){for(a=t.child=e.child,s=0;null!==a;)s=s|a.lanes|a.childLanes,a=a.sibling;t.childLanes=s&~n}else t.childLanes=0,t.child=null;return Oi(e,t,n,r)}if(0===(536870912&r))return t.lanes=t.childLanes=536870912,Oi(e,t,null!==s?s.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ha(0,null!==s?s.cachePool:null),null!==s?fs(t,s):ps(),ii(t)}else null!==s?(Ha(0,s.cachePool),fs(t,s),li(),t.memoizedState=null):(null!==e&&Ha(0,null),ps(),li());return Ai(e,t,a,r),t.child}function Oi(e,t,r,n){var a=Ua();return a=null===a?null:{parent:Ma._currentValue,pool:a},t.memoizedState={baseLanes:r,cachePool:a},null!==e&&Ha(0,null),ps(),ii(t),null!==e&&ja(e,t,n,!0),null}function Di(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof r&&"object"!==typeof r)throw Error(o(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Ri(e,t,r,n,a){return Sa(t),r=Ls(e,t,r,n,void 0,a),n=Rs(),null===e||Ei?(sa&&n&&ta(t),t.flags|=1,Ai(e,t,r,a),t.child):(Ps(e,t,a),Yi(e,t,a))}function Pi(e,t,r,n,a,s){return Sa(t),t.updateQueue=null,r=Os(t,n,r,a),Ms(e),n=Rs(),null===e||Ei?(sa&&n&&ta(t),t.flags|=1,Ai(e,t,r,s),t.child):(Ps(e,t,s),Yi(e,t,s))}function Fi(e,t,r,n,a){if(Sa(t),null===t.stateNode){var s=Dn,o=r.contextType;"object"===typeof o&&null!==o&&(s=Ca(o)),s=new r(n,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=mi,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=n,s.state=t.memoizedState,s.refs={},rs(t),o=r.contextType,s.context="object"===typeof o&&null!==o?Ca(o):Dn,s.state=t.memoizedState,"function"===typeof(o=r.getDerivedStateFromProps)&&(hi(t,r,o,n),s.state=t.memoizedState),"function"===typeof r.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&mi.enqueueReplaceState(s,s.state,null),ds(t,n,s,a),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){s=t.stateNode;var i=t.memoizedProps,l=pi(r,i);s.props=l;var c=s.context,d=r.contextType;o=Dn,"object"===typeof d&&null!==d&&(o=Ca(d));var u=r.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate,i=t.pendingProps!==i,d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(i||c!==o)&&fi(t,s,n,o),ts=!1;var h=t.memoizedState;s.state=h,ds(t,n,s,a),cs(),c=t.memoizedState,i||h!==c||ts?("function"===typeof u&&(hi(t,r,u,n),c=t.memoizedState),(l=ts||gi(t,r,l,n,h,c,o))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=o,n=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,ns(e,t),d=pi(r,o=t.memoizedProps),s.props=d,u=t.pendingProps,h=s.context,c=r.contextType,l=Dn,"object"===typeof c&&null!==c&&(l=Ca(c)),(c="function"===typeof(i=r.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==u||h!==l)&&fi(t,s,n,l),ts=!1,h=t.memoizedState,s.state=h,ds(t,n,s,a),cs();var m=t.memoizedState;o!==u||h!==m||ts||null!==e&&null!==e.dependencies&&Na(e.dependencies)?("function"===typeof i&&(hi(t,r,i,n),m=t.memoizedState),(d=ts||gi(t,r,d,n,h,m,l)||null!==e&&null!==e.dependencies&&Na(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,m,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,m,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),s.props=n,s.state=m,s.context=l,n=d):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,Di(e,t),n=0!==(128&t.flags),s||n?(s=t.stateNode,r=n&&"function"!==typeof r.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&n?(t.child=ri(t,e.child,null,a),t.child=ri(t,null,r,a)):Ai(e,t,r,a),t.memoizedState=s.state,e=t.child):e=Yi(e,t,a),e}function Ii(e,t,r,n){return ma(),t.flags|=256,Ai(e,t,r,n),t.child}var Bi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zi(e){return{baseLanes:e,cachePool:Va()}}function Wi(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=pc),e}function Ui(e,t,r){var n,a=t.pendingProps,s=!1,i=0!==(128&t.flags);if((n=i)||(n=(null===e||null!==e.memoizedState)&&0!==(2&di.current)),n&&(s=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(sa){if(s?oi(t):li(),sa){var l,c=aa;if(l=c){e:{for(l=c,c=ia;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=xu(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xn?{id:Jn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},(l=Pn(18,null,null,0)).stateNode=c,l.return=t,t.child=l,na=t,aa=null,l=!0):l=!1}l||ca(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return pu(c)?t.lanes=32:t.lanes=536870912,null;ci(t)}return c=a.children,a=a.fallback,s?(li(),c=Vi({mode:"hidden",children:c},s=t.mode),a=Wn(a,s,r,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(s=t.child).memoizedState=zi(r),s.childLanes=Wi(e,n,r),t.memoizedState=Bi,a):(oi(t),Hi(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(i)256&t.flags?(oi(t),t.flags&=-257,t=Gi(e,t,r)):null!==t.memoizedState?(li(),t.child=e.child,t.flags|=128,t=null):(li(),s=a.fallback,c=t.mode,a=Vi({mode:"visible",children:a.children},c),(s=Wn(s,c,r,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,ri(t,e.child,null,r),(a=t.child).memoizedState=zi(r),a.childLanes=Wi(e,n,r),t.memoizedState=Bi,t=s);else if(oi(t),pu(c)){if(n=c.nextSibling&&c.nextSibling.dataset)var d=n.dgst;n=d,(a=Error(o(419))).stack="",a.digest=n,fa({value:a,source:null,stack:null}),t=Gi(e,t,r)}else if(Ei||ja(e,t,r,!1),n=0!==(r&e.childLanes),Ei||n){if(null!==(n=nc)&&(0!==(a=0!==((a=0!==(42&(a=r&-r))?1:Ae(a))&(n.suspendedLanes|r))?0:a)&&a!==l.retryLane))throw l.retryLane=a,Ln(e,a),Pc(n,e,a),Ci;"$?"===c.data||$c(),t=Gi(e,t,r)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,aa=xu(c.nextSibling),na=t,sa=!0,oa=null,ia=!1,null!==e&&(Kn[Yn++]=Jn,Kn[Yn++]=Qn,Kn[Yn++]=Xn,Jn=e.id,Qn=e.overflow,Xn=t),(t=Hi(t,a.children)).flags|=4096);return t}return s?(li(),s=a.fallback,c=t.mode,d=(l=e.child).sibling,(a=In(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==d?s=In(d,s):(s=Wn(s,c,r,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,null===(c=e.child.memoizedState)?c=zi(r):(null!==(l=c.cachePool)?(d=Ma._currentValue,l=l.parent!==d?{parent:d,pool:d}:l):l=Va(),c={baseLanes:c.baseLanes|r,cachePool:l}),s.memoizedState=c,s.childLanes=Wi(e,n,r),t.memoizedState=Bi,a):(oi(t),e=(r=e.child).sibling,(r=In(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function Hi(e,t){return(t=Vi({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vi(e,t){return(e=Pn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gi(e,t,r){return ri(t,e.child,null,r),(e=Hi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qi(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ka(e.return,t,r)}function $i(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function Ki(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(Ai(e,t,n.children,r),0!==(2&(n=di.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qi(e,r,t);else if(19===e.tag)qi(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(W(di,n),a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ui(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),$i(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ui(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}$i(t,!0,r,null,s);break;case"together":$i(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yi(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(ja(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=In(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=In(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Xi(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Na(e))}function Ji(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ei=!0;else{if(!Xi(e,r)&&0===(128&t.flags))return Ei=!1,function(e,t,r){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),ya(0,Ma,e.memoizedState.cache),ma();break;case 27:case 5:K(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:ya(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(oi(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Ui(e,t,r):(oi(t),null!==(e=Yi(e,t,r))?e.sibling:null);oi(t);break;case 19:var a=0!==(128&e.flags);if((n=0!==(r&t.childLanes))||(ja(e,t,r,!1),n=0!==(r&t.childLanes)),a){if(n)return Ki(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),W(di,di.current),n)break;return null;case 22:case 23:return t.lanes=0,Mi(e,t,r);case 24:ya(0,Ma,e.memoizedState.cache)}return Yi(e,t,r)}(e,t,r);Ei=0!==(131072&e.flags)}else Ei=!1,sa&&0!==(1048576&t.flags)&&ea(t,$n,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((a=n.$$typeof)===w){t.tag=11,t=_i(null,t,n,e,r);break e}if(a===S){t.tag=14,t=Ti(null,t,n,e,r);break e}}throw t=M(n)||n,Error(o(306,t,""))}Fn(n)?(e=pi(n,e),t.tag=1,t=Fi(null,t,n,e,r)):(t.tag=0,t=Ri(null,t,n,e,r))}return t;case 0:return Ri(e,t,t.type,t.pendingProps,r);case 1:return Fi(e,t,n=t.type,a=pi(n,t.pendingProps),r);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));n=t.pendingProps;var s=t.memoizedState;a=s.element,ns(e,t),ds(t,n,null,r);var i=t.memoizedState;if(n=i.cache,ya(0,Ma,n),n!==s.cache&&wa(t,[Ma],r,!0),cs(),n=i.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ii(e,t,n,r);break e}if(n!==a){fa(a=Nn(Error(o(424)),t)),t=Ii(e,t,n,r);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=xu(e.firstChild),na=t,sa=!0,oa=null,ia=!0,r=ni(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ma(),n===a){t=Yi(e,t,r);break e}Ai(e,t,n,r)}t=t.child}return t;case 26:return Di(e,t),null===e?(r=Au(t.type,null,t.pendingProps,null))?t.memoizedState=r:sa||(r=t.type,e=t.pendingProps,(n=nu(V.current).createElement(r))[Me]=t,n[Oe]=e,eu(n,r,e),Ge(n),t.stateNode=n):t.memoizedState=Au(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&sa&&(n=t.stateNode=vu(t.type,t.pendingProps,V.current),na=t,ia=!0,a=aa,mu(t.type)?(bu=a,aa=xu(n.firstChild)):aa=a),Ai(e,t,t.pendingProps.children,r),Di(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&sa&&((a=n=aa)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var a=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===s)return e}if(null===(e=xu(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,ia))?(t.stateNode=n,na=t,aa=xu(n.firstChild),ia=!1,a=!0):a=!1),a||ca(t)),K(t),a=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,n=s.children,ou(a,s)?n=null:null!==i&&ou(a,i)&&(t.flags|=32),null!==t.memoizedState&&(a=Ls(e,t,Ds,null,null,r),Ku._currentValue=a),Di(e,t),Ai(e,t,n,r),t.child;case 6:return null===e&&sa&&((e=r=aa)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=xu(e.nextSibling)))return null}return e}(r,t.pendingProps,ia))?(t.stateNode=r,na=t,aa=null,e=!0):e=!1),e||ca(t)),null;case 13:return Ui(e,t,r);case 4:return q(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ri(t,null,n,r):Ai(e,t,n,r),t.child;case 11:return _i(e,t,t.type,t.pendingProps,r);case 7:return Ai(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ai(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,ya(0,t.type,n.value),Ai(e,t,n.children,r),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,Sa(t),n=n(a=Ca(a)),t.flags|=1,Ai(e,t,n,r),t.child;case 14:return Ti(e,t,t.type,t.pendingProps,r);case 15:return Li(e,t,t.type,t.pendingProps,r);case 19:return Ki(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?((r=Vi(n,r)).ref=t.ref,t.child=r,r.return=t,t=r):((r=In(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Mi(e,t,r);case 24:return Sa(t),n=Ca(Ma),null===e?(null===(a=Ua())&&(a=nc,s=Oa(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=r),a=s),t.memoizedState={parent:n,cache:a},rs(t),ya(0,Ma,a)):(0!==(e.lanes&r)&&(ns(e,t),ds(t,null,null,r),cs()),a=e.memoizedState,s=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ya(0,Ma,n)):(n=s.cache,ya(0,Ma,n),n!==a.cache&&wa(t,[Ma],r,!0))),Ai(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Qi(e){e.flags|=4}function Zi(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Wu(t)){if(null!==(t=ai.current)&&((4194048&sc)===sc?null!==si:(62914560&sc)!==sc&&0===(536870912&sc)||t!==si))throw Qa=Ka,qa;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?je():536870912,e.lanes|=t,xc|=t)}function tl(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=65011712&a.subtreeFlags,n|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function nl(e,t,r){var n=t.pendingProps;switch(ra(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),va(Ma),$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?Qi(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ga())),rl(t),null;case 26:return r=t.memoizedState,null===e?(Qi(t),null!==r?(rl(t),Zi(t,r)):(rl(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Qi(t),rl(t),Zi(t,r)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==n&&Qi(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),r=V.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Qi(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return rl(t),null}e=U.current,ha(t)?da(t):(e=vu(a,n,r),t.stateNode=e,Qi(t))}return rl(t),null;case 5:if(Y(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Qi(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return rl(t),null}if(e=U.current,ha(t))da(t);else{switch(a=nu(V.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?a.createElement(r,{is:n.is}):a.createElement(r)}}e[Me]=t,e[Oe]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(eu(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Qi(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Qi(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(e=V.current,ha(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(a=na))switch(a.tag){case 27:case 5:n=a.memoizedProps}e[Me]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Xd(e.nodeValue,r)))||ca(t)}else(e=nu(e).createTextNode(n))[Me]=t,t.stateNode=e}return rl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ha(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[Me]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),a=!1}else a=ga(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(ci(t),t):(ci(t),null)}if(ci(t),0!==(128&t.flags))return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){a=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(a=n.alternate.memoizedState.cachePool.pool);var s=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(s=n.memoizedState.cachePool.pool),s!==a&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),el(t,t.updateQueue),rl(t),null;case 4:return $(),null===e&&zd(t.stateNode.containerInfo),rl(t),null;case 10:return va(t.type),rl(t),null;case 19:if(z(di),null===(a=t.memoizedState))return rl(t),null;if(n=0!==(128&t.flags),null===(s=a.rendering))if(n)tl(a,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ui(e))){for(t.flags|=128,tl(a,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Bn(r,e),r=r.sibling;return W(di,1&di.current|2),t.child}e=e.sibling}null!==a.tail&&te()>wc&&(t.flags|=128,n=!0,tl(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ui(s))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!sa)return rl(t),null}else 2*te()-a.renderingStartTime>wc&&536870912!==r&&(t.flags|=128,n=!0,tl(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=a.last)?e.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=di.current,W(di,n?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return ci(t),xs(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&r)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(r=t.updateQueue)&&el(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&z(Wa),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),va(Ma),rl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function al(e,t){switch(ra(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return va(Ma),$(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ci(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(di),null;case 4:return $(),null;case 10:return va(t.type),null;case 22:case 23:return ci(t),xs(),null!==e&&z(Wa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return va(Ma),null;default:return null}}function sl(e,t){switch(ra(t),t.tag){case 3:va(Ma),$();break;case 26:case 27:case 5:Y(t);break;case 4:$();break;case 13:ci(t);break;case 19:z(di);break;case 10:va(t.type);break;case 22:case 23:ci(t),xs(),null!==e&&z(Wa);break;case 24:va(Ma)}}function ol(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var a=n.next;r=a;do{if((r.tag&e)===e){n=void 0;var s=r.create,o=r.inst;n=s(),o.destroy=n}r=r.next}while(r!==a)}}catch(i){dd(t,t.return,i)}}function il(e,t,r){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var s=a.next;n=s;do{if((n.tag&e)===e){var o=n.inst,i=o.destroy;if(void 0!==i){o.destroy=void 0,a=t;var l=r,c=i;try{c()}catch(d){dd(a,l,d)}}}n=n.next}while(n!==s)}}catch(d){dd(t,t.return,d)}}function ll(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{hs(t,r)}catch(n){dd(e,e.return,n)}}}function cl(e,t,r){r.props=pi(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){dd(e,t,n)}}function dl(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof r?e.refCleanup=r(n):r.current=n}}catch(a){dd(e,t,a)}}function ul(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"===typeof n)try{n()}catch(a){dd(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof r)try{r(null)}catch(s){dd(e,t,s)}else r.current=null}function hl(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(a){dd(e,e.return,a)}}function ml(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,i=null,l=null,c=null,d=null,u=null;for(g in r){var h=r[g];if(r.hasOwnProperty(g)&&null!=h)switch(g){case"checked":case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(g)||Qd(e,t,g,null,n,h)}}for(var m in n){var g=n[m];if(h=r[m],n.hasOwnProperty(m)&&(null!=g||null!=h))switch(m){case"type":s=g;break;case"name":a=g;break;case"checked":d=g;break;case"defaultChecked":u=g;break;case"value":i=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(null!=g)throw Error(o(137,t));break;default:g!==h&&Qd(e,t,m,g,n,h)}}return void pt(e,i,l,c,d,u,s,a);case"select":for(s in g=i=l=m=null,r)if(c=r[s],r.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":g=c;default:n.hasOwnProperty(s)||Qd(e,t,s,null,n,c)}for(a in n)if(s=n[a],c=r[a],n.hasOwnProperty(a)&&(null!=s||null!=c))switch(a){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":i=s;default:s!==c&&Qd(e,t,a,s,n,c)}return t=l,r=i,n=g,void(null!=m?yt(e,!!r,m,!1):!!n!==!!r&&(null!=t?yt(e,!!r,t,!0):yt(e,!!r,r?[]:"",!1)));case"textarea":for(l in g=m=null,r)if(a=r[l],r.hasOwnProperty(l)&&null!=a&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Qd(e,t,l,null,n,a)}for(i in n)if(a=n[i],s=r[i],n.hasOwnProperty(i)&&(null!=a||null!=s))switch(i){case"value":m=a;break;case"defaultValue":g=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==s&&Qd(e,t,i,a,n,s)}return void vt(e,m,g);case"option":for(var f in r)if(m=r[f],r.hasOwnProperty(f)&&null!=m&&!n.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Qd(e,t,f,null,n,m);for(c in n)if(m=n[c],g=r[c],n.hasOwnProperty(c)&&m!==g&&(null!=m||null!=g))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else Qd(e,t,c,m,n,g);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in r)m=r[p],r.hasOwnProperty(p)&&null!=m&&!n.hasOwnProperty(p)&&Qd(e,t,p,null,n,m);for(d in n)if(m=n[d],g=r[d],n.hasOwnProperty(d)&&m!==g&&(null!=m||null!=g))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(o(137,t));break;default:Qd(e,t,d,m,n,g)}return;default:if(Ct(t)){for(var x in r)m=r[x],r.hasOwnProperty(x)&&void 0!==m&&!n.hasOwnProperty(x)&&Zd(e,t,x,void 0,n,m);for(u in n)m=n[u],g=r[u],!n.hasOwnProperty(u)||m===g||void 0===m&&void 0===g||Zd(e,t,u,m,n,g);return}}for(var b in r)m=r[b],r.hasOwnProperty(b)&&null!=m&&!n.hasOwnProperty(b)&&Qd(e,t,b,null,n,m);for(h in n)m=n[h],g=r[h],!n.hasOwnProperty(h)||m===g||null==m&&null==g||Qd(e,t,h,m,n,g)}(n,e.type,r,t),n[Oe]=t}catch(a){dd(e,e.return,a)}}function gl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&mu(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&mu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function pl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Jd));else if(4!==n&&(27===n&&mu(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(pl(e,t,r),e=e.sibling;null!==e;)pl(e,t,r),e=e.sibling}function xl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&mu(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(xl(e,t,r),e=e.sibling;null!==e;)xl(e,t,r),e=e.sibling}function bl(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);eu(t,n,r),t[Me]=e,t[Oe]=r}catch(s){dd(e,e.return,s)}}var yl=!1,vl=!1,kl=!1,wl="function"===typeof WeakSet?WeakSet:Set,jl=null;function Nl(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Fl(e,r),4&n&&ol(5,r);break;case 1:if(Fl(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(o){dd(r,r.return,o)}else{var a=pi(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){dd(r,r.return,i)}}64&n&&ll(r),512&n&&dl(r,r.return);break;case 3:if(Fl(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{hs(e,t)}catch(o){dd(r,r.return,o)}}break;case 27:null===t&&4&n&&bl(r);case 26:case 5:Fl(e,r),null===t&&4&n&&hl(r),512&n&&dl(r,r.return);break;case 12:Fl(e,r);break;case 13:Fl(e,r),4&n&&Tl(e,r),64&n&&(null!==(e=r.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=gd.bind(null,r))));break;case 22:if(!(n=null!==r.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||vl,a=yl;var s=vl;yl=n,(vl=t)&&!s?Bl(e,r,0!==(8772&r.subtreeFlags)):Fl(e,r),yl=a,vl=s}break;case 30:break;default:Fl(e,r)}}function Sl(e){var t=e.alternate;null!==t&&(e.alternate=null,Sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,El=!1;function Al(e,t,r){for(r=r.child;null!==r;)_l(e,t,r),r=r.sibling}function _l(e,t,r){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,r)}catch(s){}switch(r.tag){case 26:vl||ul(r,t),Al(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:vl||ul(r,t);var n=Cl,a=El;mu(r.type)&&(Cl=r.stateNode,El=!1),Al(e,t,r),ku(r.stateNode),Cl=n,El=a;break;case 5:vl||ul(r,t);case 6:if(n=Cl,a=El,Cl=null,Al(e,t,r),El=a,null!==(Cl=n))if(El)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(r.stateNode)}catch(o){dd(r,t,o)}else try{Cl.removeChild(r.stateNode)}catch(o){dd(r,t,o)}break;case 18:null!==Cl&&(El?(gu(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Eh(e)):gu(Cl,r.stateNode));break;case 4:n=Cl,a=El,Cl=r.stateNode.containerInfo,El=!0,Al(e,t,r),Cl=n,El=a;break;case 0:case 11:case 14:case 15:vl||il(2,r,t),vl||il(4,r,t),Al(e,t,r);break;case 1:vl||(ul(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount&&cl(r,t,n)),Al(e,t,r);break;case 21:Al(e,t,r);break;case 22:vl=(n=vl)||null!==r.memoizedState,Al(e,t,r),vl=n;break;default:Al(e,t,r)}}function Tl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Eh(e)}catch(r){dd(t,t.return,r)}}function Ll(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var n=fd.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function Ml(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n],s=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 27:if(mu(l.type)){Cl=l.stateNode,El=!1;break e}break;case 5:Cl=l.stateNode,El=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));_l(s,i,a),Cl=null,El=!1,null!==(s=a.alternate)&&(s.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Dl(t,e),t=t.sibling}var Ol=null;function Dl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ml(t,e),Rl(e),4&n&&(il(3,e,e.return),ol(3,e),il(5,e,e.return));break;case 1:Ml(t,e),Rl(e),512&n&&(vl||null===r||ul(r,r.return)),64&n&&yl&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n))));break;case 26:var a=Ol;if(Ml(t,e),Rl(e),512&n&&(vl||null===r||ul(r,r.return)),4&n){var s=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":(!(s=a.getElementsByTagName("title")[0])||s[Be]||s[Me]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=a.createElement(n),a.head.insertBefore(s,a.querySelector("head > title"))),eu(s,n,r),s[Me]=e,Ge(s),n=s;break e;case"link":var i=Bu("link","href",a).get(n+(r.href||""));if(i)for(var l=0;l<i.length;l++)if((s=i[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&s.getAttribute("rel")===(null==r.rel?null:r.rel)&&s.getAttribute("title")===(null==r.title?null:r.title)&&s.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){i.splice(l,1);break t}eu(s=a.createElement(n),n,r),a.head.appendChild(s);break;case"meta":if(i=Bu("meta","content",a).get(n+(r.content||"")))for(l=0;l<i.length;l++)if((s=i[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&s.getAttribute("name")===(null==r.name?null:r.name)&&s.getAttribute("property")===(null==r.property?null:r.property)&&s.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&s.getAttribute("charset")===(null==r.charSet?null:r.charSet)){i.splice(l,1);break t}eu(s=a.createElement(n),n,r),a.head.appendChild(s);break;default:throw Error(o(468,n))}s[Me]=e,Ge(s),n=s}e.stateNode=n}else zu(a,e.type,e.stateNode);else e.stateNode=Du(a,n,e.memoizedProps);else s!==n?(null===s?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):s.count--,null===n?zu(a,e.type,e.stateNode):Du(a,n,e.memoizedProps)):null===n&&null!==e.stateNode&&ml(e,e.memoizedProps,r.memoizedProps)}break;case 27:Ml(t,e),Rl(e),512&n&&(vl||null===r||ul(r,r.return)),null!==r&&4&n&&ml(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Ml(t,e),Rl(e),512&n&&(vl||null===r||ul(r,r.return)),32&e.flags){a=e.stateNode;try{wt(a,"")}catch(g){dd(e,e.return,g)}}4&n&&null!=e.stateNode&&ml(e,a=e.memoizedProps,null!==r?r.memoizedProps:a),1024&n&&(kl=!0);break;case 6:if(Ml(t,e),Rl(e),4&n){if(null===e.stateNode)throw Error(o(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(g){dd(e,e.return,g)}}break;case 3:if(Iu=null,a=Ol,Ol=Nu(t.containerInfo),Ml(t,e),Ol=a,Rl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Eh(t.containerInfo)}catch(g){dd(e,e.return,g)}kl&&(kl=!1,Pl(e));break;case 4:n=Ol,Ol=Nu(e.stateNode.containerInfo),Ml(t,e),Rl(e),Ol=n;break;case 12:default:Ml(t,e),Rl(e);break;case 13:Ml(t,e),Rl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==r&&null!==r.memoizedState)&&(kc=te()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Ll(e,n)));break;case 22:a=null!==e.memoizedState;var c=null!==r&&null!==r.memoizedState,d=yl,u=vl;if(yl=d||a,vl=u||c,Ml(t,e),vl=u,yl=d,Rl(e),8192&n)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||c||yl||vl||Il(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){c=r=t;try{if(s=c.stateNode,a)"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(g){dd(c,c.return,g)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(g){dd(c,c.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(r=n.retryQueue)&&(n.retryQueue=null,Ll(e,r))));break;case 19:Ml(t,e),Rl(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Ll(e,n)));case 30:case 21:}}function Rl(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(gl(n)){r=n;break}n=n.return}if(null==r)throw Error(o(160));switch(r.tag){case 27:var a=r.stateNode;xl(e,fl(e),a);break;case 5:var s=r.stateNode;32&r.flags&&(wt(s,""),r.flags&=-33),xl(e,fl(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;pl(e,fl(e),i);break;default:throw Error(o(161))}}catch(l){dd(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Pl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Pl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Nl(e,t.alternate,t),t=t.sibling}function Il(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:il(4,t,t.return),Il(t);break;case 1:ul(t,t.return);var r=t.stateNode;"function"===typeof r.componentWillUnmount&&cl(t,t.return,r),Il(t);break;case 27:ku(t.stateNode);case 26:case 5:ul(t,t.return),Il(t);break;case 22:null===t.memoizedState&&Il(t);break;default:Il(t)}e=e.sibling}}function Bl(e,t,r){for(r=r&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,a=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Bl(a,s,r),ol(4,s);break;case 1:if(Bl(a,s,r),"function"===typeof(a=(n=s).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){dd(n,n.return,c)}if(null!==(a=(n=s).updateQueue)){var i=n.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)us(l[a],i)}catch(c){dd(n,n.return,c)}}r&&64&o&&ll(s),dl(s,s.return);break;case 27:bl(s);case 26:case 5:Bl(a,s,r),r&&null===n&&4&o&&hl(s),dl(s,s.return);break;case 12:Bl(a,s,r);break;case 13:Bl(a,s,r),r&&4&o&&Tl(a,s);break;case 22:null===s.memoizedState&&Bl(a,s,r),dl(s,s.return);break;case 30:break;default:Bl(a,s,r)}t=t.sibling}}function zl(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&Da(r))}function Wl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Da(e))}function Ul(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,r,n),t=t.sibling}function Hl(e,t,r,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Ul(e,t,r,n),2048&a&&ol(9,t);break;case 1:case 13:default:Ul(e,t,r,n);break;case 3:Ul(e,t,r,n),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Da(e)));break;case 12:if(2048&a){Ul(e,t,r,n),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,i=s.onPostCommit;"function"===typeof i&&i(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){dd(t,t.return,l)}}else Ul(e,t,r,n);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?Ul(e,t,r,n):Gl(e,t):2&s._visibility?Ul(e,t,r,n):(s._visibility|=2,Vl(e,t,r,n,0!==(10256&t.subtreeFlags))),2048&a&&zl(o,t);break;case 24:Ul(e,t,r,n),2048&a&&Wl(t.alternate,t)}}function Vl(e,t,r,n,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,i=r,l=n,c=o.flags;switch(o.tag){case 0:case 11:case 15:Vl(s,o,i,l,a),ol(8,o);break;case 23:break;case 22:var d=o.stateNode;null!==o.memoizedState?2&d._visibility?Vl(s,o,i,l,a):Gl(s,o):(d._visibility|=2,Vl(s,o,i,l,a)),a&&2048&c&&zl(o.alternate,o);break;case 24:Vl(s,o,i,l,a),a&&2048&c&&Wl(o.alternate,o);break;default:Vl(s,o,i,l,a)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,a=n.flags;switch(n.tag){case 22:Gl(r,n),2048&a&&zl(n.alternate,n);break;case 24:Gl(r,n),2048&a&&Wl(n.alternate,n);break;default:Gl(r,n)}t=t.sibling}}var ql=8192;function $l(e){if(e.subtreeFlags&ql)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:$l(e),e.flags&ql&&null!==e.memoizedState&&function(e,t,r){if(null===Uu)throw Error(o(475));var n=Uu;if("stylesheet"===t.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=_u(r.href),s=e.querySelector(Tu(a));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=Vu.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=s,void Ge(s);s=e.ownerDocument||e,r=Lu(r),(a=wu.get(a))&&Pu(r,a),Ge(s=s.createElement("link"));var i=s;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),eu(s,"link",r),t.instance=s}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=Vu.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ol,e.memoizedState,e.memoizedProps);break;case 5:default:$l(e);break;case 3:case 4:var t=Ol;Ol=Nu(e.stateNode.containerInfo),$l(e),Ol=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ql,ql=16777216,$l(e),ql=t):$l(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];jl=n,Zl(n,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&il(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ql(e)):Xl(e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];jl=n,Zl(n,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:il(8,t,t.return),Ql(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,Ql(t));break;default:Ql(t)}e=e.sibling}}function Zl(e,t){for(;null!==jl;){var r=jl;switch(r.tag){case 0:case 11:case 15:il(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Da(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,jl=n;else e:for(r=e;null!==jl;){var a=(n=jl).sibling,s=n.return;if(Sl(n),n===r){jl=null;break e}if(null!==a){a.return=s,jl=a;break e}jl=s}}}var ec={getCacheForType:function(e){var t=Ca(Ma),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},tc="function"===typeof WeakMap?WeakMap:Map,rc=0,nc=null,ac=null,sc=0,oc=0,ic=null,lc=!1,cc=!1,dc=!1,uc=0,hc=0,mc=0,gc=0,fc=0,pc=0,xc=0,bc=null,yc=null,vc=!1,kc=0,wc=1/0,jc=null,Nc=null,Sc=0,Cc=null,Ec=null,Ac=0,_c=0,Tc=null,Lc=null,Mc=0,Oc=null;function Dc(){if(0!==(2&rc)&&0!==sc)return sc&-sc;if(null!==D.T){return 0!==Fa?Fa:_d()}return Te()}function Rc(){0===pc&&(pc=0===(536870912&sc)||sa?we():536870912);var e=ai.current;return null!==e&&(e.flags|=32),pc}function Pc(e,t,r){(e!==nc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),zc(e,sc,pc,!1)),Se(e,r),0!==(2&rc)&&e===nc||(e===nc&&(0===(2&rc)&&(gc|=r),4===hc&&zc(e,sc,pc,!1)),wd(e))}function Fc(e,t,r){if(0!==(6&rc))throw Error(o(327));for(var n=!r&&0===(124&t)&&0===(t&e.expiredLanes)||ve(e,t),a=n?function(e,t){var r=rc;rc|=2;var n=Gc(),a=qc();nc!==e||sc!==t?(jc=null,wc=te()+500,Hc(e,t)):cc=ve(e,t);e:for(;;)try{if(0!==oc&&null!==ac){t=ac;var s=ic;t:switch(oc){case 1:oc=0,ic=null,Zc(e,t,s,1);break;case 2:case 9:if(Ya(s)){oc=0,ic=null,Qc(t);break}t=function(){2!==oc&&9!==oc||nc!==e||(oc=7),wd(e)},s.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Ya(s)?(oc=0,ic=null,Qc(t)):(oc=0,ic=null,Zc(e,t,s,7));break;case 5:var i=null;switch(ac.tag){case 26:i=ac.memoizedState;case 5:case 27:var l=ac;if(!i||Wu(i)){oc=0,ic=null;var c=l.sibling;if(null!==c)ac=c;else{var d=l.return;null!==d?(ac=d,ed(d)):ac=null}break t}}oc=0,ic=null,Zc(e,t,s,5);break;case 6:oc=0,ic=null,Zc(e,t,s,6);break;case 8:Uc(),hc=6;break e;default:throw Error(o(462))}}Xc();break}catch(u){Vc(e,u)}return ba=xa=null,D.H=n,D.A=a,rc=r,null!==ac?0:(nc=null,sc=0,An(),hc)}(e,t):Kc(e,t,!0),s=n;;){if(0===a){cc&&!n&&zc(e,t,0,!1);break}if(r=e.current.alternate,!s||Bc(r)){if(2===a){if(s=t,e.errorRecoveryDisabledLanes&s)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var l=e;a=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,i).flags|=256),2!==(i=Kc(l,i,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=s,gc|=s,a=4;break e}s=yc,yc=a,null!==s&&(null===yc?yc=s:yc.push.apply(yc,s))}a=i}if(s=!1,2!==a)continue}}if(1===a){Hc(e,0),zc(e,t,0,!0);break}e:{switch(n=e,s=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:zc(n,t,pc,!lc);break e;case 2:yc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(a=kc+300-te())){if(zc(n,t,pc,!lc),0!==ye(n,0,!0))break e;n.timeoutHandle=lu(Ic.bind(null,n,r,yc,jc,vc,t,pc,gc,xc,lc,s,2,-0,0),a)}else Ic(n,r,yc,jc,vc,t,pc,gc,xc,lc,s,0,-0,0)}break}a=Kc(e,t,!1),s=!1}wd(e)}function Ic(e,t,r,n,a,s,i,l,c,d,u,h,m,g){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Uu={stylesheets:null,count:0,unsuspend:Hu},Kl(t),null!==(h=function(){if(null===Uu)throw Error(o(475));var e=Uu;return e.stylesheets&&0===e.count&&qu(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&qu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=h(rd.bind(null,e,t,s,r,n,a,i,l,c,u,1,m,g)),void zc(e,s,i,!d);rd(e,t,s,r,n,a,i,l,c)}function Bc(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&(null!==(r=t.updateQueue)&&null!==(r=r.stores)))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Kr(s(),a))return!1}catch(o){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,r,n){t&=~fc,t&=~gc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var s=31-me(a),o=1<<s;n[s]=-1,a&=~o}0!==r&&Ce(e,r,t)}function Wc(){return 0!==(6&rc)||(jd(0,!1),!1)}function Uc(){if(null!==ac){if(0===oc)var e=ac.return;else ba=xa=null,Fs(e=ac),Yo=null,Xo=0,e=ac;for(;null!==e;)sl(e.alternate,e),e=e.return;ac=null}}function Hc(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,cu(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),Uc(),nc=e,ac=r=In(e.current,null),sc=t,oc=0,ic=null,lc=!1,cc=ve(e,t),dc=!1,xc=pc=fc=gc=mc=hc=0,yc=bc=null,vc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var a=31-me(n),s=1<<a;t|=e[a],n&=~s}return uc=t,An(),r}function Vc(e,t){ys=null,D.H=Go,t===Ga||t===$a?(t=Za(),oc=3):t===qa?(t=Za(),oc=4):oc=t===Ci?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ic=t,null===ac&&(hc=1,ki(e,Nn(t,e.current)))}function Gc(){var e=D.H;return D.H=Go,null===e?Go:e}function qc(){var e=D.A;return D.A=ec,e}function $c(){hc=4,lc||(4194048&sc)!==sc&&null!==ai.current||(cc=!0),0===(134217727&mc)&&0===(134217727&gc)||null===nc||zc(nc,sc,pc,!1)}function Kc(e,t,r){var n=rc;rc|=2;var a=Gc(),s=qc();nc===e&&sc===t||(jc=null,Hc(e,t)),t=!1;var o=hc;e:for(;;)try{if(0!==oc&&null!==ac){var i=ac,l=ic;switch(oc){case 8:Uc(),o=6;break e;case 3:case 2:case 9:case 6:null===ai.current&&(t=!0);var c=oc;if(oc=0,ic=null,Zc(e,i,l,c),r&&cc){o=0;break e}break;default:c=oc,oc=0,ic=null,Zc(e,i,l,c)}}Yc(),o=hc;break}catch(d){Vc(e,d)}return t&&e.shellSuspendCounter++,ba=xa=null,rc=n,D.H=a,D.A=s,null===ac&&(nc=null,sc=0,An()),o}function Yc(){for(;null!==ac;)Jc(ac)}function Xc(){for(;null!==ac&&!Z();)Jc(ac)}function Jc(e){var t=Ji(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):ac=t}function Qc(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Pi(r,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Pi(r,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Fs(t);default:sl(r,t),t=Ji(r,t=ac=Bn(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):ac=t}function Zc(e,t,r,n){ba=xa=null,Fs(t),Yo=null,Xo=0;var a=t.return;try{if(function(e,t,r,n,a){if(r.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=r.alternate)&&ja(t,r,a,!0),null!==(r=ai.current)){switch(r.tag){case 13:return null===si?$c():null===r.alternate&&0===hc&&(hc=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===Ka?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),ud(e,n,a)),!1;case 22:return r.flags|=65536,n===Ka?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),ud(e,n,a)),!1}throw Error(o(435,r.tag))}return ud(e,n,a),$c(),!1}if(sa)return null!==(t=ai.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==la&&fa(Nn(e=Error(o(422),{cause:n}),r))):(n!==la&&fa(Nn(t=Error(o(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,n=Nn(n,r),is(e,a=ji(e.stateNode,n,a)),4!==hc&&(hc=2)),!1;var s=Error(o(520),{cause:n});if(s=Nn(s,r),null===bc?bc=[s]:bc.push(s),4!==hc&&(hc=2),null===t)return!0;n=Nn(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,is(r,e=ji(r.stateNode,n,e)),!1;case 1:if(t=r.type,s=r.stateNode,0===(128&r.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Nc||!Nc.has(s))))return r.flags|=65536,a&=-a,r.lanes|=a,Si(a=Ni(a),e,r,n),is(r,a),!1}r=r.return}while(null!==r);return!1}(e,a,t,r,sc))return hc=1,ki(e,Nn(r,e.current)),void(ac=null)}catch(s){if(null!==a)throw ac=a,s;return hc=1,ki(e,Nn(r,e.current)),void(ac=null)}32768&t.flags?(sa||1===n?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=ai.current)&&13===n.tag&&(n.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,lc);e=t.return;var r=nl(t.alternate,t,uc);if(null!==r)return void(ac=r);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===hc&&(hc=5)}function td(e,t){do{var r=al(e.alternate,e);if(null!==r)return r.flags&=32767,void(ac=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=r}while(null!==e);hc=6,ac=null}function rd(e,t,r,n,a,s,i,l,c){e.cancelPendingCommit=null;do{id()}while(0!==Sc);if(0!==(6&rc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,r,n,a,s){var o=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var i=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=o&~r;0<r;){var d=31-me(r),u=1<<d;i[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}r&=~u}0!==n&&Ce(e,n,0),0!==s&&0===a&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,r,s|=En,i,l,c),e===nc&&(ac=nc=null,sc=0),Ec=t,Cc=e,Ac=r,_c=s,Tc=a,Lc=n,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,function(e,t){J(e,t)}(se,function(){return ld(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null,a=R.p,R.p=2,i=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,tu=rh,en(e=Zr(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(p){r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var g;h!==r||0!==a&&3!==h.nodeType||(l=i+a),h!==s||0!==n&&3!==h.nodeType||(c=i+n),3===h.nodeType&&(i+=h.nodeValue.length),null!==(g=h.firstChild);)m=h,h=g;for(;;){if(h===e)break t;if(m===r&&++d===a&&(l=i),m===s&&++u===n&&(c=i),null!==(g=h.nextSibling))break;m=(h=m).parentNode}h=g}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ru={focusedElem:e,selectionRange:r},rh=!1,jl=t;null!==jl;)if(e=(t=jl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,jl=e;else for(;null!==jl;){switch(s=(t=jl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,r=t,a=s.memoizedProps,s=s.memoizedState,n=r.stateNode;try{var f=pi(r.type,a,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(f,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(x){dd(r,r.return,x)}}break;case 3:if(0!==(1024&e))if(9===(r=(e=t.stateNode.containerInfo).nodeType))fu(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,jl=e;break}jl=t.return}}(e,t)}finally{rc=i,R.p=a,D.T=n}}Sc=1,nd(),ad(),sd()}}function nd(){if(1===Sc){Sc=0;var e=Cc,t=Ec,r=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null;var n=R.p;R.p=2;var a=rc;rc|=4;try{Dl(t,e);var s=ru,o=Zr(e.containerInfo),i=s.focusedElem,l=s.selectionRange;if(o!==i&&i&&i.ownerDocument&&Qr(i.ownerDocument.documentElement,i)){if(null!==l&&en(i)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(d,i.value.length);else{var u=i.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),g=i.textContent.length,f=Math.min(l.start,g),p=void 0===l.end?f:Math.min(l.end,g);!m.extend&&f>p&&(o=p,p=f,f=o);var x=Jr(i,f),b=Jr(i,p);if(x&&b&&(1!==m.rangeCount||m.anchorNode!==x.node||m.anchorOffset!==x.offset||m.focusNode!==b.node||m.focusOffset!==b.offset)){var y=u.createRange();y.setStart(x.node,x.offset),m.removeAllRanges(),f>p?(m.addRange(y),m.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),m.addRange(y))}}}}for(u=[],m=i;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<u.length;i++){var v=u[i];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}rh=!!tu,ru=tu=null}finally{rc=a,R.p=n,D.T=r}}e.current=t,Sc=2}}function ad(){if(2===Sc){Sc=0;var e=Cc,t=Ec,r=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||r){r=D.T,D.T=null;var n=R.p;R.p=2;var a=rc;rc|=4;try{Nl(e,t.alternate,t)}finally{rc=a,R.p=n,D.T=r}}Sc=3}}function sd(){if(4===Sc||3===Sc){Sc=0,ee();var e=Cc,t=Ec,r=Ac,n=Lc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Sc=5:(Sc=0,Ec=Cc=null,od(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Nc=null),_e(r),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==n){t=D.T,a=R.p,R.p=2,D.T=null;try{for(var s=e.onRecoverableError,o=0;o<n.length;o++){var i=n[o];s(i.value,{componentStack:i.stack})}}finally{D.T=t,R.p=a}}0!==(3&Ac)&&id(),wd(e),a=e.pendingLanes,0!==(4194090&r)&&0!==(42&a)?e===Oc?Mc++:(Mc=0,Oc=e):Mc=0,jd(0,!1)}}function od(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Da(t)))}function id(e){return nd(),ad(),sd(),ld()}function ld(){if(5!==Sc)return!1;var e=Cc,t=_c;_c=0;var r=_e(Ac),n=D.T,a=R.p;try{R.p=32>r?32:r,D.T=null,r=Tc,Tc=null;var s=Cc,i=Ac;if(Sc=0,Ec=Cc=null,Ac=0,0!==(6&rc))throw Error(o(331));var l=rc;if(rc|=4,Jl(s.current),Hl(s,s.current,i,r),rc=l,jd(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,s)}catch(c){}return!0}finally{R.p=a,D.T=n,od(e,t)}}function cd(e,t,r){t=Nn(r,t),null!==(e=ss(e,t=ji(e.stateNode,t,2),2))&&(Se(e,2),wd(e))}function dd(e,t,r){if(3===e.tag)cd(e,e,r);else for(;null!==t;){if(3===t.tag){cd(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Nc||!Nc.has(n))){e=Nn(r,e),null!==(n=ss(t,r=Ni(2),2))&&(Si(r,n,t,e),Se(n,2),wd(n));break}}t=t.return}}function ud(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new tc;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(dc=!0,a.add(r),e=hd.bind(null,e,t,r),t.then(e,e))}function hd(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,nc===e&&(sc&r)===r&&(4===hc||3===hc&&(62914560&sc)===sc&&300>te()-kc?0===(2&rc)&&Hc(e,0):fc|=r,xc===sc&&(xc=0)),wd(e)}function md(e,t){0===t&&(t=je()),null!==(e=Ln(e,t))&&(Se(e,t),wd(e))}function gd(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),md(e,r)}function fd(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==n&&n.delete(t),md(e,r)}var pd=null,xd=null,bd=!1,yd=!1,vd=!1,kd=0;function wd(e){e!==xd&&null===e.next&&(null===xd?pd=xd=e:xd=xd.next=e),yd=!0,bd||(bd=!0,uu(function(){0!==(6&rc)?J(ne,Nd):Sd()}))}function jd(e,t){if(!vd&&yd){vd=!0;do{for(var r=!1,n=pd;null!==n;){if(!t)if(0!==e){var a=n.pendingLanes;if(0===a)var s=0;else{var o=n.suspendedLanes,i=n.pingedLanes;s=(1<<31-me(42|e)+1)-1,s=201326741&(s&=a&~(o&~i))?201326741&s|1:s?2|s:0}0!==s&&(r=!0,Ad(n,s))}else s=sc,0===(3&(s=ye(n,n===nc?s:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||ve(n,s)||(r=!0,Ad(n,s));n=n.next}}while(r);vd=!1}}function Nd(){Sd()}function Sd(){yd=bd=!1;var e=0;0!==kd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==iu&&(iu=e,!0);return iu=null,!1}()&&(e=kd),kd=0);for(var t=te(),r=null,n=pd;null!==n;){var a=n.next,s=Cd(n,t);0===s?(n.next=null,null===r?pd=a:r.next=a,null===a&&(xd=r)):(r=n,(0!==e||0!==(3&s))&&(yd=!0)),n=a}jd(e,!1)}function Cd(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-me(s),i=1<<o,l=a[o];-1===l?0!==(i&r)&&0===(i&n)||(a[o]=ke(i,t)):l<=t&&(e.expiredLanes|=i),s&=~i}if(r=sc,r=ye(e,e===(t=nc)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&Q(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&r)||ve(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&Q(n),_e(r)){case 2:case 8:r=ae;break;case 32:default:r=se;break;case 268435456:r=ie}return n=Ed.bind(null,e),r=J(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&Q(n),e.callbackPriority=2,e.callbackNode=null,2}function Ed(e,t){if(0!==Sc&&5!==Sc)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(id()&&e.callbackNode!==r)return null;var n=sc;return 0===(n=ye(e,e===nc?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,n,t),Cd(e,te()),null!=e.callbackNode&&e.callbackNode===r?Ed.bind(null,e):null)}function Ad(e,t){if(id())return null;Fc(e,t,!0)}function _d(){return 0===kd&&(kd=we()),kd}function Td(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:_t(""+e)}function Ld(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Md=0;Md<kn.length;Md++){var Od=kn[Md];wn(Od.toLowerCase(),"on"+(Od[0].toUpperCase()+Od.slice(1)))}wn(mn,"onAnimationEnd"),wn(gn,"onAnimationIteration"),wn(fn,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(pn,"onTransitionRun"),wn(xn,"onTransitionStart"),wn(bn,"onTransitionCancel"),wn(yn,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dd));function Pd(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==s&&a.isPropagationStopped())break e;s=i,a.currentTarget=c;try{s(a)}catch(d){xi(d)}a.currentTarget=null,s=l}else for(o=0;o<n.length;o++){if(l=(i=n[o]).instance,c=i.currentTarget,i=i.listener,l!==s&&a.isPropagationStopped())break e;s=i,a.currentTarget=c;try{s(a)}catch(d){xi(d)}a.currentTarget=null,s=l}}}}function Fd(e,t){var r=t[Re];void 0===r&&(r=t[Re]=new Set);var n=e+"__bubble";r.has(n)||(Wd(t,e,2,!1),r.add(n))}function Id(e,t,r){var n=0;t&&(n|=4),Wd(r,e,n,t)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function zd(e){if(!e[Bd]){e[Bd]=!0,qe.forEach(function(t){"selectionchange"!==t&&(Rd.has(t)||Id(t,!1,e),Id(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bd]||(t[Bd]=!0,Id("selectionchange",!1,t))}}function Wd(e,t,r,n){switch(ch(t)){case 2:var a=nh;break;case 8:a=ah;break;default:a=sh}r=a.bind(null,t,r,e),a=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Ud(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var i=n.stateNode.containerInfo;if(i===a)break;if(4===o)for(o=n.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==i;){if(null===(o=We(i)))return;if(5===(c=o.tag)||6===c||26===c||27===c){n=s=o;continue e}i=i.parentNode}}n=n.return}Pt(function(){var n=s,a=Lt(r),o=[];e:{var i=vn.get(e);if(void 0!==i){var c=Zt,d=e;switch(e){case"keypress":if(0===Gt(r))break e;case"keydown":case"keyup":c=gr;break;case"focusin":d="focus",c=sr;break;case"focusout":d="blur",c=sr;break;case"beforeblur":case"afterblur":c=sr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ar;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=pr;break;case mn:case gn:case fn:c=or;break;case yn:c=xr;break;case"scroll":case"scrollend":c=tr;break;case"wheel":c=br;break;case"copy":case"cut":case"paste":c=ir;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=fr;break;case"toggle":case"beforetoggle":c=yr}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==i?i+"Capture":null:i;u=[];for(var g,f=n;null!==f;){var p=f;if(g=p.stateNode,5!==(p=p.tag)&&26!==p&&27!==p||null===g||null===m||null!=(p=Ft(f,m))&&u.push(Hd(f,p,g)),h)break;f=f.return}0<u.length&&(i=new c(i,d,null,r,a),o.push({event:i,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||r===Tt||!(d=r.relatedTarget||r.fromElement)||!We(d)&&!d[De])&&(c||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=n,null!==(d=(d=r.relatedTarget||r.toElement)?We(d):null)&&(h=l(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=n),c!==d)){if(u=nr,p="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=fr,p="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?i:He(c),g=null==d?i:He(d),(i=new u(p,f+"leave",c,r,a)).target=h,i.relatedTarget=g,p=null,We(a)===n&&((u=new u(m,f+"enter",d,r,a)).target=g,u.relatedTarget=h,p=u),h=p,c&&d)e:{for(m=d,f=0,g=u=c;g;g=Gd(g))f++;for(g=0,p=m;p;p=Gd(p))g++;for(;0<f-g;)u=Gd(u),f--;for(;0<g-f;)m=Gd(m),g--;for(;f--;){if(u===m||null!==m&&u===m.alternate)break e;u=Gd(u),m=Gd(m)}u=null}else u=null;null!==c&&qd(o,i,c,u,!1),null!==d&&null!==h&&qd(o,h,d,u,!0)}if("select"===(c=(i=n?He(n):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var x=Fr;else if(Lr(i))if(Ir)x=$r;else{x=Gr;var b=Vr}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?n&&Ct(n.elementType)&&(x=Fr):x=qr;switch(x&&(x=x(e,n))?Mr(o,x,r,a):(b&&b(e,i,n),"focusout"===e&&n&&"number"===i.type&&null!=n.memoizedProps.value&&bt(i,"number",i.value)),b=n?He(n):window,e){case"focusin":(Lr(b)||"true"===b.contentEditable)&&(rn=b,nn=n,an=null);break;case"focusout":an=nn=rn=null;break;case"mousedown":sn=!0;break;case"contextmenu":case"mouseup":case"dragend":sn=!1,on(o,r,a);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":on(o,r,a)}var y;if(kr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else _r?Er(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Nr&&"ko"!==r.locale&&(_r||"onCompositionStart"!==v?"onCompositionEnd"===v&&_r&&(y=Vt()):(Ut="value"in(Wt=a)?Wt.value:Wt.textContent,_r=!0)),0<(b=Vd(n,v)).length&&(v=new lr(v,e,null,r,a),o.push({event:v,listeners:b}),y?v.data=y:null!==(y=Ar(r))&&(v.data=y))),(y=jr?function(e,t){switch(e){case"compositionend":return Ar(t);case"keypress":return 32!==t.which?null:(Cr=!0,Sr);case"textInput":return(e=t.data)===Sr&&Cr?null:e;default:return null}}(e,r):function(e,t){if(_r)return"compositionend"===e||!kr&&Er(e,t)?(e=Vt(),Ht=Ut=Wt=null,_r=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(v=Vd(n,"onBeforeInput")).length&&(b=new lr("onBeforeInput","beforeinput",null,r,a),o.push({event:b,listeners:v}),b.data=y)),function(e,t,r,n,a){if("submit"===t&&r&&r.stateNode===a){var s=Td((a[Oe]||null).action),o=n.submitter;o&&null!==(t=(t=o[Oe]||null)?Td(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var i=new Zt("action","action",null,n,a);e.push({event:i,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==kd){var e=o?Ld(a,o):new FormData(a);Lo(r,{pending:!0,data:e,method:a.method,action:s},null,e)}}else"function"===typeof s&&(i.preventDefault(),e=o?Ld(a,o):new FormData(a),Lo(r,{pending:!0,data:e,method:a.method,action:s},s,e))},currentTarget:a}]})}}(o,e,n,r,a)}Pd(o,t)})}function Hd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vd(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===s||(null!=(a=Ft(e,r))&&n.unshift(Hd(e,a,s)),null!=(a=Ft(e,t))&&n.push(Hd(e,a,s))),3===e.tag)return n;e=e.return}return[]}function Gd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qd(e,t,r,n,a){for(var s=t._reactName,o=[];null!==r&&r!==n;){var i=r,l=i.alternate,c=i.stateNode;if(i=i.tag,null!==l&&l===n)break;5!==i&&26!==i&&27!==i||null===c||(l=c,a?null!=(c=Ft(r,s))&&o.unshift(Hd(r,c,l)):a||null!=(c=Ft(r,s))&&o.push(Hd(r,c,l))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var $d=/\r\n?/g,Kd=/\u0000|\uFFFD/g;function Yd(e){return("string"===typeof e?e:""+e).replace($d,"\n").replace(Kd,"")}function Xd(e,t){return t=Yd(t),Yd(e)===t}function Jd(){}function Qd(e,t,r,n,a,s){switch(r){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||wt(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&wt(e,""+n);break;case"className":rt(e,"class",n);break;case"tabIndex":rt(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,r,n);break;case"style":St(e,n,s);break;case"data":if("object"!==t){rt(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=_t(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===r?("input"!==t&&Qd(e,t,"name",a.name,a,null),Qd(e,t,"formEncType",a.formEncType,a,null),Qd(e,t,"formMethod",a.formMethod,a,null),Qd(e,t,"formTarget",a.formTarget,a,null)):(Qd(e,t,"encType",a.encType,a,null),Qd(e,t,"method",a.method,a,null),Qd(e,t,"target",a.target,a,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=_t(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Jd);break;case"onScroll":null!=n&&Fd("scroll",e);break;case"onScrollEnd":null!=n&&Fd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}r=_t(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":Fd("beforetoggle",e),Fd("toggle",e),tt(e,"popover",n);break;case"xlinkActuate":nt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":nt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":nt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":nt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":nt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":nt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":nt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":nt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":nt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":tt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&tt(e,r=Et.get(r)||r,n)}}function Zd(e,t,r,n,a,s){switch(r){case"style":St(e,n,s);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=r}}break;case"children":"string"===typeof n?wt(e,n):("number"===typeof n||"bigint"===typeof n)&&wt(e,""+n);break;case"onScroll":null!=n&&Fd("scroll",e);break;case"onScrollEnd":null!=n&&Fd("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:$e.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"===typeof(s=null!=(s=e[Oe]||null)?s[r]:null)&&e.removeEventListener(t,s,a),"function"!==typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):tt(e,r,n):("function"!==typeof s&&null!==s&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,a)))}}function eu(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fd("error",e),Fd("load",e);var n,a=!1,s=!1;for(n in r)if(r.hasOwnProperty(n)){var i=r[n];if(null!=i)switch(n){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Qd(e,t,n,i,r,null)}}return s&&Qd(e,t,"srcSet",r.srcSet,r,null),void(a&&Qd(e,t,"src",r.src,r,null));case"input":Fd("invalid",e);var l=n=i=s=null,c=null,d=null;for(a in r)if(r.hasOwnProperty(a)){var u=r[a];if(null!=u)switch(a){case"name":s=u;break;case"type":i=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":n=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(o(137,t));break;default:Qd(e,t,a,u,r,null)}}return xt(e,n,l,c,d,i,s,!1),void ut(e);case"select":for(s in Fd("invalid",e),a=i=n=null,r)if(r.hasOwnProperty(s)&&null!=(l=r[s]))switch(s){case"value":n=l;break;case"defaultValue":i=l;break;case"multiple":a=l;default:Qd(e,t,s,l,r,null)}return t=n,r=i,e.multiple=!!a,void(null!=t?yt(e,!!a,t,!1):null!=r&&yt(e,!!a,r,!0));case"textarea":for(i in Fd("invalid",e),n=s=a=null,r)if(r.hasOwnProperty(i)&&null!=(l=r[i]))switch(i){case"value":a=l;break;case"defaultValue":s=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Qd(e,t,i,l,r,null)}return kt(e,a,s,n),void ut(e);case"option":for(c in r)if(r.hasOwnProperty(c)&&null!=(a=r[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else Qd(e,t,c,a,r,null);return;case"dialog":Fd("beforetoggle",e),Fd("toggle",e),Fd("cancel",e),Fd("close",e);break;case"iframe":case"object":Fd("load",e);break;case"video":case"audio":for(a=0;a<Dd.length;a++)Fd(Dd[a],e);break;case"image":Fd("error",e),Fd("load",e);break;case"details":Fd("toggle",e);break;case"embed":case"source":case"link":Fd("error",e),Fd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in r)if(r.hasOwnProperty(d)&&null!=(a=r[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Qd(e,t,d,a,r,null)}return;default:if(Ct(t)){for(u in r)r.hasOwnProperty(u)&&(void 0!==(a=r[u])&&Zd(e,t,u,a,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(null!=(a=r[l])&&Qd(e,t,l,a,r,null))}var tu=null,ru=null;function nu(e){return 9===e.nodeType?e:e.ownerDocument}function au(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function su(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ou(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var iu=null;var lu="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(hu)}:lu;function hu(e){setTimeout(function(){throw e})}function mu(e){return"head"===e}function gu(e,t){var r=t,n=0,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0<n&&8>n){r=n;var o=e.ownerDocument;if(1&r&&ku(o.documentElement),2&r&&ku(o.body),4&r)for(ku(r=o.head),o=r.firstChild;o;){var i=o.nextSibling,l=o.nodeName;o[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||r.removeChild(o),o=i}}if(0===a)return e.removeChild(s),void Eh(t);a--}else"$"===r||"$?"===r||"$!"===r?a++:n=r.charCodeAt(0)-48;else n=0;r=s}while(r);Eh(t)}function fu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":fu(r),ze(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function pu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function xu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bu=null;function yu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function vu(e,t,r){switch(t=nu(r),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function ku(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var wu=new Map,ju=new Set;function Nu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Su=R.d;R.d={f:function(){var e=Su.f(),t=Wc();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Oo(t):Su.r(e)},D:function(e){Su.D(e),Eu("dns-prefetch",e,null)},C:function(e,t){Su.C(e,t),Eu("preconnect",e,t)},L:function(e,t,r){Su.L(e,t,r);var n=Cu;if(n&&e&&t){var a='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&r&&r.imageSrcSet?(a+='[imagesrcset="'+ft(r.imageSrcSet)+'"]',"string"===typeof r.imageSizes&&(a+='[imagesizes="'+ft(r.imageSizes)+'"]')):a+='[href="'+ft(e)+'"]';var s=a;switch(t){case"style":s=_u(e);break;case"script":s=Mu(e)}wu.has(s)||(e=h({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),wu.set(s,e),null!==n.querySelector(a)||"style"===t&&n.querySelector(Tu(s))||"script"===t&&n.querySelector(Ou(s))||(eu(t=n.createElement("link"),"link",e),Ge(t),n.head.appendChild(t)))}},m:function(e,t){Su.m(e,t);var r=Cu;if(r&&e){var n=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+ft(n)+'"][href="'+ft(e)+'"]',s=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Mu(e)}if(!wu.has(s)&&(e=h({rel:"modulepreload",href:e},t),wu.set(s,e),null===r.querySelector(a))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ou(s)))return}eu(n=r.createElement("link"),"link",e),Ge(n),r.head.appendChild(n)}}},X:function(e,t){Su.X(e,t);var r=Cu;if(r&&e){var n=Ve(r).hoistableScripts,a=Mu(e),s=n.get(a);s||((s=r.querySelector(Ou(a)))||(e=h({src:e,async:!0},t),(t=wu.get(a))&&Fu(e,t),Ge(s=r.createElement("script")),eu(s,"link",e),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}},S:function(e,t,r){Su.S(e,t,r);var n=Cu;if(n&&e){var a=Ve(n).hoistableStyles,s=_u(e);t=t||"default";var o=a.get(s);if(!o){var i={loading:0,preload:null};if(o=n.querySelector(Tu(s)))i.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},r),(r=wu.get(s))&&Pu(e,r);var l=o=n.createElement("link");Ge(l),eu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){i.loading|=1}),l.addEventListener("error",function(){i.loading|=2}),i.loading|=4,Ru(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:i},a.set(s,o)}}},M:function(e,t){Su.M(e,t);var r=Cu;if(r&&e){var n=Ve(r).hoistableScripts,a=Mu(e),s=n.get(a);s||((s=r.querySelector(Ou(a)))||(e=h({src:e,async:!0,type:"module"},t),(t=wu.get(a))&&Fu(e,t),Ge(s=r.createElement("script")),eu(s,"link",e),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}};var Cu="undefined"===typeof document?null:document;function Eu(e,t,r){var n=Cu;if(n&&"string"===typeof t&&t){var a=ft(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof r&&(a+='[crossorigin="'+r+'"]'),ju.has(a)||(ju.add(a),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(a)&&(eu(t=n.createElement("link"),"link",e),Ge(t),n.head.appendChild(t)))}}function Au(e,t,r,n){var a,s,i,l,c=(c=V.current)?Nu(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof r.precedence&&"string"===typeof r.href?(t=_u(r.href),(n=(r=Ve(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"===typeof r.href&&"string"===typeof r.precedence){e=_u(r.href);var d=Ve(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Tu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),wu.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},wu.set(e,r),d||(a=c,s=e,i=r,l=u.state,a.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=a.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),eu(s,"link",i),Ge(s),a.head.appendChild(s))))),t&&null===n)throw Error(o(528,""));return u}if(t&&null!==n)throw Error(o(529,""));return null;case"script":return t=r.async,"string"===typeof(r=r.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Mu(r),(n=(r=Ve(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function _u(e){return'href="'+ft(e)+'"'}function Tu(e){return'link[rel="stylesheet"]['+e+"]"}function Lu(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Mu(e){return'[src="'+ft(e)+'"]'}function Ou(e){return"script[async]"+e}function Du(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+ft(r.href)+'"]');if(n)return t.instance=n,Ge(n),n;var a=h({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return Ge(n=(e.ownerDocument||e).createElement("style")),eu(n,"style",a),Ru(n,r.precedence,e),t.instance=n;case"stylesheet":a=_u(r.href);var s=e.querySelector(Tu(a));if(s)return t.state.loading|=4,t.instance=s,Ge(s),s;n=Lu(r),(a=wu.get(a))&&Pu(n,a),Ge(s=(e.ownerDocument||e).createElement("link"));var i=s;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),eu(s,"link",n),t.state.loading|=4,Ru(s,r.precedence,e),t.instance=s;case"script":return s=Mu(r.src),(a=e.querySelector(Ou(s)))?(t.instance=a,Ge(a),a):(n=r,(a=wu.get(s))&&Fu(n=h({},r),a),Ge(a=(e=e.ownerDocument||e).createElement("script")),eu(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Ru(n,r.precedence,e));return t.instance}function Ru(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,s=a,o=0;o<n.length;o++){var i=n[o];if(i.dataset.precedence===t)s=i;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Pu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Iu=null;function Bu(e,t,r){if(null===Iu){var n=new Map,a=Iu=new Map;a.set(r,n)}else(n=(a=Iu).get(r))||(n=new Map,a.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),a=0;a<r.length;a++){var s=r[a];if(!(s[Be]||s[Me]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var i=n.get(o);i?i.push(s):n.set(o,[s])}}return n}function zu(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function Wu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Uu=null;function Hu(){}function Vu(){if(this.count--,0===this.count)if(this.stylesheets)qu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gu=null;function qu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gu=new Map,t.forEach($u,e),Gu=null,Vu.call(e))}function $u(e,t){if(!(4&t.state.loading)){var r=Gu.get(e);if(r)var n=r.get(null);else{r=new Map,Gu.set(e,r);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var o=a[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(r.set(o.dataset.precedence,o),n=o)}n&&r.set(null,n)}o=(a=t.instance).getAttribute("data-precedence"),(s=r.get(o)||n)===n&&r.set(null,a),r.set(o,a),this.count++,n=Vu.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),s?s.parentNode.insertBefore(a,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Ku={$$typeof:k,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function Yu(e,t,r,n,a,s,o,i){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=i,this.incompleteTransitions=new Map}function Xu(e,t,r,n,a,s,o,i,l,c,d,u){return e=new Yu(e,t,r,o,i,l,c,u),t=1,!0===s&&(t|=24),s=Pn(3,null,null,t),e.current=s,s.stateNode=e,(t=Oa()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:r,cache:t},rs(s),e}function Ju(e){return e?e=Dn:Dn}function Qu(e,t,r,n,a,s){a=Ju(a),null===n.context?n.context=a:n.pendingContext=a,(n=as(t)).payload={element:r},null!==(s=void 0===s?null:s)&&(n.callback=s),null!==(r=ss(e,n,t))&&(Pc(r,0,t),os(r,e,t))}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function eh(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function th(e){if(13===e.tag){var t=Ln(e,67108864);null!==t&&Pc(t,0,67108864),eh(e,67108864)}}var rh=!0;function nh(e,t,r,n){var a=D.T;D.T=null;var s=R.p;try{R.p=2,sh(e,t,r,n)}finally{R.p=s,D.T=a}}function ah(e,t,r,n){var a=D.T;D.T=null;var s=R.p;try{R.p=8,sh(e,t,r,n)}finally{R.p=s,D.T=a}}function sh(e,t,r,n){if(rh){var a=oh(n);if(null===a)Ud(e,t,n,ih,r),bh(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return uh=yh(uh,e,t,r,n,a),!0;case"dragenter":return hh=yh(hh,e,t,r,n,a),!0;case"mouseover":return mh=yh(mh,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return gh.set(s,yh(gh.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,fh.set(s,yh(fh.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(bh(e,n),4&t&&-1<xh.indexOf(e)){for(;null!==a;){var s=Ue(a);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=be(s.pendingLanes);if(0!==o){var i=s;for(i.pendingLanes|=2,i.entangledLanes|=2;o;){var l=1<<31-me(o);i.entanglements[1]|=l,o&=~l}wd(s),0===(6&rc)&&(wc=te()+500,jd(0,!1))}}break;case 13:null!==(i=Ln(s,2))&&Pc(i,0,2),Wc(),eh(s,2)}if(null===(s=oh(n))&&Ud(e,t,n,ih,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Ud(e,t,n,null,r)}}function oh(e){return lh(e=Lt(e))}var ih=null;function lh(e){if(ih=null,null!==(e=We(e))){var t=l(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=c(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ih=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case ne:return 2;case ae:return 8;case se:case oe:return 32;case ie:return 268435456;default:return 32}default:return 32}}var dh=!1,uh=null,hh=null,mh=null,gh=new Map,fh=new Map,ph=[],xh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":uh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function yh(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=Ue(t))&&th(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function vh(e){var t=We(e.target);if(null!==t){var r=l(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=c(r)))return e.blockedOn=t,void function(e,t){var r=R.p;try{return R.p=e,t()}finally{R.p=r}}(e.priority,function(){if(13===r.tag){var e=Dc();e=Ae(e);var t=Ln(r,e);null!==t&&Pc(t,0,e),eh(r,e)}})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=oh(e.nativeEvent);if(null!==r)return null!==(t=Ue(r))&&th(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Tt=n,r.target.dispatchEvent(n),Tt=null,t.shift()}return!0}function wh(e,t,r){kh(e)&&r.delete(t)}function jh(){dh=!1,null!==uh&&kh(uh)&&(uh=null),null!==hh&&kh(hh)&&(hh=null),null!==mh&&kh(mh)&&(mh=null),gh.forEach(wh),fh.forEach(wh)}function Nh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jh)))}var Sh=null;function Ch(e){Sh!==e&&(Sh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sh===e&&(Sh=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],a=e[t+2];if("function"!==typeof n){if(null===lh(n||r))continue;break}var s=Ue(r);null!==s&&(e.splice(t,3),t-=3,Lo(s,{pending:!0,data:a,method:r.method,action:n},n,a))}}))}function Eh(e){function t(t){return Nh(t,e)}null!==uh&&Nh(uh,e),null!==hh&&Nh(hh,e),null!==mh&&Nh(mh,e),gh.forEach(t),fh.forEach(t);for(var r=0;r<ph.length;r++){var n=ph[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ph.length&&null===(r=ph[0]).blockedOn;)vh(r),null===r.blockedOn&&ph.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var a=r[n],s=r[n+1],o=a[Oe]||null;if("function"===typeof s)o||Ch(r);else if(o){var i=null;if(s&&s.hasAttribute("formAction")){if(a=s,o=s[Oe]||null)i=o.formAction;else if(null!==lh(a))continue}else i=o.action;"function"===typeof i?r[n+1]=i:(r.splice(n,3),n-=3),Ch(r)}}}function Ah(e){this._internalRoot=e}function _h(e){this._internalRoot=e}_h.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Qu(t.current,Dc(),e,t,null,null)},_h.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Qu(e.current,2,null,e,null,null),Wc(),t[De]=null}},_h.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ph.length&&0!==t&&t<ph[r].priority;r++);ph.splice(r,0,e),0===r&&vh(e)}};var Th=a.version;if("19.1.1"!==Th)throw Error(o(527,Th,"19.1.1"));R.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(n=a.return)){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return d(a),e;if(s===n)return d(a),t;s=s.sibling}throw Error(o(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,c=a.child;c;){if(c===r){i=!0,r=a,n=s;break}if(c===n){i=!0,n=a,r=s;break}c=c.sibling}if(!i){for(c=s.child;c;){if(c===r){i=!0,r=s,n=a;break}if(c===n){i=!0,n=s,r=a;break}c=c.sibling}if(!i)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Lh={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{de=Mh.inject(Lh),ue=Mh}catch(Dh){}}t.createRoot=function(e,t){if(!i(e))throw Error(o(299));var r=!1,n="",a=bi,s=yi,l=vi;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xu(e,1,!1,null,0,r,n,a,s,l,0,null),e[De]=t.current,zd(e),new Ah(t)},t.hydrateRoot=function(e,t,r){if(!i(e))throw Error(o(299));var n=!1,a="",s=bi,l=yi,c=vi,d=null;return null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onUncaughtError&&(s=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(d=r.formState)),(t=Xu(e,1,!0,t,0,n,a,s,l,c,0,d)).context=Ju(null),r=t.current,(a=as(n=Ae(n=Dc()))).callback=null,ss(r,a,n),r=n,t.current.lanes=r,Se(t,r),wd(t),e[De]=t.current,zd(e),new _h(t)},t.version="19.1.1"},43:(e,t,r)=>{e.exports=r(288)},237:(e,t,r)=>{e.exports=r(365)},288:(e,t)=>{var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,p={};function x(e,t,r){this.props=e,this.context=t,this.refs=p,this.updater=r||g}function b(){}function y(e,t,r){this.props=e,this.context=t,this.refs=p,this.updater=r||g}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var v=y.prototype=new b;v.constructor=y,f(v,x.prototype),v.isPureReactComponent=!0;var k=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function N(e,t,n,a,s,o){return n=o.ref,{$$typeof:r,type:e,key:t,ref:void 0!==n?n:null,props:o}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(){}function _(e,t,a,s,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l,c,d=!1;if(null===e)d=!0;else switch(i){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case r:case n:d=!0;break;case h:return _((d=e._init)(e._payload),t,a,s,o)}}if(d)return o=o(e),d=""===s?"."+E(e,0):s,k(o)?(a="",null!=d&&(a=d.replace(C,"$&/")+"/"),_(o,t,a,"",function(e){return e})):null!=o&&(S(o)&&(l=o,c=a+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+d,o=N(l.type,c,void 0,0,0,l.props)),t.push(o)),1;d=0;var u,g=""===s?".":s+":";if(k(e))for(var f=0;f<e.length;f++)d+=_(s=e[f],t,a,i=g+E(s,f),o);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=m&&u[m]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(s=e.next()).done;)d+=_(s=s.value,t,a,i=g+E(s,f++),o);else if("object"===i){if("function"===typeof e.then)return _(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function T(e,t,r){if(null==e)return e;var n=[],a=0;return _(e,n,"","",function(e){return t.call(r,e,a++)}),n}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=o,t.PureComponent=y,t.StrictMode=s,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=f({},e.props),a=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!j.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(n[s]=t[s]);var s=arguments.length-2;if(1===s)n.children=r;else if(1<s){for(var o=Array(s),i=0;i<s;i++)o[i]=arguments[i+2];n.children=o}return N(e.type,a,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},t.createElement=function(e,t,r){var n,a={},s=null;if(null!=t)for(n in void 0!==t.key&&(s=""+t.key),t)j.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(a[n]=t[n]);var o=arguments.length-2;if(1===o)a.children=r;else if(1<o){for(var i=Array(o),l=0;l<o;l++)i[l]=arguments[l+2];a.children=i}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===a[n]&&(a[n]=o[n]);return N(e,s,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,r={};w.T=r;try{var n=e(),a=w.S;null!==a&&a(r,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(O,M)}catch(s){M(s)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,r){return w.H.useActionState(e,t,r)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,r){var n=w.H;if("function"===typeof r)throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,r){return w.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return w.H.useReducer(e,t,r)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return w.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.1"},365:(e,t,r)=>{var n=r(43);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=n.useSyncExternalStore,o=n.useRef,i=n.useEffect,l=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,d){var u=o(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=l(function(){function e(e){if(!i){if(i=!0,s=e,e=n(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return o=t}return o=e}if(t=o,a(s,e))return t;var r=n(e);return void 0!==d&&d(t,r)?(s=e,t):(s=e,o=r)}var s,o,i=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,d]);var m=s(e,u[0],u[1]);return i(function(){h.hasValue=!0,h.value=m},[m]),c(m),m}},379:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(705);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}},391:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4)},579:(e,t,r)=>{e.exports=r(799)},623:(e,t)=>{function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"===typeof self?"undefined":r(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(a){return!1}return!0}(t)?self[t]:a};var a={getItem:n,setItem:n,removeItem:n}},672:(e,t,r)=>{var n=r(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},i=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=r,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:s}):"script"===r&&o.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin);o.d.L(e,r,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var r=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},705:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function s(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:()=>s})},722:(e,t,r)=>{r.d(t,{A:()=>Et});var n={};function a(e,t){return function(){return e.apply(t,arguments)}}r.r(n),r.d(n,{hasBrowserEnv:()=>de,hasStandardBrowserEnv:()=>he,hasStandardBrowserWebWorkerEnv:()=>me,navigator:()=>ue,origin:()=>ge});const{toString:s}=Object.prototype,{getPrototypeOf:o}=Object,{iterator:i,toStringTag:l}=Symbol,c=(d=Object.create(null),e=>{const t=s.call(e);return d[t]||(d[t]=t.slice(8,-1).toLowerCase())});var d;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),h=e=>t=>typeof t===e,{isArray:m}=Array,g=h("undefined");function f(e){return null!==e&&!g(e)&&null!==e.constructor&&!g(e.constructor)&&b(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const p=u("ArrayBuffer");const x=h("string"),b=h("function"),y=h("number"),v=e=>null!==e&&"object"===typeof e,k=e=>{if("object"!==c(e))return!1;const t=o(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(i in e)},w=u("Date"),j=u("File"),N=u("Blob"),S=u("FileList"),C=u("URLSearchParams"),[E,A,_,T]=["ReadableStream","Request","Response","Headers"].map(u);function L(e,t){let r,n,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),m(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(f(e))return;const n=a?Object.getOwnPropertyNames(e):Object.keys(e),s=n.length;let o;for(r=0;r<s;r++)o=n[r],t.call(null,e[o],o,e)}}function M(e,t){if(f(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const O="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,D=e=>!g(e)&&e!==O;const R=(P="undefined"!==typeof Uint8Array&&o(Uint8Array),e=>P&&e instanceof P);var P;const F=u("HTMLFormElement"),I=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),B=u("RegExp"),z=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};L(r,(r,a)=>{let s;!1!==(s=t(r,a,e))&&(n[a]=s||r)}),Object.defineProperties(e,n)};const W=u("AsyncFunction"),U=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],O.addEventListener("message",e=>{let{source:t,data:a}=e;t===O&&a===r&&n.length&&n.shift()()},!1),e=>{n.push(e),O.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,b(O.postMessage)),H="undefined"!==typeof queueMicrotask?queueMicrotask.bind(O):"undefined"!==typeof process&&process.nextTick||U,V={isArray:m,isArrayBuffer:p,isBuffer:f,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||b(e.append)&&("formdata"===(t=c(e))||"object"===t&&b(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&p(e.buffer),t},isString:x,isNumber:y,isBoolean:e=>!0===e||!1===e,isObject:v,isPlainObject:k,isEmptyObject:e=>{if(!v(e)||f(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:E,isRequest:A,isResponse:_,isHeaders:T,isUndefined:g,isDate:w,isFile:j,isBlob:N,isRegExp:B,isFunction:b,isStream:e=>v(e)&&b(e.pipe),isURLSearchParams:C,isTypedArray:R,isFileList:S,forEach:L,merge:function e(){const{caseless:t,skipUndefined:r}=D(this)&&this||{},n={},a=(a,s)=>{const o=t&&M(n,s)||s;k(n[o])&&k(a)?n[o]=e(n[o],a):k(a)?n[o]=e({},a):m(a)?n[o]=a.slice():r&&g(a)||(n[o]=a)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&L(arguments[s],a);return n},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return L(t,(t,n)=>{r&&b(t)?e[n]=a(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,s,i;const l={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)i=a[s],n&&!n(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==r&&o(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(m(e))return e;let t=e.length;if(!y(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[i]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:F,hasOwnProperty:I,hasOwnProp:I,reduceDescriptors:z,freezeMethods:e=>{z(e,(t,r)=>{if(b(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];b(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return m(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:M,global:O,isContextDefined:D,isSpecCompliantForm:function(e){return!!(e&&b(e.append)&&"FormData"===e[l]&&e[i])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(v(e)){if(t.indexOf(e)>=0)return;if(f(e))return e;if(!("toJSON"in e)){t[n]=e;const a=m(e)?[]:{};return L(e,(e,t)=>{const s=r(e,n+1);!g(s)&&(a[t]=s)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:W,isThenable:e=>e&&(v(e)||b(e))&&b(e.then)&&b(e.catch),setImmediate:U,asap:H,isIterable:e=>null!=e&&b(e[i])};function G(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}V.inherits(G,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const q=G.prototype,$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$[e]={value:e}}),Object.defineProperties(G,$),Object.defineProperty(q,"isAxiosError",{value:!0}),G.from=(e,t,r,n,a,s)=>{const o=Object.create(q);V.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const i=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return G.call(o,i,l,r,n,a),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};const K=G;function Y(e){return V.isPlainObject(e)||V.isArray(e)}function X(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function J(e,t,r){return e?e.concat(t).map(function(e,t){return e=X(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Q=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});const Z=function(e,t,r){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!V.isUndefined(t[e])})).metaTokens,a=r.visitor||c,s=r.dots,o=r.indexes,i=(r.Blob||"undefined"!==typeof Blob&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(V.isDate(e))return e.toISOString();if(V.isBoolean(e))return e.toString();if(!i&&V.isBlob(e))throw new K("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(e)||V.isTypedArray(e)?i&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let i=e;if(e&&!a&&"object"===typeof e)if(V.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(V.isArray(e)&&function(e){return V.isArray(e)&&!e.some(Y)}(e)||(V.isFileList(e)||V.endsWith(r,"[]"))&&(i=V.toArray(e)))return r=X(r),i.forEach(function(e,n){!V.isUndefined(e)&&null!==e&&t.append(!0===o?J([r],n,s):null===o?r:r+"[]",l(e))}),!1;return!!Y(e)||(t.append(J(a,r,s),l(e)),!1)}const d=[],u=Object.assign(Q,{defaultVisitor:c,convertValue:l,isVisitable:Y});if(!V.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!V.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),V.forEach(r,function(r,s){!0===(!(V.isUndefined(r)||null===r)&&a.call(t,r,V.isString(s)?s.trim():s,n,u))&&e(r,n?n.concat(s):[s])}),d.pop()}}(e),t};function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function te(e,t){this._pairs=[],e&&Z(e,this,t)}const re=te.prototype;re.append=function(e,t){this._pairs.push([e,t])},re.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const ne=te;function ae(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function se(e,t,r){if(!t)return e;const n=r&&r.encode||ae;V.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(s=a?a(t,r):V.isURLSearchParams(t)?t.toString():new ne(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const oe=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(t){null!==t&&e(t)})}},ie={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var le=r(379);const ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ne,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},de="undefined"!==typeof window&&"undefined"!==typeof document,ue="object"===typeof navigator&&navigator||void 0,he=de&&(!ue||["ReactNative","NativeScript","NS"].indexOf(ue.product)<0),me="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ge=de&&window.location.href||"http://localhost",fe=(0,le.A)((0,le.A)({},n),ce);const pe=function(e){function t(e,r,n,a){let s=e[a++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),i=a>=e.length;if(s=!s&&V.isArray(n)?n.length:s,i)return V.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!o;n[s]&&V.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],a)&&V.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],t[s]=e[s];return t}(n[s])),!o}if(V.isFormData(e)&&V.isFunction(e.entries)){const r={};return V.forEachEntry(e,(e,n)=>{t(function(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const xe={transitional:ie,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=V.isObject(e);a&&V.isHTMLForm(e)&&(e=new FormData(e));if(V.isFormData(e))return n?JSON.stringify(pe(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Z(e,new fe.classes.URLSearchParams,(0,le.A)({visitor:function(e,t,r,n){return fe.isNode&&V.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Z(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xe.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(a){if(r){if("SyntaxError"===a.name)throw K.from(a,K.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],e=>{xe.headers[e]={}});const be=xe,ye=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ve=Symbol("internals");function ke(e){return e&&String(e).trim().toLowerCase()}function we(e){return!1===e||null==e?e:V.isArray(e)?e.map(we):String(e)}function je(e,t,r,n,a){return V.isFunction(n)?n.call(this,t,r):(a&&(t=r),V.isString(t)?V.isString(n)?-1!==t.indexOf(n):V.isRegExp(n)?n.test(t):void 0:void 0)}class Ne{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=ke(t);if(!a)throw new Error("header name must be a non-empty string");const s=V.findKey(n,a);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=we(e))}const s=(e,t)=>V.forEach(e,(e,r)=>a(e,r,t));if(V.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(V.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&ye[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(V.isObject(e)&&V.isIterable(e)){let r,n,a={};for(const t of e){if(!V.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?V.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=ke(e)){const r=V.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(V.isFunction(t))return t.call(this,e,r);if(V.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ke(e)){const r=V.findKey(this,e);return!(!r||void 0===this[r]||t&&!je(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=ke(e)){const a=V.findKey(r,e);!a||t&&!je(0,r[a],a,t)||(delete r[a],n=!0)}}return V.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!je(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return V.forEach(this,(n,a)=>{const s=V.findKey(r,a);if(s)return t[s]=we(n),void delete t[a];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();o!==a&&delete t[a],t[o]=we(n),r[o]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return V.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&V.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[ve]=this[ve]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=ke(e);t[n]||(!function(e,t){const r=V.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return V.isArray(e)?e.forEach(n):n(e),this}}Ne.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),V.reduceDescriptors(Ne.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),V.freezeMethods(Ne);const Se=Ne;function Ce(e,t){const r=this||be,n=t||r,a=Se.from(n.headers);let s=n.data;return V.forEach(e,function(e){s=e.call(r,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function Ee(e){return!(!e||!e.__CANCEL__)}function Ae(e,t,r){K.call(this,null==e?"canceled":e,K.ERR_CANCELED,t,r),this.name="CanceledError"}V.inherits(Ae,K,{__CANCEL__:!0});const _e=Ae;function Te(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new K("Request failed with status code "+r.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const Le=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,s=0,o=0;return t=void 0!==t?t:1e3,function(i){const l=Date.now(),c=n[o];a||(a=l),r[s]=i,n[s]=l;let d=o,u=0;for(;d!==s;)u+=r[d++],d%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Me=function(e,t){let r,n,a=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];t>=s?o(l,e):(r=l,n||(n=setTimeout(()=>{n=null,o(r)},s-t)))},()=>r&&o(r)]},Oe=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const a=Le(50,250);return Me(r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,i=s-n,l=a(i);n=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:i,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},De=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Re=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return V.asap(()=>e(...r))},Pe=fe.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,fe.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,Fe=fe.hasStandardBrowserEnv?{write(e,t,r,n,a,s){const o=[e+"="+encodeURIComponent(t)];V.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),V.isString(n)&&o.push("path="+n),V.isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ie(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Be=e=>e instanceof Se?(0,le.A)({},e):e;function ze(e,t){t=t||{};const r={};function n(e,t,r,n){return V.isPlainObject(e)&&V.isPlainObject(t)?V.merge.call({caseless:n},e,t):V.isPlainObject(t)?V.merge({},t):V.isArray(t)?t.slice():t}function a(e,t,r,a){return V.isUndefined(t)?V.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function s(e,t){if(!V.isUndefined(t))return n(void 0,t)}function o(e,t){return V.isUndefined(t)?V.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function i(r,a,s){return s in t?n(r,a):s in e?n(void 0,r):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(e,t,r)=>a(Be(e),Be(t),0,!0)};return V.forEach(Object.keys((0,le.A)((0,le.A)({},e),t)),function(n){const s=l[n]||a,o=s(e[n],t[n],n);V.isUndefined(o)&&s!==i||(r[n]=o)}),r}const We=e=>{const t=ze({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:i}=t;if(t.headers=o=Se.from(o),t.url=se(Ie(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),V.isFormData(r))if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,n]=e;t.includes(r.toLowerCase())&&o.set(r,n)})}if(fe.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(t)),n||!1!==n&&Pe(t.url))){const e=a&&s&&Fe.read(s);e&&o.set(a,e)}return t},Ue="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=We(e);let a=n.data;const s=Se.from(n.headers).normalize();let o,i,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function g(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let f=new XMLHttpRequest;function p(){if(!f)return;const n=Se.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Te(function(e){t(e),g()},function(e){r(e),g()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(p)},f.onabort=function(){f&&(r(new K("Request aborted",K.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=t&&t.message?t.message:"Network Error",a=new K(n,K.ERR_NETWORK,e,f);a.event=t||null,r(a),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||ie;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new K(t,a.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,e,f)),f=null},void 0===a&&s.setContentType(null),"setRequestHeader"in f&&V.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),V.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),m&&([l,d]=Oe(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([i,c]=Oe(h),f.upload.addEventListener("progress",i),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{f&&(r(!t||t.type?new _e(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);x&&-1===fe.protocols.indexOf(x)?r(new K("Unsupported protocol "+x+":",K.ERR_BAD_REQUEST,e)):f.send(a||null)})},He=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof K?t:new _e(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,a(new K("timeout ".concat(t," of ms exceeded"),K.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:i}=n;return i.unsubscribe=()=>V.asap(o),i}};function Ve(e,t){this.v=e,this.k=t}function Ge(e){return function(){return new qe(e.apply(this,arguments))}}function qe(e){var t,r;function n(t,r){try{var s=e[t](r),o=s.value,i=o instanceof Ve;Promise.resolve(i?o.v:o).then(function(r){if(i){var l="return"===t?"return":"next";if(!o.k||r.done)return n(l,r);r=e[l](r).value}a(s.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise(function(s,o){var i={key:e,arg:a,resolve:s,reject:o,next:null};r?r=r.next=i:(t=r=i,n(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function $e(e){return new Ve(e,0)}function Ke(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new Ve(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Ye(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Xe(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Xe(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Xe=function(e){this.s=e,this.n=e.next},Xe.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Xe(e)}qe.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},qe.prototype.next=function(e){return this._invoke("next",e)},qe.prototype.throw=function(e){return this._invoke("throw",e)},qe.prototype.return=function(e){return this._invoke("return",e)};const Je=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Qe=function(){var e=Ge(function*(e,t){var r,n=!1,a=!1;try{for(var s,o=Ye(Ze(e));n=!(s=yield $e(o.next())).done;n=!1){const e=s.value;yield*Ke(Ye(Je(e,t)))}}catch(i){a=!0,r=i}finally{try{n&&null!=o.return&&(yield $e(o.return()))}finally{if(a)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Ze=function(){var e=Ge(function*(e){if(e[Symbol.asyncIterator])return void(yield*Ke(Ye(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield $e(t.read());if(e)break;yield r}}finally{yield $e(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),et=(e,t,r,n)=>{const a=Qe(e,t);let s,o=0,i=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return i(),void e.close();let s=n.byteLength;if(r){let e=o+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw i(t),t}},cancel:e=>(i(e),a.return())},{highWaterMark:2})},{isFunction:tt}=V,rt=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(V.global),{ReadableStream:nt,TextEncoder:at}=V.global,st=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(a){return!1}},ot=e=>{e=V.merge.call({skipUndefined:!0},rt,e);const{fetch:t,Request:r,Response:n}=e,a=t?tt(t):"function"===typeof fetch,s=tt(r),o=tt(n);if(!a)return!1;const i=a&&tt(nt),l=a&&("function"===typeof at?(c=new at,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=s&&i&&st(()=>{let e=!1;const t=new r(fe.origin,{body:new nt,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=o&&i&&st(()=>V.isReadableStream(new n("").body)),h={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new K("Response type '".concat(e,"' is not supported"),K.ERR_NOT_SUPPORT,r)})});const m=async(e,t)=>{const n=V.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(V.isBlob(e))return e.size;if(V.isSpecCompliantForm(e)){const t=new r(fe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return V.isArrayBufferView(e)||V.isArrayBuffer(e)?e.byteLength:(V.isURLSearchParams(e)&&(e+=""),V.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:a,method:o,data:i,signal:l,cancelToken:c,timeout:g,onDownloadProgress:f,onUploadProgress:p,responseType:x,headers:b,withCredentials:y="same-origin",fetchOptions:v}=We(e),k=t||fetch;x=x?(x+"").toLowerCase():"text";let w=He([l,c&&c.toAbortSignal()],g),j=null;const N=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let S;try{if(p&&d&&"get"!==o&&"head"!==o&&0!==(S=await m(b,i))){let e,t=new r(a,{method:"POST",body:i,duplex:"half"});if(V.isFormData(i)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,r]=De(S,Oe(Re(p)));i=et(t.body,65536,e,r)}}V.isString(y)||(y=y?"include":"omit");const t=s&&"credentials"in r.prototype,l=(0,le.A)((0,le.A)({},v),{},{signal:w,method:o.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:t?y:void 0});j=s&&new r(a,l);let c=await(s?k(j,v):k(a,l));const g=u&&("stream"===x||"response"===x);if(u&&(f||g&&N)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=V.toFiniteNumber(c.headers.get("content-length")),[r,a]=f&&De(t,Oe(Re(f),!0))||[];c=new n(et(c.body,65536,r,()=>{a&&a(),N&&N()}),e)}x=x||"text";let C=await h[V.findKey(h,x)||"text"](c,e);return!g&&N&&N(),await new Promise((t,r)=>{Te(t,r,{data:C,headers:Se.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:j})})}catch(C){if(N&&N(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new K("Network Error",K.ERR_NETWORK,e,j),{cause:C.cause||C});throw K.from(C,C&&C.code,e,j)}}},it=new Map,lt=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:a}=t,s=[n,a,r];let o,i,l=s.length,c=it;for(;l--;)o=s[l],i=c.get(o),void 0===i&&c.set(o,i=l?new Map:ot(t)),c=i;return i},ct=(lt(),{http:null,xhr:Ue,fetch:{get:lt}});V.forEach(ct,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const dt=e=>"- ".concat(e),ut=e=>V.isFunction(e)||null===e||!1===e,ht=(e,t)=>{e=V.isArray(e)?e:[e];const{length:r}=e;let n,a;const s={};for(let o=0;o<r;o++){let r;if(n=e[o],a=n,!ut(n)&&(a=ct[(r=String(n)).toLowerCase()],void 0===a))throw new K("Unknown adapter '".concat(r,"'"));if(a&&(V.isFunction(a)||(a=a.get(t))))break;s[r||"#"+o]=a}if(!a){const e=Object.entries(s).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(dt).join("\n"):" "+dt(e[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a};function mt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _e(null,e)}function gt(e){mt(e),e.headers=Se.from(e.headers),e.data=Ce.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ht(e.adapter||be.adapter,e)(e).then(function(t){return mt(e),t.data=Ce.call(e,e.transformResponse,t),t.headers=Se.from(t.headers),t},function(t){return Ee(t)||(mt(e),t&&t.response&&(t.response.data=Ce.call(e,e.transformResponse,t.response),t.response.headers=Se.from(t.response.headers))),Promise.reject(t)})}const ft="1.12.2",pt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{pt[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const xt={};pt.transitional=function(e,t,r){function n(e,t){return"[Axios v"+ft+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,s)=>{if(!1===e)throw new K(n(a," has been removed"+(t?" in "+t:"")),K.ERR_DEPRECATED);return t&&!xt[a]&&(xt[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,s)}},pt.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const bt={assertOptions:function(e,t,r){if("object"!==typeof e)throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],o=t[s];if(o){const t=e[s],r=void 0===t||o(t,s,e);if(!0!==r)throw new K("option "+s+" must be "+r,K.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new K("Unknown option "+s,K.ERR_BAD_OPTION)}},validators:pt},yt=bt.validators;class vt{constructor(e){this.defaults=e||{},this.interceptors={request:new oe,response:new oe}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(n){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ze(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&bt.assertOptions(r,{silentJSONParsing:yt.transitional(yt.boolean),forcedJSONParsing:yt.transitional(yt.boolean),clarifyTimeoutError:yt.transitional(yt.boolean)},!1),null!=n&&(V.isFunction(n)?t.paramsSerializer={serialize:n}:bt.assertOptions(n,{encode:yt.function,serialize:yt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bt.assertOptions(t,{baseUrl:yt.spelling("baseURL"),withXsrfToken:yt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&V.merge(a.common,a[t.method]);a&&V.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Se.concat(s,a);const o=[];let i=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!i){const e=[gt.bind(this),void 0];for(e.unshift(...o),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=o.length;let h=t;for(;u<d;){const e=o[u++],t=o[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=gt.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return se(Ie((e=ze(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}V.forEach(["delete","get","head","options"],function(e){vt.prototype[e]=function(t,r){return this.request(ze(r||{},{method:e,url:t,data:(r||{}).data}))}}),V.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(ze(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}vt.prototype[e]=t(),vt.prototype[e+"Form"]=t(!0)});const kt=vt;class wt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new _e(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new wt(function(t){e=t}),cancel:e}}}const jt=wt;const Nt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Nt).forEach(e=>{let[t,r]=e;Nt[r]=t});const St=Nt;const Ct=function e(t){const r=new kt(t),n=a(kt.prototype.request,r);return V.extend(n,kt.prototype,r,{allOwnKeys:!0}),V.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(ze(t,r))},n}(be);Ct.Axios=kt,Ct.CanceledError=_e,Ct.CancelToken=jt,Ct.isCancel=Ee,Ct.VERSION=ft,Ct.toFormData=Z,Ct.AxiosError=K,Ct.Cancel=Ct.CanceledError,Ct.all=function(e){return Promise.all(e)},Ct.spread=function(e){return function(t){return e.apply(null,t)}},Ct.isAxiosError=function(e){return V.isObject(e)&&!0===e.isAxiosError},Ct.mergeConfig=ze,Ct.AxiosHeaders=Se,Ct.formToJSON=e=>pe(V.isHTMLForm(e)?new FormData(e):e),Ct.getAdapter=ht,Ct.HttpStatusCode=St,Ct.default=Ct;const Et=Ct},766:(e,t,r)=>{t.A=function(e){var t=(0,a.default)(e);return{getItem:function(e){return new Promise(function(r,n){r(t.getItem(e))})},setItem:function(e,r){return new Promise(function(n,a){n(t.setItem(e,r))})},removeItem:function(e){return new Promise(function(r,n){r(t.removeItem(e))})}}};var n,a=(n=r(623))&&n.__esModule?n:{default:n}},799:(e,t)=>{var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(e,t,n){var a=null;if(void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),"key"in t)for(var s in n={},t)"key"!==s&&(n[s]=t[s]);else n=t;return t=n.ref,{$$typeof:r,type:e,key:a,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=a,t.jsxs=a},853:(e,t,r)=>{e.exports=r(896)},896:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,o=a>>>1;n<o;){var i=2*(n+1)-1,l=e[i],c=i+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[i]=r,n=i);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,h=null,m=3,g=!1,f=!1,p=!1,x=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function w(e){if(p=!1,k(e),!f)if(null!==n(c))f=!0,N||(N=!0,j());else{var t=n(d);null!==t&&M(w,t.startTime-e)}}var j,N=!1,S=-1,C=5,E=-1;function A(){return!!x||!(t.unstable_now()-E<C)}function _(){if(x=!1,N){var e=t.unstable_now();E=e;var r=!0;try{e:{f=!1,p&&(p=!1,y(S),S=-1),g=!0;var s=m;try{t:{for(k(e),h=n(c);null!==h&&!(h.expirationTime>e&&A());){var o=h.callback;if("function"===typeof o){h.callback=null,m=h.priorityLevel;var i=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof i){h.callback=i,k(e),r=!0;break t}h===n(c)&&a(c),k(e)}else a(c);h=n(c)}if(null!==h)r=!0;else{var l=n(d);null!==l&&M(w,l.startTime-e),r=!1}}break e}finally{h=null,m=s,g=!1}r=void 0}}finally{r?j():N=!1}}}if("function"===typeof v)j=function(){v(_)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,L=T.port2;T.port1.onmessage=_,j=function(){L.postMessage(null)}}else j=function(){b(_,0)};function M(e,r){S=b(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,a,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>o?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(p?(y(S),S=-1):p=!0,M(w,s-o))):(e.sortIndex=i,r(c,e),f||g||(f=!0,N||(N=!0,j()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(672)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.m=e,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+".c8d18460.chunk.js",r.miniCssF=e=>{},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="telecom-gis-platform:";r.l=(n,a,s,o)=>{if(e[n])e[n].push(a);else{var i,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+s){i=u;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+s),i.src=n),e[n]=[a];var h=(t,r)=>{i.onerror=i.onload=null,clearTimeout(m);var a=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach(e=>e(r)),t)return t(r)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),l&&document.head.appendChild(i)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var s=new Promise((r,n)=>a=e[t]=[r,n]);n.push(a[2]=s);var o=r.p+r.u(t),i=new Error;r.l(o,n=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",i.name="ChunkLoadError",i.type=s,i.request=o,a[1](i)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,s,o=n[0],i=n[1],l=n[2],c=0;if(o.some(t=>0!==e[t])){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)l(r)}for(t&&t(n);c<o.length;c++)s=o[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunktelecom_gis_platform=self.webpackChunktelecom_gis_platform||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r(43),a=r(391);function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=r(379);const i=["sri"],l=["page"],c=["page","matches"],d=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],h=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var m="popstate";function g(){return k(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return b("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:y(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function f(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return(0,o.A)((0,o.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t),{},{state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)})}function y(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function v(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function k(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,l="POP",c=null,d=u();function u(){return(i.state||{idx:null}).idx}function h(){l="POP";let e=u(),t=null==e?null:e-d;d=e,c&&c({action:l,location:f.location,delta:t})}function g(e){return w(e)}null==d&&(d=0,i.replaceState((0,o.A)((0,o.A)({},i.state),{},{idx:d}),""));let f={get action(){return l},get location(){return e(a,i)},listen(e){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(m,h),c=e,()=>{a.removeEventListener(m,h),c=null}},createHref:e=>t(a,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let n=b(f.location,e,t);r&&r(n,e),d=u()+1;let o=x(n,d),h=f.createHref(n);try{i.pushState(o,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;a.location.assign(h)}s&&c&&c({action:l,location:f.location,delta:1})},replace:function(e,t){l="REPLACE";let n=b(f.location,e,t);r&&r(n,e),d=u();let a=x(n,d),o=f.createHref(n);i.replaceState(a,"",o),s&&c&&c({action:l,location:f.location,delta:0})},go:e=>i.go(e)};return f}function w(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),f(r,"No window.location.(origin|href) available to create URL");let n="string"===typeof e?e:y(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}new WeakMap;function j(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,r,n){let a=B(("string"===typeof t?v(t):t).pathname||"/",r);if(null==a)return null;let s=S(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let i=0;null==o&&i<s.length;++i){let e=I(a);o=R(s[i],e,n)}return o}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,i=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&o)return;f(l.relativePath.startsWith(n),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(n,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(n.length)}let c=V([n,l.relativePath]),d=r.concat(l);e.children&&e.children.length>0&&(f(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),S(e.children,t,d,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:D(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!==(r=e.path)&&void 0!==r&&r.includes("?"))for(let n of C(e.path))s(e,t,!0,n);else s(e,t)}),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let o=C(n.join("/")),i=[];return i.push(...o.map(e=>""===e?s:[s,e].join("/"))),a&&i.push(...o),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var E=/^:[\w-]+$/,A=3,_=2,T=1,L=10,M=-2,O=e=>"*"===e;function D(e,t){let r=e.split("/"),n=r.length;return r.some(O)&&(n+=M),t&&(n+=_),r.filter(e=>!O(e)).reduce((e,t)=>e+(E.test(t)?A:""===t?T:L),n)}function R(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,a={},s="/",o=[];for(let i=0;i<n.length;++i){let e=n[i],l=i===n.length-1,c="/"===s?t:t.slice(s.length)||"/",d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:V([s,d.pathname]),pathnameBase:G(V([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=V([s,d.pathnameBase]))}return o}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=F(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),i=a.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=i[r]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function I(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return p(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function z(e,t,r,n){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(n),"].  Please separate it out to the `to.").concat(r,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function W(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e){let t=W(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function H(e,t,r){let n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=v(e):(n=(0,o.A)({},e),f(!n.pathname||!n.pathname.includes("?"),z("?","pathname","search",n)),f(!n.pathname||!n.pathname.includes("#"),z("#","pathname","hash",n)),f(!n.search||!n.search.includes("#"),z("#","search","hash",n)));let s,i=""===e||""===n.pathname,l=i?"/":n.pathname;if(null==l)s=r;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:n="",hash:a=""}="string"===typeof e?v(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:q(n),hash:K(a)}}(n,s),d=l&&"/"!==l&&l.endsWith("/"),u=(i||"."===l)&&r.endsWith("/");return c.pathname.endsWith("/")||!d&&!u||(c.pathname+="/"),c}var V=e=>e.join("/").replace(/\/\/+/g,"/"),G=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var X=["POST","PUT","PATCH","DELETE"],J=(new Set(X),["GET",...X]);new Set(J),Symbol("ResetLoaderData");var Q=n.createContext(null);Q.displayName="DataRouter";var Z=n.createContext(null);Z.displayName="DataRouterState";var ee=n.createContext(!1);var te=n.createContext({isTransitioning:!1});te.displayName="ViewTransition";var re=n.createContext(new Map);re.displayName="Fetchers";var ne=n.createContext(null);ne.displayName="Await";var ae=n.createContext(null);ae.displayName="Navigation";var se=n.createContext(null);se.displayName="Location";var oe=n.createContext({outlet:null,matches:[],isDataRoute:!1});oe.displayName="Route";var ie=n.createContext(null);ie.displayName="RouteError";function le(){return null!=n.useContext(se)}function ce(){return f(le(),"useLocation() may be used only in the context of a <Router> component."),n.useContext(se).location}var de="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ue(e){n.useContext(ae).static||n.useLayoutEffect(e)}function he(){let{isDataRoute:e}=n.useContext(oe);return e?function(){let{router:e}=ke("useNavigate"),t=je("useNavigate"),r=n.useRef(!1);ue(()=>{r.current=!0});let a=n.useCallback(async function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(r.current,de),r.current&&("number"===typeof n?e.navigate(n):await e.navigate(n,(0,o.A)({fromRouteId:t},a)))},[e,t]);return a}():function(){f(le(),"useNavigate() may be used only in the context of a <Router> component.");let e=n.useContext(Q),{basename:t,navigator:r}=n.useContext(ae),{matches:a}=n.useContext(oe),{pathname:s}=ce(),o=JSON.stringify(U(a)),i=n.useRef(!1);ue(()=>{i.current=!0});let l=n.useCallback(function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p(i.current,de),!i.current)return;if("number"===typeof n)return void r.go(n);let l=H(n,JSON.parse(o),s,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:V([t,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[t,r,o,s,e]);return l}()}n.createContext(null);function me(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=n.useContext(oe),{pathname:a}=ce(),s=JSON.stringify(U(r));return n.useMemo(()=>H(e,JSON.parse(s),a,"path"===t),[e,s,a,t])}function ge(e,t,r,a,s){f(le(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=n.useContext(ae),{matches:l}=n.useContext(oe),c=l[l.length-1],d=c?c.params:{},u=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;{let e=m&&m.path||"";Ce(u,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let g,x=ce();if(t){var b;let e="string"===typeof t?v(t):t;f("/"===h||(null===(b=e.pathname)||void 0===b?void 0:b.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),g=e}else g=x;let y=g.pathname||"/",k=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");k="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=j(e,{pathname:k});p(m||null!=w,'No routes matched location "'.concat(g.pathname).concat(g.search).concat(g.hash,'" ')),p(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(g.pathname).concat(g.search).concat(g.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let N=ye(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:V([h,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:V([h,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,r,a,s);return t&&N?n.createElement(se.Provider,{value:{location:(0,o.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:"POP"}},N):N}function fe(){let e=Ne(),t=Y(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=n.createElement(n.Fragment,null,n.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),n.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",n.createElement("code",{style:o},"ErrorBoundary")," or"," ",n.createElement("code",{style:o},"errorElement")," prop on your route.")),n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:s},r):null,i)}var pe=n.createElement(fe,null),xe=class extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?n.createElement(oe.Provider,{value:this.props.routeContext},n.createElement(ie.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function be(e){let{routeContext:t,match:r,children:a}=e,s=n.useContext(Q);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(oe.Provider,{value:t},a)}function ye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let s=e,o=null===r||void 0===r?void 0:r.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));f(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let i=!1,l=-1;if(r)for(let n=0;n<s.length;n++){let e=s[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=n),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){i=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,c,d)=>{let u,h=!1,m=null,g=null;r&&(u=o&&c.route.id?o[c.route.id]:void 0,m=c.route.errorElement||pe,i&&(l<0&&0===d?(Ce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):l===d&&(h=!0,g=c.route.hydrateFallbackElement||null)));let f=t.concat(s.slice(0,d+1)),p=()=>{let t;return t=u?m:h?g:c.route.Component?n.createElement(c.route.Component,null):c.route.element?c.route.element:e,n.createElement(be,{match:c,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===d)?n.createElement(xe,{location:r.location,revalidation:r.revalidation,component:m,error:u,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:a}):p()},null)}function ve(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ke(e){let t=n.useContext(Q);return f(t,ve(e)),t}function we(e){let t=n.useContext(Z);return f(t,ve(e)),t}function je(e){let t=function(e){let t=n.useContext(oe);return f(t,ve(e)),t}(e),r=t.matches[t.matches.length-1];return f(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function Ne(){var e;let t=n.useContext(ie),r=we("useRouteError"),a=je("useRouteError");return void 0!==t?t:null===(e=r.errors)||void 0===e?void 0:e[a]}var Se={};function Ce(e,t,r){t||Se[e]||(Se[e]=!0,p(!1,r))}var Ee={};function Ae(e,t){e||Ee[t]||(Ee[t]=!0,console.warn(t))}n.memo(function(e){let{routes:t,future:r,state:n,unstable_onError:a}=e;return ge(t,void 0,n,a,r)});function _e(e){let{to:t,replace:r,state:a,relative:s}=e;f(le(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=n.useContext(ae);p(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=n.useContext(oe),{pathname:l}=ce(),c=he(),d=H(t,U(i),l,"path"===s),u=JSON.stringify(d);return n.useEffect(()=>{c(JSON.parse(u),{replace:r,state:a,relative:s})},[c,u,s,r,a]),null}function Te(e){f(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le(e){let{basename:t="/",children:r=null,location:a,navigationType:s="POP",navigator:o,static:i=!1}=e;f(!le(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=n.useMemo(()=>({basename:l,navigator:o,static:i,future:{}}),[l,o,i]);"string"===typeof a&&(a=v(a));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:g="default"}=a,x=n.useMemo(()=>{let e=B(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:m,key:g},navigationType:s}},[l,d,u,h,m,g,s]);return p(null!=x,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(d).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==x?null:n.createElement(ae.Provider,{value:c},n.createElement(se.Provider,{children:r,value:x}))}function Me(e){let{children:t,location:r}=e;return ge(Oe(t),r)}n.Component;function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return n.Children.forEach(e,(e,a)=>{if(!n.isValidElement(e))return;let s=[...t,a];if(e.type===n.Fragment)return void r.push.apply(r,Oe(e.props.children,s));f(e.type===Te,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),f(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Oe(e.props.children,s)),r.push(o)}),r}var De="get",Re="application/x-www-form-urlencoded";function Pe(e){return null!=e&&"string"===typeof e.tagName}function Fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}var Ie=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ze(e){return null==e||Be.has(e)?e:(p(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Re,'"')),null)}function We(e,t){let r,n,a,s,o;if(Pe(i=e)&&"form"===i.tagName.toLowerCase()){let o=e.getAttribute("action");n=o?B(o,t):null,r=e.getAttribute("method")||De,a=ze(e.getAttribute("enctype"))||Re,s=new FormData(e)}else if(function(e){return Pe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Pe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||o.getAttribute("action");if(n=i?B(i,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||De,a=ze(e.getAttribute("formenctype"))||ze(o.getAttribute("enctype"))||Re,s=new FormData(o,e),!function(){if(null===Ie)try{new FormData(document.createElement("form"),0),Ie=!1}catch(e){Ie=!0}return Ie}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,n)}}else{if(Pe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=De,n=null,a=Re,o=e}var i;return s&&"text/plain"===a&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ue(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function He(e,t,r){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.".concat(r):t&&"/"===B(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(r):n.pathname="".concat(n.pathname.replace(/\/$/,""),".").concat(r),n}async function Ve(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ge(e){return null!=e&&"string"===typeof e.page}function qe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function $e(e,t,r,n,a,s){let o=(e,t)=>!r[t]||e.route.id!==r[t].route.id,i=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null===(n=r[t].route.path)||void 0===n?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||i(e,t)):"data"===s?t.filter((t,s)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||i(t,s))return!0;if(t.route.shouldRevalidate){var c;let n=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=r[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0}):[]}function Ke(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1),[...new Set(n)];var n}function Ye(e,t){let r=new Set,n=new Set(t);return e.reduce((e,a)=>{if(t&&!Ge(a)&&"script"===a.as&&a.href&&n.has(a.href))return e;let s=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(a));return r.has(s)||(r.add(s),e.push({key:s,link:a})),e},[])}function Xe(e,t){return"lazy"===e.mode&&!0===t}function Je(){let e=n.useContext(Q);return Ue(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Qe(){let e=n.useContext(Z);return Ue(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ze=n.createContext(void 0);function et(){let e=n.useContext(Ze);return Ue(e,"You must render this element inside a <HydratedRouter> element"),e}function tt(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function rt(e,t,r){if(r&&!ot)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}Ze.displayName="FrameworkContext";function nt(e){let{page:t}=e,r=s(e,l),{router:a}=Je(),i=n.useMemo(()=>j(a.routes,t,a.basename),[a.routes,t,a.basename]);return i?n.createElement(st,(0,o.A)({page:t,matches:i},r)):null}function at(e){let{manifest:t,routeModules:r}=et(),[a,s]=n.useState([]);return n.useEffect(()=>{let n=!1;return async function(e,t,r){return Ye((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await Ve(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(qe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,o.A)((0,o.A)({},e),{},{rel:"prefetch",as:"style"}):(0,o.A)((0,o.A)({},e),{},{rel:"prefetch"})))}(e,t,r).then(e=>{n||s(e)}),()=>{n=!0}},[e,t,r]),a}function st(e){let{page:t,matches:r}=e,a=s(e,c),i=ce(),{manifest:l,routeModules:d}=et(),{basename:u}=Je(),{loaderData:h,matches:m}=Qe(),g=n.useMemo(()=>$e(t,r,m,l,i,"data"),[t,r,m,l,i]),f=n.useMemo(()=>$e(t,r,m,l,i,"assets"),[t,r,m,l,i]),p=n.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,n=!1;if(r.forEach(t=>{var r;let a=l.routes[t.route.id];a&&a.hasLoader&&(!g.some(e=>e.route.id===t.route.id)&&t.route.id in h&&null!==(r=d[t.route.id])&&void 0!==r&&r.shouldRevalidate||a.hasClientLoader?n=!0:e.add(t.route.id))}),0===e.size)return[];let a=He(t,u,"data");return n&&e.size>0&&a.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[u,h,i,l,g,r,t,d]),x=n.useMemo(()=>Ke(f,l),[f,l]),b=at(f);return n.createElement(n.Fragment,null,p.map(e=>n.createElement("link",(0,o.A)({key:e,rel:"prefetch",as:"fetch",href:e},a))),x.map(e=>n.createElement("link",(0,o.A)({key:e,rel:"modulepreload",href:e},a))),b.map(e=>{let{key:t,link:r}=e;return n.createElement("link",(0,o.A)({key:t,nonce:a.nonce},r))}))}var ot=!1;function it(e){let{manifest:t,serverHandoffString:r,isSpaMode:a,renderMeta:l,routeDiscovery:c,ssr:d}=et(),{router:u,static:h,staticContext:m}=Je(),{matches:g}=Qe(),f=n.useContext(ee),p=Xe(c,d);l&&(l.didRenderScripts=!0);let x=rt(g,null,a);n.useEffect(()=>{ot=!0},[]);let b=n.useMemo(()=>{var a;if(f)return null;let l=m?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==(a=t.hmr)&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(p?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(x.map((e,r)=>{let n="route".concat(r),a=t.routes[e.route.id];Ue(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:i,hydrateFallbackModule:l,module:c}=a,d=[...s?[{module:s,varName:"".concat(n,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(n,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(n,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(n,"_HydrateFallback")}]:[],{module:c,varName:"".concat(n,"_main")}];return 1===d.length?"import * as ".concat(n," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(n," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(p?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:r}=e,n=s(e,i),a=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let r=j(t.routes,e,t.basename);r&&r.forEach(e=>a.add(e.route.id))});let d=[...a].reduce((e,t)=>Object.assign(e,{[t]:n.routes[t]}),{});return(0,o.A)((0,o.A)({},n),{},{routes:d,sri:!!r||void 0})}(t,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(x.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return n.createElement(n.Fragment,null,n.createElement("script",(0,o.A)((0,o.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),n.createElement("script",(0,o.A)((0,o.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:c},type:"module",async:!0})))},[]),y=ot||f?[]:(v=t.entry.imports.concat(Ke(x,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let k="object"===typeof t.sri?t.sri:{};return Ae(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ot||f?null:n.createElement(n.Fragment,null,"object"===typeof t.sri?n.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:k})}}):null,p?null:n.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:k[t.url],suppressHydrationWarning:!0}),n.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:k[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>n.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:k[t],suppressHydrationWarning:!0})),b)}function lt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}n.Component;function ct(e){let{error:t,isOutsideRemixApp:r}=e;console.error(t);let a,s=n.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Y(t))return n.createElement(dt,{title:"Unhandled Thrown Response!"},n.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)a=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);a=new Error(e)}return n.createElement(dt,{title:"Application Error!",isOutsideRemixApp:r},n.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),n.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),s)}function dt(e){var t;let{title:r,renderScripts:a,isOutsideRemixApp:s,children:o}=e,{routeModules:i}=et();return null!==(t=i.root)&&void 0!==t&&t.Layout&&!s?o:n.createElement("html",{lang:"en"},n.createElement("head",null,n.createElement("meta",{charSet:"utf-8"}),n.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),n.createElement("title",null,r)),n.createElement("body",null,n.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,a?n.createElement(it,null):null)))}var ut="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ut&&(window.__reactRouterVersion="7.9.1")}catch(JE){}function ht(e){let{basename:t,children:r,window:a}=e,s=n.useRef();null==s.current&&(s.current=g({window:a,v5Compat:!0}));let o=s.current,[i,l]=n.useState({action:o.action,location:o.location}),c=n.useCallback(e=>{n.startTransition(()=>l(e))},[l]);return n.useLayoutEffect(()=>o.listen(c),[o,c]),n.createElement(Le,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:o})}var mt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=n.forwardRef(function(e,t){let r,{onClick:a,discover:i="render",prefetch:l="none",relative:c,reloadDocument:u,replace:h,state:m,target:g,to:x,preventScrollReset:b,viewTransition:v}=e,k=s(e,d),{basename:w}=n.useContext(ae),j="string"===typeof x&&mt.test(x),N=!1;if("string"===typeof x&&j&&(r=x,ut))try{let e=new URL(window.location.href),t=x.startsWith("//")?new URL(e.protocol+x):new URL(x),r=B(t.pathname,w);t.origin===e.origin&&null!=r?x=r+t.search+t.hash:N=!0}catch(JE){p(!1,'<Link to="'.concat(x,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(le(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=n.useContext(ae),{hash:s,pathname:o,search:i}=me(e,{relative:t}),l=o;return"/"!==r&&(l="/"===o?r:V([r,o])),a.createHref({pathname:l,search:i,hash:s})}(x,{relative:c}),[C,E,A]=function(e,t){let r=n.useContext(Ze),[a,s]=n.useState(!1),[o,i]=n.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=n.useRef(null);n.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),n.useEffect(()=>{if(a){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[a]);let g=()=>{s(!0)},f=()=>{s(!1),i(!1)};return r?"intent"!==e?[o,m,{}]:[o,m,{onFocus:tt(l,g),onBlur:tt(c,f),onMouseEnter:tt(d,g),onMouseLeave:tt(u,f),onTouchStart:tt(h,g)}]:[!1,m,{}]}(l,k),_=function(e){let{target:t,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=he(),c=ce(),d=me(e,{relative:o});return n.useCallback(n=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(n,t)){n.preventDefault();let t=void 0!==r?r:y(c)===y(d);l(e,{replace:t,state:a,preventScrollReset:s,relative:o,viewTransition:i})}},[c,l,d,r,a,t,e,s,o,i])}(x,{replace:h,state:m,target:g,preventScrollReset:b,relative:c,viewTransition:v});let T=n.createElement("a",(0,o.A)((0,o.A)((0,o.A)({},k),A),{},{href:r||S,onClick:N||u?a:function(e){a&&a(e),e.defaultPrevented||_(e)},ref:lt(t,E),target:g,"data-discover":j||"render"!==i?void 0:"true"}));return C&&!j?n.createElement(n.Fragment,null,T,n.createElement(nt,{page:S})):T});gt.displayName="Link";var ft=n.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:l=!1,style:c,to:d,viewTransition:h,children:m}=e,g=s(e,u),p=me(d,{relative:g.relative}),x=ce(),b=n.useContext(Z),{navigator:y,basename:v}=n.useContext(ae),k=null!=b&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.useContext(te);f(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=bt("useViewTransitionState"),s=me(e,{relative:t});if(!r.isTransitioning)return!1;let o=B(r.currentLocation.pathname,a)||r.currentLocation.pathname,i=B(r.nextLocation.pathname,a)||r.nextLocation.pathname;return null!=P(s.pathname,i)||null!=P(s.pathname,o)}(p)&&!0===h,w=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,j=x.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(j=j.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&v&&(N=B(N,v)||N);const S="/"!==w&&w.endsWith("/")?w.length-1:w.length;let C,E=j===w||!l&&j.startsWith(w)&&"/"===j.charAt(S),A=null!=N&&(N===w||!l&&N.startsWith(w)&&"/"===N.charAt(w.length)),_={isActive:E,isPending:A,isTransitioning:k},T=E?r:void 0;C="function"===typeof i?i(_):[i,E?"active":null,A?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let L="function"===typeof c?c(_):c;return n.createElement(gt,(0,o.A)((0,o.A)({},g),{},{"aria-current":T,className:C,ref:t,style:L,to:d,viewTransition:h}),"function"===typeof m?m(_):m)});ft.displayName="NavLink";var pt=n.forwardRef((e,t)=>{let{discover:r="render",fetcherKey:a,navigate:i,reloadDocument:l,replace:c,state:d,method:u=De,action:m,onSubmit:g,relative:p,preventScrollReset:x,viewTransition:b}=e,v=s(e,h),k=wt(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=n.useContext(ae),a=n.useContext(oe);f(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i=(0,o.A)({},me(e||".",{relative:t})),l=ce();if(null==e){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();i.search=r?"?".concat(r):""}}e&&"."!==e||!s.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(i.pathname="/"===i.pathname?r:V([r,i.pathname]));return y(i)}(m,{relative:p}),j="get"===u.toLowerCase()?"get":"post",N="string"===typeof m&&mt.test(m);return n.createElement("form",(0,o.A)((0,o.A)({ref:t,method:j,action:w,onSubmit:l?g:e=>{if(g&&g(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;k(t||e.currentTarget,{fetcherKey:a,method:r,navigate:i,replace:c,state:d,relative:p,preventScrollReset:x,viewTransition:b})}},v),{},{"data-discover":N||"render"!==r?void 0:"true"}))});function xt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function bt(e){let t=n.useContext(Q);return f(t,xt(e)),t}function yt(e){p("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=n.useRef(Fe(e)),r=n.useRef(!1),a=ce(),s=n.useMemo(()=>function(e,t){let r=Fe(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(a.search,r.current?null:t.current),[a.search]),o=he(),i=n.useCallback((e,t)=>{const n=Fe("function"===typeof e?e(new URLSearchParams(s)):e);r.current=!0,o("?"+n,t)},[o,s]);return[s,i]}pt.displayName="Form";var vt=0,kt=()=>"__".concat(String(++vt),"__");function wt(){let{router:e}=bt("useSubmit"),{basename:t}=n.useContext(ae),r=je("useRouteId");return n.useCallback(async function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:i,formData:l,body:c}=We(n,t);if(!1===a.navigate){let t=a.fetcherKey||kt();await e.fetch(t,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||o,formEncType:a.encType||i,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||o,formEncType:a.encType||i,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}var jt=r(237);function Nt(e){e()}var St={notify(){},get:()=>[]};function Ct(e,t){let r,n=St,a=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function i(){a++,r||(r=t?t.addNestedSub(o):e.subscribe(o),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Nt(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){n&&null!==e&&(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,r&&0===a&&(r(),r=void 0,n.clear(),n=St)}const c={addNestedSub:function(e){i();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,i())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>n};return c}var Et=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),At=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),_t=(()=>Et||At?n.useLayoutEffect:n.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Tt=Symbol.for("react-redux-context"),Lt="undefined"!==typeof globalThis?globalThis:{};function Mt(){var e;if(!n.createContext)return{};const t=null!==(e=Lt[Tt])&&void 0!==e?e:Lt[Tt]=new Map;let r=t.get(n.createContext);return r||(r=n.createContext(null),t.set(n.createContext,r)),r}var Ot=Mt();var Dt=function(e){const{children:t,context:r,serverState:a,store:s}=e,o=n.useMemo(()=>{const e=Ct(s);return{store:s,subscription:e,getServerState:a?()=>a:void 0}},[s,a]),i=n.useMemo(()=>s.getState(),[s]);_t(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,i]);const l=r||Ot;return n.createElement(l.Provider,{value:o},t)};function Rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return function(){return n.useContext(e)}}var Pt=Rt();function Ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;const t=e===Ot?Pt:Rt(e),r=()=>{const{store:e}=t();return e};return Object.assign(r,{withTypes:()=>r}),r}var It=Ft();function Bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;const t=e===Ot?It:Ft(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var zt=Bt(),Wt=(e,t)=>e===t;function Ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;const t=e===Ot?Pt:Rt(e),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:a=Wt}="function"===typeof r?{equalityFn:r}:r;const s=t(),{store:o,subscription:i,getServerState:l}=s,c=(n.useRef(!0),n.useCallback({[e.name]:t=>e(t)}[e.name],[e])),d=(0,jt.useSyncExternalStoreWithSelector)(i.addNestedSub,o.getState,l||o.getState,c,a);return n.useDebugValue(d),d};return Object.assign(r,{withTypes:()=>r}),r}var Ht=Ut();function Vt(e){return Vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e,t){return Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kt(e,t)}function Yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xt=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=function(e,t){return!t||"object"!==Vt(t)&&"function"!==typeof t?$t(e):t}(this,(e=qt(t)).call.apply(e,[this].concat(a))),Yt($t(r),"state",{bootstrapped:!1}),Yt($t(r),"_unsubscribe",void 0),Yt($t(r),"handlePersistorState",function(){r.props.persistor.getState().bootstrapped&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}var r,n,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"===typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&Gt(r.prototype,n),a&&Gt(r,a),t}(n.PureComponent);Yt(Xt,"defaultProps",{children:null,loading:null});var Jt=r(705);function Qt(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Zt=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),er=()=>Math.random().toString(36).substring(7).split("").join("."),tr={INIT:"@@redux/INIT".concat(er()),REPLACE:"@@redux/REPLACE".concat(er()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(er())};function rr(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function nr(e,t,r){if("function"!==typeof e)throw new Error(Qt(2));if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(Qt(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(Qt(1));return r(nr)(e,t)}let n=e,a=t,s=new Map,o=s,i=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((e,t)=>{o.set(t,e)}))}function d(){if(l)throw new Error(Qt(3));return a}function u(e){if("function"!==typeof e)throw new Error(Qt(4));if(l)throw new Error(Qt(5));let t=!0;c();const r=i++;return o.set(r,e),function(){if(t){if(l)throw new Error(Qt(6));t=!1,c(),o.delete(r),s=null}}}function h(e){if(!rr(e))throw new Error(Qt(7));if("undefined"===typeof e.type)throw new Error(Qt(8));if("string"!==typeof e.type)throw new Error(Qt(17));if(l)throw new Error(Qt(9));try{l=!0,a=n(a,e)}finally{l=!1}return(s=o).forEach(e=>{e()}),e}h({type:tr.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Qt(10));n=e,h({type:tr.REPLACE})},[Zt]:function(){const e=u;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Qt(11));function r(){const e=t;e.next&&e.next(d())}r();return{unsubscribe:e(r)}},[Zt](){return this}}}}}function ar(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const n=t[s];0,"function"===typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if("undefined"===typeof r(void 0,{type:tr.INIT}))throw new Error(Qt(12));if("undefined"===typeof r(void 0,{type:tr.PROBE_UNKNOWN_ACTION()}))throw new Error(Qt(13))})}(r)}catch(JE){a=JE}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let s=!1;const o={};for(let a=0;a<n.length;a++){const i=n[a],l=r[i],c=e[i],d=l(c,t);if("undefined"===typeof d){t&&t.type;throw new Error(Qt(14))}o[i]=d,s=s||d!==c}return s=s||n.length!==Object.keys(e).length,s?o:e}}function sr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function or(e){return t=>{let{dispatch:r,getState:n}=t;return t=>a=>"function"===typeof a?a(r,n,e):t(a)}}var ir=or(),lr=or,cr=Symbol.for("immer-nothing"),dr=Symbol.for("immer-draftable"),ur=Symbol.for("immer-state");function hr(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var mr=Object.getPrototypeOf;function gr(e){return!!e&&!!e[ur]}function fr(e){var t;return!!e&&(xr(e)||Array.isArray(e)||!!e[dr]||!(null===(t=e.constructor)||void 0===t||!t[dr])||wr(e)||jr(e))}var pr=Object.prototype.constructor.toString();function xr(e){if(!e||"object"!==typeof e)return!1;const t=mr(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===pr}function br(e,t){0===yr(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function yr(e){const t=e[ur];return t?t.type_:Array.isArray(e)?1:wr(e)?2:jr(e)?3:0}function vr(e,t){return 2===yr(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kr(e,t,r){const n=yr(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function wr(e){return e instanceof Map}function jr(e){return e instanceof Set}function Nr(e){return e.copy_||e.base_}function Sr(e,t){if(wr(e))return new Map(e);if(jr(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=xr(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[ur];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(mr(e),t)}{const t=mr(e);if(null!==t&&r)return(0,o.A)({},e);const n=Object.create(t);return Object.assign(n,e)}}function Cr(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ar(e)||gr(e)||!fr(e)||(yr(e)>1&&Object.defineProperties(e,{set:{value:Er},add:{value:Er},clear:{value:Er},delete:{value:Er}}),Object.freeze(e),t&&Object.values(e).forEach(e=>Cr(e,!0))),e}function Er(){hr(2)}function Ar(e){return Object.isFrozen(e)}var _r,Tr={};function Lr(e){const t=Tr[e];return t||hr(0),t}function Mr(){return _r}function Or(e,t){t&&(Lr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Dr(e){Rr(e),e.drafts_.forEach(Fr),e.drafts_=null}function Rr(e){e===_r&&(_r=e.parent_)}function Pr(e){return _r={drafts_:[],parent_:_r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Fr(e){const t=e[ur];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Ir(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[ur].modified_&&(Dr(t),hr(4)),fr(e)&&(e=Br(t,e),t.parent_||Wr(t,e)),t.patches_&&Lr("Patches").generateReplacementPatches_(r[ur].base_,e,t.patches_,t.inversePatches_)):e=Br(t,r,[]),Dr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cr?e:void 0}function Br(e,t,r){if(Ar(t))return t;const n=t[ur];if(!n)return br(t,(a,s)=>zr(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Wr(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,s=!1;3===n.type_&&(a=new Set(t),t.clear(),s=!0),br(a,(a,o)=>zr(e,n,t,a,o,r,s)),Wr(e,t,!1),r&&e.patches_&&Lr("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function zr(e,t,r,n,a,s,o){if(gr(a)){const o=Br(e,a,s&&t&&3!==t.type_&&!vr(t.assigned_,n)?s.concat(n):void 0);if(kr(r,n,o),!gr(o))return;e.canAutoFreeze_=!1}else o&&r.add(a);if(fr(a)&&!Ar(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Br(e,a),t&&t.scope_.parent_||"symbol"===typeof n||!(wr(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||Wr(e,a)}}function Wr(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Cr(t,r)}var Ur={get(e,t){if(t===ur)return e;const r=Nr(e);if(!vr(r,t))return function(e,t,r){var n;const a=Gr(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!fr(n)?n:n===Vr(e.base_,t)?($r(e),e.copy_[t]=Kr(n,e)):n},has:(e,t)=>t in Nr(e),ownKeys:e=>Reflect.ownKeys(Nr(e)),set(e,t,r){const n=Gr(Nr(e),t);if(null!==n&&void 0!==n&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Vr(Nr(e),t),o=null===n||void 0===n?void 0:n[ur];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(s=n)?0!==a||1/a===1/s:a!==a&&s!==s)&&(void 0!==r||vr(e.base_,t)))return!0;$r(e),qr(e)}var a,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Vr(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,$r(e),qr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Nr(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){hr(11)},getPrototypeOf:e=>mr(e.base_),setPrototypeOf(){hr(12)}},Hr={};function Vr(e,t){const r=e[ur];return(r?Nr(r):e)[t]}function Gr(e,t){if(!(t in e))return;let r=mr(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=mr(r)}}function qr(e){e.modified_||(e.modified_=!0,e.parent_&&qr(e.parent_))}function $r(e){e.copy_||(e.copy_=Sr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}br(Ur,(e,t)=>{Hr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Hr.deleteProperty=function(e,t){return Hr.set.call(this,e,t,void 0)},Hr.set=function(e,t,r){return Ur.set.call(this,e[0],t,r,e[0])};function Kr(e,t){const r=wr(e)?Lr("MapSet").proxyMap_(e,t):jr(e)?Lr("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Mr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=Ur;r&&(a=[n],s=Hr);const{revoke:o,proxy:i}=Proxy.revocable(a,s);return n.draft_=i,n.revoke_=o,i}(e,t);return(t?t.scope_:Mr()).drafts_.push(r),r}function Yr(e){if(!fr(e)||Ar(e))return e;const t=e[ur];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Sr(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Sr(e,!0);return br(r,(e,t)=>{kr(r,e,Yr(t))}),t&&(t.finalized_=!1),r}var Xr=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"===typeof e&&"function"!==typeof t){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return n.produce(e,e=>t.call(this,e,...s))}}let n;if("function"!==typeof t&&hr(6),void 0!==r&&"function"!==typeof r&&hr(7),fr(e)){const a=Pr(this),s=Kr(e,void 0);let o=!0;try{n=t(s),o=!1}finally{o?Dr(a):Rr(a)}return Or(a,r),Ir(n,a)}if(!e||"object"!==typeof e){if(n=t(e),void 0===n&&(n=e),n===cr&&(n=void 0),this.autoFreeze_&&Cr(n,!0),r){const t=[],a=[];Lr("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}hr(1)},this.produceWithPatches=(e,r)=>{if("function"===typeof e)return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;return[this.produce(e,r,(e,t)=>{n=e,a=t}),n,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fr(e)||hr(8),gr(e)&&(e=function(e){gr(e)||hr(10);return Yr(e)}(e));const t=Pr(this),r=Kr(e,void 0);return r[ur].isManual_=!0,Rr(t),r}finishDraft(e,t){const r=e&&e[ur];r&&r.isManual_||hr(9);const{scope_:n}=r;return Or(n,t),Ir(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=Lr("Patches").applyPatches_;return gr(e)?n(e,t):this.produce(e,e=>n(e,t))}},Jr=Xr.produce;const Qr=["reducerPath"];var Zr="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?sr:sr.apply(null,arguments)},en=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function tn(e,t){function r(){if(t){let r=t(...arguments);if(!r)throw new Error(On(0));return(0,o.A)((0,o.A)({type:e,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=()=>"".concat(e),r.type=e,r.match=t=>function(e){return rr(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,r}var rn=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?new e(...r[0].concat(this)):new e(...r.concat(this))}};function nn(e){return fr(e)?Jr(e,()=>{}):e}function an(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var sn="RTK_autoBatch",on=e=>t=>{setTimeout(t,e)},ln=e=>function(t){const{autoBatch:r=!0}=null!==t&&void 0!==t?t:{};let n=new rn(e);return r&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const r=t(...arguments);let n=!0,a=!1,s=!1;const o=new Set,i="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:on(10):"callback"===e.type?e.queueNotification:on(e.timeout),l=()=>{s=!1,a&&(a=!1,o.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>n&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return n=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[sn]),a=!n,a&&(s||(s=!0,i(l))),r.dispatch(e)}finally{n=!0}}})}}("object"===typeof r?r:void 0)),n};function cn(e){const t={},r=[];let n;const a={addCase(e,r){const n="string"===typeof e?e:e.type;if(!n)throw new Error(On(28));if(n in t)throw new Error(On(29));return t[n]=r,a},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),a),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}var dn=(e,t)=>en(e)?e.match(t):e(t);function un(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.some(t=>dn(t,e))}var hn=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},mn=["name","message","stack","code"],gn=class{constructor(e,t){(0,Jt.A)(this,"_type",void 0),this.payload=e,this.meta=t}},fn=class{constructor(e,t){(0,Jt.A)(this,"_type",void 0),this.payload=e,this.meta=t}},pn=e=>{if("object"===typeof e&&null!==e){const t={};for(const r of mn)"string"===typeof e[r]&&(t[r]=e[r]);return t}return{message:String(e)}},xn="External signal was aborted",bn=(()=>{function e(e,t,r){const n=tn(e+"/fulfilled",(e,t,r,n)=>({payload:e,meta:(0,o.A)((0,o.A)({},n||{}),{},{arg:r,requestId:t,requestStatus:"fulfilled"})})),a=tn(e+"/pending",(e,t,r)=>({payload:void 0,meta:(0,o.A)((0,o.A)({},r||{}),{},{arg:t,requestId:e,requestStatus:"pending"})})),s=tn(e+"/rejected",(e,t,n,a,s)=>({payload:a,error:(r&&r.serializeError||pn)(e||"Rejected"),meta:(0,o.A)((0,o.A)({},s||{}),{},{arg:n,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null===e||void 0===e?void 0:e.name),condition:"ConditionError"===(null===e||void 0===e?void 0:e.name)})}));return Object.assign(function(e){let{signal:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i,l,c)=>{const d=null!==r&&void 0!==r&&r.idGenerator?r.idGenerator(e):hn(),u=new AbortController;let h,m;function g(e){m=e,u.abort()}o&&(o.aborted?g(xn):o.addEventListener("abort",()=>g(xn),{once:!0}));const f=async function(){let o;try{var f,p;let s=null===r||void 0===r||null===(f=r.condition)||void 0===f?void 0:f.call(r,e,{getState:l,extra:c});if(null!==(x=s)&&"object"===typeof x&&"function"===typeof x.then&&(s=await s),!1===s||u.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const b=new Promise((e,t)=>{h=()=>{t({name:"AbortError",message:m||"Aborted"})},u.signal.addEventListener("abort",h)});i(a(d,e,null===r||void 0===r||null===(p=r.getPendingMeta)||void 0===p?void 0:p.call(r,{requestId:d,arg:e},{getState:l,extra:c}))),o=await Promise.race([b,Promise.resolve(t(e,{dispatch:i,getState:l,extra:c,requestId:d,signal:u.signal,abort:g,rejectWithValue:(e,t)=>new gn(e,t),fulfillWithValue:(e,t)=>new fn(e,t)})).then(t=>{if(t instanceof gn)throw t;return t instanceof fn?n(t.payload,d,e,t.meta):n(t,d,e)})])}catch(b){o=b instanceof gn?s(null,d,e,b.payload,b.meta):s(b,d,e)}finally{h&&u.signal.removeEventListener("abort",h)}var x;return r&&!r.dispatchConditionRejection&&s.match(o)&&o.meta.condition||i(o),o}();return Object.assign(f,{abort:g,requestId:d,arg:e,unwrap:()=>f.then(yn)})}},{pending:a,rejected:s,fulfilled:n,settled:un(s,n),typePrefix:e})}return e.withTypes=()=>e,e})();function yn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var vn=Symbol.for("rtk-slice-createasyncthunk");function kn(e,t){return"".concat(e,"/").concat(t)}function wn(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[vn];return function(e){const{name:t,reducerPath:n=t}=e;if(!t)throw new Error(On(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return(0,o.A)({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(e,t){const r="string"===typeof e?e:e.type;if(!r)throw new Error(On(12));if(r in l.sliceCaseReducersByType)throw new Error(On(13));return l.sliceCaseReducersByType[r]=t,c},addMatcher:(e,t)=>(l.sliceMatchers.push({matcher:e,reducer:t}),c),exposeAction:(e,t)=>(l.actionCreators[e]=t,c),exposeCaseReducer:(e,t)=>(l.sliceCaseReducersByName[e]=t,c)};function d(){const[t={},r=[],n]="function"===typeof e.extraReducers?cn(e.extraReducers):[e.extraReducers],a=(0,o.A)((0,o.A)({},t),l.sliceCaseReducersByType);return function(e,t){let r,[n,a,s]=cn(t);if("function"===typeof e)r=()=>nn(e());else{const t=nn(e);r=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1?arguments[1]:void 0,o=[n[t.type],...a.filter(e=>{let{matcher:r}=e;return r(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===o.filter(e=>!!e).length&&(o=[s]),o.reduce((e,r)=>{if(r){if(gr(e)){const n=r(e,t);return void 0===n?e:n}if(fr(e))return Jr(e,e=>r(e,t));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return o.getInitialState=r,o}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of l.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}i.forEach(n=>{const s=a[n],o={reducerName:n,type:kn(t,n),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,r){let n,a,{type:s,reducerName:o,createNotation:i}=e;if("reducer"in t){if(i&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(On(17));n=t.reducer,a=t.prepare}else n=t;r.addCase(s,n).exposeCaseReducer(o,n).exposeAction(o,a?tn(s,a):tn(s))}(o,s,c):function(e,t,r,n){let{type:a,reducerName:s}=e;if(!n)throw new Error(On(18));const{payloadCreator:o,fulfilled:i,pending:l,rejected:c,settled:d,options:u}=t,h=n(a,o,u);r.exposeAction(s,h),i&&r.addCase(h.fulfilled,i);l&&r.addCase(h.pending,l);c&&r.addCase(h.rejected,c);d&&r.addMatcher(h.settled,d);r.exposeCaseReducer(s,{fulfilled:i||Sn,pending:l||Sn,rejected:c||Sn,settled:d||Sn})}(o,s,c,r)});const u=e=>e,h=new Map,m=new WeakMap;let g;function f(e,t){return g||(g=d()),g(e,t)}function p(){return g||(g=d()),g.getInitialState()}function x(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){let a=e[t];return"undefined"===typeof a&&r&&(a=an(m,n,p)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const n=an(h,r,()=>new WeakMap);return an(n,t,()=>{const n={};for(const[s,o]of Object.entries(null!==(a=e.selectors)&&void 0!==a?a:{})){var a;n[s]=jn(o,t,()=>an(m,t,p),r)}return n})}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}const b=(0,o.A)((0,o.A)({name:t,reducer:f,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:p},x(n)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:r}=t,a=s(t,Qr);const i=null!==r&&void 0!==r?r:n;return e.inject({reducerPath:i,reducer:f},a),(0,o.A)((0,o.A)({},b),x(i,!0))}});return b}}function jn(e,t,r,n){function a(a){let s=t(a);"undefined"===typeof s&&n&&(s=r());for(var o=arguments.length,i=new Array(o>1?o-1:0),l=1;l<o;l++)i[l-1]=arguments[l];return e(s,...i)}return a.unwrapped=e,a}var Nn=wn();function Sn(){}var Cn="listener",En="completed",An="cancelled";"task-".concat(An),"task-".concat(En),"".concat(Cn,"-").concat(An),"".concat(Cn,"-").concat(En);var{assign:_n}=Object,Tn="listenerMiddleware",Ln=_n(tn("".concat(Tn,"/add")),{withTypes:()=>Ln}),Mn=("".concat(Tn,"/removeAll"),_n(tn("".concat(Tn,"/remove")),{withTypes:()=>Mn}));Symbol.for("rtk-state-proxy-original");function On(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Dn="persist:",Rn="persist/FLUSH",Pn="persist/REHYDRATE",Fn="persist/PAUSE",In="persist/PERSIST",Bn="persist/PURGE",zn="persist/REGISTER";function Wn(e){return Wn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vn(e,t,r,n){n.debug;var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(r,!0).forEach(function(t){Hn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r);return e&&"object"===Wn(e)&&Object.keys(e).forEach(function(n){"_persist"!==n&&t[n]===r[n]&&(a[n]=e[n])}),a}function Gn(e){var t,r=e.blacklist||null,n=e.whitelist||null,a=e.transforms||[],s=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:Dn).concat(e.key),i=e.storage;t=!1===e.serialize?function(e){return e}:"function"===typeof e.serialize?e.serialize:qn;var l=e.writeFailHandler||null,c={},d={},u=[],h=null,m=null;function g(){if(0===u.length)return h&&clearInterval(h),void(h=null);var e=u.shift(),r=a.reduce(function(t,r){return r.in(t,e,c)},c[e]);if(void 0!==r)try{d[e]=t(r)}catch(n){console.error("redux-persist/createPersistoid: error serializing state",n)}else delete d[e];0===u.length&&(Object.keys(d).forEach(function(e){void 0===c[e]&&delete d[e]}),m=i.setItem(o,t(d)).catch(p))}function f(e){return(!n||-1!==n.indexOf(e)||"_persist"===e)&&(!r||-1===r.indexOf(e))}function p(e){l&&l(e)}return{update:function(e){Object.keys(e).forEach(function(t){f(t)&&c[t]!==e[t]&&-1===u.indexOf(t)&&u.push(t)}),Object.keys(c).forEach(function(t){void 0===e[t]&&f(t)&&-1===u.indexOf(t)&&void 0!==c[t]&&u.push(t)}),null===h&&(h=setInterval(g,s)),c=e},flush:function(){for(;0!==u.length;)g();return m||Promise.resolve()}}}function qn(e){return JSON.stringify(e)}function $n(e){var t,r=e.transforms||[],n="".concat(void 0!==e.keyPrefix?e.keyPrefix:Dn).concat(e.key),a=e.storage;e.debug;return t=!1===e.deserialize?function(e){return e}:"function"===typeof e.deserialize?e.deserialize:Kn,a.getItem(n).then(function(e){if(e)try{var n={},a=t(e);return Object.keys(a).forEach(function(e){n[e]=r.reduceRight(function(t,r){return r.out(t,e,a)},t(a[e]))}),n}catch(s){throw s}})}function Kn(e){return JSON.parse(e)}function Yn(e){0}function Xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xn(r,!0).forEach(function(t){Qn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xn(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ea(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(r,!0).forEach(function(t){na(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function na(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aa={registry:[],bootstrapped:!1},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zn:return ra({},e,{registry:[].concat(ea(e.registry),[t.key])});case Pn:var r=e.registry.indexOf(t.key),n=ea(e.registry);return n.splice(r,1),ra({},e,{registry:n,bootstrapped:0===n.length});default:return e}};var oa=r(766);const ia=Nn({name:"auth",initialState:{user:null,isAuthenticated:!1,token:null,isLoading:!1,error:null},reducers:{loginStart:e=>{e.isLoading=!0,e.error=null},loginSuccess:(e,t)=>{e.isLoading=!1,e.isAuthenticated=!0,e.user=t.payload.user,e.token=t.payload.token,e.error=null,sessionStorage.setItem("opti_connect_token",t.payload.token),sessionStorage.setItem("opti_connect_user",JSON.stringify(t.payload.user)),localStorage.removeItem("opti_connect_token"),localStorage.removeItem("opti_connect_user"),console.log("\u2705 User logged in:",t.payload.user.username)},loginFailure:(e,t)=>{e.isLoading=!1,e.isAuthenticated=!1,e.user=null,e.token=null,e.error=t.payload,sessionStorage.removeItem("opti_connect_token"),sessionStorage.removeItem("opti_connect_user"),localStorage.removeItem("opti_connect_token"),localStorage.removeItem("opti_connect_user")},logout:e=>{e.isAuthenticated=!1,e.user=null,e.token=null,e.error=null,sessionStorage.removeItem("opti_connect_token"),sessionStorage.removeItem("opti_connect_user"),localStorage.removeItem("opti_connect_token"),localStorage.removeItem("opti_connect_user"),console.log("\u2705 User logged out")},clearError:e=>{e.error=null},updateUser:(e,t)=>{e.user&&(e.user=(0,o.A)((0,o.A)({},e.user),t.payload),sessionStorage.setItem("opti_connect_user",JSON.stringify(e.user)),console.log("\u2705 User updated:",e.user.username))}}}),{loginStart:la,loginSuccess:ca,loginFailure:da,logout:ua,clearError:ha,updateUser:ma}=ia.actions,ga=ia.reducer,fa=Nn({name:"map",initialState:{mapInstance:null,isMapLoaded:!1,viewport:{center:{lat:28.6139,lng:77.209},zoom:6},mapType:"roadmap",markers:[],layers:[],activeLayerIds:[],isDrawingMode:!1,drawingType:null,drawnShapes:[],activeGISTool:null,selectedMarkerId:null,infoWindowOpen:!1,searchResults:[],isSearching:!1,clusteringEnabled:!0,maxMarkersVisible:1e3},reducers:{setMapInstance:(e,t)=>{e.mapInstance=t.payload,e.isMapLoaded=!!t.payload},setViewport:(e,t)=>{e.viewport=(0,o.A)((0,o.A)({},e.viewport),t.payload)},setMapType:(e,t)=>{e.mapType=t.payload},addMarker:(e,t)=>{e.markers.push(t.payload)},removeMarker:(e,t)=>{e.markers=e.markers.filter(e=>e.id!==t.payload)},updateMarker:(e,t)=>{const r=e.markers.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.markers[r]=(0,o.A)((0,o.A)({},e.markers[r]),t.payload.updates))},setMarkers:(e,t)=>{e.markers=t.payload},addLayer:(e,t)=>{e.layers.push(t.payload),t.payload.visible&&e.activeLayerIds.push(t.payload.id)},removeLayer:(e,t)=>{e.layers=e.layers.filter(e=>e.id!==t.payload),e.activeLayerIds=e.activeLayerIds.filter(e=>e!==t.payload)},toggleLayer:(e,t)=>{const r=e.layers.find(e=>e.id===t.payload);r&&(r.visible=!r.visible,r.visible?e.activeLayerIds.push(t.payload):e.activeLayerIds=e.activeLayerIds.filter(e=>e!==t.payload))},setDrawingMode:(e,t)=>{e.isDrawingMode=t.payload,t.payload||(e.drawingType=null)},setDrawingType:(e,t)=>{e.drawingType=t.payload,e.isDrawingMode=!!t.payload},addDrawnShape:(e,t)=>{e.drawnShapes.push(t.payload)},clearDrawnShapes:e=>{e.drawnShapes=[]},setActiveGISTool:(e,t)=>{e.activeGISTool=t.payload},selectMarker:(e,t)=>{e.selectedMarkerId=t.payload,e.infoWindowOpen=!!t.payload},closeInfoWindow:e=>{e.infoWindowOpen=!1,e.selectedMarkerId=null},setSearching:(e,t)=>{e.isSearching=t.payload},setSearchResults:(e,t)=>{e.searchResults=t.payload,e.isSearching=!1},toggleClustering:e=>{e.clusteringEnabled=!e.clusteringEnabled},setMaxMarkersVisible:(e,t)=>{e.maxMarkersVisible=t.payload}}}),{setMapInstance:pa,setViewport:xa,setMapType:ba,addMarker:ya,removeMarker:va,updateMarker:ka,setMarkers:wa,addLayer:ja,removeLayer:Na,toggleLayer:Sa,setDrawingMode:Ca,setDrawingType:Ea,addDrawnShape:Aa,clearDrawnShapes:_a,setActiveGISTool:Ta,selectMarker:La,closeInfoWindow:Ma,setSearching:Oa,setSearchResults:Da,toggleClustering:Ra,setMaxMarkersVisible:Pa}=fa.actions,Fa=fa.reducer,Ia={appMode:"production",isFullscreen:!1,isDarkMode:(()=>{const e=localStorage.getItem("opti_connect_theme");return"dark"===e||"light"!==e&&window.matchMedia("(prefers-color-scheme: dark)").matches})(),theme:localStorage.getItem("opti_connect_theme")||"auto",sidebarOpen:!0,sidebarCollapsed:!1,isGlobalLoading:!1,loadingMessage:"",notifications:[],modal:{isOpen:!1,type:null},panels:[],activeTab:"dashboard",breadcrumbs:[{label:"Dashboard",path:"/dashboard"}],isMobileMenuOpen:!1,showFPS:!1,showDebugInfo:!1};let Ba=0;const za=Nn({name:"ui",initialState:Ia,reducers:{setAppMode:(e,t)=>{e.appMode=t.payload},toggleFullscreen:e=>{e.isFullscreen=!e.isFullscreen},setFullscreen:(e,t)=>{e.isFullscreen=t.payload},toggleDarkMode:e=>{e.isDarkMode=!e.isDarkMode,e.theme=e.isDarkMode?"dark":"light",localStorage.setItem("opti_connect_theme",e.theme)},setTheme:(e,t)=>{e.theme=t.payload,"auto"===t.payload?e.isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches:e.isDarkMode="dark"===t.payload,localStorage.setItem("opti_connect_theme",t.payload)},toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},setSidebarCollapsed:(e,t)=>{e.sidebarCollapsed=t.payload},setGlobalLoading:(e,t)=>{e.isGlobalLoading=t.payload.loading,e.loadingMessage=t.payload.message||""},addNotification:(e,t)=>{var r,n;const a=(0,o.A)((0,o.A)({},t.payload),{},{id:"notification_".concat(Ba++),timestamp:Date.now(),autoClose:null===(r=t.payload.autoClose)||void 0===r||r,duration:null!==(n=t.payload.duration)&&void 0!==n?n:5e3});e.notifications.push(a)},removeNotification:(e,t)=>{e.notifications=e.notifications.filter(e=>e.id!==t.payload)},clearNotifications:e=>{e.notifications=[]},openModal:(e,t)=>{e.modal={isOpen:!0,type:t.payload.type,data:t.payload.data}},closeModal:e=>{e.modal={isOpen:!1,type:null,data:void 0}},addPanel:(e,t)=>{const r=(0,o.A)((0,o.A)({},t.payload),{},{id:"panel_".concat(Date.now())});e.panels.push(r)},updatePanel:(e,t)=>{const r=e.panels.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.panels[r]=(0,o.A)((0,o.A)({},e.panels[r]),t.payload.updates))},removePanel:(e,t)=>{e.panels=e.panels.filter(e=>e.id!==t.payload)},setActiveTab:(e,t)=>{e.activeTab=t.payload},setBreadcrumbs:(e,t)=>{e.breadcrumbs=t.payload},toggleMobileMenu:e=>{e.isMobileMenuOpen=!e.isMobileMenuOpen},setMobileMenuOpen:(e,t)=>{e.isMobileMenuOpen=t.payload},toggleFPS:e=>{e.showFPS=!e.showFPS},toggleDebugInfo:e=>{e.showDebugInfo=!e.showDebugInfo}}}),{setAppMode:Wa,toggleFullscreen:Ua,setFullscreen:Ha,toggleDarkMode:Va,setTheme:Ga,toggleSidebar:qa,setSidebarCollapsed:$a,setGlobalLoading:Ka,addNotification:Ya,removeNotification:Xa,clearNotifications:Ja,openModal:Qa,closeModal:Za,addPanel:es,updatePanel:ts,removePanel:rs,setActiveTab:ns,setBreadcrumbs:as,toggleMobileMenu:ss,setMobileMenuOpen:os,toggleFPS:is,toggleDebugInfo:ls}=za.actions,cs=za.reducer,ds={companies:[],towerTypes:[],statusFilters:["active"],dateRange:null,signalStrengthRange:{min:0,max:100},geoBounds:null};let us=0;const hs=Nn({name:"data",initialState:{towers:[],coverage:[],isLoading:!1,loadingMessage:"",lastSync:null,filters:ds,searchQuery:"",filteredTowerIds:[],importJobs:[],activeImportId:null,dataCacheExpiry:3e5,isDataStale:!1,stats:{totalTowers:0,activeTowers:0,companyCounts:{},typeCounts:{},coverageStats:{}},errors:[]},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload.loading,e.loadingMessage=t.payload.message||""},setTowers:(e,t)=>{e.towers=t.payload,e.lastSync=(new Date).toISOString(),e.isDataStale=!1,e.stats.totalTowers=t.payload.length,e.stats.activeTowers=t.payload.filter(e=>"active"===e.status).length,e.stats.companyCounts=t.payload.reduce((e,t)=>(e[t.company]=(e[t.company]||0)+1,e),{}),e.stats.typeCounts=t.payload.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{})},addTower:(e,t)=>{e.towers.push(t.payload),e.stats.totalTowers+=1,"active"===t.payload.status&&(e.stats.activeTowers+=1)},updateTower:(e,t)=>{const r=e.towers.findIndex(e=>e.id===t.payload.id);if(-1!==r){const n=e.towers[r];e.towers[r]=(0,o.A)((0,o.A)({},n),t.payload.updates),t.payload.updates.status&&n.status!==t.payload.updates.status&&("active"===n.status&&(e.stats.activeTowers-=1),"active"===t.payload.updates.status&&(e.stats.activeTowers+=1))}},removeTower:(e,t)=>{const r=e.towers.find(e=>e.id===t.payload);e.towers=e.towers.filter(e=>e.id!==t.payload),r&&(e.stats.totalTowers-=1,"active"===r.status&&(e.stats.activeTowers-=1))},setCoverage:(e,t)=>{e.coverage=t.payload,e.stats.coverageStats=t.payload.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{})},addCoverage:(e,t)=>{e.coverage.push(t.payload)},setFilters:(e,t)=>{e.filters=(0,o.A)((0,o.A)({},e.filters),t.payload)},resetFilters:e=>{e.filters=ds,e.filteredTowerIds=[]},setSearchQuery:(e,t)=>{e.searchQuery=t.payload},setFilteredTowerIds:(e,t)=>{e.filteredTowerIds=t.payload},addImportJob:(e,t)=>{e.importJobs.push(t.payload),e.activeImportId=t.payload.id},updateImportJob:(e,t)=>{const r=e.importJobs.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.importJobs[r]=(0,o.A)((0,o.A)({},e.importJobs[r]),t.payload.updates),"completed"!==t.payload.updates.status&&"failed"!==t.payload.updates.status||(e.activeImportId=null))},removeImportJob:(e,t)=>{e.importJobs=e.importJobs.filter(e=>e.id!==t.payload),e.activeImportId===t.payload&&(e.activeImportId=null)},markDataStale:e=>{e.isDataStale=!0},setCacheExpiry:(e,t)=>{e.dataCacheExpiry=t.payload},addError:(e,t)=>{e.errors.push({id:"error_".concat(us++),message:t.payload.message,timestamp:Date.now(),type:t.payload.type})},removeError:(e,t)=>{e.errors=e.errors.filter(e=>e.id!==t.payload)},clearErrors:e=>{e.errors=[]}}}),{setLoading:ms,setTowers:gs,addTower:fs,updateTower:ps,removeTower:xs,setCoverage:bs,addCoverage:ys,setFilters:vs,resetFilters:ks,setSearchQuery:ws,setFilteredTowerIds:js,addImportJob:Ns,updateImportJob:Ss,removeImportJob:Cs,markDataStale:Es,setCacheExpiry:As,addError:_s,removeError:Ts,clearErrors:Ls}=hs.actions,Ms=hs.reducer,Os=Nn({name:"analytics",initialState:{currentMetrics:[],performanceData:[],usageStats:[],networkAnalytics:[],businessMetrics:[],timeRange:{start:new Date(Date.now()-864e5).toISOString(),end:(new Date).toISOString(),period:"24h"},isLoading:!1,lastUpdate:null,reports:[],generatedReports:[],alerts:[],thresholds:{response_time:{max:2e3,enabled:!0},memory_usage:{max:80,enabled:!0},signal_quality:{min:70,enabled:!0},tower_downtime:{max:5,enabled:!0}},dashboardLayout:[{id:"performance_overview",type:"chart",position:{x:0,y:0},size:{width:6,height:4},config:{chartType:"line",metrics:["response_time","memory_usage"]}},{id:"network_status",type:"metric",position:{x:6,y:0},size:{width:3,height:2},config:{metric:"coverage_percentage"}},{id:"active_towers",type:"map",position:{x:0,y:4},size:{width:12,height:6},config:{showHeatmap:!0,metric:"signal_strength"}}],isExporting:!1,exportProgress:0},reducers:{addMetric:(e,t)=>{e.currentMetrics.push(t.payload),e.lastUpdate=(new Date).toISOString()},updateMetric:(e,t)=>{const r=e.currentMetrics.find(e=>e.id===t.payload.id);r&&(r.value=t.payload.value,r.timestamp=(new Date).toISOString())},setMetrics:(e,t)=>{e.currentMetrics=t.payload,e.lastUpdate=(new Date).toISOString()},addPerformanceData:(e,t)=>{e.performanceData.push(t.payload),e.performanceData.length>1e3&&(e.performanceData=e.performanceData.slice(-1e3))},setPerformanceData:(e,t)=>{e.performanceData=t.payload},addUsageStats:(e,t)=>{e.usageStats.push(t.payload)},setUsageStats:(e,t)=>{e.usageStats=t.payload},addNetworkAnalytics:(e,t)=>{e.networkAnalytics.push(t.payload)},setNetworkAnalytics:(e,t)=>{e.networkAnalytics=t.payload},addBusinessMetrics:(e,t)=>{e.businessMetrics.push(t.payload)},setBusinessMetrics:(e,t)=>{e.businessMetrics=t.payload},setTimeRange:(e,t)=>{e.timeRange=(0,o.A)((0,o.A)({},e.timeRange),t.payload)},setLoading:(e,t)=>{e.isLoading=t.payload},addReport:(e,t)=>{e.reports.push(t.payload)},updateReport:(e,t)=>{const r=e.reports.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.reports[r]=(0,o.A)((0,o.A)({},e.reports[r]),t.payload.updates))},removeReport:(e,t)=>{e.reports=e.reports.filter(e=>e.id!==t.payload)},addGeneratedReport:(e,t)=>{e.generatedReports.push(t.payload)},addAlert:(e,t)=>{const r=(0,o.A)((0,o.A)({},t.payload),{},{id:"alert_".concat(Date.now()),timestamp:(new Date).toISOString(),acknowledged:!1});e.alerts.push(r)},acknowledgeAlert:(e,t)=>{const r=e.alerts.find(e=>e.id===t.payload);r&&(r.acknowledged=!0)},resolveAlert:(e,t)=>{const r=e.alerts.find(e=>e.id===t.payload);r&&(r.resolvedAt=(new Date).toISOString())},clearResolvedAlerts:e=>{e.alerts=e.alerts.filter(e=>!e.resolvedAt)},updateThreshold:(e,t)=>{e.thresholds[t.payload.metric]?e.thresholds[t.payload.metric]=(0,o.A)((0,o.A)({},e.thresholds[t.payload.metric]),t.payload.threshold):e.thresholds[t.payload.metric]=(0,o.A)({enabled:!0},t.payload.threshold)},updateDashboardLayout:(e,t)=>{e.dashboardLayout=t.payload},addDashboardWidget:(e,t)=>{e.dashboardLayout.push(t.payload)},removeDashboardWidget:(e,t)=>{e.dashboardLayout=e.dashboardLayout.filter(e=>e.id!==t.payload)},setExporting:(e,t)=>{e.isExporting=t.payload.exporting,void 0!==t.payload.progress&&(e.exportProgress=t.payload.progress)}}}),{addMetric:Ds,updateMetric:Rs,setMetrics:Ps,addPerformanceData:Fs,setPerformanceData:Is,addUsageStats:Bs,setUsageStats:zs,addNetworkAnalytics:Ws,setNetworkAnalytics:Us,addBusinessMetrics:Hs,setBusinessMetrics:Vs,setTimeRange:Gs,setLoading:qs,addReport:$s,updateReport:Ks,removeReport:Ys,addGeneratedReport:Xs,addAlert:Js,acknowledgeAlert:Qs,resolveAlert:Zs,clearResolvedAlerts:eo,updateThreshold:to,updateDashboardLayout:ro,addDashboardWidget:no,removeDashboardWidget:ao,setExporting:so}=Os.actions,oo=Os.reducer,io=bn("user/fetchUsers",async(e,t)=>{let{getState:r}=t;return[{id:"USER001",username:"admin_raj",name:"Rajesh Kumar",email:"rajesh.kumar@jio.com",password:"********",gender:"Male",phoneNumber:"+91-9876543210",address:{street:"123 Tech Park",city:"Mumbai",state:"Maharashtra",pincode:"400001"},officeLocation:"Mumbai HQ",assignedUnder:[],role:"Admin",assignedRegions:["Maharashtra","Gujarat"],groups:[],status:"Active",loginHistory:[{timestamp:new Date("2024-01-15T10:30:00"),location:"Mumbai, India"}],company:"Jio",permissions:["all"]},{id:"USER002",username:"manager_priya",name:"Priya Sharma",email:"priya.sharma@airtel.com",password:"********",gender:"Female",phoneNumber:"+91-9876543211",address:{street:"456 Business District",city:"Delhi",state:"Delhi",pincode:"110001"},officeLocation:"Delhi Regional Office",assignedUnder:["USER001"],role:"Manager",assignedRegions:["Delhi","Punjab","Haryana"],groups:[],status:"Active",loginHistory:[{timestamp:new Date("2024-01-15T09:45:00"),location:"Delhi, India"}],company:"Airtel",permissions:["read","write","manage_team"]},{id:"USER003",username:"tech_amit",name:"Amit Singh",email:"amit.singh@vi.com",password:"********",gender:"Male",phoneNumber:"+91-9876543212",address:{street:"789 Industrial Area",city:"Bangalore",state:"Karnataka",pincode:"560001"},officeLocation:"Bangalore Tech Center",assignedUnder:["USER002"],role:"Technician",assignedRegions:["Karnataka","Tamil Nadu"],groups:[],status:"Active",loginHistory:[{timestamp:new Date("2024-01-15T08:30:00"),location:"Bangalore, India"}],company:"Vi",permissions:["read","write"]}]}),lo=bn("user/createUser",async e=>{const t="USER".concat(String(Math.floor(1e3*Math.random())).padStart(3,"0"));return(0,o.A)((0,o.A)({},e),{},{id:t,loginHistory:[]})}),co=bn("user/updateUser",async e=>{let{id:t,updates:r}=e;return{id:t,updates:r}}),uo=bn("user/deleteUser",async e=>e),ho=bn("user/bulkUpdateUsers",async e=>{let{userIds:t,updates:r}=e;return{userIds:t,updates:r}}),mo=bn("user/bulkDeleteUsers",async e=>e),go=Nn({name:"user",initialState:{users:[],selectedUsers:[],currentUser:null,isLoading:!1,error:null,filters:{search:"",role:"",status:"",assignedRegion:""},pagination:{page:1,limit:20,total:0}},reducers:{selectUser:(e,t)=>{e.selectedUsers.includes(t.payload)||e.selectedUsers.push(t.payload)},deselectUser:(e,t)=>{e.selectedUsers=e.selectedUsers.filter(e=>e!==t.payload)},toggleUserSelection:(e,t)=>{const r=e.selectedUsers.indexOf(t.payload);-1===r?e.selectedUsers.push(t.payload):e.selectedUsers.splice(r,1)},selectAllUsers:e=>{e.selectedUsers=e.users.map(e=>e.id)},deselectAllUsers:e=>{e.selectedUsers=[]},setSearchFilter:(e,t)=>{e.filters.search=t.payload},setRoleFilter:(e,t)=>{e.filters.role=t.payload},setStatusFilter:(e,t)=>{e.filters.status=t.payload},setRegionFilter:(e,t)=>{e.filters.assignedRegion=t.payload},clearFilters:e=>{e.filters={search:"",role:"",status:"",assignedRegion:""}},setPage:(e,t)=>{e.pagination.page=t.payload},setLimit:(e,t)=>{e.pagination.limit=t.payload},setCurrentUser:(e,t)=>{e.currentUser=t.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(io.pending,e=>{e.isLoading=!0,e.error=null}),e.addCase(io.fulfilled,(e,t)=>{e.isLoading=!1,e.users=t.payload,e.pagination.total=t.payload.length}),e.addCase(io.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to fetch users"}),e.addCase(lo.pending,e=>{e.isLoading=!0,e.error=null}),e.addCase(lo.fulfilled,(e,t)=>{e.isLoading=!1,e.users.push(t.payload),e.pagination.total+=1}),e.addCase(lo.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to create user"}),e.addCase(co.pending,e=>{e.isLoading=!0,e.error=null}),e.addCase(co.fulfilled,(e,t)=>{e.isLoading=!1;const{id:r,updates:n}=t.payload,a=e.users.findIndex(e=>e.id===r);-1!==a&&(e.users[a]=(0,o.A)((0,o.A)({},e.users[a]),n))}),e.addCase(co.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to update user"}),e.addCase(uo.pending,e=>{e.isLoading=!0,e.error=null}),e.addCase(uo.fulfilled,(e,t)=>{e.isLoading=!1,e.users=e.users.filter(e=>e.id!==t.payload),e.selectedUsers=e.selectedUsers.filter(e=>e!==t.payload),e.pagination.total-=1}),e.addCase(uo.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to delete user"}),e.addCase(ho.pending,e=>{e.isLoading=!0,e.error=null}),e.addCase(ho.fulfilled,(e,t)=>{e.isLoading=!1;const{userIds:r,updates:n}=t.payload;e.users=e.users.map(e=>r.includes(e.id)?(0,o.A)((0,o.A)({},e),n):e),e.selectedUsers=[]}),e.addCase(ho.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to update users"}),e.addCase(mo.pending,e=>{e.isLoading=!0,e.error=null}),e.addCase(mo.fulfilled,(e,t)=>{e.isLoading=!1,e.users=e.users.filter(e=>!t.payload.includes(e.id)),e.selectedUsers=[],e.pagination.total-=t.payload.length}),e.addCase(mo.rejected,(e,t)=>{e.isLoading=!1,e.error=t.error.message||"Failed to delete users"})}}),{selectUser:fo,deselectUser:po,toggleUserSelection:xo,selectAllUsers:bo,deselectAllUsers:yo,setSearchFilter:vo,setRoleFilter:ko,setStatusFilter:wo,setRegionFilter:jo,clearFilters:No,setPage:So,setLimit:Co,setCurrentUser:Eo,clearError:Ao}=go.actions,_o=go.reducer,To=Nn({name:"gisTools",initialState:{distanceMeasurements:[],polygons:[],circles:[],elevationProfiles:[],infrastructures:[],sectorRFs:[],activeTool:null,selectedItem:null},reducers:{setActiveTool:(e,t)=>{e.activeTool=t.payload,null===t.payload&&(e.selectedItem=null)},addDistanceMeasurement:(e,t)=>{e.distanceMeasurements.push(t.payload)},updateDistanceMeasurement:(e,t)=>{const r=e.distanceMeasurements.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.distanceMeasurements[r]=(0,o.A)((0,o.A)((0,o.A)({},e.distanceMeasurements[r]),t.payload.updates),{},{updatedAt:new Date}))},deleteDistanceMeasurement:(e,t)=>{e.distanceMeasurements=e.distanceMeasurements.filter(e=>e.id!==t.payload)},loadDistanceMeasurements:(e,t)=>{e.distanceMeasurements=t.payload},addPolygon:(e,t)=>{e.polygons.push(t.payload)},updatePolygon:(e,t)=>{const r=e.polygons.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.polygons[r]=(0,o.A)((0,o.A)((0,o.A)({},e.polygons[r]),t.payload.updates),{},{updatedAt:new Date}))},deletePolygon:(e,t)=>{e.polygons=e.polygons.filter(e=>e.id!==t.payload)},loadPolygons:(e,t)=>{e.polygons=t.payload},addCircle:(e,t)=>{e.circles.push(t.payload)},updateCircle:(e,t)=>{const r=e.circles.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.circles[r]=(0,o.A)((0,o.A)((0,o.A)({},e.circles[r]),t.payload.updates),{},{updatedAt:new Date}))},deleteCircle:(e,t)=>{e.circles=e.circles.filter(e=>e.id!==t.payload)},loadCircles:(e,t)=>{e.circles=t.payload},addElevationProfile:(e,t)=>{e.elevationProfiles.push(t.payload)},updateElevationProfile:(e,t)=>{const r=e.elevationProfiles.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.elevationProfiles[r]=(0,o.A)((0,o.A)((0,o.A)({},e.elevationProfiles[r]),t.payload.updates),{},{updatedAt:new Date}))},deleteElevationProfile:(e,t)=>{e.elevationProfiles=e.elevationProfiles.filter(e=>e.id!==t.payload)},loadElevationProfiles:(e,t)=>{e.elevationProfiles=t.payload},addInfrastructure:(e,t)=>{e.infrastructures.push(t.payload)},updateInfrastructure:(e,t)=>{const r=e.infrastructures.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.infrastructures[r]=(0,o.A)((0,o.A)((0,o.A)({},e.infrastructures[r]),t.payload.updates),{},{updatedOn:new Date}))},deleteInfrastructure:(e,t)=>{e.infrastructures=e.infrastructures.filter(e=>e.id!==t.payload)},loadInfrastructures:(e,t)=>{e.infrastructures=t.payload},bulkAddInfrastructures:(e,t)=>{e.infrastructures.push(...t.payload)},addSectorRF:(e,t)=>{e.sectorRFs.push(t.payload)},updateSectorRF:(e,t)=>{const r=e.sectorRFs.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.sectorRFs[r]=(0,o.A)((0,o.A)((0,o.A)({},e.sectorRFs[r]),t.payload.updates),{},{updatedAt:new Date}))},deleteSectorRF:(e,t)=>{e.sectorRFs=e.sectorRFs.filter(e=>e.id!==t.payload)},loadSectorRFs:(e,t)=>{e.sectorRFs=t.payload},selectItem:(e,t)=>{e.selectedItem=t.payload},clearAllGISData:e=>{e.distanceMeasurements=[],e.polygons=[],e.circles=[],e.elevationProfiles=[],e.infrastructures=[],e.sectorRFs=[],e.selectedItem=null}}}),{setActiveTool:Lo,addDistanceMeasurement:Mo,updateDistanceMeasurement:Oo,deleteDistanceMeasurement:Do,loadDistanceMeasurements:Ro,addPolygon:Po,updatePolygon:Fo,deletePolygon:Io,loadPolygons:Bo,addCircle:zo,updateCircle:Wo,deleteCircle:Uo,loadCircles:Ho,addElevationProfile:Vo,updateElevationProfile:Go,deleteElevationProfile:qo,loadElevationProfiles:$o,addInfrastructure:Ko,updateInfrastructure:Yo,deleteInfrastructure:Xo,loadInfrastructures:Jo,bulkAddInfrastructures:Qo,addSectorRF:Zo,updateSectorRF:ei,deleteSectorRF:ti,loadSectorRFs:ri,selectItem:ni,clearAllGISData:ai}=To.actions,si=To.reducer,oi=function(e,t){var r=void 0!==e.version?e.version:-1,n=(e.debug,void 0===e.stateReconciler?Vn:e.stateReconciler),a=e.getStoredState||$n,s=void 0!==e.timeout?e.timeout:5e3,o=null,i=!1,l=!0,c=function(e){return e._persist.rehydrated&&o&&!l&&o.update(e),e};return function(d,u){var h=d||{},m=h._persist,g=Zn(h,["_persist"]);if(u.type===In){var f=!1,p=function(t,r){f||(u.rehydrate(e.key,t,r),f=!0)};if(s&&setTimeout(function(){!f&&p(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},s),l=!1,o||(o=Gn(e)),m)return Jn({},t(g,u),{_persist:m});if("function"!==typeof u.rehydrate||"function"!==typeof u.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),a(e).then(function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,r).then(function(e){p(e)},function(e){p(void 0,e)})},function(e){p(void 0,e)}),Jn({},t(g,u),{_persist:{version:r,rehydrated:!1}})}if(u.type===Bn)return i=!0,u.result(function(e){var t=e.storage,r="".concat(void 0!==e.keyPrefix?e.keyPrefix:Dn).concat(e.key);return t.removeItem(r,Yn)}(e)),Jn({},t(g,u),{_persist:m});if(u.type===Rn)return u.result(o&&o.flush()),Jn({},t(g,u),{_persist:m});if(u.type===Fn)l=!0;else if(u.type===Pn){if(i)return Jn({},g,{_persist:Jn({},m,{rehydrated:!0})});if(u.key===e.key){var x=t(g,u),b=u.payload,y=Jn({},!1!==n&&void 0!==b?n(b,d,x,e):x,{_persist:Jn({},m,{rehydrated:!0})});return c(y)}}if(!m)return t(d,u);var v=t(g,u);return v===g?d:c(Jn({},v,{_persist:m}))}}({key:"root",version:1,storage:"undefined"!==typeof window?(0,oa.A)("session"):{getItem:e=>Promise.resolve(null),setItem:(e,t)=>Promise.resolve(t),removeItem:e=>Promise.resolve()},whitelist:["auth"],blacklist:["map","ui"]},ar({auth:ga,map:Fa,ui:cs,data:Ms,analytics:oo,user:_o,gisTools:si})),ii=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=null!==e&&void 0!==e?e:{};let s=new rn;return t&&("boolean"===typeof t?s.push(ir):s.push(lr(t.extraArgument))),s},{reducer:r,middleware:n,devTools:a=!0,duplicateMiddlewareCheck:s=!0,preloadedState:i,enhancers:l}=e||{};let c,d;if("function"===typeof r)c=r;else{if(!rr(r))throw new Error(On(1));c=ar(r)}d="function"===typeof n?n(t):t();let u=sr;a&&(u=Zr((0,o.A)({trace:!1},"object"===typeof a&&a)));const h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(Qt(15))};const i={getState:a.getState,dispatch:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return s(e,...r)}},l=t.map(e=>e(i));return s=sr(...l)(a.dispatch),(0,o.A)((0,o.A)({},a),{},{dispatch:s})}}(...d),m=ln(h);return nr(c,i,u(..."function"===typeof l?l(m):m()))}({reducer:oi,middleware:e=>e({serializableCheck:{ignoredActions:[Rn,Pn,Fn,In,Bn,zn,"map/setMapInstance"],ignoredPaths:["map.mapInstance"]}})}),li=function(e,t,r){var n=r||!1,a=nr(sa,aa,t&&t.enhancer?t.enhancer:void 0),s=function(e){a.dispatch({type:zn,key:e})},o=function(t,r,s){var o={type:Pn,payload:r,err:s,key:t};e.dispatch(o),a.dispatch(o),n&&i.getState().bootstrapped&&(n(),n=!1)},i=ra({},a,{purge:function(){var t=[];return e.dispatch({type:Bn,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:Rn,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:Fn})},persist:function(){e.dispatch({type:In,register:s,rehydrate:o})}});return t&&t.manualPersist||i.persist(),i}(ii),ci=()=>zt(),di=Ht;var ui=r(722);const hi={development:{baseURL:"http://localhost:5005/api",timeout:1e4},production:{baseURL:"http://localhost:5005/api",timeout:3e4}}.production;console.log("\ud83d\udd27 API Configuration:",{baseURL:hi.baseURL,environment:"production",mode:"BACKEND ONLY"});const mi=ui.A.create({baseURL:hi.baseURL,timeout:hi.timeout,headers:{"Content-Type":"application/json",Accept:"application/json"}});mi.interceptors.request.use(e=>{const t=sessionStorage.getItem("opti_connect_token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e.headers&&(e.headers["X-Request-ID"]="req_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),e.headers["X-Request-Time"]=(new Date).toISOString()),e},e=>Promise.reject(e)),mi.interceptors.response.use(e=>e,e=>{var t,r,n,a,s,o;401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(console.warn("\u26a0\ufe0f 401 Unauthorized - Request failed but session remains active"),console.warn("Request URL:",null===(a=e.config)||void 0===a?void 0:a.url),null!==(s=e.config)&&void 0!==s&&null!==(o=s.url)&&void 0!==o&&o.includes("/auth/login")&&console.error("Login failed"));return 403===(null===(r=e.response)||void 0===r?void 0:r.status)&&console.error("Access forbidden:",e.response.data),(null===(n=e.response)||void 0===n?void 0:n.status)>=500&&console.error("Server error:",e.response.data),Promise.reject(e)});const gi=new class{async login(e){console.log("\ud83d\udd04 Attempting backend authentication...");try{const t=await mi.post("/auth/login",{email:e.email,password:e.password});console.log("\u2705 Backend login successful:",t.data);const r=t.data,n=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"admin":return"Admin";case"manager":return"Manager";case"technician":case"engineer":return"Technician";default:return"User"}};return{user:{id:r.user.id.toString(),email:r.user.email,name:r.user.full_name||r.user.username,username:r.user.username,role:n(r.user.role),company:e.company||"OptiConnect",permissions:["all"],lastLogin:(new Date).toISOString(),password:"********",gender:"Other",phoneNumber:r.user.phone||"",address:{street:"",city:"",state:"",pincode:""},officeLocation:r.user.department||"",assignedUnder:[],assignedRegions:r.user.assignedRegions||r.user.regions||[],groups:[],status:r.user.is_active?"Active":"Inactive",loginHistory:[]},token:r.token,refreshToken:r.token,expiresIn:7200}}catch(a){var t,r,n;throw console.error("\u274c Backend login failed:",(null===(t=a.response)||void 0===t?void 0:t.data)||a.message),new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Login failed")}}async logout(e){await mi.post("/auth/logout",{token:e})}async refreshToken(e){try{return(await mi.post("/auth/refresh",{token:e})).data.data.token}catch(t){return console.error("Token refresh failed:",t),e}}async verifyToken(e){try{return await mi.get("/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}}),!0}catch(t){return!1}}async getTowers(e){return(await mi.get("/towers",{params:e})).data.data}async getTowerById(e){return(await mi.get("/towers/".concat(e))).data.data}async createTower(e){return(await mi.post("/towers",e)).data.data}async updateTower(e,t){return(await mi.put("/towers/".concat(e),t)).data.data}async deleteTower(e){await mi.delete("/towers/".concat(e))}async getCoverage(e){const t=e?{towerId:e}:{};return(await mi.get("/coverage",{params:t})).data.data}async getAnalytics(e){return(await mi.get("/analytics",{params:e})).data.data}async getPerformanceData(e){return(await mi.get("/analytics/performance",{params:e})).data.data}async uploadFile(e,t){const r=new FormData;r.append("file",e),r.append("type",t);return(await mi.post("/upload",r,{headers:{"Content-Type":"multipart/form-data"}})).data.data}async exportData(e,t,r){return(await mi.post("/export/".concat(e),{format:t,filters:r},{responseType:"blob"})).data}async getUsers(e){return(await mi.get("/users",{params:e})).data.data}async getUserById(e){return(await mi.get("/users/".concat(e))).data.data}async createUser(e){return(await mi.post("/users",e)).data.data}async updateUser(e,t){return(await mi.put("/users/".concat(e),t)).data.data}async deleteUser(e){await mi.delete("/users/".concat(e))}async bulkUpdateUsers(e,t){await mi.post("/users/bulk-update",{userIds:e,updates:t})}async bulkDeleteUsers(e){await mi.post("/users/bulk-delete",{userIds:e})}async exportUsers(e,t){return(await mi.post("/users/export",{format:e,filters:t},{responseType:"blob"})).data}async importUsers(e){const t=new FormData;t.append("file",e);return(await mi.post("/users/import",t,{headers:{"Content-Type":"multipart/form-data"}})).data.data}async resetPassword(e,t){return(await mi.post("/users/".concat(e,"/reset-password"),{newPassword:t})).data.data}async healthCheck(){try{return(await mi.get("/health")).data}catch(e){return{status:"unhealthy",timestamp:(new Date).toISOString(),version:"1.0.0"}}}async get(e,t){return{data:(await mi.get(e,t)).data}}async post(e,t,r){return{data:(await mi.post(e,t,r)).data}}async put(e,t,r){return{data:(await mi.put(e,t,r)).data}}async delete(e,t){return{data:(await mi.delete(e,t)).data}}},{login:fi,logout:pi,refreshToken:xi,verifyToken:bi,getTowers:yi,getTowerById:vi,createTower:ki,updateTower:wi,deleteTower:ji,getCoverage:Ni,getAnalytics:Si,getPerformanceData:Ci,uploadFile:Ei,exportData:Ai,getUsers:_i,getUserById:Ti,createUser:Li,updateUser:Mi,deleteUser:Oi,bulkUpdateUsers:Di,bulkDeleteUsers:Ri,exportUsers:Pi,importUsers:Fi,resetPassword:Ii,healthCheck:Bi}=gi,zi="opti_session_active",Wi="opti_last_activity",Ui=18e5;const Hi=new class{constructor(){this.activityCheckInterval=null,this.logoutCallback=null,this.updateActivity=()=>{localStorage.setItem(Wi,Date.now().toString())},this.handleStorageChange=e=>{e.key===zi&&null===e.newValue&&(console.log("\ud83d\udd04 Logout detected in another tab"),this.logout())},this.handleBeforeUnload=()=>{this.getOpenTabsCount()<=1&&localStorage.removeItem(Wi)}}initSession(){sessionStorage.setItem(zi,"true"),this.updateActivity(),this.setupActivityListeners(),this.startInactivityCheck(),window.addEventListener("storage",this.handleStorageChange),window.addEventListener("beforeunload",this.handleBeforeUnload),console.log("\u2705 Session initialized (auto-logout on browser close)")}setupActivityListeners(){["mousedown","keydown","scroll","touchstart","click"].forEach(e=>{document.addEventListener(e,this.updateActivity,{passive:!0})})}startInactivityCheck(){this.activityCheckInterval=setInterval(()=>{const e=localStorage.getItem(Wi);if(!e)return;Date.now()-parseInt(e)>Ui&&(console.warn("\u23f1\ufe0f Session expired due to inactivity"),this.logout())},6e4)}getOpenTabsCount(){return sessionStorage.getItem(zi)?1:0}onLogout(e){this.logoutCallback=e}logout(){sessionStorage.removeItem(zi),localStorage.removeItem(Wi),this.activityCheckInterval&&(clearInterval(this.activityCheckInterval),this.activityCheckInterval=null),window.removeEventListener("storage",this.handleStorageChange),window.removeEventListener("beforeunload",this.handleBeforeUnload),this.logoutCallback&&this.logoutCallback(),console.log("\u2705 Session cleared")}isSessionValid(){if(!("true"===sessionStorage.getItem(zi)))return!1;const e=localStorage.getItem(Wi);if(!e)return!1;return Date.now()-parseInt(e)<Ui}getTimeUntilExpiry(){const e=localStorage.getItem(Wi);if(!e)return 0;const t=Date.now()-parseInt(e),r=Ui-t;return Math.max(0,r)}destroy(){this.activityCheckInterval&&clearInterval(this.activityCheckInterval),window.removeEventListener("storage",this.handleStorageChange),window.removeEventListener("beforeunload",this.handleBeforeUnload)}};var Vi=r(579);const Gi=(0,n.createContext)(void 0),qi=e=>{let{children:t}=e;const r=ci(),{user:a,isAuthenticated:s,isLoading:o,error:i,token:l}=di(e=>e.auth);(0,n.useEffect)(()=>{if(s)return Hi.initSession(),Hi.onLogout(()=>{console.log("\u23f1\ufe0f Auto-logout triggered by session manager"),c()}),()=>{Hi.destroy()}},[s]),(0,n.useEffect)(()=>{s&&!Hi.isSessionValid()&&(console.warn("\u26a0\ufe0f Session invalid - logging out"),c())},[]),(0,n.useEffect)(()=>{},[s,l]),(0,n.useEffect)(()=>{if(s&&l){const e=setInterval(async()=>{try{const e=await gi.refreshToken(l);e&&a&&(r(ca({user:a,token:e})),console.log("\u2705 Token refreshed successfully"))}catch(i){console.warn("Token refresh failed (non-critical):",i)}},9e5);return()=>clearInterval(e)}},[s,l,a,r]);const c=()=>{r(ua()),l&&gi.logout(l).catch(console.error)},d={user:a,isAuthenticated:s,isLoading:o,error:i,login:async e=>{r(la());try{console.log("\ud83d\udd04 Using real backend authentication");const t=await gi.login(e);r(ca({user:t.user,token:t.token}))}catch(i){var t,n;const a=(null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||i.message||"Login failed";throw r(da(a)),i}},logout:c,clearError:()=>{r(ha())},checkAuthStatus:async()=>{if(l)try{await gi.verifyToken(l)||c()}catch(i){console.error("Auth status check failed:",i),c()}}};return(0,Vi.jsx)(Gi.Provider,{value:d,children:t})},$i=()=>{const e=(0,n.useContext)(Gi);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Ki=(0,n.createContext)(void 0),Yi=e=>{let{children:t}=e;const r=ci(),{isDarkMode:a,theme:s}=di(e=>e.ui);(0,n.useEffect)(()=>{if("auto"===s){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{r(Ga("auto"))};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}},[s,r]),(0,n.useEffect)(()=>{const e=document.documentElement;a?(e.classList.add("dark"),e.classList.remove("light")):(e.classList.add("light"),e.classList.remove("dark")),a?(e.style.setProperty("--background-primary","#0f172a"),e.style.setProperty("--background-secondary","#1e293b"),e.style.setProperty("--text-primary","#f8fafc"),e.style.setProperty("--text-secondary","#cbd5e1"),e.style.setProperty("--border-color","#334155")):(e.style.setProperty("--background-primary","#ffffff"),e.style.setProperty("--background-secondary","#f8fafc"),e.style.setProperty("--text-primary","#0f172a"),e.style.setProperty("--text-secondary","#475569"),e.style.setProperty("--border-color","#e2e8f0"))},[a]);const o={isDarkMode:a,theme:s,toggleDarkMode:()=>{r(Va())},setTheme:e=>{r(Ga(e))}};return(0,Vi.jsx)(Ki.Provider,{value:o,children:t})},Xi="gis_audit_logs",Ji=ui.A.create({baseURL:"http://localhost:5005/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Ji.interceptors.request.use(e=>{const t=sessionStorage.getItem("opti_connect_token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e});const Qi=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a={id:"audit_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date,userId:(null===e||void 0===e?void 0:e.id)||"anonymous",userName:(null===e||void 0===e?void 0:e.name)||"Anonymous",userEmail:(null===e||void 0===e?void 0:e.email)||"unknown",userRole:(null===e||void 0===e?void 0:e.role)||"Unknown",eventType:t,severity:n.severity||"info",region:n.region,toolName:n.toolName,action:r,details:n.details||{},success:void 0===n.success||n.success,errorMessage:n.errorMessage};try{await Ji.post("/audit/logs",{action:r,resource_type:t,resource_id:n.region||null,details:(0,o.A)({severity:n.severity||"info",toolName:n.toolName,success:void 0===n.success||n.success,errorMessage:n.errorMessage},n.details)}),console.log("\u2705 Audit log saved to database:",r)}catch(i){console.error("Failed to save audit log to backend:",i)}const s=Zi();s.unshift(a),s.length>1e4&&s.splice(1e4);try{localStorage.setItem(Xi,JSON.stringify(s))}catch(i){console.error("Failed to save audit log to localStorage:",i)}return a},Zi=()=>{try{const e=localStorage.getItem(Xi);if(!e)return[];return JSON.parse(e).map(e=>(0,o.A)((0,o.A)({},e),{},{timestamp:new Date(e.timestamp)}))}catch(e){return console.error("Failed to load audit logs:",e),[]}},el="gis_temporary_access",tl=ui.A.create({baseURL:"http://localhost:5005/api",timeout:1e4,headers:{"Content-Type":"application/json"}});tl.interceptors.request.use(e=>{const t=sessionStorage.getItem("opti_connect_token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e});const rl=async()=>{try{const e=(await tl.get("/temporary-access")).data;if(!e.success)throw new Error(e.message||"Failed to fetch temporary access");console.log("\ud83d\udce5 Fetched temporary access from backend:",e.access);const t=e.access.map(e=>{const t=!e.revoked_at&&new Date(e.expires_at)>new Date;return{id:e.id.toString(),userId:"OCGID".concat(String(e.user_id).padStart(3,"0")),userName:e.full_name||e.user_name||"",userEmail:e.email||e.user_email||"",region:e.region_name,grantedBy:"OCGID".concat(String(e.granted_by).padStart(3,"0")),grantedByName:e.granted_by_username||e.granted_by_name||"",grantedAt:new Date(e.granted_at),expiresAt:new Date(e.expires_at),reason:e.reason||"",isActive:t,revokedAt:e.revoked_at?new Date(e.revoked_at):void 0,revokedBy:e.revoked_by?"OCGID".concat(String(e.revoked_by).padStart(3,"0")):void 0,revokedByName:e.revoked_by_name||void 0,revokedReason:e.revoked_reason||void 0,timeRemaining:e.time_remaining||null}});return console.log("\ud83d\udcca Transformed grants:",t),t}catch(e){throw console.error("Error fetching temporary access from backend:",e),e}},nl=async()=>{try{const e=(await tl.get("/temporary-access/my-access")).data;if(!e.success)throw new Error(e.message||"Failed to fetch your temporary access");console.log("\ud83d\udce5 Fetched my temporary access from backend:",e.access);return e.access.map(e=>({id:e.id.toString(),userId:"OCGID".concat(String(e.user_id).padStart(3,"0")),userName:e.full_name||"",userEmail:e.email||"",region:e.region_name,grantedBy:"OCGID".concat(String(e.granted_by).padStart(3,"0")),grantedByName:e.granted_by_name||e.granted_by_username||"",grantedAt:new Date(e.granted_at),expiresAt:new Date(e.expires_at),reason:e.reason||"",isActive:!0,timeRemaining:e.time_remaining||null}))}catch(e){return console.error("Error fetching my temporary access from backend:",e),[]}},al=async e=>{const t=await rl(),r=new Date;return t.filter(t=>{if(e.userId&&t.userId!==e.userId)return!1;if(e.region&&t.region!==e.region)return!1;if(e.grantedBy&&t.grantedBy!==e.grantedBy)return!1;if(void 0!==e.isActive){const n=t.isActive&&t.expiresAt>r&&!t.revokedAt;if(e.isActive!==n)return!1}return!0})},sl=async e=>{const t=e?await al(e):await rl(),r=new Date,n={},a={};let s=0,o=0,i=0;return t.forEach(e=>{n[e.region]=(n[e.region]||0)+1;const t="".concat(e.userName," (").concat(e.userEmail,")");a[t]=(a[t]||0)+1,e.revokedAt?i++:e.expiresAt<r?o++:e.isActive&&s++}),{totalGrants:t.length,activeGrants:s,expiredGrants:o,revokedGrants:i,grantsByRegion:n,grantsByUser:a}},ol=e=>{try{localStorage.setItem(el,JSON.stringify(e))}catch(t){console.error("Failed to save temporary access grants:",t)}},il=()=>{var e,t,r;const{user:a,logout:s}=$i(),{isDarkMode:o,toggleDarkMode:i}=(()=>{const e=(0,n.useContext)(Ki);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})(),{isAuthenticated:l}=di(e=>e.auth),c=ce(),d=he(),[u,h]=n.useState(!1),[m,g]=n.useState(!1),[f,p]=n.useState(0),[x,b]=n.useState([]),y=n.useRef(null);n.useEffect(()=>{const e=async()=>{try{const e=await nl(),t=new Date,r=e.filter(e=>new Date(e.expiresAt)>t);p(r.length),b(r)}catch(e){console.error("Error fetching temporary access:",e),p(0),b([])}};if(l&&a){e();const t=setInterval(e,1e4);return()=>clearInterval(t)}},[a,l]),n.useEffect(()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&g(!1)};if(m)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]);const v=[{name:"Map",href:"/map",color:"from-emerald-500 to-emerald-600",iconColor:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),roles:["Admin","Manager","Technician","User"]},{name:"Dashboard",href:"/dashboard",color:"from-blue-500 to-blue-600",iconColor:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),roles:["Admin","Manager","Technician","User"]},{name:"Users",href:"/users",color:"from-violet-500 to-violet-600",iconColor:"text-violet-600 dark:text-violet-400",bgColor:"bg-violet-50 dark:bg-violet-900/20",icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),roles:["Admin","Manager"]},{name:"Groups",href:"/groups",color:"from-amber-500 to-amber-600",iconColor:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-900/20",icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),roles:["Admin","Manager"]},{name:"Admin",href:"/admin",color:"from-rose-500 to-rose-600",iconColor:"text-rose-600 dark:text-rose-400",bgColor:"bg-rose-50 dark:bg-rose-900/20",icon:(0,Vi.jsxs)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),roles:["Admin"]},{name:"Analytics",href:"/analytics",color:"from-cyan-500 to-cyan-600",iconColor:"text-cyan-600 dark:text-cyan-400",bgColor:"bg-cyan-50 dark:bg-cyan-900/20",icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),roles:["Admin","Manager"]},{name:"GIS Data Hub",href:"/gis-data-hub",color:"from-indigo-500 to-indigo-600",iconColor:"text-indigo-600 dark:text-indigo-400",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),roles:["Admin","Manager","Technician","User"]}].filter(e=>(null===a||void 0===a?void 0:a.role)&&e.roles.includes(a.role)),k=e=>c.pathname===e;return l?(0,Vi.jsxs)("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 shadow",children:[(0,Vi.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-10",children:(0,Vi.jsxs)("div",{className:"flex justify-between h-16",children:[(0,Vi.jsxs)("div",{className:"flex",children:[(0,Vi.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[(0,Vi.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,Vi.jsx)("span",{className:"text-white font-bold text-sm",children:"OC"})}),(0,Vi.jsx)("span",{className:"ml-2 text-xl font-semibold text-gray-900 dark:text-white",children:"Opti Connect"})]}),(0,Vi.jsx)("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:v.map(e=>(0,Vi.jsxs)(gt,{to:e.href,className:"".concat(k(e.href)?"border-b-2 border-current ".concat(e.iconColor," font-semibold"):"border-transparent text-gray-700 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"," inline-flex items-center gap-2 px-3 pt-1 pb-1 text-sm transition-all duration-200 group relative"),children:[(0,Vi.jsx)("span",{className:"transform group-hover:scale-110 transition-all duration-200",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 ".concat(k(e.href)?e.iconColor:"text-gray-700 dark:text-gray-400 group-hover:"+e.iconColor),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.icon.props.children})}),(0,Vi.jsx)("span",{className:"font-medium",children:e.name}),k(e.href)&&(0,Vi.jsx)("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 rounded-full bg-gradient-to-r ".concat(e.color)})]},e.name))})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("button",{onClick:()=>h(!u),className:"md:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",title:"Toggle menu",children:u?(0,Vi.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,Vi.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,Vi.jsx)("button",{onClick:i,className:"p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",title:o?"Switch to light mode":"Switch to dark mode",children:o?(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,Vi.jsxs)("div",{className:"relative",ref:y,children:[(0,Vi.jsxs)("button",{onClick:()=>g(!m),className:"flex items-center space-x-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg px-3 py-2 transition-all duration-200 group",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0 relative",children:(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 p-0.5 transform group-hover:scale-110 transition-transform duration-200",children:(0,Vi.jsx)("div",{className:"h-full w-full rounded-full bg-white dark:bg-gray-800 flex items-center justify-center",children:(0,Vi.jsx)("span",{className:"text-sm font-bold bg-gradient-to-br from-blue-600 to-purple-600 bg-clip-text text-transparent",children:(null===a||void 0===a||null===(e=a.name)||void 0===e?void 0:e.split(" ").map(e=>e[0]).join("").toUpperCase())||"U"})})}),f>0?(0,Vi.jsx)("div",{className:"absolute bottom-0 right-0 h-4 w-4 rounded-full bg-amber-500 border-2 border-white dark:border-gray-800 ring-2 ring-amber-500/30 flex items-center justify-center",title:"".concat(f," temporary access grants"),children:(0,Vi.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}):(0,Vi.jsx)("div",{className:"absolute bottom-0 right-0 h-3 w-3 rounded-full bg-green-500 border-2 border-white dark:border-gray-800 ring-2 ring-green-500/30 animate-pulse"})]})}),(0,Vi.jsxs)("div",{className:"hidden md:block text-left",children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:null===a||void 0===a?void 0:a.name}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:null===a||void 0===a?void 0:a.role})]}),(0,Vi.jsx)("svg",{className:"hidden md:block w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform duration-200 ".concat(m?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),m&&(0,Vi.jsxs)("div",{className:"absolute right-0 mt-2 w-80 max-h-[70vh] overflow-y-auto rounded-xl shadow-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 backdrop-blur-lg animate-in fade-in slide-in-from-top-2 duration-200 z-50",children:[(0,Vi.jsx)("div",{className:"px-6 py-5 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-blue-900/20 dark:via-purple-900/20 dark:to-pink-900/20 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"h-14 w-14 rounded-full bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-lg ring-4 ring-white dark:ring-gray-800",children:(0,Vi.jsx)("span",{className:"text-lg font-bold text-white",children:(null===a||void 0===a||null===(t=a.name)||void 0===t?void 0:t.split(" ").map(e=>e[0]).join("").toUpperCase())||"U"})})}),(0,Vi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vi.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:null===a||void 0===a?void 0:a.name}),(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate mt-0.5",children:null===a||void 0===a?void 0:a.email}),(0,Vi.jsxs)("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-md",children:[(0,Vi.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),null===a||void 0===a?void 0:a.role]}),f>0&&(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-md animate-pulse",children:[(0,Vi.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Temp Access (",f,")"]})]})]})]})}),(0,Vi.jsxs)("div",{className:"py-2",children:[(0,Vi.jsxs)(gt,{to:"/profile",onClick:()=>g(!1),className:"flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors group",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-3 text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,Vi.jsx)("span",{className:"font-medium",children:"View Profile"})]}),(0,Vi.jsxs)(gt,{to:"/settings",onClick:()=>g(!1),className:"flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-200 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors group",children:[(0,Vi.jsxs)("svg",{className:"w-5 h-5 mr-3 text-gray-400 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Vi.jsx)("span",{className:"font-medium",children:"Settings"})]}),(0,Vi.jsxs)(gt,{to:"/request-region",onClick:()=>g(!1),className:"flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-200 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors group",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-3 text-gray-400 group-hover:text-emerald-600 dark:group-hover:text-emerald-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,Vi.jsx)("span",{className:"font-medium",children:"Request Region Access"})]}),(0,Vi.jsx)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border-y border-gray-200 dark:border-gray-700 my-2",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Vi.jsxs)("div",{className:"text-center p-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Company"}),(0,Vi.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white mt-1 truncate",children:(null===a||void 0===a?void 0:a.company)||"N/A"})]}),(0,Vi.jsxs)("div",{className:"text-center p-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Regions"}),(0,Vi.jsx)("p",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 mt-1",children:(null===a||void 0===a||null===(r=a.assignedRegions)||void 0===r?void 0:r.length)||0})]})]})})]}),x.length>0&&(0,Vi.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-amber-50/50 dark:bg-amber-900/10",children:[(0,Vi.jsxs)("p",{className:"text-xs font-semibold text-amber-700 dark:text-amber-400 mb-3 flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1.5 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Temporary Access (",x.length,")"]}),(0,Vi.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:x.map(e=>(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2.5 border border-amber-200 dark:border-amber-800 hover:shadow-md transition-shadow",children:(0,Vi.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,Vi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vi.jsxs)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate flex items-center",children:[(0,Vi.jsxs)("svg",{className:"w-3.5 h-3.5 mr-1 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.region]}),(0,Vi.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:["Expires:"," ",new Date(e.expiresAt).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,Vi.jsx)("div",{className:"flex-shrink-0",children:e.timeRemaining&&!e.timeRemaining.expired?(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-bold ".concat(0===e.timeRemaining.days&&0===e.timeRemaining.hours?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 animate-pulse":0===e.timeRemaining.days?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300"),children:[(0,Vi.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.timeRemaining.display]}):(0,Vi.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-bold bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"Expired"})})]})},e.id))})]}),(e=>{const t=x.map(e=>e.region),r=(null===a||void 0===a||null===(e=a.assignedRegions)||void 0===e?void 0:e.filter(e=>!t.includes(e)))||[];return r.length>0?(0,Vi.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-emerald-50/30 dark:bg-emerald-900/10",children:[(0,Vi.jsxs)("p",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-400 mb-3 flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1.5 text-emerald-600 dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Permanent Access (",r.length,")"]}),(0,Vi.jsx)("div",{className:"flex flex-wrap gap-1.5 max-h-28 overflow-y-auto",children:r.map(e=>(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-semibold bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200 border border-emerald-300 dark:border-emerald-700",children:[(0,Vi.jsx)("svg",{className:"w-3 h-3 mr-1 text-emerald-600 dark:text-emerald-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e]},e))})]}):null})(),(0,Vi.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("button",{onClick:()=>{g(!1),s(),d("/login")},className:"w-full px-4 py-3 text-left flex items-center gap-3 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors group font-semibold",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,Vi.jsx)("span",{className:"text-sm",children:"Sign Out"})]})})]})]})]})]})}),u&&(0,Vi.jsx)("div",{className:"md:hidden border-t border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("div",{className:"pt-2 pb-3 space-y-1",children:v.map(e=>(0,Vi.jsxs)(gt,{to:e.href,onClick:()=>h(!1),className:"".concat(k(e.href)?"".concat(e.bgColor," border-current ").concat(e.iconColor," font-semibold"):"border-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"," flex items-center gap-3 pl-3 pr-4 py-3 border-l-4 text-base transition-all duration-200"),children:[(0,Vi.jsx)("span",{className:"flex-shrink-0 ".concat(k(e.href)?e.iconColor:""),children:e.icon}),(0,Vi.jsx)("span",{className:"font-medium",children:e.name})]},e.name))})})]}):null},ll=()=>{const e="development";return e||"production"},cl=()=>{switch(ll()){case"production":return"production";case"testing":return"testing";default:return"development"}},dl={app:{name:"Opti Connect GIS Platform",version:"1.0.0",mode:"development",environment:"development",debug:!0,buildDate:"2024-01-15T00:00:00Z"},api:{baseUrl:"http://localhost:5005/api",timeout:1e4,retries:3,enableMocking:!0},maps:{apiKey:"AIzaSyAT5j5Zy8q4XSHLi1arcpkce8CNvbljbUQ",libraries:["places","drawing","geometry","visualization"],region:"IN",language:"en"},features:{analytics:!0,export:!0,import:!0,realTimeUpdates:!0,debugging:!0},monitoring:{sentry:{enabled:!1},analytics:{enabled:!1},performance:{enabled:!0,sampleRate:1}},storage:{prefix:"opti_connect_dev_",enableEncryption:!1,ttl:864e5},ui:{theme:"auto",showModeIndicator:!0,enableAnimations:!0,enableTooltips:!0}},ul={app:{name:"Opti Connect GIS Platform",version:"1.0.0",mode:"production",environment:"production",debug:!1,buildDate:"2024-01-15T00:00:00Z"},api:{baseUrl:"http://localhost:5005/api",timeout:3e4,retries:3,enableMocking:!1},maps:{apiKey:"AIzaSyAT5j5Zy8q4XSHLi1arcpkce8CNvbljbUQ",libraries:["places","drawing","geometry","visualization"],region:"IN",language:"en"},features:{analytics:!0,export:!0,import:!0,realTimeUpdates:!0,debugging:!1},monitoring:{sentry:{enabled:!0,dsn:""},analytics:{enabled:!0,trackingId:""},performance:{enabled:!0,sampleRate:.1}},storage:{prefix:"opti_connect_",enableEncryption:!0,ttl:6048e5},ui:{theme:"auto",showModeIndicator:!1,enableAnimations:!0,enableTooltips:!0}},hl=(0,o.A)((0,o.A)({},dl),{},{app:(0,o.A)((0,o.A)({},dl.app),{},{mode:"testing",environment:"testing"}),api:(0,o.A)((0,o.A)({},dl.api),{},{baseUrl:"http://localhost:5005/api",enableMocking:!0}),features:(0,o.A)((0,o.A)({},dl.features),{},{debugging:!1}),storage:(0,o.A)((0,o.A)({},dl.storage),{},{prefix:"opti_connect_test_"})}),ml=(0,o.A)((0,o.A)({},ul),{},{app:(0,o.A)((0,o.A)({},ul.app),{},{mode:"maintenance"}),features:{analytics:!1,export:!1,import:!1,realTimeUpdates:!1,debugging:!1},ui:(0,o.A)((0,o.A)({},ul.ui),{},{showModeIndicator:!0})}),gl=()=>{switch(cl()){case"production":return ul;case"testing":return hl;case"maintenance":return ml;default:return dl}},fl=()=>{const e=gl();return{version:e.app.version,buildDate:e.app.buildDate,environment:e.app.environment,mode:e.app.mode,debug:e.app.debug}},pl=gl(),xl=e=>{let{position:t="bottom-right",showVersion:r=!0,showEnvironment:n=!0,compact:a=!1,className:s=""}=e;const{appMode:o}=di(e=>e.ui),i=fl();if(!pl.ui.showModeIndicator&&"production"===o)return null;const l=e=>e.charAt(0).toUpperCase()+e.slice(1),c=(()=>{switch(o){case"development":return{bg:"bg-blue-500",text:"text-white",border:"border-blue-600",glow:"shadow-blue-500/20"};case"testing":return{bg:"bg-yellow-500",text:"text-black",border:"border-yellow-600",glow:"shadow-yellow-500/20"};case"maintenance":return{bg:"bg-red-500",text:"text-white",border:"border-red-600",glow:"shadow-red-500/20"};default:return{bg:"bg-green-500",text:"text-white",border:"border-green-600",glow:"shadow-green-500/20"}}})(),d=(()=>{switch(t){case"top-left":return"top-4 left-4";case"top-right":return"top-4 right-4";case"bottom-left":return"bottom-4 left-4";default:return"bottom-4 right-4"}})();return a?(0,Vi.jsx)("div",{className:"\n          fixed ".concat(d," z-50\n          ").concat(c.bg," ").concat(c.text," ").concat(c.border,"\n          px-2 py-1 rounded-md border\n          text-xs font-medium\n          shadow-lg ").concat(c.glow,"\n          backdrop-blur-sm\n          transition-all duration-300\n          hover:scale-105\n          ").concat(s,"\n        "),title:"Mode: ".concat(l(o)," | Environment: ").concat(i.environment," | Version: ").concat(i.version),children:l(o)}):(0,Vi.jsx)("div",{className:"\n        fixed ".concat(d," z-50\n        ").concat(c.bg," ").concat(c.text,"\n        px-4 py-2.5 rounded-full\n        min-w-max\n        shadow-2xl\n        backdrop-blur-sm\n        transition-all duration-300\n        hover:scale-105\n        hover:shadow-3xl\n        border-2 border-white/20\n        ").concat(s,"\n      "),children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-2.5",children:[(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-white animate-pulse"}),(0,Vi.jsx)("div",{className:"absolute inset-0 w-2.5 h-2.5 rounded-full bg-white animate-ping opacity-75"})]}),(0,Vi.jsxs)("div",{className:"flex flex-col",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsxs)("span",{className:"font-bold text-sm tracking-wide",children:[l(o)," MODE"]}),i.debug&&(0,Vi.jsx)("span",{className:"text-xs px-1.5 py-0.5 bg-white/20 rounded-full font-semibold",children:"DEBUG"})]}),(n||r)&&(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 text-xs opacity-95 mt-0.5",children:[n&&(0,Vi.jsx)("span",{className:"font-medium",children:i.environment}),r&&n&&(0,Vi.jsx)("span",{className:"opacity-60",children:"\u2022"}),r&&(0,Vi.jsxs)("span",{className:"font-medium",children:["v",i.version]})]})]}),"maintenance"===o&&(0,Vi.jsx)("div",{className:"ml-2 text-xs px-2 py-1 bg-white/30 rounded-full font-bold",children:"\u26a0\ufe0f MAINTENANCE"})]})})},bl=e=>{let{children:t,className:r=""}=e;return(0,Vi.jsx)("div",{className:"h-[calc(100vh-64px)] w-full overflow-auto ".concat(r),children:t})},yl=e=>{let{className:t="",position:r="relative",showDetails:a=!0}=e;const{user:s}=di(e=>e.auth),{appMode:o}=di(e=>e.ui),i=fl(),[l,c]=n.useState(new Date);n.useEffect(()=>{const e=setInterval(()=>{c(new Date)},6e4);return()=>clearInterval(e)},[]);const d=e=>e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),u=e=>e.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),h=()=>{switch(o){case"development":return"text-blue-600 dark:text-blue-400";case"testing":return"text-yellow-600 dark:text-yellow-400";case"maintenance":return"text-red-600 dark:text-red-400";case"production":return"text-green-600 dark:text-green-400";default:return"text-gray-600 dark:text-gray-400"}},m="fixed"===r?"fixed bottom-0 left-0 right-0":"relative";return(0,Vi.jsx)("footer",{className:"\n        ".concat(m,"\n        bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\n        border-t-2 border-blue-200 dark:border-blue-800\n        ").concat(t,"\n      "),children:(0,Vi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a?(0,Vi.jsxs)("div",{className:"py-4",children:[(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,Vi.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})}),(0,Vi.jsx)("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:"Opti Connect GIS"}),(0,Vi.jsxs)("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs font-semibold",children:["v",i.version]})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsxs)("svg",{className:"h-4 w-4 text-indigo-500 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Mode:"}),(0,Vi.jsx)("span",{className:"font-bold px-2 py-0.5 rounded-full text-xs ".concat(h()),children:o.charAt(0).toUpperCase()+o.slice(1)}),pl.app.debug&&(0,Vi.jsx)("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-full font-bold",children:"DEBUG"})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Vi.jsxs)("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:["Environment: ",(0,Vi.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400 font-bold",children:i.environment})]})]})]}),(0,Vi.jsx)("div",{className:"flex flex-col space-y-2 text-center",children:s&&(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,Vi.jsx)("div",{className:"h-7 w-7 rounded-full bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Vi.jsx)("span",{className:"text-gray-800 dark:text-gray-200 font-bold",children:s.name}),(0,Vi.jsx)("span",{className:"text-xs px-2.5 py-1 bg-gradient-to-r from-violet-100 to-violet-200 dark:from-violet-900/30 dark:to-violet-800/30 text-violet-700 dark:text-violet-300 rounded-full font-bold",children:s.role})]}),s.assignedRegions&&s.assignedRegions.length>0&&(0,Vi.jsxs)("div",{className:"flex items-center justify-center space-x-1 text-xs",children:[(0,Vi.jsxs)("svg",{className:"h-3 w-3 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:(0,Vi.jsx)("span",{className:"text-amber-600 dark:text-amber-400 font-bold",children:s.assignedRegions.join(", ")})})]})]})}),(0,Vi.jsxs)("div",{className:"flex flex-col space-y-2 md:items-end",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gradient-to-r from-cyan-50 to-cyan-100 dark:from-cyan-900/20 dark:to-cyan-800/20 rounded-lg",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Vi.jsx)("span",{className:"text-gray-800 dark:text-gray-200 font-bold",children:d(l)})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gradient-to-r from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-lg",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Vi.jsx)("span",{className:"text-gray-700 dark:text-gray-300 text-xs font-semibold",children:u(l)})]})]})]}),(0,Vi.jsxs)("div",{className:"mt-4 pt-4 border-t-2 border-gray-300 dark:border-gray-600 flex flex-col sm:flex-row justify-between items-center text-xs",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),(0,Vi.jsxs)("span",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:["\xa9 ",(new Date).getFullYear()," Opti Connect. All rights reserved."]})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3 mt-2 sm:mt-0",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 rounded-md",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,Vi.jsxs)("span",{className:"text-blue-700 dark:text-blue-300 font-bold",children:["Build: ",i.version]})]}),(0,Vi.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 bg-emerald-100 dark:bg-emerald-900/30 rounded-md",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3 text-emerald-600 dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Vi.jsx)("span",{className:"text-emerald-700 dark:text-emerald-300 font-bold",children:pl.api.enableMocking?"LocalStorage Mode":"Backend Connected"})]})]})]})]}):(0,Vi.jsxs)("div",{className:"py-3 flex justify-between items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Opti Connect GIS"}),(0,Vi.jsxs)("span",{children:["v",i.version]}),(0,Vi.jsx)("span",{className:"font-medium ".concat(h()),children:o})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("span",{children:d(l)}),(0,Vi.jsx)("span",{children:u(l)})]})]})})})},vl=()=>{var e;const{user:t,isAuthenticated:r}=di(e=>e.auth),{appMode:n}=di(e=>e.ui);return r?(0,Vi.jsxs)(bl,{className:"bg-gray-50 dark:bg-gray-900",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Vi.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center py-6 gap-4",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"h-14 w-14 rounded-lg bg-blue-600 dark:bg-blue-500 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"OptiConnect GIS Platform"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,Vi.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Welcome back, ",(0,Vi.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:(null===t||void 0===t?void 0:t.name)||"User"})]}),(0,Vi.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:null===t||void 0===t?void 0:t.role})]})]})]}),(0,Vi.jsx)("div",{className:"flex items-center space-x-4",children:(0,Vi.jsxs)("div",{className:"text-right",children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(null===t||void 0===t?void 0:t.company)||"N/A"}),(0,Vi.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(null===t||void 0===t||null===(e=t.assignedRegions)||void 0===e?void 0:e.length)||0," Regions Assigned"]})]})})]})})}),(0,Vi.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-lg hover:shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 transition-all duration-300 transform hover:-translate-y-1",children:(0,Vi.jsx)("div",{className:"p-5",children:(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})})}),(0,Vi.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Vi.jsxs)("dl",{children:[(0,Vi.jsx)("dt",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 truncate",children:"Total Towers"}),(0,Vi.jsx)("dd",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"1,234"})]})})]})})}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-lg hover:shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 transition-all duration-300 transform hover:-translate-y-1",children:(0,Vi.jsx)("div",{className:"p-5",children:(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,Vi.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Vi.jsxs)("dl",{children:[(0,Vi.jsx)("dt",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 truncate",children:"Active Towers"}),(0,Vi.jsx)("dd",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"1,156"})]})})]})})}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-lg hover:shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 transition-all duration-300 transform hover:-translate-y-1",children:(0,Vi.jsx)("div",{className:"p-5",children:(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),(0,Vi.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Vi.jsxs)("dl",{children:[(0,Vi.jsx)("dt",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 truncate",children:"Maintenance"}),(0,Vi.jsx)("dd",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:"23"})]})})]})})}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-lg hover:shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 transition-all duration-300 transform hover:-translate-y-1",children:(0,Vi.jsx)("div",{className:"p-5",children:(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,Vi.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,Vi.jsxs)("dl",{children:[(0,Vi.jsx)("dt",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 truncate",children:"Offline"}),(0,Vi.jsx)("dd",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:"55"})]})})]})})})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 h-1/5",children:[(0,Vi.jsx)("div",{className:"lg:col-span-2",children:(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:(0,Vi.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,Vi.jsxs)("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Recent Activity"]}),(0,Vi.jsx)("div",{className:"mt-6 flow-root",children:(0,Vi.jsxs)("div",{className:"text-center py-12",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No recent activity"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Activity tracking will be available with backend integration (Phase 8)"})]})})]})})}),(0,Vi.jsx)("div",{children:(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:(0,Vi.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,Vi.jsxs)("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"System Overview"]}),(0,Vi.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsx)("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Network Health"}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:"98.5%"})]}),(0,Vi.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 shadow-inner",children:(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2.5 rounded-full shadow-sm transition-all duration-500",style:{width:"98.5%"}})}),(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsx)("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Coverage"}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:"85.2%"})]}),(0,Vi.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 shadow-inner",children:(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2.5 rounded-full shadow-sm transition-all duration-500",style:{width:"85.2%"}})}),(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsx)("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Utilization"}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-yellow-600 dark:text-yellow-400",children:"67.8%"})]}),(0,Vi.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 shadow-inner",children:(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-2.5 rounded-full shadow-sm transition-all duration-500",style:{width:"67.8%"}})})]}),(0,Vi.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4 mr-2 text-indigo-600 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Quick Actions"]}),(0,Vi.jsxs)("div",{className:"space-y-2",children:[(0,Vi.jsxs)("button",{className:"w-full flex items-center px-3 py-2.5 text-sm font-semibold text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-all duration-200 transform hover:translate-x-1 group",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4 mr-2 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"View Network Map"]}),(0,Vi.jsxs)("button",{className:"w-full flex items-center px-3 py-2.5 text-sm font-semibold text-purple-700 dark:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-all duration-200 transform hover:translate-x-1 group",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4 mr-2 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate Report"]}),(0,Vi.jsxs)("button",{className:"w-full flex items-center px-3 py-2.5 text-sm font-semibold text-green-700 dark:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-all duration-200 transform hover:translate-x-1 group",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4 mr-2 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Data"]})]})]})]})})})]}),(0,Vi.jsx)(xl,{})]}),(0,Vi.jsx)(yl,{showDetails:!0})]}):(0,Vi.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,Vi.jsx)("div",{className:"text-center",children:(0,Vi.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Please log in to access the dashboard"})})})};let kl=null,wl=!1,jl=null;const Nl=async()=>{if(!kl&&!wl){wl=!0;try{const e=await fetch("/india.json");if(!e.ok)throw new Error("Failed to load India boundary data");const t=await e.json(),r=[];window.indiaGeoJson=t,"FeatureCollection"===t.type&&t.features&&t.features.forEach(e=>{if(e.geometry&&"Polygon"===e.geometry.type){const t=e.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]})),n=new google.maps.Polygon({paths:t});r.push(n)}else e.geometry&&"MultiPolygon"===e.geometry.type&&e.geometry.coordinates.forEach(e=>{const t=e[0].map(e=>({lat:e[1],lng:e[0]})),n=new google.maps.Polygon({paths:t});r.push(n)})}),kl=r,console.log("Loaded ".concat(r.length," boundary polygons for India"))}catch(e){throw console.error("Error loading India boundary:",e),jl=e instanceof Error?e.message:"Unknown error",e}finally{wl=!1}}},Sl=(e,t)=>{if(!kl||0===kl.length)return console.warn("India boundary not loaded yet. Allowing operation."),!0;const r=new google.maps.LatLng(e,t);for(const n of kl)if(google.maps.geometry.poly.containsLocation(r,n))return!0;return!1},Cl=()=>{const e=document.createElement("div");e.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.7);\n    backdrop-filter: blur(4px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n    animation: fadeIn 0.2s ease-out;\n  ";const t=document.createElement("div");t.style.cssText="\n    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);\n    border: 2px solid #ef4444;\n    border-radius: 16px;\n    padding: 32px;\n    max-width: 480px;\n    width: 90%;\n    box-shadow: 0 20px 60px rgba(239, 68, 68, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);\n    animation: slideIn 0.3s ease-out;\n    position: relative;\n  ",t.innerHTML='\n    <style>\n      @keyframes fadeIn {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n      @keyframes slideIn {\n        from {\n          transform: translateY(-20px) scale(0.95);\n          opacity: 0;\n        }\n        to {\n          transform: translateY(0) scale(1);\n          opacity: 1;\n        }\n      }\n      @keyframes pulse {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.05); }\n      }\n    </style>\n    <div style="text-align: center;">\n      \x3c!-- Warning Icon --\x3e\n      <div style="\n        width: 80px;\n        height: 80px;\n        margin: 0 auto 24px;\n        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        box-shadow: 0 8px 24px rgba(239, 68, 68, 0.4);\n        animation: pulse 2s ease-in-out infinite;\n      ">\n        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">\n          <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />\n        </svg>\n      </div>\n\n      \x3c!-- Title --\x3e\n      <h2 style="\n        color: #ffffff;\n        font-size: 26px;\n        font-weight: 700;\n        margin: 0 0 12px 0;\n        letter-spacing: -0.5px;\n      ">Restricted Area</h2>\n\n      \x3c!-- Message --\x3e\n      <p style="\n        color: #cbd5e1;\n        font-size: 16px;\n        line-height: 1.6;\n        margin: 0 0 24px 0;\n      ">\n        GIS tools can only be used within <strong style="color: #60a5fa;">India\'s boundaries</strong>.\n      </p>\n\n      <div style="\n        background: rgba(239, 68, 68, 0.1);\n        border: 1px solid rgba(239, 68, 68, 0.3);\n        border-radius: 12px;\n        padding: 16px;\n        margin-bottom: 24px;\n      ">\n        <p style="\n          color: #fca5a5;\n          font-size: 14px;\n          margin: 0;\n          line-height: 1.5;\n        ">\n          \ud83d\udccd Please click inside India to place your marker or point.\n        </p>\n      </div>\n\n      \x3c!-- Button --\x3e\n      <button id="closeWarningBtn" style="\n        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n        color: white;\n        border: none;\n        border-radius: 12px;\n        padding: 14px 32px;\n        font-size: 16px;\n        font-weight: 600;\n        cursor: pointer;\n        width: 100%;\n        box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);\n        transition: all 0.2s ease;\n      "\n      onmouseover="this.style.transform=\'translateY(-2px)\'; this.style.boxShadow=\'0 6px 20px rgba(59, 130, 246, 0.5)\';"\n      onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'0 4px 16px rgba(59, 130, 246, 0.4)\';"\n      >\n        Understood\n      </button>\n    </div>\n  ',e.appendChild(t),document.body.appendChild(e);const r=t.querySelector("#closeWarningBtn"),n=()=>{e.style.animation="fadeOut 0.2s ease-out",setTimeout(()=>{document.body.removeChild(e)},200)};null===r||void 0===r||r.addEventListener("click",n),e.addEventListener("click",t=>{t.target===e&&n()});const a=document.createElement("style");a.textContent="\n    @keyframes fadeOut {\n      from { opacity: 1; }\n      to { opacity: 0; }\n    }\n  ",document.head.appendChild(a)},El=(0,n.createContext)(void 0),Al={apiKey:"AIzaSyAT5j5Zy8q4XSHLi1arcpkce8CNvbljbUQ",version:"weekly",libraries:["places","drawing","geometry","visualization"],region:"IN",language:"en"},_l=e=>{let{children:t}=e;const r=ci(),{mapInstance:a}=di(e=>e.map),[s,o]=(0,n.useState)(!1),[i,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[m,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{if(window.google){if(o(!0),l(null),window.google){d(new window.google.maps.Geocoder),h(new window.google.maps.DirectionsService);try{await Nl(),console.log("India boundary loaded successfully")}catch(e){console.error("Failed to load India boundary:",e)}}}else{const t=document.createElement("script"),n=Al.apiKey||"AIzaSyAT5j5Zy8q4XSHLi1arcpkce8CNvbljbUQ";t.src="https://maps.googleapis.com/maps/api/js?key=".concat(n,"&libraries=").concat(Al.libraries.join(","),"&region=").concat(Al.region,"&language=").concat(Al.language),t.async=!0,t.defer=!0,t.onload=async()=>{if(o(!0),l(null),window.google){d(new window.google.maps.Geocoder),h(new window.google.maps.DirectionsService);try{await Nl(),console.log("India boundary loaded successfully")}catch(e){console.error("Failed to load India boundary:",e)}}r(Ya({type:"success",title:"Maps API Loaded",message:"Google Maps API has been successfully loaded",autoClose:!0,duration:3e3}))},t.onerror=()=>{const e="Failed to load Google Maps API. Please check your API key and internet connection.";l(e),o(!1),r(Ya({type:"error",title:"Maps Loading Error",message:e,autoClose:!1}))},document.head.appendChild(t)}}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred while loading Google Maps";l(t),o(!1),r(Ya({type:"error",title:"Maps Initialization Error",message:t,autoClose:!1}))}})()},[r]);const f={isLoaded:s,loadError:i,mapInstance:a,createMap:e=>{if(!s||!window.google)return console.warn("Google Maps API not loaded yet"),null;try{const t={center:{lat:20.5937,lng:78.9629},zoom:5,mapTypeId:"roadmap",restriction:void 0,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,fullscreenControl:!1,rotateControl:!1,panControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]}],gestureHandling:"cooperative",keyboardShortcuts:!1,clickableIcons:!1},n=new window.google.maps.Map(e,t);return n.addListener("center_changed",()=>{const e=n.getCenter();e&&r(xa({center:{lat:e.lat(),lng:e.lng()},zoom:n.getZoom()||5}))}),n.addListener("zoom_changed",()=>{const e=n.getCenter();e&&r(xa({center:{lat:e.lat(),lng:e.lng()},zoom:n.getZoom()||5}))}),window.google.maps.places&&g(new window.google.maps.places.PlacesService(n)),r(pa(n)),console.log("Map created successfully:",n),n}catch(t){console.error("Error creating map:",t);const e=t instanceof Error?t.message:"Failed to create map instance";return r(Ya({type:"error",title:"Map Creation Error",message:e,autoClose:!1})),null}},geocoder:c,directionsService:u,placesService:m};return(0,Vi.jsx)(El.Provider,{value:f,children:t})},Tl=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],Ll=(e,t,r)=>{const n=t?'<span class="text-green-600 font-semibold">\u2713 Assigned</span>':'<span class="text-gray-400">Not Assigned</span>';return'\n    <div class="p-3">\n      <h3 class="font-bold text-lg mb-2">'.concat(e,'</h3>\n      <p class="text-sm mb-1">').concat(n,"</p>\n      ").concat(t?'\n        <p class="text-xs text-gray-600 mt-2">\n          You have access to manage towers and data in this region.\n        </p>\n      ':'\n        <p class="text-xs text-gray-400 mt-2">\n          Contact your administrator for access to this region.\n        </p>\n      ',"\n    </div>\n  ")},Ml=e=>{const t=e.trim().toLowerCase();return{"nct of delhi":"delhi","national capital territory of delhi":"delhi","dadra and nagar haveli":"dadra and nagar haveli and daman and diu","daman and diu":"dadra and nagar haveli and daman and diu","andaman and nicobar":"andaman and nicobar islands"}[t]||t},Ol=async(e,t,r,n)=>{if(!r)return{allowed:!1,regionName:null,message:"User not authenticated"};if("Admin"===r.role)return{allowed:!0,regionName:"All Regions (Admin)",message:"Admin access granted"};if(!window.indiaGeoJson||!window.indiaGeoJson.features)return console.error("\u274c India GeoJSON not loaded yet - GIS tools not ready"),{allowed:!1,regionName:null,message:"Map data is still loading. Please wait a moment and try again."};const a=(e=>e?"Admin"===e.role?Tl:e.assignedRegions||[]:[])(r);if(0===a.length)return{allowed:!1,regionName:null,message:"No regions assigned to your account"};if(a.length===Tl.length)return{allowed:!0,regionName:"All Regions",message:"Full access granted"};try{console.log("\ud83d\udd0d Checking region access for coordinates: (".concat(e,", ").concat(t,")")),console.log("\ud83d\udc64 User: ".concat(r.name," (").concat(r.role,"), Assigned regions: ").concat(a.join(", ")));const n=((e,t)=>{if(!window.indiaGeoJson||!window.indiaGeoJson.features)return console.error("\u274c India GeoJSON not loaded yet. Make sure loadIndiaBoundary() completed successfully."),null;const r=window.indiaGeoJson,n=new google.maps.LatLng(e,t);var a;console.log("\ud83d\udd0d Detecting state for coordinates: (".concat(e,", ").concat(t,")")),console.log("\ud83d\udcca Checking against ".concat(r.features.length," state/UT features")),r.features.length>0&&(console.log("\ud83d\udd2c Sample feature properties:",Object.keys(r.features[0].properties||{})),console.log("\ud83d\udd2c Sample feature geometry type:",null===(a=r.features[0].geometry)||void 0===a?void 0:a.type));let s=null,o=[];for(const u of r.features){var i,l,c,d;const e=(null===(i=u.properties)||void 0===i?void 0:i.NAME_1)||(null===(l=u.properties)||void 0===l?void 0:l.ST_NM)||(null===(c=u.properties)||void 0===c?void 0:c.st_nm)||(null===(d=u.properties)||void 0===d?void 0:d.name);if(e){if(o.push(e),"Polygon"===u.geometry.type){const t=u.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]})),r=new google.maps.Polygon({paths:t});if(google.maps.geometry.poly.containsLocation(n,r))return console.log("\u2705 Found state: ".concat(e," (exact match)")),e;const a=new google.maps.LatLngBounds;t.forEach(e=>a.extend(new google.maps.LatLng(e.lat,e.lng)));const o=a.getCenter(),i=google.maps.geometry.spherical.computeDistanceBetween(n,o);(!s||i<s.distance)&&(s={name:e,distance:i})}else if("MultiPolygon"===u.geometry.type)for(const t of u.geometry.coordinates){const r=t[0].map(e=>({lat:e[1],lng:e[0]})),a=new google.maps.Polygon({paths:r});if(google.maps.geometry.poly.containsLocation(n,a))return console.log("\u2705 Found state: ".concat(e," (MultiPolygon, exact match)")),e;const o=new google.maps.LatLngBounds;r.forEach(e=>o.extend(new google.maps.LatLng(e.lat,e.lng)));const i=o.getCenter(),l=google.maps.geometry.spherical.computeDistanceBetween(n,i);(!s||l<s.distance)&&(s={name:e,distance:l})}}else console.warn("\u26a0\ufe0f Found feature without name property:",u.properties)}return console.log("\ud83d\udccb Checked ".concat(o.length," states:"),o.join(", ")),s&&(console.log("\ud83d\udccd Nearest state: ".concat(s.name," at ").concat(Math.round(s.distance/1e3),"km")),s.distance<5e4)?(console.warn("\u26a0\ufe0f No exact match found. Using nearest state: ".concat(s.name," (").concat(Math.round(s.distance/1e3),"km away)")),s.name):(console.error("\u274c No state found for coordinates (".concat(e,", ").concat(t,") - might be outside India")),console.error("   Checked ".concat(o.length," states, nearest was ").concat(s?"".concat(s.name," (").concat(Math.round(s.distance/1e3),"km)"):"none")),null)})(e,t);if(!n)return console.error("\u274c Could not determine state from coordinates - point might be outside India or on border"),{allowed:!1,regionName:null,message:"Could not determine region from coordinates. Please try clicking inside a state (not on borders)."};console.log("\ud83d\udccd Detected region: ".concat(n));const s=Ml(n);console.log('\ud83d\udd04 Normalized detected region: "'.concat(s,'"'));const o=a.some(e=>{const t=Ml(e),r=s===t||s.includes(t)||t.includes(s);return console.log('  Comparing with "'.concat(e,'" (normalized: "').concat(t,'"): ').concat(r?"\u2705 MATCH":"\u274c no match")),r});console.log("\ud83c\udfaf Final access decision: ".concat(o?"\u2705 ALLOWED":"\u274c DENIED"));const i=await(async(e,t)=>{try{return(await nl()).some(e=>e.region===t)}catch(r){return console.error("Error checking temporary access:",r),!1}})(r.id,n);if(i&&console.log("\ud83d\udd11 User has temporary access to ".concat(n)),o||i){const s=i&&!o?"temporary":"permanent";return Qi(r,"REGION_ACCESS_GRANTED","Access granted to ".concat(n," (").concat(s,")"),{severity:"info",region:n,details:{lat:e,lng:t,assignedRegions:a,accessType:s,temporaryAccess:i},success:!0}),{allowed:!0,regionName:n,message:"Access granted to ".concat(n).concat(i&&!o?" (Temporary Access)":"")}}return Qi(r,"REGION_ACCESS_DENIED","Access denied to ".concat(n),{severity:"warning",region:n,details:{lat:e,lng:t,assignedRegions:a,attemptedRegion:n},success:!1,errorMessage:"User attempted to access ".concat(n," without permission")}),{allowed:!1,regionName:n,message:"You don't have access to ".concat(n,". Assigned regions: ").concat(a.join(", "))}}catch(s){return console.error("Error checking region access:",s),{allowed:!1,regionName:null,message:"Error verifying region access. Please refresh the page and try again."}}},Dl=["title","titleId"];function Rl(e,t){let{title:r,titleId:a}=e,o=s(e,Dl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Pl=n.forwardRef(Rl),Fl=["title","titleId"];function Il(e,t){let{title:r,titleId:a}=e,o=s(e,Fl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Bl=n.forwardRef(Il),zl=["title","titleId"];function Wl(e,t){let{title:r,titleId:a}=e,o=s(e,zl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Ul=n.forwardRef(Wl),Hl=["title","titleId"];function Vl(e,t){let{title:r,titleId:a}=e,o=s(e,Hl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const Gl=n.forwardRef(Vl),ql=e=>{let{isOpen:t,onClose:r,type:a,title:s,message:o,autoClose:i=!1,autoCloseDelay:l=3e3}=e;if(n.useEffect(()=>{if(t&&i){const e=setTimeout(()=>{r()},l);return()=>clearTimeout(e)}},[t,i,l,r]),!t)return null;return(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-md w-full transform transition-all animate-in fade-in zoom-in duration-200",children:[(0,Vi.jsxs)("div",{className:"".concat((()=>{switch(a){case"success":return"bg-green-50 dark:bg-green-900/20";case"error":return"bg-red-50 dark:bg-red-900/20";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20";case"info":return"bg-blue-50 dark:bg-blue-900/20";default:return"bg-gray-50 dark:bg-gray-900/20"}})()," p-6 rounded-t-lg"),children:[(0,Vi.jsx)("div",{className:"flex items-center justify-center mb-4",children:(()=>{switch(a){case"success":return(0,Vi.jsx)(Pl,{className:"h-12 w-12 text-green-500"});case"error":return(0,Vi.jsx)(Bl,{className:"h-12 w-12 text-red-500"});case"warning":return(0,Vi.jsx)(Ul,{className:"h-12 w-12 text-yellow-500"});default:return(0,Vi.jsx)(Gl,{className:"h-12 w-12 text-blue-500"})}})()}),(0,Vi.jsx)("h3",{className:"text-xl font-bold text-center ".concat((()=>{switch(a){case"success":return"text-green-900 dark:text-green-100";case"error":return"text-red-900 dark:text-red-100";case"warning":return"text-yellow-900 dark:text-yellow-100";case"info":return"text-blue-900 dark:text-blue-100";default:return"text-gray-900 dark:text-gray-100"}})()),children:s})]}),(0,Vi.jsxs)("div",{className:"p-6",children:[(0,Vi.jsx)("p",{className:"text-center text-gray-700 dark:text-gray-300 mb-6",children:o}),(0,Vi.jsx)("button",{onClick:r,className:"w-full py-3 px-4 rounded-lg font-semibold transition-colors ".concat("success"===a?"bg-green-600 hover:bg-green-700 text-white":"error"===a?"bg-red-600 hover:bg-red-700 text-white":"warning"===a?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:i?"Close":"OK"})]})]})})},$l={TOOL_USAGE:"gis_tool_usage",USER_ACTIVITY:"gis_user_activity",REGIONAL_STATS:"gis_regional_stats",SYSTEM_HEALTH:"gis_system_health",ACTIVITY_LOG:"gis_activity_log"},Kl=e=>{try{const t=localStorage.getItem($l.TOOL_USAGE),r=t?JSON.parse(t):{};r[e.toolName]||(r[e.toolName]={count:0,lastUsed:(new Date).toISOString(),users:[],averageDuration:0,sessions:[]});const n=r[e.toolName];n.count++,n.lastUsed=(new Date).toISOString(),n.users.includes(e.userId)||n.users.push(e.userId),n.sessions.push({timestamp:(new Date).toISOString(),userId:e.userId,duration:e.duration||0,region:e.region}),n.sessions.length>50&&(n.sessions=n.sessions.slice(-50));const a=n.sessions.reduce((e,t)=>e+t.duration,0);n.averageDuration=a/n.sessions.length/60,localStorage.setItem($l.TOOL_USAGE,JSON.stringify(r)),Xl({userId:e.userId,userName:e.userName,action:"tool_used",tool:e.toolName,region:e.region,timestamp:new Date,duration:e.duration,status:"success"})}catch(t){console.error("Error tracking tool usage:",t)}},Yl=()=>{try{const e=localStorage.getItem($l.TOOL_USAGE);if(!e)return[];const t=JSON.parse(e);return Object.entries(t).map(e=>{let[t,r]=e;const n={};r.sessions.forEach(e=>{e.region&&(n[e.region]=(n[e.region]||0)+1)});const a=Object.entries(n).sort((e,t)=>t[1]-e[1]).slice(0,3).map(e=>{let[t]=e;return t}),s=r.sessions.slice(-10),o=r.sessions.slice(-20,-10);let i="stable",l=0;if(o.length>0){const e=s.length,t=o.length,r=(e-t)/t*100;r>10?(i="up",l=Math.round(r)):r<-10&&(i="down",l=Math.round(Math.abs(r)))}return{toolName:t,displayName:tc(t),totalUsage:r.count,averageDuration:Math.round(10*r.averageDuration)/10,lastUsed:new Date(r.lastUsed),popularRegions:a,userCount:r.users.length,trend:i,trendPercentage:l}})}catch(e){return console.error("Error getting tool usage stats:",e),[]}},Xl=e=>{try{const t=localStorage.getItem($l.USER_ACTIVITY),r=t?JSON.parse(t):[];r.push((0,o.A)((0,o.A)({},e),{},{timestamp:new Date(e.timestamp)}));const n=r.slice(-100);localStorage.setItem($l.USER_ACTIVITY,JSON.stringify(n))}catch(t){console.error("Error tracking activity:",t)}},Jl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{const t=localStorage.getItem($l.USER_ACTIVITY);if(!t)return[];return JSON.parse(t).map(e=>(0,o.A)((0,o.A)({},e),{},{timestamp:new Date(e.timestamp)})).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,e)}catch(t){return console.error("Error getting recent activities:",t),[]}},Ql=()=>{try{const e=localStorage.getItem($l.REGIONAL_STATS);if(!e)return[];const t=JSON.parse(e),r=Yl();return Object.entries(t).map(e=>{let[t,n]=e;const a=(Date.now()-new Date(n.lastVisit).getTime())/864e5,s=Math.max(0,100-10*a),o=Math.min(100,5*n.visits),i=Math.round((s+o)/2),l=r.filter(e=>e.popularRegions.includes(t)).sort((e,t)=>t.totalUsage-e.totalUsage).slice(0,3).map(e=>e.toolName);return{regionName:t,activeUsers:0,toolUsage:n.visits,lastActivity:new Date(n.lastVisit),assignedUsers:0,activityScore:i,topTools:l}})}catch(e){return console.error("Error getting regional activity:",e),[]}},Zl=async()=>{try{const e=performance.now();await new Promise(e=>setTimeout(e,50+100*Math.random()));const t=performance.now(),r=Math.round(t-e),n=Math.round(20+40*Math.random()),a=Math.round(40+30*Math.random()),s=sessionStorage.getItem("session_start"),o=s?Math.round((Date.now()-parseInt(s))/1e3):0,i=Jl(100),l=i.filter(e=>"failed"===e.status).length,c=i.length>0?Math.round(l/i.length*100):0;let d="healthy";(r>500||n>80||a>85)&&(d="degraded"),(r>2e3||n>95||a>95)&&(d="down");const u={cpu:n,memory:a,latency:r,uptime:o,errorRate:c,apiStatus:d};return(e=>{try{const t=localStorage.getItem($l.SYSTEM_HEALTH),r=t?JSON.parse(t):{history:[]};r.history.push({timestamp:(new Date).toISOString(),cpu:e.cpu,memory:e.memory,latency:e.latency}),r.history.length>48&&(r.history=r.history.slice(-48)),localStorage.setItem($l.SYSTEM_HEALTH,JSON.stringify(r))}catch(t){console.error("Error recording system health:",t)}})(u),u}catch(e){return console.error("Error getting system health:",e),{cpu:0,memory:0,latency:0,uptime:0,errorRate:0,apiStatus:"down"}}},ec=e=>{try{Date.now();const t=e.filter(e=>Jl(100).some(t=>t.userId===e.id)),r=e.filter(e=>t.includes(e)),n=e.filter(e=>Math.random()<.1).length;return{total:e.length,active:t.length,inactive:e.length-t.length,loggedIn:r.slice(0,10),newThisWeek:n,trend:{daily:Array.from({length:7},()=>Math.floor(30*Math.random())+10),weekly:Array.from({length:4},()=>Math.floor(100*Math.random())+50),monthly:Array.from({length:12},()=>Math.floor(300*Math.random())+100)}}}catch(t){return console.error("Error getting user statistics:",t),{total:0,active:0,inactive:0,loggedIn:[],newThisWeek:0,trend:{daily:[],weekly:[],monthly:[]}}}},tc=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");class rc{async getAll(e){try{var t,r;const n={};void 0!==(null===e||void 0===e?void 0:e.userId)&&("all"===e.userId?(n.filter="all",console.log("\ud83d\udd0d Distance: Fetching ALL users data (filter=all)")):"me"===e.userId?(n.filter="me",console.log("\ud83d\udd0d Distance: Fetching MY data only (filter=me)")):(n.filter="user",n.userId=e.userId,console.log("\ud83d\udd0d Distance: Fetching data for userId:",e.userId,"(filter=user)"))),null!==e&&void 0!==e&&e.regionId&&(n.regionId=e.regionId),null!==e&&void 0!==e&&e.page&&(n.page=e.page),null!==e&&void 0!==e&&e.limit&&(n.limit=e.limit),n._t=Date.now(),console.log("\ud83d\udce4 Distance API request URL:","/measurements/distance"),console.log("\ud83d\udce4 Distance API request params:",n);const a=await gi.get("/measurements/distance",{params:n});return console.log("\ud83d\udce5 Distance API response:",{count:(null===(t=a.data.measurements)||void 0===t?void 0:t.length)||0,firstItem:(null===(r=a.data.measurements)||void 0===r?void 0:r[0])||null,allItems:a.data.measurements}),a.data.measurements||[]}catch(s){var n,a;return console.error("\u274c Error fetching distance measurements:",{message:s.message,response:null===(n=s.response)||void 0===n?void 0:n.data,status:null===(a=s.response)||void 0===a?void 0:a.status}),[]}}async getById(e){try{return(await gi.get("/measurements/distance/".concat(e))).data.measurement||null}catch(t){return console.error("Error fetching distance measurement:",t),null}}async create(e){try{return(await gi.post("/measurements/distance",{measurement_name:e.measurement_name,points:e.points,total_distance:e.total_distance,unit:e.unit||"meters",region_id:e.region_id,notes:e.notes,is_saved:!0})).data.measurement||null}catch(t){throw console.error("Error creating distance measurement:",t),t}}async update(e,t){try{return await gi.put("/measurements/distance/".concat(e),t),!0}catch(r){return console.error("Error updating distance measurement:",r),!1}}async delete(e){try{return await gi.delete("/measurements/distance/".concat(e)),!0}catch(t){return console.error("Error deleting distance measurement:",t),!1}}}class nc{async getAll(e){try{var t;const r={};void 0!==(null===e||void 0===e?void 0:e.userId)&&("all"===e.userId?(r.filter="all",console.log("\ud83d\udd0d Polygon: Fetching ALL users data (filter=all)")):"me"===e.userId?(r.filter="me",console.log("\ud83d\udd0d Polygon: Fetching MY data only (filter=me)")):(r.filter="user",r.userId=e.userId,console.log("\ud83d\udd0d Polygon: Fetching data for userId:",e.userId,"(filter=user)"))),null!==e&&void 0!==e&&e.regionId&&(r.regionId=e.regionId),r._t=Date.now(),console.log("\ud83d\udce4 Polygon API request params:",r);const n=await gi.get("/drawings/polygon",{params:r});return console.log("\ud83d\udce5 Polygon API response count:",(null===(t=n.data.polygons)||void 0===t?void 0:t.length)||0),n.data.polygons||[]}catch(r){return console.error("Error fetching polygon drawings:",r),[]}}async getById(e){try{return(await gi.get("/drawings/polygon/".concat(e))).data.polygon||null}catch(t){return console.error("Error fetching polygon drawing:",t),null}}async create(e){try{return(await gi.post("/drawings/polygon",{polygon_name:e.polygon_name,coordinates:e.coordinates,area:e.area,perimeter:e.perimeter,fill_color:e.fill_color,stroke_color:e.stroke_color,opacity:e.opacity,region_id:e.region_id,properties:e.properties,notes:e.notes,is_saved:!0})).data.polygon||null}catch(t){throw console.error("Error creating polygon drawing:",t),t}}async update(e,t){try{return await gi.put("/drawings/polygon/".concat(e),t),!0}catch(r){return console.error("Error updating polygon drawing:",r),!1}}async delete(e){try{return await gi.delete("/drawings/polygon/".concat(e)),!0}catch(t){return console.error("Error deleting polygon drawing:",t),!1}}}class ac{async getAll(e){try{var t;const r={};void 0!==(null===e||void 0===e?void 0:e.userId)&&("all"===e.userId?(r.filter="all",console.log("\ud83d\udd0d Circle: Fetching ALL users data (filter=all)")):"me"===e.userId?(r.filter="me",console.log("\ud83d\udd0d Circle: Fetching MY data only (filter=me)")):(r.filter="user",r.userId=e.userId,console.log("\ud83d\udd0d Circle: Fetching data for userId:",e.userId,"(filter=user)"))),null!==e&&void 0!==e&&e.regionId&&(r.regionId=e.regionId),r._t=Date.now(),console.log("\ud83d\udce4 Circle API request params:",r);const n=await gi.get("/drawings/circle",{params:r});return console.log("\ud83d\udce5 Circle API response count:",(null===(t=n.data.circles)||void 0===t?void 0:t.length)||0),n.data.circles||[]}catch(r){return console.error("Error fetching circle drawings:",r),[]}}async getById(e){try{return(await gi.get("/drawings/circle/".concat(e))).data.circle||null}catch(t){return console.error("Error fetching circle drawing:",t),null}}async create(e){try{return(await gi.post("/drawings/circle",{circle_name:e.circle_name,center_lat:e.center_lat,center_lng:e.center_lng,radius:e.radius,fill_color:e.fill_color,stroke_color:e.stroke_color,opacity:e.opacity,region_id:e.region_id,properties:e.properties,notes:e.notes,is_saved:!0})).data.circle||null}catch(t){throw console.error("Error creating circle drawing:",t),t}}async update(e,t){try{return await gi.put("/drawings/circle/".concat(e),t),!0}catch(r){return console.error("Error updating circle drawing:",r),!1}}async delete(e){try{return await gi.delete("/drawings/circle/".concat(e)),!0}catch(t){return console.error("Error deleting circle drawing:",t),!1}}}class sc{async getAll(e){try{var t;const r={};void 0!==(null===e||void 0===e?void 0:e.userId)&&("all"===e.userId?(r.filter="all",console.log("\ud83d\udd0d SectorRF: Fetching ALL users data (filter=all)")):"me"===e.userId?(r.filter="me",console.log("\ud83d\udd0d SectorRF: Fetching MY data only (filter=me)")):(r.filter="user",r.userId=e.userId,console.log("\ud83d\udd0d SectorRF: Fetching data for userId:",e.userId,"(filter=user)"))),null!==e&&void 0!==e&&e.regionId&&(r.regionId=e.regionId),r._t=Date.now(),console.log("\ud83d\udce4 SectorRF API request params:",r);const n=await gi.get("/rf/sectors",{params:r});return console.log("\ud83d\udce5 SectorRF API response count:",(null===(t=n.data.sectors)||void 0===t?void 0:t.length)||0),n.data.sectors||[]}catch(r){return console.error("Error fetching RF sectors:",r),[]}}async getById(e){try{return(await gi.get("/rf/sectors/".concat(e))).data.sector||null}catch(t){return console.error("Error fetching RF sector:",t),null}}async create(e){try{return(await gi.post("/rf/sectors",{sector_name:e.sector_name,tower_lat:e.tower_lat,tower_lng:e.tower_lng,azimuth:e.azimuth,beamwidth:e.beamwidth,radius:e.radius,frequency:e.frequency,power:e.power,antenna_height:e.antenna_height,antenna_type:e.antenna_type,fill_color:e.fill_color,stroke_color:e.stroke_color,opacity:e.opacity,region_id:e.region_id,properties:e.properties,notes:e.notes,is_saved:!0})).data.sector||null}catch(t){throw console.error("Error creating RF sector:",t),t}}async update(e,t){try{return await gi.put("/rf/sectors/".concat(e),t),!0}catch(r){return console.error("Error updating RF sector:",r),!1}}async delete(e){try{return await gi.delete("/rf/sectors/".concat(e)),!0}catch(t){return console.error("Error deleting RF sector:",t),!1}}async calculateCoverage(e){try{return(await gi.post("/rf/sectors/".concat(e,"/calculate"))).data}catch(t){return console.error("Error calculating RF coverage:",t),null}}}class oc{async getAll(e){try{var t,r;const n={};void 0!==(null===e||void 0===e?void 0:e.userId)&&("all"===e.userId?(n.filter="all",console.log("\ud83d\udd0d Elevation: Fetching ALL users data (filter=all)")):"me"===e.userId?(n.filter="me",console.log("\ud83d\udd0d Elevation: Fetching MY data only (filter=me)")):(n.filter="user",n.userId=e.userId,console.log("\ud83d\udd0d Elevation: Fetching data for userId:",e.userId,"(filter=user)"))),null!==e&&void 0!==e&&e.regionId&&(n.regionId=e.regionId),n._t=Date.now(),console.log("\ud83d\udce4 Elevation API request params:",n);const a=await gi.get("/elevation",{params:n});return console.log("\ud83d\udce5 Elevation API response:",{count:(null===(t=a.data.profiles)||void 0===t?void 0:t.length)||0,sample:(null===(r=a.data.profiles)||void 0===r?void 0:r[0])||null}),a.data.profiles||[]}catch(n){return console.error("Error fetching elevation profiles:",n),[]}}async getById(e){try{return(await gi.get("/elevation/".concat(e))).data.profile||null}catch(t){return console.error("Error fetching elevation profile:",t),null}}async create(e){try{console.log("\ud83d\udce4 Creating elevation profile:",{profile_name:e.profile_name,total_distance:e.total_distance,max_elevation:e.max_elevation,min_elevation:e.min_elevation});const t=await gi.post("/elevation/profiles",{profile_name:e.profile_name,start_point:e.start_point,end_point:e.end_point,elevation_data:e.elevation_data,total_distance:e.total_distance,max_elevation:e.max_elevation,min_elevation:e.min_elevation,region_id:e.region_id,notes:e.notes,is_saved:!0});return console.log("\u2705 Elevation profile created successfully:",t.data),t.data.profile||null}catch(u){var t,r,n,a,s,o,i;if(console.error("\u274c Error creating elevation profile:",{status:null===(t=u.response)||void 0===t?void 0:t.status,message:(null===(r=u.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||u.message,url:null===(a=u.config)||void 0===a?void 0:a.url}),404===(null===(s=u.response)||void 0===s?void 0:s.status))try{console.log("\ud83d\udd04 Trying fallback endpoint: /elevation");const t=await gi.post("/elevation",{profile_name:e.profile_name,start_point:e.start_point,end_point:e.end_point,elevation_data:e.elevation_data,total_distance:e.total_distance,max_elevation:e.max_elevation,min_elevation:e.min_elevation,region_id:e.region_id,notes:e.notes,is_saved:!0});return console.log("\u2705 Elevation profile created via fallback endpoint"),t.data.profile||null}catch(h){var l,c,d;throw console.error("\u274c Fallback endpoint also failed:",(null===(l=h.response)||void 0===l?void 0:l.data)||h.message),new Error("Backend endpoint not found. Please ensure the elevation profile API is properly configured. Error: ".concat((null===(c=h.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||h.message))}throw new Error((null===(o=u.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message)||"Failed to save elevation profile to database")}}async update(e,t){try{return await gi.put("/elevation/".concat(e),t),!0}catch(r){return console.error("Error updating elevation profile:",r),!1}}async delete(e){try{return await gi.delete("/elevation/".concat(e)),!0}catch(t){return console.error("Error deleting elevation profile:",t),!1}}}const ic=new class{constructor(){this.distanceMeasurements=new rc,this.polygonDrawings=new nc,this.circleDrawings=new ac,this.sectorRF=new sc,this.elevationProfiles=new oc}async getAllUserData(e){try{const[t,r,n,a,s]=await Promise.all([this.distanceMeasurements.getAll(e),this.polygonDrawings.getAll(e),this.circleDrawings.getAll(e),this.sectorRF.getAll(e),this.elevationProfiles.getAll(e)]);return{distanceMeasurements:t,polygonDrawings:r,circleDrawings:n,sectorRF:a,elevationProfiles:s,total:t.length+r.length+n.length+a.length+s.length}}catch(t){return console.error("Error fetching all user GIS data:",t),{distanceMeasurements:[],polygonDrawings:[],circleDrawings:[],sectorRF:[],elevationProfiles:[],total:0}}}async getStatistics(e){const t=await this.getAllUserData(e);return{totalItems:t.total,distanceMeasurements:t.distanceMeasurements.length,polygonDrawings:t.polygonDrawings.length,circleDrawings:t.circleDrawings.length,sectorRF:t.sectorRF.length,elevationProfiles:t.elevationProfiles.length}}},lc=ic.distanceMeasurements,cc=ic.polygonDrawings,dc=ic.circleDrawings,uc=ic.sectorRF,hc=ic.elevationProfiles,mc=e=>{let{map:t,onSave:r,onClose:a}=e;const{user:s}=di(e=>e.auth),[i]=(0,n.useState)(Date.now()),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(null),[g,f]=(0,n.useState)([]),[p,x]=(0,n.useState)(0),[b,y]=(0,n.useState)([]),[v,k]=(0,n.useState)(""),[w,j]=(0,n.useState)(""),[N,S]=(0,n.useState)(!1),[C,E]=(0,n.useState)(!1),[A,_]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),[T,L]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!t)return;const e=t.addListener("click",e=>{e.latLng&&M(e.latLng.lat(),e.latLng.lng())});return()=>{google.maps.event.removeListener(e)}},[t,l]),(0,n.useEffect)(()=>{if(t)if(h&&h.setMap(null),g.forEach(e=>e.setMap(null)),f([]),l.length>=2){const e=new google.maps.Polyline({path:l.map(e=>({lat:e.lat,lng:e.lng})),geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:6,map:t,zIndex:999999,clickable:!0,visible:!0});m(e),D()}else m(null),x(0),y([])},[l,t]),(0,n.useEffect)(()=>{if(!t)return;const e=t.getStreetView(),r=e.addListener("visible_changed",()=>{e.getVisible()&&setTimeout(()=>{if(h){const e=h.getPath(),r=[];for(let t=0;t<e.getLength();t++){const n=e.getAt(t);r.push({lat:n.lat(),lng:n.lng()})}h.setMap(null);const n=new google.maps.Polyline({path:r,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:8,map:t,zIndex:999999,clickable:!0,visible:!0});m(n)}d.forEach(e=>{e.setOptions({zIndex:1e6,optimized:!1,visible:!0})}),g.forEach(e=>{e.setOptions({zIndex:1000001,optimized:!1,visible:!0})})},100)});return()=>{google.maps.event.removeListener(r)}},[t,h,d,g]);const M=async(e,r)=>{if(!Sl(e,r))return void Cl();const n=await Ol(e,r,s);if(!n.allowed)return void _({isOpen:!0,type:"error",title:"Region Access Denied",message:n.message||"You don't have access to this region. Contact your administrator."});const a=l.length,o=String.fromCharCode(65+a),i={lat:e,lng:r,label:o};if(c(e=>[...e,i]),t){const n=new google.maps.Marker({position:{lat:e,lng:r},map:t,label:{text:o,color:"white",fontWeight:"bold"},title:"Point ".concat(o),draggable:!0,zIndex:1e6,optimized:!1});n.addListener("dragend",()=>{const e=n.getPosition();e&&O(a,e.lat(),e.lng())}),u(e=>[...e,n])}},O=(e,t,r)=>{c(n=>{const a=[...n];return a[e]=(0,o.A)((0,o.A)({},a[e]),{},{lat:t,lng:r}),a})},D=()=>{if(l.length<2)return x(0),void y([]);let e=0;const r=[],n=[];for(let a=0;a<l.length-1;a++){const s=new google.maps.LatLng(l[a].lat,l[a].lng),o=new google.maps.LatLng(l[a+1].lat,l[a+1].lng),i=google.maps.geometry.spherical.computeDistanceBetween(s,o);r.push({distance:i,from:l[a].label,to:l[a+1].label});const c=(l[a].lat+l[a+1].lat)/2,d=(l[a].lng+l[a+1].lng)/2,u=new google.maps.Marker({position:{lat:c,lng:d},map:t,label:{text:P(i),color:"red",fontSize:"14px",fontWeight:"bold",fontFamily:"Arial, sans-serif"},zIndex:1000001,clickable:!1,optimized:!1});n.push(u),e+=i}x(e),y(r),f(n)},R=()=>{d.forEach(e=>e.setMap(null)),h&&h.setMap(null),g.forEach(e=>e.setMap(null)),c([]),u([]),m(null),f([]),x(0),y([])},P=e=>e<1e3?"".concat(e.toFixed(2)," m"):"".concat((e/1e3).toFixed(2)," km");return(0,Vi.jsxs)("div",{className:"fixed top-16 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 max-w-md z-40 max-h-[80vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Distance Measurement"]}),a&&(0,Vi.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsx)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:(0,Vi.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Click on the map to add measurement points. Points will be labeled A, B, C, etc."})}),l.length>=2&&(0,Vi.jsxs)("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-md",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Distance"}),(0,Vi.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:P(p)})]}),b.length>0&&(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Segments"}),(0,Vi.jsx)("div",{className:"overflow-hidden rounded-md border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,Vi.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,Vi.jsxs)("tr",{children:[(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"From"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"To"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Distance"})]})}),(0,Vi.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:b.map((e,t)=>(0,Vi.jsxs)("tr",{children:[(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-white",children:e.from}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-white",children:e.to}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm text-right text-gray-900 dark:text-white",children:P(e.distance)})]},t))})]})})]}),l.length>0&&(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Points (",l.length,")"]}),(0,Vi.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-1",children:l.map((e,r)=>(0,Vi.jsxs)("div",{className:"flex items-center justify-between text-xs bg-gray-50 dark:bg-gray-900 p-2 rounded",children:[(0,Vi.jsxs)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Point ",e.label]}),(0,Vi.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[e.lat.toFixed(6),", ",e.lng.toFixed(6)]}),N&&(0,Vi.jsx)("button",{onClick:()=>((e,r)=>{if(!t||!N)return;const n=t.getStreetView();n.setPosition({lat:e,lng:r}),n.setVisible(!0)})(e.lat,e.lng),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400",title:"Open Street View",children:(0,Vi.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},r))})]}),(0,Vi.jsx)("div",{className:"mb-4",children:(0,Vi.jsxs)("label",{className:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300",children:[(0,Vi.jsx)("input",{type:"checkbox",checked:N,onChange:e=>S(e.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),(0,Vi.jsx)("span",{children:"Enable Street View"})]})}),(0,Vi.jsxs)("div",{className:"flex space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>{if(0===l.length)return;const e=d[d.length-1];e&&e.setMap(null),c(e=>e.slice(0,-1)),u(e=>e.slice(0,-1))},disabled:0===l.length,className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Undo"}),(0,Vi.jsx)("button",{onClick:R,disabled:0===l.length,className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"}),(0,Vi.jsx)("button",{onClick:()=>E(!0),disabled:l.length<2||T,className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Saving...":"Save"})]}),C&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Save Distance Measurement"}),(0,Vi.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),(0,Vi.jsx)("input",{type:"text",value:v,onChange:e=>k(e.target.value),placeholder:"Enter measurement name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white text-gray-900 dark:bg-gray-700 dark:text-white",autoFocus:!0})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,Vi.jsx)("textarea",{value:w,onChange:e=>j(e.target.value),placeholder:"Enter description (optional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white text-gray-900 dark:bg-gray-700 dark:text-white"})]})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(l.length<2)return void _({isOpen:!0,type:"warning",title:"Insufficient Points",message:"Please add at least 2 points to measure distance"});if(!v.trim())return void _({isOpen:!0,type:"warning",title:"Name Required",message:"Please enter a name for this measurement"});const e={id:"dist_".concat(Date.now()),name:v.trim(),points:l,totalDistance:p,segments:b,createdAt:new Date,updatedAt:new Date,streetViewEnabled:N,color:"#FF0000",description:w.trim()||void 0};r&&r(e),L(!0);try{if(await lc.create({measurement_name:v.trim(),points:l,total_distance:p,unit:"meters",notes:w.trim()})){const e=Math.round((Date.now()-i)/1e3);Kl({toolName:"distance-measurement",userId:(null===s||void 0===s?void 0:s.id)||"guest",userName:(null===s||void 0===s?void 0:s.name)||"Guest User",duration:e}),_({isOpen:!0,type:"success",title:"Success!",message:"Distance measurement saved to database!"}),R(),E(!1),k(""),j("")}}catch(t){return console.error("Error saving measurement:",t),void _({isOpen:!0,type:"error",title:"Error",message:"Failed to save measurement. Please try again."})}finally{L(!1)}},disabled:T,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Saving...":"Save"})]})]})}),(0,Vi.jsx)(ql,{isOpen:A.isOpen,onClose:()=>_((0,o.A)((0,o.A)({},A),{},{isOpen:!1})),type:A.type,title:A.title,message:A.message,autoClose:!0,autoCloseDelay:3e3})]})},gc=e=>{let{map:t,onSave:r,onClose:a}=e;const{user:s}=di(e=>e.auth),[i]=(0,n.useState)(Date.now()),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(null),[g,f]=(0,n.useState)(0),[p,x]=(0,n.useState)(0),[b,y]=(0,n.useState)(""),[v,k]=(0,n.useState)("#FF0000"),[w,j]=(0,n.useState)(.35),[N,S]=(0,n.useState)(""),[C,E]=(0,n.useState)(!1),[A,_]=(0,n.useState)(!0),[T,L]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),[M,O]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!t||!A)return;const e=t.addListener("click",e=>{e.latLng&&D(e.latLng.lat(),e.latLng.lng())});return()=>{google.maps.event.removeListener(e)}},[t,l,A]),(0,n.useEffect)(()=>{if(!t||l.length<3)return void(h&&(h.setMap(null),m(null)));h&&h.setMap(null);const e=new google.maps.Polygon({paths:l,strokeColor:v,strokeOpacity:.8,strokeWeight:2,fillColor:v,fillOpacity:w,map:t,editable:A,draggable:!1});A&&(google.maps.event.addListener(e.getPath(),"set_at",()=>{P(e)}),google.maps.event.addListener(e.getPath(),"insert_at",()=>{P(e)})),m(e),F()},[l,t,v,w,A]);const D=async(e,r)=>{if(!Sl(e,r))return void Cl();const n=await Ol(e,r,s);if(!n.allowed)return void L({isOpen:!0,type:"error",title:"Region Access Denied",message:n.message||"You don't have access to this region. Contact your administrator."});const a={lat:e,lng:r};if(c(e=>[...e,a]),t){const n=new google.maps.Marker({position:{lat:e,lng:r},map:t,label:{text:String(l.length+1),color:"white",fontWeight:"bold"},title:"Vertex ".concat(l.length+1),draggable:A});A&&n.addListener("dragend",()=>{const e=n.getPosition();e&&R(l.length,e.lat(),e.lng())}),u(e=>[...e,n])}},R=(e,t,r)=>{c(n=>{const a=[...n];return a[e]={lat:t,lng:r},a})},P=e=>{const t=e.getPath(),r=[];for(let n=0;n<t.getLength();n++){const e=t.getAt(n);r.push({lat:e.lat(),lng:e.lng()})}c(r)},F=()=>{if(l.length<3)return f(0),void x(0);const e=l.map(e=>new google.maps.LatLng(e.lat,e.lng)),t=google.maps.geometry.spherical.computeArea(e);f(t);let r=0;for(let n=0;n<l.length;n++){const e=new google.maps.LatLng(l[n].lat,l[n].lng),t=new google.maps.LatLng(l[(n+1)%l.length].lat,l[(n+1)%l.length].lng);r+=google.maps.geometry.spherical.computeDistanceBetween(e,t)}x(r)},I=()=>{d.forEach(e=>e.setMap(null)),h&&h.setMap(null),c([]),u([]),m(null),f(0),x(0),_(!0)};return(0,Vi.jsxs)("div",{className:"fixed top-16 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 max-w-md z-40 max-h-[80vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),"Polygon Drawing"]}),a&&(0,Vi.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsx)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:(0,Vi.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:A?"Click on the map to add vertices. Add at least 3 vertices to create a polygon.":"Drawing complete. You can now save this polygon."})}),l.length>=3&&(0,Vi.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,Vi.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Area"}),(0,Vi.jsx)("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:(z=g,z<1e4?"".concat(z.toFixed(2)," m\xb2"):z<1e6?"".concat((z/1e4).toFixed(2)," hectares"):"".concat((z/1e6).toFixed(2)," km\xb2"))})]}),(0,Vi.jsxs)("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-md",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Perimeter"}),(0,Vi.jsx)("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:(B=p,B<1e3?"".concat(B.toFixed(2)," m"):"".concat((B/1e3).toFixed(2)," km"))})]})]}),l.length>0&&(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Vertices (",l.length,")"]}),(0,Vi.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-1",children:l.map((e,t)=>(0,Vi.jsxs)("div",{className:"flex items-center justify-between text-xs bg-gray-50 dark:bg-gray-900 p-2 rounded",children:[(0,Vi.jsxs)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Point ",t+1]}),(0,Vi.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[e.lat.toFixed(6),", ",e.lng.toFixed(6)]})]},t))})]}),(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Polygon Color"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("input",{type:"color",value:v,onChange:e=>k(e.target.value),className:"w-12 h-10 rounded border border-gray-300 dark:border-gray-600"}),(0,Vi.jsx)("input",{type:"text",value:v,onChange:e=>k(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]})]}),(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Fill Opacity: ",(100*w).toFixed(0),"%"]}),(0,Vi.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:w,onChange:e=>j(parseFloat(e.target.value)),className:"w-full"})]}),(0,Vi.jsx)("div",{className:"grid grid-cols-3 gap-2",children:A?(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("button",{onClick:()=>{if(0===l.length)return;const e=d[d.length-1];e&&e.setMap(null),c(e=>e.slice(0,-1)),u(e=>e.slice(0,-1))},disabled:0===l.length,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Undo"}),(0,Vi.jsx)("button",{onClick:()=>{l.length<3?L({isOpen:!0,type:"warning",title:"Insufficient Vertices",message:"Please add at least 3 vertices to create a polygon"}):(_(!1),d.forEach(e=>e.setDraggable(!1)),h&&h.setEditable(!1))},disabled:l.length<3,className:"px-3 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Complete"}),(0,Vi.jsx)("button",{onClick:I,className:"px-3 py-2 text-sm font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-md hover:bg-red-100 dark:hover:bg-red-900/30",children:"Clear All"})]}):(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("button",{onClick:()=>_(!0),className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Edit"}),(0,Vi.jsx)("button",{onClick:()=>E(!0),disabled:M,className:"px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:M?"Saving...":"Save"}),(0,Vi.jsx)("button",{onClick:I,className:"px-3 py-2 text-sm font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-md hover:bg-red-100 dark:hover:bg-red-900/30",children:"Clear All"})]})}),C&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Save Polygon"}),(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,Vi.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:"Enter polygon name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",autoFocus:!0})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,Vi.jsx)("textarea",{value:N,onChange:e=>S(e.target.value),placeholder:"Enter description (optional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white text-gray-900 dark:bg-gray-700 dark:text-white"})]})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,Vi.jsx)("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(l.length<3)return void L({isOpen:!0,type:"warning",title:"Insufficient Vertices",message:"Please add at least 3 vertices to create a polygon"});if(!b.trim())return void L({isOpen:!0,type:"warning",title:"Name Required",message:"Please enter a name for this polygon"});const e={id:"poly_".concat(Date.now()),name:b.trim(),vertices:l,area:g,perimeter:p,color:v,fillOpacity:w,strokeWeight:2,createdAt:new Date,updatedAt:new Date,description:N.trim()||void 0};r&&r(e),O(!0);try{if(await cc.create({polygon_name:b.trim(),coordinates:l,area:g,perimeter:p,fill_color:v,stroke_color:v,opacity:w,notes:N.trim()})){const e=Math.round((Date.now()-i)/1e3);Kl({toolName:"polygon-drawing",userId:(null===s||void 0===s?void 0:s.id)||"guest",userName:(null===s||void 0===s?void 0:s.name)||"Guest User",duration:e}),L({isOpen:!0,type:"success",title:"Success!",message:"Polygon saved to database!"}),I(),E(!1),y(""),S("")}}catch(t){return console.error("Error saving polygon:",t),void L({isOpen:!0,type:"error",title:"Error",message:"Failed to save polygon. Please try again."})}finally{O(!1)}},disabled:M,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:M?"Saving...":"Save"})]})]})}),(0,Vi.jsx)(ql,{isOpen:T.isOpen,onClose:()=>L((0,o.A)((0,o.A)({},T),{},{isOpen:!1})),type:T.type,title:T.title,message:T.message,autoClose:!0,autoCloseDelay:3e3})]});var B,z},fc=e=>{let{map:t,onSave:r,onClose:a}=e;const{user:s}=di(e=>e.auth),[i]=(0,n.useState)(Date.now()),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(null),[g,f]=(0,n.useState)(1e3),[p,x]=(0,n.useState)(0),[b,y]=(0,n.useState)(0),[v,k]=(0,n.useState)(""),[w,j]=(0,n.useState)("#FF0000"),[N,S]=(0,n.useState)(.35),[C,E]=(0,n.useState)(""),[A,_]=(0,n.useState)(!1),[T,L]=(0,n.useState)("click"),[M,O]=(0,n.useState)(!0),[D,R]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),[P,F]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!t||!M)return;const e=t.addListener("click",e=>{e.latLng&&I(e.latLng.lat(),e.latLng.lng())});return()=>{google.maps.event.removeListener(e)}},[t,M]),(0,n.useEffect)(()=>{if(!t||!l)return;h&&h.setMap(null);const e=new google.maps.Circle({center:l,radius:g,strokeColor:w,strokeOpacity:.8,strokeWeight:2,fillColor:w,fillOpacity:N,map:t,editable:!0,draggable:!0});e.addListener("radius_changed",()=>{const t=e.getRadius();f(t)}),e.addListener("dragend",()=>{const t=e.getCenter();if(t){const r=t.lat(),n=t.lng();if(!Sl(r,n))return Cl(),void e.setCenter(l);c({lat:r,lng:n}),d&&d.setPosition(t)}}),m(e),B(g)},[l,t,w,N]),(0,n.useEffect)(()=>{h&&(h.setRadius(g),B(g))},[g]);const I=async(e,r)=>{if(!Sl(e,r))return void Cl();const n=await Ol(e,r,s);if(n.allowed){if(c({lat:e,lng:r}),O(!1),t){const n=new google.maps.Marker({position:{lat:e,lng:r},map:t,label:{text:"\u2295",color:"white",fontWeight:"bold",fontSize:"20px"},title:"Circle Center",draggable:!0});n.addListener("dragend",()=>{const e=n.getPosition();if(e){const t=e.lat(),r=e.lng();if(!Sl(t,r))return Cl(),void n.setPosition(l);c({lat:t,lng:r})}}),u(n)}}else R({isOpen:!0,type:"error",title:"Region Access Denied",message:n.message||"You don't have access to this region. Contact your administrator."})},B=e=>{const t=Math.PI*e*e;x(t);const r=2*Math.PI*e;y(r)},z=()=>{h&&(h.setMap(null),m(null)),d&&(d.setMap(null),u(null)),c(null),f(1e3),x(0),y(0),O(!0)},W=e=>e<1e3?"".concat(e.toFixed(2)," m"):"".concat((e/1e3).toFixed(2)," km");return(0,Vi.jsxs)("div",{className:"fixed top-16 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 max-w-md z-40 max-h-[80vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),"Circle/Radius Tool"]}),a&&(0,Vi.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsx)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:(0,Vi.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:M?"Click on the map to place the circle center.":"Drag the circle or center marker to reposition. Drag the circle edge to resize."})}),l&&(0,Vi.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-900 rounded-md",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Center"}),(0,Vi.jsxs)("div",{className:"text-sm font-mono text-gray-900 dark:text-white",children:[l.lat.toFixed(6),", ",l.lng.toFixed(6)]})]}),l&&(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Radius: ",W(g)]}),(0,Vi.jsx)("input",{type:"range",min:"100",max:"50000",step:"100",value:g,onChange:e=>f(parseFloat(e.target.value)),className:"w-full mb-2"}),(0,Vi.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{label:"500m",value:500},{label:"1km",value:1e3},{label:"2km",value:2e3},{label:"5km",value:5e3},{label:"10km",value:1e4}].map(e=>(0,Vi.jsx)("button",{onClick:()=>f(e.value),className:"px-3 py-1 text-xs font-medium rounded-md ".concat(Math.abs(g-e.value)<50?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.label},e.value))})]}),l&&(0,Vi.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,Vi.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Area"}),(0,Vi.jsx)("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:(U=p,U<1e4?"".concat(U.toFixed(2)," m\xb2"):U<1e6?"".concat((U/1e4).toFixed(2)," hectares"):"".concat((U/1e6).toFixed(2)," km\xb2"))})]}),(0,Vi.jsxs)("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-md",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Perimeter (Circumference)"}),(0,Vi.jsx)("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:W(b)})]})]}),l&&(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Circle Color"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("input",{type:"color",value:w,onChange:e=>j(e.target.value),className:"w-12 h-10 rounded border border-gray-300 dark:border-gray-600"}),(0,Vi.jsx)("input",{type:"text",value:w,onChange:e=>j(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]})]}),l&&(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Fill Opacity: ",(100*N).toFixed(0),"%"]}),(0,Vi.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:N,onChange:e=>S(parseFloat(e.target.value)),className:"w-full"})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2",children:[(0,Vi.jsx)("button",{onClick:z,disabled:!l,className:"flex-1 px-3 py-2 text-sm font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-md hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"}),(0,Vi.jsx)("button",{onClick:()=>_(!0),disabled:!l||P,className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Saving...":"Save"})]}),A&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Save Circle"}),(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,Vi.jsx)("input",{type:"text",value:v,onChange:e=>k(e.target.value),placeholder:"Enter circle name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",autoFocus:!0})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,Vi.jsx)("textarea",{value:C,onChange:e=>E(e.target.value),placeholder:"Enter description (optional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white text-gray-900 dark:bg-gray-700 dark:text-white"})]})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,Vi.jsx)("button",{onClick:()=>_(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(!l)return void R({isOpen:!0,type:"warning",title:"Center Required",message:"Please place the circle center on the map"});if(!v.trim())return void R({isOpen:!0,type:"warning",title:"Name Required",message:"Please enter a name for this circle"});const e={id:"circle_".concat(Date.now()),name:v.trim(),center:l,radius:g,perimeter:b,area:p,color:w,fillOpacity:N,strokeWeight:2,createdAt:new Date,updatedAt:new Date,description:C.trim()||void 0};r&&r(e),F(!0);try{if(await dc.create({circle_name:v.trim(),center_lat:l.lat,center_lng:l.lng,radius:g,fill_color:w,stroke_color:w,opacity:N,notes:C.trim()})){const e=Math.round((Date.now()-i)/1e3);Kl({toolName:"circle-drawing",userId:(null===s||void 0===s?void 0:s.id)||"guest",userName:(null===s||void 0===s?void 0:s.name)||"Guest User",duration:e}),R({isOpen:!0,type:"success",title:"Success!",message:"Circle saved to database!"}),z(),_(!1),k(""),E("")}}catch(t){return console.error("Error saving circle:",t),void R({isOpen:!0,type:"error",title:"Error",message:"Failed to save circle. Please try again."})}finally{F(!1)}},disabled:P,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Saving...":"Save"})]})]})}),(0,Vi.jsx)(ql,{isOpen:D.isOpen,onClose:()=>R((0,o.A)((0,o.A)({},D),{},{isOpen:!1})),type:D.type,title:D.title,message:D.message,autoClose:!0,autoCloseDelay:3e3})]});var U};function pc(e){return e+.5|0}const xc=(e,t,r)=>Math.max(Math.min(e,r),t);function bc(e){return xc(pc(2.55*e),0,255)}function yc(e){return xc(pc(255*e),0,255)}function vc(e){return xc(pc(e/2.55)/100,0,1)}function kc(e){return xc(pc(100*e),0,100)}const wc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jc=[..."0123456789ABCDEF"],Nc=e=>jc[15&e],Sc=e=>jc[(240&e)>>4]+jc[15&e],Cc=e=>(240&e)>>4===(15&e);function Ec(e){var t=(e=>Cc(e.r)&&Cc(e.g)&&Cc(e.b)&&Cc(e.a))(e)?Nc:Sc;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Ac=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _c(e,t,r){const n=t*Math.min(r,1-r),a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return r-n*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function Tc(e,t,r){const n=function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+e/60)%6;return r-r*t*Math.max(Math.min(a,4-a,1),0)};return[n(5),n(3),n(1)]}function Lc(e,t,r){const n=_c(e,1,.5);let a;for(t+r>1&&(a=1/(t+r),t*=a,r*=a),a=0;a<3;a++)n[a]*=1-t-r,n[a]+=t;return n}function Mc(e){const t=e.r/255,r=e.g/255,n=e.b/255,a=Math.max(t,r,n),s=Math.min(t,r,n),o=(a+s)/2;let i,l,c;return a!==s&&(c=a-s,l=o>.5?c/(2-a-s):c/(a+s),i=function(e,t,r,n,a){return e===a?(t-r)/n+(t<r?6:0):t===a?(r-e)/n+2:(e-t)/n+4}(t,r,n,c,a),i=60*i+.5),[0|i,l||0,o]}function Oc(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(yc)}function Dc(e,t,r){return Oc(_c,e,t,r)}function Rc(e){return(e%360+360)%360}function Pc(e){const t=Ac.exec(e);let r,n=255;if(!t)return;t[5]!==r&&(n=t[6]?bc(+t[5]):yc(+t[5]));const a=Rc(+t[2]),s=+t[3]/100,o=+t[4]/100;return r="hwb"===t[1]?function(e,t,r){return Oc(Lc,e,t,r)}(a,s,o):"hsv"===t[1]?function(e,t,r){return Oc(Tc,e,t,r)}(a,s,o):Dc(a,s,o),{r:r[0],g:r[1],b:r[2],a:n}}const Fc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ic={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Bc;function zc(e){Bc||(Bc=function(){const e={},t=Object.keys(Ic),r=Object.keys(Fc);let n,a,s,o,i;for(n=0;n<t.length;n++){for(o=i=t[n],a=0;a<r.length;a++)s=r[a],i=i.replace(s,Fc[s]);s=parseInt(Ic[o],16),e[i]=[s>>16&255,s>>8&255,255&s]}return e}(),Bc.transparent=[0,0,0,0]);const t=Bc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Wc=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Uc=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Hc=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Vc(e,t,r){if(e){let n=Mc(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,0===t?360:1)),n=Dc(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Gc(e,t){return e?Object.assign(t||{},e):e}function qc(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=yc(e[3]))):(t=Gc(e,{r:0,g:0,b:0,a:1})).a=yc(t.a),t}function $c(e){return"r"===e.charAt(0)?function(e){const t=Wc.exec(e);let r,n,a,s=255;if(t){if(t[7]!==r){const e=+t[7];s=t[8]?bc(e):xc(255*e,0,255)}return r=+t[1],n=+t[3],a=+t[5],r=255&(t[2]?bc(r):xc(r,0,255)),n=255&(t[4]?bc(n):xc(n,0,255)),a=255&(t[6]?bc(a):xc(a,0,255)),{r:r,g:n,b:a,a:s}}}(e):Pc(e)}class Kc{constructor(e){if(e instanceof Kc)return e;const t=typeof e;let r;"object"===t?r=qc(e):"string"===t&&(r=function(e){var t,r=e.length;return"#"===e[0]&&(4===r||5===r?t={r:255&17*wc[e[1]],g:255&17*wc[e[2]],b:255&17*wc[e[3]],a:5===r?17*wc[e[4]]:255}:7!==r&&9!==r||(t={r:wc[e[1]]<<4|wc[e[2]],g:wc[e[3]]<<4|wc[e[4]],b:wc[e[5]]<<4|wc[e[6]],a:9===r?wc[e[7]]<<4|wc[e[8]]:255})),t}(e)||zc(e)||$c(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Gc(this._rgb);return e&&(e.a=vc(e.a)),e}set rgb(e){this._rgb=qc(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(vc(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?Ec(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Mc(e),r=t[0],n=kc(t[1]),a=kc(t[2]);return e.a<255?"hsla(".concat(r,", ").concat(n,"%, ").concat(a,"%, ").concat(vc(e.a),")"):"hsl(".concat(r,", ").concat(n,"%, ").concat(a,"%)")}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let a;const s=t===a?.5:t,o=2*s-1,i=r.a-n.a,l=((o*i===-1?o:(o+i)/(1+o*i))+1)/2;a=1-l,r.r=255&l*r.r+a*n.r+.5,r.g=255&l*r.g+a*n.g+.5,r.b=255&l*r.b+a*n.b+.5,r.a=s*r.a+(1-s)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,r){const n=Hc(vc(e.r)),a=Hc(vc(e.g)),s=Hc(vc(e.b));return{r:yc(Uc(n+r*(Hc(vc(t.r))-n))),g:yc(Uc(a+r*(Hc(vc(t.g))-a))),b:yc(Uc(s+r*(Hc(vc(t.b))-s))),a:e.a+r*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Kc(this.rgb)}alpha(e){return this._rgb.a=yc(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=pc(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vc(this._rgb,2,e),this}darken(e){return Vc(this._rgb,2,-e),this}saturate(e){return Vc(this._rgb,1,e),this}desaturate(e){return Vc(this._rgb,1,-e),this}rotate(e){return function(e,t){var r=Mc(e);r[0]=Rc(r[0]+t),r=Dc(r),e.r=r[0],e.g=r[1],e.b=r[2]}(this._rgb,e),this}}function Yc(){}const Xc=(()=>{let e=0;return()=>e++})();function Jc(e){return null===e||void 0===e}function Qc(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Zc(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ed(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function td(e,t){return ed(e)?e:t}function rd(e,t){return"undefined"===typeof e?t:e}const nd=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ad(e,t,r){if(e&&"function"===typeof e.call)return e.apply(r,t)}function sd(e,t,r,n){let a,s,o;if(Qc(e))if(s=e.length,n)for(a=s-1;a>=0;a--)t.call(r,e[a],a);else for(a=0;a<s;a++)t.call(r,e[a],a);else if(Zc(e))for(o=Object.keys(e),s=o.length,a=0;a<s;a++)t.call(r,e[o[a]],o[a])}function od(e,t){let r,n,a,s;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(a=e[r],s=t[r],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function id(e){if(Qc(e))return e.map(id);if(Zc(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let a=0;for(;a<n;++a)t[r[a]]=id(e[r[a]]);return t}return e}function ld(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function cd(e,t,r,n){if(!ld(e))return;const a=t[e],s=r[e];Zc(a)&&Zc(s)?dd(a,s,n):t[e]=id(s)}function dd(e,t,r){const n=Qc(t)?t:[t],a=n.length;if(!Zc(e))return e;const s=(r=r||{}).merger||cd;let o;for(let i=0;i<a;++i){if(o=n[i],!Zc(o))continue;const t=Object.keys(o);for(let n=0,a=t.length;n<a;++n)s(t[n],e,o,r)}return e}function ud(e,t){return dd(e,t,{merger:hd})}function hd(e,t,r){if(!ld(e))return;const n=t[e],a=r[e];Zc(n)&&Zc(a)?ud(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=id(a))}const md={"":e=>e,x:e=>e.x,y:e=>e.y};function gd(e,t){const r=md[t]||(md[t]=function(e){const t=function(e){const t=e.split("."),r=[];let n="";for(const a of t)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}(e);return e=>{for(const r of t){if(""===r)break;e=e&&e[r]}return e}}(t));return r(e)}function fd(e){return e.charAt(0).toUpperCase()+e.slice(1)}const pd=e=>"undefined"!==typeof e,xd=e=>"function"===typeof e,bd=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};const yd=Math.PI,vd=2*yd,kd=vd+yd,wd=Number.POSITIVE_INFINITY,jd=yd/180,Nd=yd/2,Sd=yd/4,Cd=2*yd/3,Ed=Math.log10,Ad=Math.sign;function _d(e,t,r){return Math.abs(e-t)<r}function Td(e){const t=Math.round(e);e=_d(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(Ed(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function Ld(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Md(e,t,r){let n,a,s;for(n=0,a=e.length;n<a;n++)s=e[n][r],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Od(e){return e*(yd/180)}function Dd(e){return e*(180/yd)}function Rd(e){if(!ed(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function Pd(e,t){const r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(r*r+n*n);let s=Math.atan2(n,r);return s<-.5*yd&&(s+=vd),{angle:s,distance:a}}function Fd(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Id(e,t){return(e-t+kd)%vd-yd}function Bd(e){return(e%vd+vd)%vd}function zd(e,t,r,n){const a=Bd(e),s=Bd(t),o=Bd(r),i=Bd(s-a),l=Bd(o-a),c=Bd(a-s),d=Bd(a-o);return a===s||a===o||n&&s===o||i>l&&c<d}function Wd(e,t,r){return Math.max(t,Math.min(r,e))}function Ud(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function Hd(e,t,r){r=r||(r=>e[r]<t);let n,a=e.length-1,s=0;for(;a-s>1;)n=s+a>>1,r(n)?s=n:a=n;return{lo:s,hi:a}}const Vd=(e,t,r,n)=>Hd(e,r,n?n=>{const a=e[n][t];return a<r||a===r&&e[n+1][t]===r}:n=>e[n][t]<r),Gd=(e,t,r)=>Hd(e,r,n=>e[n][t]>=r);const qd=["push","pop","shift","splice","unshift"];function $d(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),n.length>0||(qd.forEach(t=>{delete e[t]}),delete e._chartjs)}function Kd(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Yd="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Xd(e,t){let r=[],n=!1;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];r=s,n||(n=!0,Yd.call(window,()=>{n=!1,e.apply(t,r)}))}}const Jd=e=>"start"===e?"left":"end"===e?"right":"center",Qd=(e,t,r)=>"start"===e?t:"end"===e?r:(t+r)/2;function Zd(e,t,r){const n=t.length;let a=0,s=n;if(e._sorted){const{iScale:o,vScale:i,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=o.axis,{min:u,max:h,minDefined:m,maxDefined:g}=o.getUserBounds();if(m){if(a=Math.min(Vd(l,d,u).lo,r?n:Vd(t,d,o.getPixelForValue(u)).lo),c){const e=l.slice(0,a+1).reverse().findIndex(e=>!Jc(e[i.axis]));a-=Math.max(0,e)}a=Wd(a,0,n-1)}if(g){let e=Math.max(Vd(l,o.axis,h,!0).hi+1,r?0:Vd(t,d,o.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!Jc(e[i.axis]));e+=Math.max(0,t)}s=Wd(e,a,n)-a}else s=n-a}return{start:a,count:s}}function eu(e){const{xScale:t,yScale:r,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=a,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),s}const tu=e=>0===e||1===e,ru=(e,t,r)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*vd/r),nu=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*vd/r)+1,au={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Nd),easeOutSine:e=>Math.sin(e*Nd),easeInOutSine:e=>-.5*(Math.cos(yd*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>tu(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>tu(e)?e:ru(e,.075,.3),easeOutElastic:e=>tu(e)?e:nu(e,.075,.3),easeInOutElastic(e){const t=.1125;return tu(e)?e:e<.5?.5*ru(2*e,t,.45):.5+.5*nu(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-au.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},easeInOutBounce:e=>e<.5?.5*au.easeInBounce(2*e):.5*au.easeOutBounce(2*e-1)+.5};function su(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function ou(e){return su(e)?e:new Kc(e)}function iu(e){return su(e)?e:new Kc(e).saturate(.5).darken(.1).hexString()}const lu=["x","y","borderWidth","radius","tension"],cu=["color","borderColor","backgroundColor"];const du=new Map;function uu(e,t,r){return function(e,t){t=t||{};const r=e+JSON.stringify(t);let n=du.get(r);return n||(n=new Intl.NumberFormat(e,t),du.set(r,n)),n}(t,r).format(e)}const hu={values:e=>Qc(e)?e:""+e,numeric(e,t,r){if(0===e)return"0";const n=this.chart.options.locale;let a,s=e;if(r.length>1){const t=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(t<1e-4||t>1e15)&&(a="scientific"),s=function(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e));return r}(e,r)}const o=Ed(Math.abs(s)),i=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:a,minimumFractionDigits:i,maximumFractionDigits:i};return Object.assign(l,this.options.ticks.format),uu(e,n,l)},logarithmic(e,t,r){if(0===e)return"0";const n=r[t].significand||e/Math.pow(10,Math.floor(Ed(e)));return[1,2,3,5,10,15].includes(n)||t>.8*r.length?hu.numeric.call(this,e,t,r):""}};var mu={formatters:hu};const gu=Object.create(null),fu=Object.create(null);function pu(e,t){if(!t)return e;const r=t.split(".");for(let n=0,a=r.length;n<a;++n){const t=r[n];e=e[t]||(e[t]=Object.create(null))}return e}function xu(e,t,r){return"string"===typeof t?dd(pu(e,t),r):dd(pu(e,""),t)}class bu{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>iu(t.backgroundColor),this.hoverBorderColor=(e,t)=>iu(t.borderColor),this.hoverColor=(e,t)=>iu(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return xu(this,e,t)}get(e){return pu(this,e)}describe(e,t){return xu(fu,e,t)}override(e,t){return xu(gu,e,t)}route(e,t,r,n){const a=pu(this,e),s=pu(this,r),o="_"+t;Object.defineProperties(a,{[o]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[n];return Zc(e)?Object.assign({},t,e):rd(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach(e=>e(this))}}var yu=new bu({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:cu},numbers:{type:"number",properties:lu}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function vu(e,t,r,n,a){let s=t[a];return s||(s=t[a]=e.measureText(a).width,r.push(a)),s>n&&(n=s),n}function ku(e,t,r,n){let a=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(a=n.data={},s=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let o=0;const i=r.length;let l,c,d,u,h;for(l=0;l<i;l++)if(u=r[l],void 0===u||null===u||Qc(u)){if(Qc(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||Qc(h)||(o=vu(e,a,s,o,h))}else o=vu(e,a,s,o,u);e.restore();const m=s.length/2;if(m>r.length){for(l=0;l<m;l++)delete a[s[l]];s.splice(0,m)}return o}function wu(e,t,r){const n=e.currentDevicePixelRatio,a=0!==r?Math.max(r/2,.5):0;return Math.round((t-a)*n)/n+a}function ju(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Nu(e,t,r,n){Su(e,t,r,n,null)}function Su(e,t,r,n,a){let s,o,i,l,c,d,u,h;const m=t.pointStyle,g=t.rotation,f=t.radius;let p=(g||0)*jd;if(m&&"object"===typeof m&&(s=m.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(r,n),e.rotate(p),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),m){default:a?e.ellipse(r,n,a/2,f,0,0,vd):e.arc(r,n,f,0,vd),e.closePath();break;case"triangle":d=a?a/2:f,e.moveTo(r+Math.sin(p)*d,n-Math.cos(p)*f),p+=Cd,e.lineTo(r+Math.sin(p)*d,n-Math.cos(p)*f),p+=Cd,e.lineTo(r+Math.sin(p)*d,n-Math.cos(p)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,o=Math.cos(p+Sd)*l,u=Math.cos(p+Sd)*(a?a/2-c:l),i=Math.sin(p+Sd)*l,h=Math.sin(p+Sd)*(a?a/2-c:l),e.arc(r-u,n-i,c,p-yd,p-Nd),e.arc(r+h,n-o,c,p-Nd,p),e.arc(r+u,n+i,c,p,p+Nd),e.arc(r-h,n+o,c,p+Nd,p+yd),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*f,d=a?a/2:l,e.rect(r-d,n-l,2*d,2*l);break}p+=Sd;case"rectRot":u=Math.cos(p)*(a?a/2:f),o=Math.cos(p)*f,i=Math.sin(p)*f,h=Math.sin(p)*(a?a/2:f),e.moveTo(r-u,n-i),e.lineTo(r+h,n-o),e.lineTo(r+u,n+i),e.lineTo(r-h,n+o),e.closePath();break;case"crossRot":p+=Sd;case"cross":u=Math.cos(p)*(a?a/2:f),o=Math.cos(p)*f,i=Math.sin(p)*f,h=Math.sin(p)*(a?a/2:f),e.moveTo(r-u,n-i),e.lineTo(r+u,n+i),e.moveTo(r+h,n-o),e.lineTo(r-h,n+o);break;case"star":u=Math.cos(p)*(a?a/2:f),o=Math.cos(p)*f,i=Math.sin(p)*f,h=Math.sin(p)*(a?a/2:f),e.moveTo(r-u,n-i),e.lineTo(r+u,n+i),e.moveTo(r+h,n-o),e.lineTo(r-h,n+o),p+=Sd,u=Math.cos(p)*(a?a/2:f),o=Math.cos(p)*f,i=Math.sin(p)*f,h=Math.sin(p)*(a?a/2:f),e.moveTo(r-u,n-i),e.lineTo(r+u,n+i),e.moveTo(r+h,n-o),e.lineTo(r-h,n+o);break;case"line":o=a?a/2:Math.cos(p)*f,i=Math.sin(p)*f,e.moveTo(r-o,n-i),e.lineTo(r+o,n+i);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(p)*(a?a/2:f),n+Math.sin(p)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Cu(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function Eu(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Au(e){e.restore()}function _u(e,t,r,n,a){if(!t)return e.lineTo(r.x,r.y);if("middle"===a){const n=(t.x+r.x)/2;e.lineTo(n,t.y),e.lineTo(n,r.y)}else"after"===a!==!!n?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function Tu(e,t,r,n){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function Lu(e,t,r,n,a){if(a.strikethrough||a.underline){const s=e.measureText(n),o=t-s.actualBoundingBoxLeft,i=t+s.actualBoundingBoxRight,l=r-s.actualBoundingBoxAscent,c=r+s.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,d),e.lineTo(i,d),e.stroke()}}function Mu(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function Ou(e,t,r,n,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=Qc(t)?t:[t],i=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=a.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Jc(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Mu(e,s.backdrop),i&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Jc(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,r,n,s.maxWidth)),e.fillText(c,r,n,s.maxWidth),Lu(e,r,n,c,s),n+=Number(a.lineHeight);e.restore()}function Du(e,t){const{x:r,y:n,w:a,h:s,radius:o}=t;e.arc(r+o.topLeft,n+o.topLeft,o.topLeft,1.5*yd,yd,!0),e.lineTo(r,n+s-o.bottomLeft),e.arc(r+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,yd,Nd,!0),e.lineTo(r+a-o.bottomRight,n+s),e.arc(r+a-o.bottomRight,n+s-o.bottomRight,o.bottomRight,Nd,0,!0),e.lineTo(r+a,n+o.topRight),e.arc(r+a-o.topRight,n+o.topRight,o.topRight,0,-Nd,!0),e.lineTo(r+o.topLeft,n)}const Ru=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Pu=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Fu(e,t){const r=(""+e).match(Ru);if(!r||"normal"===r[1])return 1.2*t;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100}return t*e}const Iu=e=>+e||0;function Bu(e,t){const r={},n=Zc(t),a=n?Object.keys(t):t,s=Zc(e)?n?r=>rd(e[r],e[t[r]]):t=>e[t]:()=>e;for(const o of a)r[o]=Iu(s(o));return r}function zu(e){return Bu(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Wu(e){return Bu(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Uu(e){const t=zu(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Hu(e,t){e=e||{},t=t||yu.font;let r=rd(e.size,t.size);"string"===typeof r&&(r=parseInt(r,10));let n=rd(e.style,t.style);n&&!(""+n).match(Pu)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:rd(e.family,t.family),lineHeight:Fu(rd(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:rd(e.weight,t.weight),string:""};return a.string=function(e){return!e||Jc(e.size)||Jc(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function Vu(e,t,r,n){let a,s,o,i=!0;for(a=0,s=e.length;a<s;++a)if(o=e[a],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),i=!1),void 0!==r&&Qc(o)&&(o=o[r%o.length],i=!1),void 0!==o))return n&&!i&&(n.cacheable=!1),o}function Gu(e,t){return Object.assign(Object.create(e),t)}function qu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const a=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof r&&(r=nh("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:r,_getTarget:n,override:n=>qu([n,...e],t,a,r)};return new Proxy(s,{deleteProperty:(t,r)=>(delete t[r],delete t._keys,delete e[0][r],!0),get:(r,n)=>Ju(r,n,()=>function(e,t,r,n){let a;for(const s of t)if(a=nh(Yu(s,e),r),"undefined"!==typeof a)return Xu(e,a)?th(r,n,e,a):a}(n,t,e,r)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>ah(e).includes(t),ownKeys:e=>ah(e),set(e,t,r){const a=e._storage||(e._storage=n());return e[t]=a[t]=r,delete e._keys,!0}})}function $u(e,t,r,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:Ku(e,n),setContext:t=>$u(e,t,r,n),override:a=>$u(e.override(a),t,r,n)};return new Proxy(a,{deleteProperty:(t,r)=>(delete t[r],delete e[r],!0),get:(e,t,r)=>Ju(e,t,()=>function(e,t,r){const{_proxy:n,_context:a,_subProxy:s,_descriptors:o}=e;let i=n[t];xd(i)&&o.isScriptable(t)&&(i=function(e,t,r,n){const{_proxy:a,_context:s,_subProxy:o,_stack:i}=r;if(i.has(e))throw new Error("Recursion detected: "+Array.from(i).join("->")+"->"+e);i.add(e);let l=t(s,o||n);i.delete(e),Xu(e,l)&&(l=th(a._scopes,a,e,l));return l}(t,i,e,r));Qc(i)&&i.length&&(i=function(e,t,r,n){const{_proxy:a,_context:s,_subProxy:o,_descriptors:i}=r;if("undefined"!==typeof s.index&&n(e))return t[s.index%t.length];if(Zc(t[0])){const r=t,n=a._scopes.filter(e=>e!==r);t=[];for(const l of r){const r=th(n,a,e,l);t.push($u(r,s,o&&o[e],i))}}return t}(t,i,e,o.isIndexable));Xu(t,i)&&(i=$u(i,a,s&&s[t],o));return i}(e,t,r)),getOwnPropertyDescriptor:(t,r)=>t._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,r)=>Reflect.has(e,r),ownKeys:()=>Reflect.ownKeys(e),set:(t,r,n)=>(e[r]=n,delete t[r],!0)})}function Ku(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:r,indexable:n,isScriptable:xd(r)?r:()=>r,isIndexable:xd(n)?n:()=>n}}const Yu=(e,t)=>e?e+fd(t):t,Xu=(e,t)=>Zc(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Ju(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=r();return e[t]=n,n}function Qu(e,t,r){return xd(e)?e(t,r):e}const Zu=(e,t)=>!0===e?t:"string"===typeof e?gd(t,e):void 0;function eh(e,t,r,n,a){for(const s of t){const t=Zu(r,s);if(t){e.add(t);const s=Qu(t._fallback,r,a);if("undefined"!==typeof s&&s!==r&&s!==n)return s}else if(!1===t&&"undefined"!==typeof n&&r!==n)return null}return!1}function th(e,t,r,n){const a=t._rootScopes,s=Qu(t._fallback,r,n),o=[...e,...a],i=new Set;i.add(n);let l=rh(i,o,r,s||r,n);return null!==l&&(("undefined"===typeof s||s===r||(l=rh(i,o,s,l,n),null!==l))&&qu(Array.from(i),[""],a,s,()=>function(e,t,r){const n=e._getTarget();t in n||(n[t]={});const a=n[t];if(Qc(a)&&Zc(r))return r;return a||{}}(t,r,n)))}function rh(e,t,r,n,a){for(;r;)r=eh(e,t,r,n,a);return r}function nh(e,t){for(const r of t){if(!r)continue;const t=r[e];if("undefined"!==typeof t)return t}}function ah(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const r of e)for(const e of Object.keys(r).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function sh(e,t,r,n){const{iScale:a}=e,{key:s="r"}=this._parsing,o=new Array(n);let i,l,c,d;for(i=0,l=n;i<l;++i)c=i+r,d=t[c],o[i]={r:a.parse(gd(d,s),c)};return o}const oh=Number.EPSILON||1e-14,ih=(e,t)=>t<e.length&&!e[t].skip&&e[t],lh=e=>"x"===e?"y":"x";function ch(e,t,r,n){const a=e.skip?t:e,s=t,o=r.skip?t:r,i=Fd(s,a),l=Fd(o,s);let c=i/(i+l),d=l/(i+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:s.x-u*(o.x-a.x),y:s.y-u*(o.y-a.y)},next:{x:s.x+h*(o.x-a.x),y:s.y+h*(o.y-a.y)}}}function dh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const r=lh(t),n=e.length,a=Array(n).fill(0),s=Array(n);let o,i,l,c=ih(e,0);for(o=0;o<n;++o)if(i=l,l=c,c=ih(e,o+1),l){if(c){const e=c[t]-l[t];a[o]=0!==e?(c[r]-l[r])/e:0}s[o]=i?c?Ad(a[o-1])!==Ad(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}!function(e,t,r){const n=e.length;let a,s,o,i,l,c=ih(e,0);for(let d=0;d<n-1;++d)l=c,c=ih(e,d+1),l&&c&&(_d(t[d],0,oh)?r[d]=r[d+1]=0:(a=r[d]/t[d],s=r[d+1]/t[d],i=Math.pow(a,2)+Math.pow(s,2),i<=9||(o=3/Math.sqrt(i),r[d]=a*o*t[d],r[d+1]=s*o*t[d])))}(e,a,s),function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const n=lh(r),a=e.length;let s,o,i,l=ih(e,0);for(let c=0;c<a;++c){if(o=i,i=l,l=ih(e,c+1),!i)continue;const a=i[r],d=i[n];o&&(s=(a-o[r])/3,i["cp1".concat(r)]=a-s,i["cp1".concat(n)]=d-s*t[c]),l&&(s=(l[r]-a)/3,i["cp2".concat(r)]=a+s,i["cp2".concat(n)]=d+s*t[c])}}(e,s,t)}function uh(e,t,r){return Math.max(Math.min(e,r),t)}function hh(e,t,r,n,a){let s,o,i,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)dh(e,a);else{let r=n?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)i=e[s],l=ch(r,i,e[Math.min(s+1,o-(n?0:1))%o],t.tension),i.cp1x=l.previous.x,i.cp1y=l.previous.y,i.cp2x=l.next.x,i.cp2y=l.next.y,r=i}t.capBezierPoints&&function(e,t){let r,n,a,s,o,i=Cu(e[0],t);for(r=0,n=e.length;r<n;++r)o=s,s=i,i=r<n-1&&Cu(e[r+1],t),s&&(a=e[r],o&&(a.cp1x=uh(a.cp1x,t.left,t.right),a.cp1y=uh(a.cp1y,t.top,t.bottom)),i&&(a.cp2x=uh(a.cp2x,t.left,t.right),a.cp2y=uh(a.cp2y,t.top,t.bottom)))}(e,r)}function mh(){return"undefined"!==typeof window&&"undefined"!==typeof document}function gh(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function fh(e,t,r){let n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[r])):n=e,n}const ph=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const xh=["top","right","bottom","left"];function bh(e,t,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const s=xh[a];n[s]=parseFloat(e[t+"-"+s+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function yh(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,a=ph(r),s="border-box"===a.boxSizing,o=bh(a,"padding"),i=bh(a,"border","width"),{x:l,y:c,box:d}=function(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:a,offsetY:s}=n;let o,i,l=!1;if(((e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot))(a,s,e.target))o=a,i=s;else{const e=t.getBoundingClientRect();o=n.clientX-e.left,i=n.clientY-e.top,l=!0}return{x:o,y:i,box:l}}(e,r),u=o.left+(d&&i.left),h=o.top+(d&&i.top);let{width:m,height:g}=t;return s&&(m-=o.width+i.width,g-=o.height+i.height),{x:Math.round((l-u)/m*r.width/n),y:Math.round((c-h)/g*r.height/n)}}const vh=e=>Math.round(10*e)/10;function kh(e,t,r,n){const a=ph(e),s=bh(a,"margin"),o=fh(a.maxWidth,e,"clientWidth")||wd,i=fh(a.maxHeight,e,"clientHeight")||wd,l=function(e,t,r){let n,a;if(void 0===t||void 0===r){const s=e&&gh(e);if(s){const e=s.getBoundingClientRect(),o=ph(s),i=bh(o,"border","width"),l=bh(o,"padding");t=e.width-l.width-i.width,r=e.height-l.height-i.height,n=fh(o.maxWidth,s,"clientWidth"),a=fh(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,r=e.clientHeight}return{width:t,height:r,maxWidth:n||wd,maxHeight:a||wd}}(e,t,r);let{width:c,height:d}=l;if("content-box"===a.boxSizing){const e=bh(a,"border","width"),t=bh(a,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-s.width),d=Math.max(0,n?c/n:d-s.height),c=vh(Math.min(c,o,l.maxWidth)),d=vh(Math.min(d,i,l.maxHeight)),c&&!d&&(d=vh(c/2));return(void 0!==t||void 0!==r)&&n&&l.height&&d>l.height&&(d=l.height,c=vh(Math.floor(d*n))),{width:c,height:d}}function wh(e,t,r){const n=t||1,a=Math.floor(e.height*n),s=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==n||o.height!==a||o.width!==s)&&(e.currentDevicePixelRatio=n,o.height=a,o.width=s,e.ctx.setTransform(n,0,0,n,0,0),!0)}const jh=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};mh()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(JE){}return e}();function Nh(e,t){const r=function(e,t){return ph(e).getPropertyValue(t)}(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Sh(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function Ch(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:"middle"===n?r<.5?e.y:t.y:"after"===n?r<1?e.y:t.y:r>0?t.y:e.y}}function Eh(e,t,r,n){const a={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=Sh(e,a,r),i=Sh(a,s,r),l=Sh(s,t,r),c=Sh(o,i,r),d=Sh(i,l,r);return Sh(c,d,r)}function Ah(e,t,r){return e?function(e,t){return{x:r=>e+e+t-r,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,r):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function _h(e,t){let r,n;"ltr"!==t&&"rtl"!==t||(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Th(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Lh(e){return"angle"===e?{between:zd,compare:Id,normalize:Bd}:{between:Ud,compare:(e,t)=>e-t,normalize:e=>e}}function Mh(e){let{start:t,end:r,count:n,loop:a,style:s}=e;return{start:t%n,end:r%n,loop:a&&(r-t+1)%n===0,style:s}}function Oh(e,t,r){if(!r)return[e];const{property:n,start:a,end:s}=r,o=t.length,{compare:i,between:l,normalize:c}=Lh(n),{start:d,end:u,loop:h,style:m}=function(e,t,r){const{property:n,start:a,end:s}=r,{between:o,normalize:i}=Lh(n),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&o(i(t[u%l][n]),a,s);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,r),g=[];let f,p,x,b=!1,y=null;const v=()=>b||l(a,x,f)&&0!==i(a,x),k=()=>!b||0===i(s,f)||l(s,x,f);for(let w=d,j=d;w<=u;++w)p=t[w%o],p.skip||(f=c(p[n]),f!==x&&(b=l(f,a,s),null===y&&v()&&(y=0===i(f,a)?w:j),null!==y&&k()&&(g.push(Mh({start:y,end:w,loop:h,count:o,style:m})),y=null),j=w,x=f));return null!==y&&g.push(Mh({start:y,end:u,loop:h,count:o,style:m})),g}function Dh(e,t){const r=[],n=e.segments;for(let a=0;a<n.length;a++){const s=Oh(n[a],e.points,t);s.length&&r.push(...s)}return r}function Rh(e,t,r,n){return n&&n.setContext&&r?function(e,t,r,n){const a=e._chart.getContext(),s=Ph(e.options),{_datasetIndex:o,options:{spanGaps:i}}=e,l=r.length,c=[];let d=s,u=t[0].start,h=u;function m(e,t,n,a){const s=i?-1:1;if(e!==t){for(e+=l;r[e%l].skip;)e-=s;for(;r[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:n,style:a}),d=a,u=t%l)}}for(const g of t){u=i?u:g.start;let e,t=r[u%l];for(h=u+1;h<=g.end;h++){const s=r[h%l];e=Ph(n.setContext(Gu(a,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Fh(e,d)&&m(u,h-1,g.loop,d),t=s,d=e}u<h-1&&m(u,h-1,g.loop,d)}return c}(e,t,r,n):t}function Ph(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Fh(e,t){if(!t)return!1;const r=[],n=function(e,t){return su(t)?(r.includes(t)||r.push(t),r.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function Ih(e,t,r){return e.options.clip?e[r]:t[r]}function Bh(e,t){const r=t._clip;if(r.disabled)return!1;const n=function(e,t){const{xScale:r,yScale:n}=e;return r&&n?{left:Ih(r,t,"left"),right:Ih(r,t,"right"),top:Ih(n,t,"top"),bottom:Ih(n,t,"bottom")}:t}(t,e.chartArea);return{left:!1===r.left?0:n.left-(!0===r.left?0:r.left),right:!1===r.right?e.width:n.right+(!0===r.right?0:r.right),top:!1===r.top?0:n.top-(!0===r.top?0:r.top),bottom:!1===r.bottom?e.height:n.bottom+(!0===r.bottom?0:r.bottom)}}class zh{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const a=t.listeners[n],s=t.duration;a.forEach(n=>n({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Yd.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const a=r.items;let s,o=a.length-1,i=!1;for(;o>=0;--o)s=a[o],s._active?(s._total>r.duration&&(r.duration=s._total),s.tick(e),i=!0):(a[o]=a[a.length-1],a.pop());i&&(n.draw(),this._notify(n,r,e,"progress")),a.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=a.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Wh=new zh;const Uh="transparent",Hh={boolean:(e,t,r)=>r>.5?t:e,color(e,t,r){const n=ou(e||Uh),a=n.valid&&ou(t||Uh);return a&&a.valid?a.mix(n,r).hexString():t},number:(e,t,r)=>e+(t-e)*r};class Vh{constructor(e,t,r,n){const a=t[r];n=Vu([e.to,n,a,e.from]);const s=Vu([e.from,a,n]);this._active=!0,this._fn=e.fn||Hh[e.type||typeof s],this._easing=au[e.easing]||au.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=s,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],a=r-this._start,s=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Vu([e.to,t,n,e.from]),this._from=Vu([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,a=this._from,s=this._loop,o=this._to;let i;if(this._active=a!==o&&(s||t<r),!this._active)return this._target[n]=o,void this._notify(!0);t<0?this._target[n]=a:(i=t/r%2,i=s&&i>1?2-i:i,i=this._easing(Math.min(1,Math.max(0,i))),this._target[n]=this._fn(a,o,i))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}}class Gh{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Zc(e))return;const t=Object.keys(yu.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const a=e[n];if(!Zc(a))return;const s={};for(const e of t)s[e]=a[e];(Qc(a.properties)&&a.properties||[n]).forEach(e=>{e!==n&&r.has(e)||r.set(e,s)})})}_animateOptions(e,t){const r=t.options,n=function(e,t){if(!t)return;let r=e.options;if(!r)return void(e.options=t);r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}}));return r}(e,r);if(!n)return[];const a=this._createAnimations(n,r);return r.$shared&&function(e,t){const r=[],n=Object.keys(t);for(let a=0;a<n.length;a++){const t=e[n[a]];t&&t.active()&&r.push(t.wait())}return Promise.all(r)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,t){const r=this._properties,n=[],a=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let i;for(i=s.length-1;i>=0;--i){const l=s[i];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const c=t[l];let d=a[l];const u=r.get(l);if(d){if(u&&d.active()){d.update(u,c,o);continue}d.cancel()}u&&u.duration?(a[l]=d=new Vh(u,e,l,c),n.push(d)):e[l]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(Wh.add(this._chart,r),!0):void 0}}function qh(e,t){const r=e&&e.options||{},n=r.reverse,a=void 0===r.min?t:0,s=void 0===r.max?t:0;return{start:n?s:a,end:n?a:s}}function $h(e,t){const r=[],n=e._getSortedDatasetMetas(t);let a,s;for(a=0,s=n.length;a<s;++a)r.push(n[a].index);return r}function Kh(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=e.keys,s="single"===n.mode;let o,i,l,c;if(null===t)return;let d=!1;for(o=0,i=a.length;o<i;++o){if(l=+a[o],l===r){if(d=!0,n.all)continue;break}c=e.values[l],ed(c)&&(s||0===t||Ad(t)===Ad(c))&&(t+=c)}return d||n.all?t:0}function Yh(e,t){const r=e&&e.options.stacked;return r||void 0===r&&void 0!==t.stack}function Xh(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function Jh(e,t,r,n){for(const a of t.getMatchingVisibleMetas(n).reverse()){const t=e[a.index];if(r&&t>0||!r&&t<0)return a.index}return null}function Qh(e,t){const{chart:r,_cachedMeta:n}=e,a=r._stacks||(r._stacks={}),{iScale:s,vScale:o,index:i}=n,l=s.axis,c=o.axis,d=function(e,t,r){return"".concat(e.id,".").concat(t.id,".").concat(r.stack||r.type)}(s,o,n),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[l]:r,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=Xh(a,d,r),h[i]=s,h._top=Jh(h,o,!0,n.type),h._bottom=Jh(h,o,!1,n.type);(h._visualValues||(h._visualValues={}))[i]=s}}function Zh(e,t){const r=e.scales;return Object.keys(r).filter(e=>r[e].axis===t).shift()}function em(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][r])return;delete t[n][r],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[r]&&delete t[n]._visualValues[r]}}}const tm=e=>"reset"===e||"none"===e,rm=(e,t)=>t?e:Object.assign({},e);class nm{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Yh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&em(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(e,t,r,n)=>"x"===e?t:"r"===e?n:r,a=t.xAxisID=rd(r.xAxisID,Zh(e,"x")),s=t.yAxisID=rd(r.yAxisID,Zh(e,"y")),o=t.rAxisID=rd(r.rAxisID,Zh(e,"r")),i=t.indexAxis,l=t.iAxisID=n(i,a,s,o),c=t.vAxisID=n(i,s,a,o);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$d(this._data,this),e._stacked&&em(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Zc(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:r,vScale:n}=t,a="x"===r.axis?"x":"y",s="x"===n.axis?"x":"y",o=Object.keys(e),i=new Array(o.length);let l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],i[l]={[a]:d,[s]:e[d]};return i}(t,e)}else if(r!==t){if(r){$d(r,this);const e=this._cachedMeta;em(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),qd.forEach(t=>{const r="_onData"+fd(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];const o=n.apply(this,a);return e._chartjs.listeners.forEach(e=>{"function"===typeof e[r]&&e[r](...a)}),o}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const a=t._stacked;t._stacked=Yh(t.vScale,t),t.stack!==r.stack&&(n=!0,em(t),t.stack=r.stack),this._resyncElements(e),(n||a!==t._stacked)&&(Qh(this,t._parsed),t._stacked=Yh(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:a,_stacked:s}=r,o=a.axis;let i,l,c,d=0===e&&t===n.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,c=n;else{c=Qc(n[e])?this.parseArrayData(r,n,e,t):Zc(n[e])?this.parseObjectData(r,n,e,t):this.parsePrimitiveData(r,n,e,t);const a=()=>null===l[o]||u&&l[o]<u[o];for(i=0;i<t;++i)r._parsed[i+e]=l=c[i],d&&(a()&&(d=!1),u=l);r._sorted=d}s&&Qh(this,c)}parsePrimitiveData(e,t,r,n){const{iScale:a,vScale:s}=e,o=a.axis,i=s.axis,l=a.getLabels(),c=a===s,d=new Array(n);let u,h,m;for(u=0,h=n;u<h;++u)m=u+r,d[u]={[o]:c||a.parse(l[m],m),[i]:s.parse(t[m],m)};return d}parseArrayData(e,t,r,n){const{xScale:a,yScale:s}=e,o=new Array(n);let i,l,c,d;for(i=0,l=n;i<l;++i)c=i+r,d=t[c],o[i]={x:a.parse(d[0],c),y:s.parse(d[1],c)};return o}parseObjectData(e,t,r,n){const{xScale:a,yScale:s}=e,{xAxisKey:o="x",yAxisKey:i="y"}=this._parsing,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+r,h=t[u],l[c]={x:a.parse(gd(h,o),u),y:s.parse(gd(h,i),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,a=this._cachedMeta,s=t[e.axis];return Kh({keys:$h(n,!0),values:t._stacks[e.axis]._visualValues},s,a.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const a=r[t.axis];let s=null===a?NaN:a;const o=n&&r._stacks[t.axis];n&&o&&(n.values=o,s=Kh(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,a=r._sorted&&e===r.iScale,s=n.length,o=this._getOtherScale(e),i=((e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:$h(r,!0),values:null})(t,r,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:r,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}(o);let u,h;function m(){h=n[u];const t=h[o.axis];return!ed(h[e.axis])||c>t||d<t}for(u=0;u<s&&(m()||(this.updateRangeFromParsed(l,e,h,i),!a));++u);if(a)for(u=s-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(l,e,h,i);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,a,s;for(n=0,a=t.length;n<a;++n)s=t[n][e.axis],ed(s)&&r.push(s);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,r,n,a;return Zc(e)?(t=e.top,r=e.right,n=e.bottom,a=e.left):t=r=n=a=e,{top:t,right:r,bottom:n,left:a,disabled:!1===e}}(rd(this.options.clip,function(e,t,r){if(!1===r)return!1;const n=qh(e,r),a=qh(t,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],a=t.chartArea,s=[],o=this._drawStart||0,i=this._drawCount||n.length-o,l=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,a,o,i),c=o;c<o+i;++c){const t=n[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,a))}for(c=0;c<s.length;++c)s[c].draw(e,a)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function(e,t,r){return Gu(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=n.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function(e,t){return Gu(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0;const n="active"===t,a=this._cachedDataOpts,s=e+"-"+t,o=a[s],i=this.enableOptionSharing&&pd(r);if(o)return rm(o,i);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=n?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(yu.elements[e]),m=l.resolveNamedOptions(u,h,()=>this.getContext(r,n,t),d);return m.$shared&&(m.$shared=i,a[s]=Object.freeze(rm(m,i))),m}_resolveAnimations(e,t,r){const n=this.chart,a=this._cachedDataOpts,s="animation-".concat(t),o=a[s];if(o)return o;let i;if(!1!==n.options.animation){const n=this.chart.config,a=n.datasetAnimationScopeKeys(this._type,t),s=n.getOptionScopes(this.getDataset(),a);i=n.createResolver(s,this.getContext(e,r,t))}const l=new Gh(n,i&&i.animations);return i&&i._cacheable&&(a[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||tm(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,a=this.getSharedOptions(r),s=this.includeOptions(t,a)||a!==n;return this.updateSharedOptions(a,t,r),{sharedOptions:a,includeOptions:s}}updateElement(e,t,r,n){tm(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!tm(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const a=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[o,i,l]of this._syncList)this[o](i,l);this._syncList=[];const n=r.length,a=t.length,s=Math.min(a,n);s&&this.parse(0,s),a>n?this._insertElements(n,a-n,e):a<n&&this._removeElements(a,n-a)}_insertElements(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._cachedMeta,a=n.data,s=e+t;let o;const i=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(i(a),o=e;o<s;++o)a[o]=new this.dataElementType;this._parsing&&i(n._parsed),this.parse(e,t),r&&this.updateElements(a,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&em(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function am(e){const t=e.iScale,r=function(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,a=r.length;t<a;t++)n=n.concat(r[t].controller.getAllParsedValues(e));e._cache.$bar=Kd(n.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let n,a,s,o,i=t._length;const l=()=>{32767!==s&&-32768!==s&&(pd(o)&&(i=Math.min(i,Math.abs(s-o)||i)),o=s)};for(n=0,a=r.length;n<a;++n)s=t.getPixelForValue(r[n]),l();for(o=void 0,n=0,a=t.ticks.length;n<a;++n)s=t.getPixelForTick(n),l();return i}function sm(e,t,r,n){return Qc(e)?function(e,t,r,n){const a=r.parse(e[0],n),s=r.parse(e[1],n),o=Math.min(a,s),i=Math.max(a,s);let l=o,c=i;Math.abs(o)>Math.abs(i)&&(l=i,c=o),t[r.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:s,min:o,max:i}}(e,t,r,n):t[r.axis]=r.parse(e,n),t}function om(e,t,r,n){const a=e.iScale,s=e.vScale,o=a.getLabels(),i=a===s,l=[];let c,d,u,h;for(c=r,d=r+n;c<d;++c)h=t[c],u={},u[a.axis]=i||a.parse(o[c],c),l.push(sm(h,u,s,c));return l}function im(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function lm(e,t,r,n){let a=t.borderSkipped;const s={};if(!a)return void(e.borderSkipped=s);if(!0===a)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:i,reverse:l,top:c,bottom:d}=function(e){let t,r,n,a,s;return e.horizontal?(t=e.base>e.x,r="left",n="right"):(t=e.base<e.y,r="bottom",n="top"),t?(a="end",s="start"):(a="start",s="end"),{start:r,end:n,reverse:t,top:a,bottom:s}}(e);"middle"===a&&r&&(e.enableBorderRadius=!0,(r._top||0)===n?a=c:(r._bottom||0)===n?a=d:(s[cm(d,o,i,l)]=!0,a=c)),s[cm(a,o,i,l)]=!0,e.borderSkipped=s}function cm(e,t,r,n){var a,s,o;return n?(o=r,e=dm(e=(a=e)===(s=t)?o:a===o?s:a,r,t)):e=dm(e,t,r),e}function dm(e,t,r){return"start"===e?t:"end"===e?r:e}function um(e,t,r){let{inflateAmount:n}=t;e.inflateAmount="auto"===n?1===r?.33:0:n}(0,Jt.A)(nm,"defaults",{}),(0,Jt.A)(nm,"datasetElementType",null),(0,Jt.A)(nm,"dataElementType",null);class hm extends nm{parsePrimitiveData(e,t,r,n){return om(e,t,r,n)}parseArrayData(e,t,r,n){return om(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:a,vScale:s}=e,{xAxisKey:o="x",yAxisKey:i="y"}=this._parsing,l="x"===a.axis?o:i,c="x"===s.axis?o:i,d=[];let u,h,m,g;for(u=r,h=r+n;u<h;++u)g=t[u],m={},m[a.axis]=a.parse(gd(g,l),u),d.push(sm(gd(g,c),m,s,u));return d}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const a=r._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,a=this.getParsed(e),s=a._custom,o=im(s)?"["+s.start+", "+s.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const a="reset"===n,{index:s,_cachedMeta:{vScale:o}}=this,i=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,n);for(let h=t;h<t+r;h++){const t=this.getParsed(h),r=a||Jc(t[o.axis])?{base:i,head:i}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),g=(t._stacks||{})[o.axis],f={horizontal:l,base:r.base,enableBorderRadius:!g||im(t._custom)||s===g._top||s===g._bottom,x:l?r.head:m.center,y:l?m.center:r.head,height:l?m.size:Math.abs(r.size),width:l?Math.abs(r.size):m.size};u&&(f.options=d||this.resolveDataElementOptions(h,e[h].active?"active":n));const p=f.options||e[h].options;lm(f,p,g,s),um(f,p,c.ratio),this.updateElement(e[h],h,f,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=r.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(t),i=o&&o[r.axis],l=e=>{const t=e._parsed.find(e=>e[r.axis]===i),n=t&&t[e.vScale.axis];if(Jc(n)||isNaN(n))return!0};for(const c of n)if((void 0===t||!l(c))&&((!1===a||-1===s.indexOf(c.stack)||void 0===a&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[rd("x"===this.chart.options.indexAxis?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const n=this._getStacks(e,r),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let a,s;for(a=0,s=t.data.length;a<s;++a)n.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const o=e.barThickness;return{min:o||am(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:a,minBarLength:s}}=this,o=a||0,i=this.getParsed(e),l=i._custom,c=im(l);let d,u,h=i[t.axis],m=0,g=r?this.applyStack(t,i,r):h;g!==h&&(m=g-h,g=h),c&&(h=l.barStart,g=l.barEnd-l.barStart,0!==h&&Ad(h)!==Ad(l.barEnd)&&(m=0),m+=h);const f=Jc(a)||c?m:a;let p=t.getPixelForValue(f);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+g):p,u=d-p,Math.abs(u)<s){u=function(e,t,r){return 0!==e?Ad(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}(u,t,o)*s,h===o&&(p-=u/2);const e=t.getPixelForDecimal(0),a=t.getPixelForDecimal(1),l=Math.min(e,a),m=Math.max(e,a);p=Math.max(Math.min(p,m),l),d=p+u,r&&!c&&(i._stacks[t.axis]._visualValues[n]=t.getValueForPixel(d)-t.getValueForPixel(p))}if(p===t.getPixelForValue(o)){const e=Ad(u)*t.getLineWidthForValue(o)/2;p+=e,u-=e}return{size:u,base:p,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,a=n.skipNull,s=rd(n.maxBarThickness,1/0);let o,i;const l=this._getAxisCount();if(t.grouped){const r=a?this._getStackCount(e):t.stackCount,c="flex"===n.barThickness?function(e,t,r,n){const a=t.pixels,s=a[e];let o=e>0?a[e-1]:null,i=e<a.length-1?a[e+1]:null;const l=r.categoryPercentage;null===o&&(o=s-(null===i?t.end-t.start:i-s)),null===i&&(i=s+s-o);const c=s-(s-Math.min(o,i))/2*l;return{chunk:Math.abs(i-o)/2*l/n,ratio:r.barPercentage,start:c}}(e,t,n,r*l):function(e,t,r,n){const a=r.barThickness;let s,o;return Jc(a)?(s=t.min*r.categoryPercentage,o=r.barPercentage):(s=a*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[e]-s/2}}(e,t,n,r*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(rd(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+u;o=c.start+c.chunk*h+c.chunk/2,i=Math.min(s,c.chunk*c.ratio)}else o=r.getPixelForValue(this.getParsed(e)[r.axis],e),i=Math.min(s,t.min*t.ratio);return{base:o-i/2,head:o+i/2,center:o,size:i}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let a=0;for(;a<n;++a)null===this.getParsed(a)[t.axis]||r[a].hidden||r[a].draw(this._ctx)}}(0,Jt.A)(hm,"id","bar"),(0,Jt.A)(hm,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Jt.A)(hm,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class mm extends nm{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,n){const a=super.parsePrimitiveData(e,t,r,n);for(let s=0;s<a.length;s++)a[s]._custom=this.resolveDataElementOptions(s+r).radius;return a}parseArrayData(e,t,r,n){const a=super.parseArrayData(e,t,r,n);for(let s=0;s<a.length;s++){const e=t[r+s];a[s]._custom=rd(e[2],this.resolveDataElementOptions(s+r).radius)}return a}parseObjectData(e,t,r,n){const a=super.parseObjectData(e,t,r,n);for(let s=0;s<a.length;s++){const e=t[r+s];a[s]._custom=rd(e&&e.r&&+e.r,this.resolveDataElementOptions(s+r).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=t,s=this.getParsed(e),o=n.getLabelForValue(s.x),i=a.getLabelForValue(s.y),l=s._custom;return{label:r[e]||"",value:"("+o+", "+i+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:i,includeOptions:l}=this._getSharedOptions(t,n),c=s.axis,d=o.axis;for(let u=t;u<t+r;u++){const t=e[u],r=!a&&this.getParsed(u),h={},m=h[c]=a?s.getPixelForDecimal(.5):s.getPixelForValue(r[c]),g=h[d]=a?o.getBasePixel():o.getPixelForValue(r[d]);h.skip=isNaN(m)||isNaN(g),l&&(h.options=i||this.resolveDataElementOptions(u,t.active?"active":n),a&&(h.options.radius=0)),this.updateElement(t,u,h,n)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const a=n.radius;return"active"!==t&&(n.radius=0),n.radius+=rd(r&&r._custom,a),n}}(0,Jt.A)(mm,"id","bubble"),(0,Jt.A)(mm,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Jt.A)(mm,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class gm extends nm{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=r;else{let a,s,o=e=>+r[e];if(Zc(r[e])){const{key:e="value"}=this._parsing;o=t=>+gd(r[t],e)}for(a=e,s=e+t;a<s;++a)n._parsed[a]=o(a)}}_getRotation(){return Od(this.options.rotation-90)}_getCircumference(){return Od(this.options.circumference)}_getRotationExtents(){let e=vd,t=-vd;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,a=n._getRotation(),s=n._getCircumference();e=Math.min(e,a),t=Math.max(t,a+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,a=n.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-s)/2,0),i=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:g,offsetX:f,offsetY:p}=function(e,t,r){let n=1,a=1,s=0,o=0;if(t<vd){const i=e,l=i+t,c=Math.cos(i),d=Math.sin(i),u=Math.cos(l),h=Math.sin(l),m=(e,t,n)=>zd(e,i,l,!0)?1:Math.max(t,t*r,n,n*r),g=(e,t,n)=>zd(e,i,l,!0)?-1:Math.min(t,t*r,n,n*r),f=m(0,c,u),p=m(Nd,d,h),x=g(yd,c,u),b=g(yd+Nd,d,h);n=(f-x)/2,a=(p-b)/2,s=-(f+x)/2,o=-(p+b)/2}return{ratioX:n,ratioY:a,offsetX:s,offsetY:o}}(h,u,i),x=(r.width-s)/m,b=(r.height-s)/g,y=Math.max(Math.min(x,b)/2,0),v=nd(this.options.radius,y),k=(v-Math.max(v*i,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*v,this.offsetY=p*v,n.total=this.calculateTotal(),this.outerRadius=v-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,a=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*a/vd)}updateElements(e,t,r,n){const a="reset"===n,s=this.chart,o=s.chartArea,i=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,d=a&&i.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(t,n);let f,p=this._getRotation();for(f=0;f<t;++f)p+=this._circumference(f,a);for(f=t;f<t+r;++f){const t=this._circumference(f,a),r=e[f],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:p,endAngle:p+t,circumference:t,outerRadius:h,innerRadius:u};g&&(s.options=m||this.resolveDataElementOptions(f,r.active?"active":n)),p+=t,this.updateElement(r,f,s,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r,n=0;for(r=0;r<t.length;r++){const a=e._parsed[r];null===a||isNaN(a)||!this.chart.getDataVisibility(r)||t[r].hidden||(n+=Math.abs(a))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?vd*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=uu(t._parsed[e],r.options.locale);return{label:n[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,a,s,o,i;if(!e)for(n=0,a=r.data.datasets.length;n<a;++n)if(r.isDatasetVisible(n)){s=r.getDatasetMeta(n),e=s.data,o=s.controller;break}if(!e)return 0;for(n=0,a=e.length;n<a;++n)i=o.resolveDataElementOptions(n),"inner"!==i.borderAlign&&(t=Math.max(t,i.borderWidth||0,i.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const e=this.resolveDataElementOptions(r);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(rd(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Jt.A)(gm,"id","doughnut"),(0,Jt.A)(gm,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Jt.A)(gm,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,Jt.A)(gm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((t,a)=>{const s=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class fm extends nm{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:a}=t,s=this.chart._animationsDisabled;let{start:o,count:i}=Zd(t,n,s);this._drawStart=o,this._drawCount=i,eu(t)&&(o=0,i=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=n;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(r,void 0,{animated:!s,options:l},e),this.updateElements(n,o,i,e)}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:o,_stacked:i,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),u=s.axis,h=o.axis,{spanGaps:m,segment:g}=this.options,f=Ld(m)?m:Number.POSITIVE_INFINITY,p=this.chart._animationsDisabled||a||"none"===n,x=t+r,b=e.length;let y=t>0&&this.getParsed(t-1);for(let v=0;v<b;++v){const r=e[v],m=p?r:{};if(v<t||v>=x){m.skip=!0;continue}const b=this.getParsed(v),k=Jc(b[h]),w=m[u]=s.getPixelForValue(b[u],v),j=m[h]=a||k?o.getBasePixel():o.getPixelForValue(i?this.applyStack(o,b,i):b[h],v);m.skip=isNaN(w)||isNaN(j)||k,m.stop=v>0&&Math.abs(b[u]-y[u])>f,g&&(m.parsed=b,m.raw=l.data[v]),d&&(m.options=c||this.resolveDataElementOptions(v,r.active?"active":n)),p||this.updateElement(r,v,m,n),y=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const a=n[0].size(this.resolveDataElementOptions(0)),s=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,a,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,Jt.A)(fm,"id","line"),(0,Jt.A)(fm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Jt.A)(fm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class pm extends nm{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=uu(t._parsed[e].r,r.options.locale);return{label:n[e]||"",value:a}}parseObjectData(e,t,r,n){return sh.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,r)=>{const n=this.getParsed(r).r;!isNaN(n)&&this.chart.getDataVisibility(r)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(n/2,0),s=(a-Math.max(r.cutoutPercentage?a/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,r,n){const a="reset"===n,s=this.chart,o=s.options.animation,i=this._cachedMeta.rScale,l=i.xCenter,c=i.yCenter,d=i.getIndexAngle(0)-.5*yd;let u,h=d;const m=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,n,m);for(u=t;u<t+r;u++){const t=e[u];let r=h,g=h+this._computeAngle(u,n,m),f=s.getDataVisibility(u)?i.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=g,a&&(o.animateScale&&(f=0),o.animateRotate&&(r=g=d));const p={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:r,endAngle:g,options:this.resolveDataElementOptions(u,t.active?"active":n)};this.updateElement(t,u,p,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?Od(this.resolveDataElementOptions(e,t).angle||r):0}}(0,Jt.A)(pm,"id","polarArea"),(0,Jt.A)(pm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Jt.A)(pm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((t,a)=>{const s=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class xm extends gm{}(0,Jt.A)(xm,"id","pie"),(0,Jt.A)(xm,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class bm extends nm{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,n){return sh.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta,r=t.dataset,n=t.data||[],a=t.iScale.getLabels();if(r.points=n,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:a.length===n.length,options:t};this.updateElement(r,void 0,s,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,r,n){const a=this._cachedMeta.rScale,s="reset"===n;for(let o=t;o<t+r;o++){const t=e[o],r=this.resolveDataElementOptions(o,t.active?"active":n),i=a.getPointPositionForValue(o,this.getParsed(o).r),l=s?a.xCenter:i.x,c=s?a.yCenter:i.y,d={x:l,y:c,angle:i.angle,skip:isNaN(l)||isNaN(c),options:r};this.updateElement(t,o,d,n)}}}(0,Jt.A)(bm,"id","radar"),(0,Jt.A)(bm,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Jt.A)(bm,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ym extends nm{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=t,s=this.getParsed(e),o=n.getLabelForValue(s.x),i=a.getLabelForValue(s.y);return{label:r[e]||"",value:"("+o+", "+i+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,n=this.chart._animationsDisabled;let{start:a,count:s}=Zd(t,r,n);if(this._drawStart=a,this._drawCount=s,eu(t)&&(a=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:s}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!s._decimated,a.points=r;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,a,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,n){const a="reset"===n,{iScale:s,vScale:o,_stacked:i,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,n),d=this.getSharedOptions(c),u=this.includeOptions(n,d),h=s.axis,m=o.axis,{spanGaps:g,segment:f}=this.options,p=Ld(g)?g:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||a||"none"===n;let b=t>0&&this.getParsed(t-1);for(let y=t;y<t+r;++y){const t=e[y],r=this.getParsed(y),c=x?t:{},g=Jc(r[m]),v=c[h]=s.getPixelForValue(r[h],y),k=c[m]=a||g?o.getBasePixel():o.getPixelForValue(i?this.applyStack(o,r,i):r[m],y);c.skip=isNaN(v)||isNaN(k)||g,c.stop=y>0&&Math.abs(r[h]-b[h])>p,f&&(c.parsed=r,c.raw=l.data[y]),u&&(c.options=d||this.resolveDataElementOptions(y,t.active?"active":n)),x||this.updateElement(t,y,c,n),b=r}this.updateSharedOptions(d,n,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let r=t.length-1;r>=0;--r)e=Math.max(e,t[r].size(this.resolveDataElementOptions(r))/2);return e>0&&e}const r=e.dataset,n=r.options&&r.options.borderWidth||0;if(!t.length)return n;const a=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,a,s)/2}}(0,Jt.A)(ym,"id","scatter"),(0,Jt.A)(ym,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Jt.A)(ym,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function vm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class km{static override(e){Object.assign(km.prototype,e)}constructor(e){(0,Jt.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return vm()}parse(){return vm()}format(){return vm()}add(){return vm()}diff(){return vm()}startOf(){return vm()}endOf(){return vm()}}var wm=km;function jm(e,t,r,n){const{controller:a,data:s,_sorted:o}=e,i=a._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(i&&t===i.axis&&"r"!==t&&o&&s.length){const o=i._reversePixels?Gd:Vd;if(!n){const n=o(s,t,r);if(l){const{vScale:t}=a._cachedMeta,{_parsed:r}=e,s=r.slice(0,n.lo+1).reverse().findIndex(e=>!Jc(e[t.axis]));n.lo-=Math.max(0,s);const o=r.slice(n.hi).findIndex(e=>!Jc(e[t.axis]));n.hi+=Math.max(0,o)}return n}if(a._sharedOptions){const e=s[0],n="function"===typeof e.getRange&&e.getRange(t);if(n){const e=o(s,t,r-n),a=o(s,t,r+n);return{lo:e.lo,hi:a.hi}}}}return{lo:0,hi:s.length-1}}function Nm(e,t,r,n,a){const s=e.getSortedVisibleDatasetMetas(),o=r[t];for(let i=0,l=s.length;i<l;++i){const{index:e,data:r}=s[i],{lo:l,hi:c}=jm(s[i],t,o,a);for(let t=l;t<=c;++t){const a=r[t];a.skip||n(a,e,t)}}}function Sm(e,t,r,n,a){const s=[];if(!a&&!e.isPointInArea(t))return s;return Nm(e,r,t,function(r,o,i){(a||Cu(r,e.chartArea,0))&&r.inRange(t.x,t.y,n)&&s.push({element:r,datasetIndex:o,index:i})},!0),s}function Cm(e,t,r,n,a,s){let o=[];const i=function(e){const t=-1!==e.indexOf("x"),r=-1!==e.indexOf("y");return function(e,n){const a=t?Math.abs(e.x-n.x):0,s=r?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}(r);let l=Number.POSITIVE_INFINITY;return Nm(e,r,t,function(r,c,d){const u=r.inRange(t.x,t.y,a);if(n&&!u)return;const h=r.getCenterPoint(a);if(!(!!s||e.isPointInArea(h))&&!u)return;const m=i(t,h);m<l?(o=[{element:r,datasetIndex:c,index:d}],l=m):m===l&&o.push({element:r,datasetIndex:c,index:d})}),o}function Em(e,t,r,n,a,s){return s||e.isPointInArea(t)?"r"!==r||n?Cm(e,t,r,n,a,s):function(e,t,r,n){let a=[];return Nm(e,r,t,function(e,r,s){const{startAngle:o,endAngle:i}=e.getProps(["startAngle","endAngle"],n),{angle:l}=Pd(e,{x:t.x,y:t.y});zd(l,o,i)&&a.push({element:e,datasetIndex:r,index:s})}),a}(e,t,r,a):[]}function Am(e,t,r,n,a){const s=[],o="x"===r?"inXRange":"inYRange";let i=!1;return Nm(e,r,t,(e,n,l)=>{e[o]&&e[o](t[r],a)&&(s.push({element:e,datasetIndex:n,index:l}),i=i||e.inRange(t.x,t.y,a))}),n&&!i?[]:s}var _m={evaluateInteractionItems:Nm,modes:{index(e,t,r,n){const a=yh(t,e),s=r.axis||"x",o=r.includeInvisible||!1,i=r.intersect?Sm(e,a,s,n,o):Em(e,a,s,!1,n,o),l=[];return i.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=i[0].index,r=e.data[t];r&&!r.skip&&l.push({element:r,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,r,n){const a=yh(t,e),s=r.axis||"xy",o=r.includeInvisible||!1;let i=r.intersect?Sm(e,a,s,n,o):Em(e,a,s,!1,n,o);if(i.length>0){const t=i[0].datasetIndex,r=e.getDatasetMeta(t).data;i=[];for(let e=0;e<r.length;++e)i.push({element:r[e],datasetIndex:t,index:e})}return i},point:(e,t,r,n)=>Sm(e,yh(t,e),r.axis||"xy",n,r.includeInvisible||!1),nearest(e,t,r,n){const a=yh(t,e),s=r.axis||"xy",o=r.includeInvisible||!1;return Em(e,a,s,r.intersect,n,o)},x:(e,t,r,n)=>Am(e,yh(t,e),"x",r.intersect,n),y:(e,t,r,n)=>Am(e,yh(t,e),"y",r.intersect,n)}};const Tm=["left","top","right","bottom"];function Lm(e,t){return e.filter(e=>e.pos===t)}function Mm(e,t){return e.filter(e=>-1===Tm.indexOf(e.pos)&&e.box.axis===t)}function Om(e,t){return e.sort((e,r)=>{const n=t?r:e,a=t?e:r;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function Dm(e,t){const r=function(e){const t={};for(const r of e){const{stack:e,pos:n,stackWeight:a}=r;if(!e||!Tm.includes(n))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:a}=t;let s,o,i;for(s=0,o=e.length;s<o;++s){i=e[s];const{fullSize:o}=i.box,l=r[i.stack],c=l&&i.stackWeight/l.weight;i.horizontal?(i.width=c?c*n:o&&t.availableWidth,i.height=a):(i.width=n,i.height=c?c*a:o&&t.availableHeight)}return r}function Rm(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function Pm(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Fm(e,t,r,n){const{pos:a,box:s}=r,o=e.maxPadding;if(!Zc(a)){r.size&&(e[a]-=r.size);const t=n[r.stack]||{size:0,count:1};t.size=Math.max(t.size,r.horizontal?s.height:s.width),r.size=t.size/t.count,e[a]+=r.size}s.getPadding&&Pm(o,s.getPadding());const i=Math.max(0,t.outerWidth-Rm(o,e,"left","right")),l=Math.max(0,t.outerHeight-Rm(o,e,"top","bottom")),c=i!==e.w,d=l!==e.h;return e.w=i,e.h=l,r.horizontal?{same:c,other:d}:{same:d,other:c}}function Im(e,t){const r=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{n[e]=Math.max(t[e],r[e])}),n}return n(e?["left","right"]:["top","bottom"])}function Bm(e,t,r,n){const a=[];let s,o,i,l,c,d;for(s=0,o=e.length,c=0;s<o;++s){i=e[s],l=i.box,l.update(i.width||t.w,i.height||t.h,Im(i.horizontal,t));const{same:o,other:u}=Fm(t,r,i,n);c|=o&&a.length,d=d||u,l.fullSize||a.push(i)}return c&&Bm(a,t,r,n)||d}function zm(e,t,r,n,a){e.top=r,e.left=t,e.right=t+n,e.bottom=r+a,e.width=n,e.height=a}function Wm(e,t,r,n){const a=r.padding;let{x:s,y:o}=t;for(const i of e){const e=i.box,l=n[i.stack]||{count:1,placed:0,weight:1},c=i.stackWeight/l.weight||1;if(i.horizontal){const n=t.w*c,s=l.size||e.height;pd(l.start)&&(o=l.start),e.fullSize?zm(e,a.left,o,r.outerWidth-a.right-a.left,s):zm(e,t.left+l.placed,o,n,s),l.start=o,l.placed+=n,o=e.bottom}else{const n=t.h*c,o=l.size||e.width;pd(l.start)&&(s=l.start),e.fullSize?zm(e,s,a.top,o,r.outerHeight-a.bottom-a.top):zm(e,s,t.top+l.placed,o,n),l.start=s,l.placed+=n,s=e.right}}t.x=s,t.y=o}var Um={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;-1!==r&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const a=Uu(e.options.layout.padding),s=Math.max(t-a.width,0),o=Math.max(r-a.height,0),i=function(e){const t=function(e){const t=[];let r,n,a,s,o,i;for(r=0,n=(e||[]).length;r<n;++r)a=e[r],({position:s,options:{stack:o,stackWeight:i=1}}=a),t.push({index:r,box:a,pos:s,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&s+o,stackWeight:i});return t}(e),r=Om(t.filter(e=>e.box.fullSize),!0),n=Om(Lm(t,"left"),!0),a=Om(Lm(t,"right")),s=Om(Lm(t,"top"),!0),o=Om(Lm(t,"bottom")),i=Mm(t,"x"),l=Mm(t,"y");return{fullSize:r,leftAndTop:n.concat(s),rightAndBottom:a.concat(l).concat(o).concat(i),chartArea:Lm(t,"chartArea"),vertical:n.concat(a).concat(l),horizontal:s.concat(o).concat(i)}}(e.boxes),l=i.vertical,c=i.horizontal;sd(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:r,padding:a,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},a);Pm(h,Uu(n));const m=Object.assign({maxPadding:h,w:s,h:o,x:a.left,y:a.top},a),g=Dm(l.concat(c),u);Bm(i.fullSize,m,u,g),Bm(l,m,u,g),Bm(c,m,u,g)&&Bm(l,m,u,g),function(e){const t=e.maxPadding;function r(r){const n=Math.max(t[r]-e[r],0);return e[r]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}(m),Wm(i.leftAndTop,m,u,g),m.x+=m.w,m.y+=m.h,Wm(i.rightAndBottom,m,u,g),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},sd(i.chartArea,t=>{const r=t.box;Object.assign(r,e.chartArea),r.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Hm{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class Vm extends Hm{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Gm="$chartjs",qm={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$m=e=>null===e||""===e;const Km=!!jh&&{passive:!0};function Ym(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,Km)}function Xm(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function Jm(e,t,r){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const r of e)t=t||Xm(r.addedNodes,n),t=t&&!Xm(r.removedNodes,n);t&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function Qm(e,t,r){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const r of e)t=t||Xm(r.removedNodes,n),t=t&&!Xm(r.addedNodes,n);t&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Zm=new Map;let eg=0;function tg(){const e=window.devicePixelRatio;e!==eg&&(eg=e,Zm.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function rg(e,t,r){const n=e.canvas,a=n&&gh(n);if(!a)return;const s=Xd((e,t)=>{const n=a.clientWidth;r(e,t),n<a.clientWidth&&r()},window),o=new ResizeObserver(e=>{const t=e[0],r=t.contentRect.width,n=t.contentRect.height;0===r&&0===n||s(r,n)});return o.observe(a),function(e,t){Zm.size||window.addEventListener("resize",tg),Zm.set(e,t)}(e,s),o}function ng(e,t,r){r&&r.disconnect(),"resize"===t&&function(e){Zm.delete(e),Zm.size||window.removeEventListener("resize",tg)}(e)}function ag(e,t,r){const n=e.canvas,a=Xd(t=>{null!==e.ctx&&r(function(e,t){const r=qm[e.type]||e.type,{x:n,y:a}=yh(e,t);return{type:r,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==a?a:null}}(t,e))},e);return function(e,t,r){e&&e.addEventListener(t,r,Km)}(n,t,a),a}class sg extends Hm{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function(e,t){const r=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[Gm]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",$m(a)){const t=Nh(e,"width");void 0!==t&&(e.width=t)}if($m(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Nh(e,"height");void 0!==t&&(e.height=t)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Gm])return!1;const r=t[Gm].initial;["height","width"].forEach(e=>{const n=r[e];Jc(n)?t.removeAttribute(e):t.setAttribute(e,n)});const n=r.style||{};return Object.keys(n).forEach(e=>{t.style[e]=n[e]}),t.width=t.width,delete t[Gm],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),a={attach:Jm,detach:Qm,resize:rg}[t]||ag;n[t]=a(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:ng,detach:ng,resize:ng}[t]||Ym)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return kh(e,t,r,n)}isAttached(e){const t=e&&gh(e);return!(!t||!t.isConnected)}}class og{constructor(){(0,Jt.A)(this,"x",void 0),(0,Jt.A)(this,"y",void 0),(0,Jt.A)(this,"active",!1),(0,Jt.A)(this,"options",void 0),(0,Jt.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Ld(this.x)&&Ld(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach(e=>{n[e]=r[e]&&r[e].active()?r[e]._to:this[e]}),n}}function ig(e,t){const r=e.options.ticks,n=function(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),a=e._maxLength/r;return Math.floor(Math.min(n,a))}(e),a=Math.min(r.maxTicksLimit||n,n),s=r.major.enabled?function(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}(t):[],o=s.length,i=s[0],l=s[o-1],c=[];if(o>a)return function(e,t,r,n){let a,s=0,o=r[0];for(n=Math.ceil(n),a=0;a<e.length;a++)a===o&&(t.push(e[a]),s++,o=r[s*n])}(t,c,s,o/a),c;const d=function(e,t,r){const n=function(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}(e),a=t.length/r;if(!n)return Math.max(a,1);const s=function(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n===0&&(t.push(n),t.push(e/n));return r===(0|r)&&t.push(r),t.sort((e,t)=>e-t).pop(),t}(n);for(let o=0,i=s.length-1;o<i;o++){const e=s[o];if(e>a)return e}return Math.max(a,1)}(s,t,a);if(o>0){let e,r;const n=o>1?Math.round((l-i)/(o-1)):null;for(lg(t,c,d,Jc(n)?0:i-n,i),e=0,r=o-1;e<r;e++)lg(t,c,d,s[e],s[e+1]);return lg(t,c,d,l,Jc(n)?t.length:l+n),c}return lg(t,c,d),c}function lg(e,t,r,n,a){const s=rd(n,0),o=Math.min(rd(a,e.length),e.length);let i,l,c,d=0;for(r=Math.ceil(r),a&&(i=a-n,r=i/Math.floor(i/r)),c=s;c<0;)d++,c=Math.round(s+d*r);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),d++,c=Math.round(s+d*r))}(0,Jt.A)(og,"defaults",{}),(0,Jt.A)(og,"defaultRoutes",void 0);const cg=(e,t,r)=>"top"===t||"left"===t?e[t]+r:e[t]-r,dg=(e,t)=>Math.min(t||e,e);function ug(e,t){const r=[],n=e.length/t,a=e.length;let s=0;for(;s<a;s+=n)r.push(e[Math.floor(s)]);return r}function hg(e,t,r){const n=e.ticks.length,a=Math.min(t,n-1),s=e._startPixel,o=e._endPixel,i=1e-6;let l,c=e.getPixelForTick(a);if(!(r&&(l=1===n?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(a-1))/2,c+=a<t?l:-l,c<s-i||c>o+i)))return c}function mg(e){return e.drawTicks?e.tickLength:0}function gg(e,t){if(!e.display)return 0;const r=Hu(e.font,t),n=Uu(e.padding);return(Qc(e.text)?e.text.length:1)*r.lineHeight+n.height}function fg(e,t,r){let n=Jd(e);return(r&&"right"!==t||!r&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class pg extends og{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=td(e,Number.POSITIVE_INFINITY),t=td(t,Number.NEGATIVE_INFINITY),r=td(r,Number.POSITIVE_INFINITY),n=td(n,Number.NEGATIVE_INFINITY),{min:td(e,r),max:td(t,n),minDefined:ed(e),maxDefined:ed(t)}}getMinMax(e){let t,{min:r,max:n,minDefined:a,maxDefined:s}=this.getUserBounds();if(a&&s)return{min:r,max:n};const o=this.getMatchingVisibleMetas();for(let i=0,l=o.length;i<l;++i)t=o[i].controller.getMinMax(this,e),a||(r=Math.min(r,t.min)),s||(n=Math.max(n,t.max));return r=s&&r>n?n:r,n=a&&r>n?r:n,{min:td(r,td(n,r)),max:td(n,td(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ad(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:a,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,r){const{min:n,max:a}=e,s=nd(t,(a-n)/2),o=(e,t)=>r&&0===e?0:e+t;return{min:o(n,-Math.abs(s)),max:o(a,s)}}(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const i=o<this.ticks.length;this._convertTicksToLabels(i?ug(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=ig(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),i&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,r=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,r=!r),this._startPixel=e,this._endPixel=t,this._reversePixels=r,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ad(this.options.afterUpdate,[this])}beforeSetDimensions(){ad(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ad(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ad(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ad(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,a;for(r=0,n=e.length;r<n;r++)a=e[r],a.label=ad(t.callback,[a.value,r,e],this)}afterTickToLabelConversion(){ad(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ad(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=dg(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,a=t.maxRotation;let s,o,i,l=n;if(!this._isVisible()||!t.display||n>=a||r<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=Wd(this.chart.width-d,0,this.maxWidth);s=e.offset?this.maxWidth/r:h/(r-1),d+6>s&&(s=h/(r-(e.offset?.5:1)),o=this.maxHeight-mg(e.grid)-t.padding-gg(e.title,this.chart.options.font),i=Math.sqrt(d*d+u*u),l=Dd(Math.min(Math.asin(Wd((c.highest.height+6)/s,-1,1)),Math.asin(Wd(o/i,-1,1))-Math.asin(Wd(u/i,-1,1)))),l=Math.max(n,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){ad(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ad(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:a}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=gg(n,t.options.font);if(o?(e.width=this.maxWidth,e.height=mg(a)+s):(e.height=this.maxHeight,e.width=mg(a)+s),r.display&&this.ticks.length){const{first:t,last:n,widest:a,highest:s}=this._getLabelSizes(),i=2*r.padding,l=Od(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(o){const t=r.mirror?0:d*a.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+i)}else{const t=r.mirror?0:c*a.width+d*s.height;e.width=Math.min(this.maxWidth,e.width+t+i)}this._calculatePadding(t,n,d,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:a,padding:s},position:o}=this.options,i=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;i?l?(d=n*e.width,u=r*t.height):(d=r*e.height,u=n*t.width):"start"===a?u=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((u-c+s)*this.width/(this.width-c),0)}else{let r=t.height/2,n=e.height/2;"start"===a?(r=0,n=e.height):"end"===a&&(r=t.height,n=0),this.paddingTop=r+s,this.paddingBottom=n+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ad(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)Jc(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=ug(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:a}=this,s=[],o=[],i=Math.floor(t/dg(t,r));let l,c,d,u,h,m,g,f,p,x,b,y=0,v=0;for(l=0;l<t;l+=i){if(u=e[l].label,h=this._resolveTickFontOptions(l),n.font=m=h.string,g=a[m]=a[m]||{data:{},gc:[]},f=h.lineHeight,p=x=0,Jc(u)||Qc(u)){if(Qc(u))for(c=0,d=u.length;c<d;++c)b=u[c],Jc(b)||Qc(b)||(p=vu(n,g.data,g.gc,p,b),x+=f)}else p=vu(n,g.data,g.gc,p,u),x=f;s.push(p),o.push(x),y=Math.max(p,y),v=Math.max(x,v)}!function(e,t){sd(e,e=>{const r=e.gc,n=r.length/2;let a;if(n>t){for(a=0;a<n;++a)delete e.data[r[a]];r.splice(0,n)}})}(a,t);const k=s.indexOf(y),w=o.indexOf(v),j=e=>({width:s[e]||0,height:o[e]||0});return{first:j(0),last:j(t-1),widest:j(k),highest:j(w),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Wd(this._alignToPixels?wu(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function(e,t,r){return Gu(e,{tick:r,index:t,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=Gu(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Od(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,o=a?a.widest.width+s:0,i=a?a.highest.height+s:0;return this.isHorizontal()?i*r>o*n?o/r:i/n:i*n<o*r?i/r:o/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:a,position:s,border:o}=n,i=a.offset,l=this.isHorizontal(),c=this.ticks.length+(i?1:0),d=mg(a),u=[],h=o.setContext(this.getContext()),m=h.display?h.width:0,g=m/2,f=function(e){return wu(r,e,m)};let p,x,b,y,v,k,w,j,N,S,C,E;if("top"===s)p=f(this.bottom),k=this.bottom-d,j=p-g,S=f(e.top)+g,E=e.bottom;else if("bottom"===s)p=f(this.top),S=e.top,E=f(e.bottom)-g,k=p+g,j=this.top+d;else if("left"===s)p=f(this.right),v=this.right-d,w=p-g,N=f(e.left)+g,C=e.right;else if("right"===s)p=f(this.left),N=e.left,C=f(e.right)-g,v=p+g,w=this.left+d;else if("x"===t){if("center"===s)p=f((e.top+e.bottom)/2+.5);else if(Zc(s)){const e=Object.keys(s)[0],t=s[e];p=f(this.chart.scales[e].getPixelForValue(t))}S=e.top,E=e.bottom,k=p+g,j=k+d}else if("y"===t){if("center"===s)p=f((e.left+e.right)/2);else if(Zc(s)){const e=Object.keys(s)[0],t=s[e];p=f(this.chart.scales[e].getPixelForValue(t))}v=p-g,w=v-d,N=e.left,C=e.right}const A=rd(n.ticks.maxTicksLimit,c),_=Math.max(1,Math.ceil(c/A));for(x=0;x<c;x+=_){const e=this.getContext(x),t=a.setContext(e),n=o.setContext(e),s=t.lineWidth,c=t.color,d=n.dash||[],h=n.dashOffset,m=t.tickWidth,g=t.tickColor,f=t.tickBorderDash||[],p=t.tickBorderDashOffset;b=hg(this,x,i),void 0!==b&&(y=wu(r,b,s),l?v=w=N=C=y:k=j=S=E=y,u.push({tx1:v,ty1:k,tx2:w,ty2:j,x1:N,y1:S,x2:C,y2:E,width:s,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:g,tickBorderDash:f,tickBorderDashOffset:p}))}return this._ticksLength=c,this._borderValue=p,u}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:a}=r,s=this.isHorizontal(),o=this.ticks,{align:i,crossAlign:l,padding:c,mirror:d}=a,u=mg(r.grid),h=u+c,m=d?-c:h,g=-Od(this.labelRotation),f=[];let p,x,b,y,v,k,w,j,N,S,C,E,A="middle";if("top"===n)k=this.bottom-m,w=this._getXAxisLabelAlignment();else if("bottom"===n)k=this.top+m,w=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(u);w=e.textAlign,v=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(u);w=e.textAlign,v=e.x}else if("x"===t){if("center"===n)k=(e.top+e.bottom)/2+h;else if(Zc(n)){const e=Object.keys(n)[0],t=n[e];k=this.chart.scales[e].getPixelForValue(t)+h}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)v=(e.left+e.right)/2-h;else if(Zc(n)){const e=Object.keys(n)[0],t=n[e];v=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===i?A="top":"end"===i&&(A="bottom"));const _=this._getLabelSizes();for(p=0,x=o.length;p<x;++p){b=o[p],y=b.label;const e=a.setContext(this.getContext(p));j=this.getPixelForTick(p)+a.labelOffset,N=this._resolveTickFontOptions(p),S=N.lineHeight,C=Qc(y)?y.length:1;const t=C/2,r=e.color,i=e.textStrokeColor,c=e.textStrokeWidth;let u,h=w;if(s?(v=j,"inner"===w&&(h=p===x-1?this.options.reverse?"left":"right":0===p?this.options.reverse?"right":"left":"center"),E="top"===n?"near"===l||0!==g?-C*S+S/2:"center"===l?-_.highest.height/2-t*S+S:-_.highest.height+S/2:"near"===l||0!==g?S/2:"center"===l?_.highest.height/2-t*S:_.highest.height-C*S,d&&(E*=-1),0===g||e.showLabelBackdrop||(v+=S/2*Math.sin(g))):(k=j,E=(1-C)*S/2),e.showLabelBackdrop){const t=Uu(e.backdropPadding),r=_.heights[p],n=_.widths[p];let a=E-t.top,s=0-t.left;switch(A){case"middle":a-=r/2;break;case"bottom":a-=r}switch(w){case"center":s-=n/2;break;case"right":s-=n;break;case"inner":p===x-1?s-=n:p>0&&(s-=n/2)}u={left:s,top:a,width:n+t.width,height:r+t.height,color:e.backdropColor}}f.push({label:y,font:N,textOffset:E,options:{rotation:g,color:r,strokeColor:i,strokeWidth:c,textAlign:h,textBaseline:A,translation:[v,k],backdrop:u}})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Od(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===t.align?r="left":"end"===t.align?r="right":"inner"===t.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:a}}=this.options,s=e+a,o=this._getLabelSizes().widest.width;let i,l;return"left"===t?n?(l=this.right+a,"near"===r?i="left":"center"===r?(i="center",l+=o/2):(i="right",l+=o)):(l=this.right-s,"near"===r?i="right":"center"===r?(i="center",l-=o/2):(i="left",l=this.left)):"right"===t?n?(l=this.left+a,"near"===r?i="right":"center"===r?(i="center",l-=o/2):(i="left",l-=o)):(l=this.left+s,"near"===r?i="left":"center"===r?(i="center",l+=o/2):(i="right",l=this.right)):i="right",{textAlign:i,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:a,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,a,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(t=>t.value===e);if(r>=0){return t.setContext(this.getContext(r)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,s;const o=(e,t,n)=>{n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke(),r.restore())};if(t.display)for(a=0,s=n.length;a<s;++a){const e=n[a];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,a=r.setContext(this.getContext()),s=r.display?a.width:0;if(!s)return;const o=n.setContext(this.getContext(0)).lineWidth,i=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=wu(e,this.left,s)-s/2,c=wu(e,this.right,o)+o/2,d=u=i):(d=wu(e,this.top,s)-s/2,u=wu(e,this.bottom,o)+o/2,l=c=i),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,r=this._computeLabelArea();r&&Eu(t,r);const n=this.getLabelItems(e);for(const a of n){const e=a.options,r=a.font;Ou(t,a.label,0,a.textOffset,r,e)}r&&Au(t)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const a=Hu(r.font),s=Uu(r.padding),o=r.align;let i=a.lineHeight/2;"bottom"===t||"center"===t||Zc(t)?(i+=s.bottom,Qc(r.text)&&(i+=a.lineHeight*(r.text.length-1))):i+=s.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,r,n){const{top:a,left:s,bottom:o,right:i,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,m,g=0;const f=o-a,p=i-s;if(e.isHorizontal()){if(h=Qd(n,s,i),Zc(r)){const e=Object.keys(r)[0],n=r[e];m=d[e].getPixelForValue(n)+f-t}else m="center"===r?(c.bottom+c.top)/2+f-t:cg(e,r,t);u=i-s}else{if(Zc(r)){const e=Object.keys(r)[0],n=r[e];h=d[e].getPixelForValue(n)-p+t}else h="center"===r?(c.left+c.right)/2-p+t:cg(e,r,t);m=Qd(n,o,a),g="left"===r?-Nd:Nd}return{titleX:h,titleY:m,maxWidth:u,rotation:g}}(this,i,t,o);Ou(e,r.text,0,0,a,{color:r.color,maxWidth:d,rotation:u,textAlign:fg(o,t,n),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=rd(e.grid&&e.grid.z,-1),n=rd(e.border&&e.border.z,0);return this._isVisible()&&this.draw===pg.prototype.draw?[{z:r,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let a,s;for(a=0,s=t.length;a<s;++a){const s=t[a];s[r]!==this.id||e&&s.type!==e||n.push(s)}return n}_resolveTickFontOptions(e){return Hu(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class xg{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function(e){return"id"in e&&"defaults"in e})(t)&&(r=this.register(t));const n=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in n||(n[a]=e,function(e,t,r){const n=dd(Object.create(null),[r?yu.get(r):{},yu.get(t),e.defaults]);yu.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(r=>{const n=r.split("."),a=n.pop(),s=[e].concat(n).join("."),o=t[r].split("."),i=o.pop(),l=o.join(".");yu.route(s,a,l,i)})}(t,e.defaultRoutes);e.descriptors&&yu.describe(t,e.descriptors)}(e,s,r),this.override&&yu.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in yu[n]&&(delete yu[n][r],this.override&&delete gu[r])}}class bg{constructor(){this.controllers=new xg(nm,"datasets",!0),this.elements=new xg(og,"elements"),this.plugins=new xg(Object,"plugins"),this.scales=new xg(pg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.scales)}_each(e,t,r){[...t].forEach(t=>{const n=r||this._getRegistryForType(t);r||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):sd(t,t=>{const n=r||this._getRegistryForType(t);this._exec(e,n,t)})})}_exec(e,t,r){const n=fd(e);ad(r["before"+n],[],r),t[e](r),ad(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var yg=new bg;class vg{constructor(){this._init=[]}notify(e,t,r,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=n?this._descriptors(e).filter(n):this._descriptors(e),s=this._notify(a,e,t,r);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,r,n){n=n||{};for(const a of e){const e=a.plugin;if(!1===ad(e[r],[t,n,a.options],e)&&n.cancelable)return!1}return!0}invalidate(){Jc(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=rd(r.options&&r.options.plugins,{}),a=function(e){const t={},r=[],n=Object.keys(yg.plugins.items);for(let s=0;s<n.length;s++)r.push(yg.getPlugin(n[s]));const a=e.plugins||[];for(let s=0;s<a.length;s++){const e=a[s];-1===r.indexOf(e)&&(r.push(e),t[e.id]=!0)}return{plugins:r,localIds:t}}(r);return!1!==n||t?function(e,t,r,n){let{plugins:a,localIds:s}=t;const o=[],i=e.getContext();for(const l of a){const t=l.id,a=kg(r[t],n);null!==a&&o.push({plugin:l,options:wg(e.config,{plugin:l,local:s[t]},a,i)})}return o}(e,a,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function kg(e,t){return t||!1!==e?!0===e?{}:e:null}function wg(e,t,r,n){let{plugin:a,local:s}=t;const o=e.pluginScopeKeys(a),i=e.getOptionScopes(r,o);return s&&a.defaults&&i.push(a.defaults),e.createResolver(i,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jg(e,t){const r=yu.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function Ng(e){if("x"===e||"y"===e||"r"===e)return e}function Sg(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Cg(e){if(Ng(e))return e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const a of r){const t=a.axis||Sg(a.position)||e.length>1&&Ng(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Eg(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function Ag(e,t){const r=gu[e.type]||{scales:{}},n=t.scales||{},a=jg(e.type,t),s=Object.create(null);return Object.keys(n).forEach(t=>{const o=n[t];if(!Zc(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const i=Cg(t,o,function(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(r.length)return Eg(e,"x",r[0])||Eg(e,"y",r[0])}return{}}(t,e),yu.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(i,a),c=r.scales||{};s[t]=ud(Object.create(null),[{axis:i},o,c[i],c[l]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,o=r.indexAxis||jg(a,t),i=(gu[a]||{}).scales||{};Object.keys(i).forEach(e=>{const t=function(e,t){let r=e;return"_index_"===e?r=t:"_value_"===e&&(r="x"===t?"y":"x"),r}(e,o),a=r[t+"AxisID"]||t;s[a]=s[a]||Object.create(null),ud(s[a],[{axis:t},n[a],i[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];ud(t,[yu.scales[t.type],yu.scale])}),s}function _g(e){const t=e.options||(e.options={});t.plugins=rd(t.plugins,{}),t.scales=Ag(e,t)}function Tg(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Lg=new Map,Mg=new Set;function Og(e,t){let r=Lg.get(e);return r||(r=t(),Lg.set(e,r),Mg.add(r)),r}const Dg=(e,t,r)=>{const n=gd(t,r);void 0!==n&&e.add(n)};class Rg{constructor(e){this._config=function(e){return(e=e||{}).data=Tg(e.data),_g(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Tg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),_g(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Og(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return Og("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return Og("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return Og("".concat(r,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return n&&!t||(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:a}=this,s=this._cachedScopes(e,r),o=s.get(t);if(o)return o;const i=new Set;t.forEach(t=>{e&&(i.add(e),t.forEach(t=>Dg(i,e,t))),t.forEach(e=>Dg(i,n,e)),t.forEach(e=>Dg(i,gu[a]||{},e)),t.forEach(e=>Dg(i,yu,e)),t.forEach(e=>Dg(i,fu,e))});const l=Array.from(i);return 0===l.length&&l.push(Object.create(null)),Mg.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,gu[t]||{},yu.datasets[t]||{},{type:t},yu,fu]}resolveNamedOptions(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const a={$shared:!0},{resolver:s,subPrefixes:o}=Pg(this._resolverCache,e,n);let i=s;if(function(e,t){const{isScriptable:r,isIndexable:n}=Ku(e);for(const a of t){const t=r(a),s=n(a),o=(s||t)&&e[a];if(t&&(xd(o)||Fg(o))||s&&Qc(o))return!0}return!1}(s,t)){a.$shared=!1;i=$u(s,r=xd(r)?r():r,this.createResolver(e,r,o))}for(const l of t)a[l]=i[l];return a}createResolver(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=arguments.length>3?arguments[3]:void 0;const{resolver:a}=Pg(this._resolverCache,e,r);return Zc(t)?$u(a,t,void 0,n):a}}function Pg(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const a=r.join();let s=n.get(a);if(!s){s={resolver:qu(t,r),subPrefixes:r.filter(e=>!e.toLowerCase().includes("hover"))},n.set(a,s)}return s}const Fg=e=>Zc(e)&&Object.getOwnPropertyNames(e).some(t=>xd(e[t]));const Ig=["top","bottom","left","right","chartArea"];function Bg(e,t){return"top"===e||"bottom"===e||-1===Ig.indexOf(e)&&"x"===t}function zg(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function Wg(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),ad(r&&r.onComplete,[e],t)}function Ug(e){const t=e.chart,r=t.options.animation;ad(r&&r.onProgress,[e],t)}function Hg(e){return mh()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Vg={},Gg=e=>{const t=Hg(e);return Object.values(Vg).filter(e=>e.canvas===t).pop()};function qg(e,t,r){const n=Object.keys(e);for(const a of n){const n=+a;if(n>=t){const s=e[a];delete e[a],(r>0||n>t)&&(e[n+r]=s)}}}class $g{static register(){yg.add(...arguments),Kg()}static unregister(){yg.remove(...arguments),Kg()}constructor(e,t){const r=this.config=new Rg(t),n=Hg(e),a=Gg(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(e){return!mh()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Vm:sg}(n)),this.platform.updateConfig(r);const o=this.platform.acquireContext(n,s.aspectRatio),i=o&&o.canvas,l=i&&i.height,c=i&&i.width;this.id=Xc(),this.ctx=o,this.canvas=i,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vg,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let r;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t?(clearTimeout(r),r=setTimeout(e,t,a)):e.apply(this,a),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],Vg[this.id]=this,o&&i?(Wh.listen(this,"complete",Wg),Wh.listen(this,"progress",Ug),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:a}=this;return Jc(e)?t&&a?a:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return yg}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ju(this.canvas,this.ctx),this}stop(){return Wh.stop(this),this}resize(e,t){Wh.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(n,e,t,a),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),i=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,wh(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),ad(r.onResize,[this,s],this),this.attached&&this._doResize(i)&&this.render())}ensureScalesHaveIDs(){sd(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce((e,t)=>(e[t]=!1,e),{});let a=[];t&&(a=a.concat(Object.keys(t).map(e=>{const r=t[e],n=Cg(e,r),a="r"===n,s="x"===n;return{options:r,dposition:a?"chartArea":s?"bottom":"left",dtype:a?"radialLinear":s?"category":"linear"}}))),sd(a,t=>{const a=t.options,s=a.id,o=Cg(s,a),i=rd(a.type,t.dtype);void 0!==a.position&&Bg(a.position,o)===Bg(t.dposition)||(a.position=t.dposition),n[s]=!0;let l=null;if(s in r&&r[s].type===i)l=r[s];else{l=new(yg.getScale(i))({id:s,type:i,ctx:this.ctx,chart:this}),r[l.id]=l}l.init(a,e)}),sd(n,(e,t)=>{e||delete r[t]}),sd(r,e=>{Um.configure(this,e,e.options),Um.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((e,t)=>e.index-t.index),r>t){for(let e=t;e<r;++e)this._destroyDatasetMeta(e);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(zg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,r)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const n=t[r];let a=this.getDatasetMeta(r);const s=n.type||this.config.type;if(a.type&&a.type!==s&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=s,a.indexAxis=n.indexAxis||jg(s,this.options),a.order=n.order||0,a.index=r,a.label=""+n.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const t=yg.getController(s),{datasetElementType:n,dataElementType:o}=yu.datasets[s];Object.assign(t,{dataElementType:yg.getElement(o),datasetElementType:n&&yg.getElement(n)}),a.controller=new t(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){sd(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!n&&-1===a.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=r.layout.autoPadding?s:0,this._updateLayout(s),n||sd(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(zg("z","_idx"));const{_active:o,_lastEvent:i}=this;i?this._eventHandler(i,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){sd(this.scales,e=>{Um.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);bd(t,r)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:a}of t){qg(e,n,"_removeElements"===r?-a:a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),n=r(0);for(let a=1;a<t;a++)if(!bd(n,r(a)))return;return Array.from(n).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Um.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],sd(this.boxes,e=>{r&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,xd(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Wh.has(this)?this.attached&&!Wh.running(this)&&Wh.start(this):(this.draw(),Wg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,a;for(n=0,a=t.length;n<a;++n){const a=t[n];e&&!a.visible||r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},n=Bh(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&Eu(t,n),e.controller.draw(),n&&Au(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Cu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const a=_m.modes[t];return"function"===typeof a?a(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter(e=>e&&e._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=Gu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"===typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,n);pd(t)?(a.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),s.update(a,{visible:r}),this.update(t=>t.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Wh.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ju(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Vg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(e,t,r)=>{e.offsetX=t,e.offsetY=r,this._eventHandler(e)};sd(this.options.events,e=>r(e,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(r,n)=>{e[r]&&(t.removeEventListener(this,r,n),delete e[r])},a=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{n("attach",o),this.attached=!0,this.resize(),r("resize",a),r("detach",s)};s=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),r("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){sd(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},sd(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let a,s,o,i;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),o=0,i=e.length;o<i;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(e=>{let{datasetIndex:t,index:r}=e;const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[r],index:r}});!od(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,r){const n=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=a(t,e),o=r?e:a(e,t);s.length&&this.updateHoverStyle(s,n.mode,!1),o.length&&n.mode&&this.updateHoverStyle(o,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,n))return;const a=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(a||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:a}=this,s=t,o=this._getActiveElements(e,n,r,s),i=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,r,n){return r&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,r,i);r&&(this._lastEvent=null,ad(a.onHover,[e,o,this],this),i&&ad(a.onClick,[e,o,this],this));const c=!od(o,n);return(c||t)&&(this._active=o,this._updateHoverStyles(o,n,t)),this._lastEvent=l,c}_getActiveElements(e,t,r,n){if("mouseout"===e.type)return[];if(!r)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}}function Kg(){return sd($g.instances,e=>e._plugins.invalidate())}function Yg(e,t,r,n){const a=Bu(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(r-t)/2,o=Math.min(s,n*t/2),i=e=>{const t=(r-Math.min(s,e))*n/2;return Wd(e,0,Math.min(s,t))};return{outerStart:i(a.outerStart),outerEnd:i(a.outerEnd),innerStart:Wd(a.innerStart,0,o),innerEnd:Wd(a.innerEnd,0,o)}}function Xg(e,t,r,n){return{x:r+e*Math.cos(t),y:n+e*Math.sin(t)}}function Jg(e,t,r,n,a,s){const{x:o,y:i,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+n+r-c,0),h=d>0?d+n+r+c:0;let m=0;const g=a-l;if(n){const e=((d>0?d-n:0)+(u>0?u-n:0))/2;m=(g-(0!==e?g*e/(e+n):g))/2}const f=(g-Math.max(.001,g*u-r/yd)/u)/2,p=l+f+m,x=a-f-m,{outerStart:b,outerEnd:y,innerStart:v,innerEnd:k}=Yg(t,h,u,x-p),w=u-b,j=u-y,N=p+b/w,S=x-y/j,C=h+v,E=h+k,A=p+v/C,_=x-k/E;if(e.beginPath(),s){const t=(N+S)/2;if(e.arc(o,i,u,N,t),e.arc(o,i,u,t,S),y>0){const t=Xg(j,S,o,i);e.arc(t.x,t.y,y,S,x+Nd)}const r=Xg(E,x,o,i);if(e.lineTo(r.x,r.y),k>0){const t=Xg(E,_,o,i);e.arc(t.x,t.y,k,x+Nd,_+Math.PI)}const n=(x-k/h+(p+v/h))/2;if(e.arc(o,i,h,x-k/h,n,!0),e.arc(o,i,h,n,p+v/h,!0),v>0){const t=Xg(C,A,o,i);e.arc(t.x,t.y,v,A+Math.PI,p-Nd)}const a=Xg(w,p,o,i);if(e.lineTo(a.x,a.y),b>0){const t=Xg(w,N,o,i);e.arc(t.x,t.y,b,p-Nd,N)}}else{e.moveTo(o,i);const t=Math.cos(N)*u+o,r=Math.sin(N)*u+i;e.lineTo(t,r);const n=Math.cos(S)*u+o,a=Math.sin(S)*u+i;e.lineTo(n,a)}e.closePath()}function Qg(e,t,r,n,a){const{fullCircles:s,startAngle:o,circumference:i,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:m}=l,g="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,g?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(s){Jg(e,t,r,n,f,a);for(let t=0;t<s;++t)e.stroke();isNaN(i)||(f=o+(i%vd||vd))}g&&function(e,t,r){const{startAngle:n,pixelMargin:a,x:s,y:o,outerRadius:i,innerRadius:l}=t;let c=a/i;e.beginPath(),e.arc(s,o,i,n-c,r+c),l>a?(c=a/l,e.arc(s,o,l,r+c,n-c,!0)):e.arc(s,o,a,r+Nd,n-Nd),e.closePath(),e.clip()}(e,t,f),l.selfJoin&&f-o>=yd&&0===m&&"miter"!==d&&function(e,t,r){const{startAngle:n,x:a,y:s,outerRadius:o,innerRadius:i,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/o,Bd(n-r));if(e.beginPath(),e.arc(a,s,o-c/2,n+u/2,r-u/2),i>0){const t=Math.min(c/i,Bd(n-r));e.arc(a,s,i+c/2,r-t/2,n+t/2,!0)}else{const t=Math.min(c/2,o*Bd(n-r));if("round"===d)e.arc(a,s,t,r-yd/2,n+yd/2,!0);else if("bevel"===d){const o=2*t*t,i=-o*Math.cos(r+yd/2)+a,l=-o*Math.sin(r+yd/2)+s,c=o*Math.cos(n+yd/2)+a,d=o*Math.sin(n+yd/2)+s;e.lineTo(i,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,f),s||(Jg(e,t,r,n,f,a),e.stroke())}(0,Jt.A)($g,"defaults",yu),(0,Jt.A)($g,"instances",Vg),(0,Jt.A)($g,"overrides",gu),(0,Jt.A)($g,"registry",yg),(0,Jt.A)($g,"version","4.5.0"),(0,Jt.A)($g,"getChart",Gg);class Zg extends og{constructor(e){super(),(0,Jt.A)(this,"circumference",void 0),(0,Jt.A)(this,"endAngle",void 0),(0,Jt.A)(this,"fullCircles",void 0),(0,Jt.A)(this,"innerRadius",void 0),(0,Jt.A)(this,"outerRadius",void 0),(0,Jt.A)(this,"pixelMargin",void 0),(0,Jt.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.getProps(["x","y"],r),{angle:a,distance:s}=Pd(n,{x:e,y:t}),{startAngle:o,endAngle:i,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),u=(this.options.spacing+this.options.borderWidth)/2,h=rd(d,i-o),m=zd(a,o,i)&&o!==i,g=h>=vd||m,f=Ud(s,l+u,c+u);return g&&f}getCenterPoint(e){const{x:t,y:r,startAngle:n,endAngle:a,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:i,spacing:l}=this.options,c=(n+a)/2,d=(s+o+l+i)/2;return{x:t+Math.cos(c)*d,y:r+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,n=(t.offset||0)/4,a=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>vd?Math.floor(r/vd):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*n,Math.sin(o)*n);const i=n*(1-Math.sin(Math.min(yd,r||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,r,n,a){const{fullCircles:s,startAngle:o,circumference:i}=t;let l=t.endAngle;if(s){Jg(e,t,r,n,l,a);for(let t=0;t<s;++t)e.fill();isNaN(i)||(l=o+(i%vd||vd))}Jg(e,t,r,n,l,a),e.fill()}(e,this,i,a,s),Qg(e,this,i,a,s),e.restore()}}function ef(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=rd(r.borderCapStyle,t.borderCapStyle),e.setLineDash(rd(r.borderDash,t.borderDash)),e.lineDashOffset=rd(r.borderDashOffset,t.borderDashOffset),e.lineJoin=rd(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=rd(r.borderWidth,t.borderWidth),e.strokeStyle=rd(r.borderColor,t.borderColor)}function tf(e,t,r){e.lineTo(r.x,r.y)}function rf(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.length,{start:a=0,end:s=n-1}=r,{start:o,end:i}=t,l=Math.max(a,o),c=Math.min(s,i),d=a<o&&s<o||a>i&&s>i;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function nf(e,t,r,n){const{points:a,options:s}=t,{count:o,start:i,loop:l,ilen:c}=rf(a,r,n),d=function(e){return e.stepped?_u:e.tension||"monotone"===e.cubicInterpolationMode?Tu:tf}(s);let u,h,m,{move:g=!0,reverse:f}=n||{};for(u=0;u<=c;++u)h=a[(i+(f?c-u:u))%o],h.skip||(g?(e.moveTo(h.x,h.y),g=!1):d(e,m,h,f,s.stepped),m=h);return l&&(h=a[(i+(f?c:0))%o],d(e,m,h,f,s.stepped)),!!l}function af(e,t,r,n){const a=t.points,{count:s,start:o,ilen:i}=rf(a,r,n),{move:l=!0,reverse:c}=n||{};let d,u,h,m,g,f,p=0,x=0;const b=e=>(o+(c?i-e:e))%s,y=()=>{m!==g&&(e.lineTo(p,g),e.lineTo(p,m),e.lineTo(p,f))};for(l&&(u=a[b(0)],e.moveTo(u.x,u.y)),d=0;d<=i;++d){if(u=a[b(d)],u.skip)continue;const t=u.x,r=u.y,n=0|t;n===h?(r<m?m=r:r>g&&(g=r),p=(x*p+t)/++x):(y(),e.lineTo(t,r),h=n,x=0,m=g=r),f=r}y()}function sf(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!r?af:nf}(0,Jt.A)(Zg,"id","arc"),(0,Jt.A)(Zg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,Jt.A)(Zg,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Jt.A)(Zg,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const of="function"===typeof Path2D;function lf(e,t,r,n){of&&!t.options.segment?function(e,t,r,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,r,n)&&a.closePath()),ef(e,t.options),e.stroke(a)}(e,t,r,n):function(e,t,r,n){const{segments:a,options:s}=t,o=sf(t);for(const i of a)ef(e,s,i.style),e.beginPath(),o(e,t,i,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}(e,t,r,n)}class cf extends og{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||"monotone"===r.cubicInterpolationMode)&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;hh(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const r=e.points,n=e.options.spanGaps,a=r.length;if(!a)return[];const s=!!e._loop,{start:o,end:i}=function(e,t,r,n){let a=0,s=t-1;if(r&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,r&&(s+=a);s>a&&e[s%t].skip;)s--;return s%=t,{start:a,end:s}}(r,a,s,n);return Rh(e,!0===n?[{start:o,end:i,loop:s}]:function(e,t,r,n){const a=e.length,s=[];let o,i=t,l=e[t];for(o=t+1;o<=r;++o){const r=e[o%a];r.skip||r.stop?l.skip||(n=!1,s.push({start:t%a,end:(o-1)%a,loop:n}),t=i=r.stop?o:null):(i=o,l.skip&&(t=o)),l=r}return null!==i&&s.push({start:t%a,end:i%a,loop:n}),s}(r,o,i<o?i+a:i,!!e._fullLoop&&0===o&&i===a-1),r,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],a=this.points,s=Dh(this,{property:t,start:n,end:n});if(!s.length)return;const o=[],i=function(e){return e.stepped?Ch:e.tension||"monotone"===e.cubicInterpolationMode?Eh:Sh}(r);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:d}=s[l],u=a[c],h=a[d];if(u===h){o.push(u);continue}const m=i(u,h,Math.abs((n-u[t])/(h[t]-u[t])),r.stepped);m[t]=e[t],o.push(m)}return 1===o.length?o[0]:o}pathSegment(e,t,r){return sf(this)(e,this,t,r)}path(e,t,r){const n=this.segments,a=sf(this);let s=this._loop;t=t||0,r=r||this.points.length-t;for(const o of n)s&=a(e,this,o,{start:t,end:t+r-1});return!!s}draw(e,t,r,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),lf(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function df(e,t,r,n){const a=e.options,{[r]:s}=e.getProps([r],n);return Math.abs(t-s)<a.radius+a.hitRadius}(0,Jt.A)(cf,"id","line"),(0,Jt.A)(cf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Jt.A)(cf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Jt.A)(cf,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class uf extends og{constructor(e){super(),(0,Jt.A)(this,"parsed",void 0),(0,Jt.A)(this,"skip",void 0),(0,Jt.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.options,{x:a,y:s}=this.getProps(["x","y"],r);return Math.pow(e-a,2)+Math.pow(t-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return df(this,e,"x",t)}inYRange(e,t){return df(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const r=this.options;this.skip||r.radius<.1||!Cu(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Nu(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function hf(e,t){const{x:r,y:n,base:a,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let i,l,c,d,u;return e.horizontal?(u=o/2,i=Math.min(r,a),l=Math.max(r,a),c=n-u,d=n+u):(u=s/2,i=r-u,l=r+u,c=Math.min(n,a),d=Math.max(n,a)),{left:i,top:c,right:l,bottom:d}}function mf(e,t,r,n){return e?0:Wd(t,r,n)}function gf(e){const t=hf(e),r=t.right-t.left,n=t.bottom-t.top,a=function(e,t,r){const n=e.options.borderWidth,a=e.borderSkipped,s=zu(n);return{t:mf(a.top,s.top,0,r),r:mf(a.right,s.right,0,t),b:mf(a.bottom,s.bottom,0,r),l:mf(a.left,s.left,0,t)}}(e,r/2,n/2),s=function(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,s=Wu(a),o=Math.min(t,r),i=e.borderSkipped,l=n||Zc(a);return{topLeft:mf(!l||i.top||i.left,s.topLeft,0,o),topRight:mf(!l||i.top||i.right,s.topRight,0,o),bottomLeft:mf(!l||i.bottom||i.left,s.bottomLeft,0,o),bottomRight:mf(!l||i.bottom||i.right,s.bottomRight,0,o)}}(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:s},inner:{x:t.left+a.l,y:t.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,s.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(a.b,a.r))}}}}function ff(e,t,r,n){const a=null===t,s=null===r,o=e&&!(a&&s)&&hf(e,n);return o&&(a||Ud(t,o.left,o.right))&&(s||Ud(r,o.top,o.bottom))}function pf(e,t){e.rect(t.x,t.y,t.w,t.h)}function xf(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.x!==r.x?-t:0,a=e.y!==r.y?-t:0,s=(e.x+e.w!==r.x+r.w?t:0)-n,o=(e.y+e.h!==r.y+r.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+s,h:e.h+o,radius:e.radius}}(0,Jt.A)(uf,"id","point"),(0,Jt.A)(uf,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Jt.A)(uf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class bf extends og{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:a,outer:s}=gf(this),o=(i=s.radius).topLeft||i.topRight||i.bottomLeft||i.bottomRight?Du:pf;var i;e.save(),s.w===a.w&&s.h===a.h||(e.beginPath(),o(e,xf(s,t,a)),e.clip(),o(e,xf(a,-t,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),o(e,xf(a,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return ff(this,e,t,r)}inXRange(e,t){return ff(this,e,null,t)}inYRange(e,t){return ff(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+n)/2:t,y:a?r:(r+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,Jt.A)(bf,"id","bar"),(0,Jt.A)(bf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Jt.A)(bf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function yf(e,t,r,n){if(n)return;let a=t[e],s=r[e];return"angle"===e&&(a=Bd(a),s=Bd(s)),{property:e,start:a,end:s}}function vf(e,t,r){for(;t>e;t--){const e=r[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function kf(e,t,r,n){return e&&t?n(e[r],t[r]):e?e[r]:t?t[r]:0}function wf(e,t){let r=[],n=!1;return Qc(e)?(n=!0,r=e):r=function(e,t){const{x:r=null,y:n=null}=e||{},a=t.points,s=[];return t.segments.forEach(e=>{let{start:t,end:o}=e;o=vf(t,o,a);const i=a[t],l=a[o];null!==n?(s.push({x:i.x,y:n}),s.push({x:l.x,y:n})):null!==r&&(s.push({x:r,y:i.y}),s.push({x:r,y:l.y}))}),s}(e,t),r.length?new cf({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function jf(e){return e&&!1!==e.fill}function Nf(e,t,r){let n=e[t].fill;const a=[t];let s;if(!r)return n;for(;!1!==n&&-1===a.indexOf(n);){if(!ed(n))return n;if(s=e[n],!s)return!1;if(s.visible)return n;a.push(n),n=s.fill}return!1}function Sf(e,t,r){const n=function(e){const t=e.options,r=t.fill;let n=rd(r&&r.target,r);void 0===n&&(n=!!t.backgroundColor);if(!1===n||null===n)return!1;if(!0===n)return"origin";return n}(e);if(Zc(n))return!isNaN(n.value)&&n;let a=parseFloat(n);return ed(a)&&Math.floor(a)===a?function(e,t,r,n){"-"!==e&&"+"!==e||(r=t+r);if(r===t||r<0||r>=n)return!1;return r}(n[0],t,a,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Cf(e,t,r){const n=[];for(let a=0;a<r.length;a++){const s=r[a],{first:o,last:i,point:l}=Ef(s,t,"x");if(!(!l||o&&i))if(o)n.unshift(l);else if(e.push(l),!i)break}e.push(...n)}function Ef(e,t,r){const n=e.interpolate(t,r);if(!n)return{};const a=n[r],s=e.segments,o=e.points;let i=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=o[e.start][r],n=o[e.end][r];if(Ud(a,t,n)){i=a===t,l=a===n;break}}return{first:i,last:l,point:n}}class Af{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:n,y:a,radius:s}=this;return t=t||{start:0,end:vd},e.arc(n,a,s,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:n}=this,a=e.angle;return{x:t+Math.cos(a)*n,y:r+Math.sin(a)*n,angle:a}}}function _f(e){const{chart:t,fill:r,line:n}=e;if(ed(r))return function(e,t){const r=e.getDatasetMeta(t),n=r&&e.isDatasetVisible(t);return n?r.dataset:null}(t,r);if("stack"===r)return function(e){const{scale:t,index:r,line:n}=e,a=[],s=n.segments,o=n.points,i=function(e,t){const r=[],n=e.getMatchingVisibleMetas("line");for(let a=0;a<n.length;a++){const e=n[a];if(e.index===t)break;e.hidden||r.unshift(e.dataset)}return r}(t,r);i.push(wf({x:null,y:t.bottom},n));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)Cf(a,o[t],i)}return new cf({points:a,options:{}})}(e);if("shape"===r)return!0;const a=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:r}=e,n=t.options,a=t.getLabels().length,s=n.reverse?t.max:t.min,o=function(e,t,r){let n;return n="start"===e?r:"end"===e?t.options.reverse?t.min:t.max:Zc(e)?e.value:t.getBaseValue(),n}(r,t,s),i=[];if(n.grid.circular){const e=t.getPointPositionForValue(0,s);return new Af({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<a;++l)i.push(t.getPointPositionForValue(l,o));return i}(e);return function(e){const{scale:t={},fill:r}=e,n=function(e,t){let r=null;return"start"===e?r=t.bottom:"end"===e?r=t.top:Zc(e)?r=t.getPixelForValue(e.value):t.getBasePixel&&(r=t.getBasePixel()),r}(r,t);if(ed(n)){const e=t.isHorizontal();return{x:e?n:null,y:e?null:n}}return null}(e)}(e);return a instanceof Af?a:wf(a,n)}function Tf(e,t,r){const n=_f(t),{chart:a,index:s,line:o,scale:i,axis:l}=t,c=o.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:m=u}=d||{},g=a.getDatasetMeta(s),f=Bh(a,g);n&&o.points.length&&(Eu(e,r),function(e,t){const{line:r,target:n,above:a,below:s,area:o,scale:i,clip:l}=t,c=r._loop?"angle":t.axis;e.save();let d=s;s!==a&&("x"===c?(Lf(e,n,o.top),Of(e,{line:r,target:n,color:a,scale:i,property:c,clip:l}),e.restore(),e.save(),Lf(e,n,o.bottom)):"y"===c&&(Mf(e,n,o.left),Of(e,{line:r,target:n,color:s,scale:i,property:c,clip:l}),e.restore(),e.save(),Mf(e,n,o.right),d=a));Of(e,{line:r,target:n,color:d,scale:i,property:c,clip:l}),e.restore()}(e,{line:o,target:n,above:h,below:m,area:r,scale:i,axis:l,clip:f}),Au(e))}function Lf(e,t,r){const{segments:n,points:a}=t;let s=!0,o=!1;e.beginPath();for(const i of n){const{start:n,end:l}=i,c=a[n],d=a[vf(n,l,a)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,r),e.lineTo(c.x,c.y)),o=!!t.pathSegment(e,i,{move:o}),o?e.closePath():e.lineTo(d.x,r)}e.lineTo(t.first().x,r),e.closePath(),e.clip()}function Mf(e,t,r){const{segments:n,points:a}=t;let s=!0,o=!1;e.beginPath();for(const i of n){const{start:n,end:l}=i,c=a[n],d=a[vf(n,l,a)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(r,c.y),e.lineTo(c.x,c.y)),o=!!t.pathSegment(e,i,{move:o}),o?e.closePath():e.lineTo(r,d.y)}e.lineTo(r,t.first().y),e.closePath(),e.clip()}function Of(e,t){const{line:r,target:n,property:a,color:s,scale:o,clip:i}=t,l=function(e,t,r){const n=e.segments,a=e.points,s=t.points,o=[];for(const i of n){let{start:e,end:n}=i;n=vf(e,n,a);const l=yf(r,a[e],a[n],i.loop);if(!t.segments){o.push({source:i,target:l,start:a[e],end:a[n]});continue}const c=Dh(t,l);for(const t of c){const e=yf(r,s[t.start],s[t.end],t.loop),n=Oh(i,a,e);for(const a of n)o.push({source:a,target:t,start:{[r]:kf(l,e,"start",Math.max)},end:{[r]:kf(l,e,"end",Math.min)}})}}return o}(r,n,a);for(const{source:c,target:d,start:u,end:h}of l){const{style:{backgroundColor:t=s}={}}=c,l=!0!==n;e.save(),e.fillStyle=t,Df(e,o,i,l&&yf(a,u,h)),e.beginPath();const m=!!r.pathSegment(e,c);let g;if(l){m?e.closePath():Rf(e,n,h,a);const t=!!n.pathSegment(e,d,{move:m,reverse:!0});g=m&&t,g||Rf(e,n,u,a)}e.closePath(),e.fill(g?"evenodd":"nonzero"),e.restore()}}function Df(e,t,r,n){const a=t.chart.chartArea,{property:s,start:o,end:i}=n||{};if("x"===s||"y"===s){let t,n,l,c;"x"===s?(t=o,n=a.top,l=i,c=a.bottom):(t=a.left,n=o,l=a.right,c=i),e.beginPath(),r&&(t=Math.max(t,r.left),l=Math.min(l,r.right),n=Math.max(n,r.top),c=Math.min(c,r.bottom)),e.rect(t,n,l-t,c-n),e.clip()}}function Rf(e,t,r,n){const a=t.interpolate(r,n);a&&e.lineTo(a.x,a.y)}var Pf={id:"filler",afterDatasetsUpdate(e,t,r){const n=(e.data.datasets||[]).length,a=[];let s,o,i,l;for(o=0;o<n;++o)s=e.getDatasetMeta(o),i=s.dataset,l=null,i&&i.options&&i instanceof cf&&(l={visible:e.isDatasetVisible(o),index:o,fill:Sf(i,o,n),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:i}),s.$filler=l,a.push(l);for(o=0;o<n;++o)l=a[o],l&&!1!==l.fill&&(l.fill=Nf(a,o,r.propagate))},beforeDraw(e,t,r){const n="beforeDraw"===r.drawTime,a=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let o=a.length-1;o>=0;--o){const t=a[o].$filler;t&&(t.line.updateControlPoints(s,t.axis),n&&t.fill&&Tf(e.ctx,t,s))}},beforeDatasetsDraw(e,t,r){if("beforeDatasetsDraw"!==r.drawTime)return;const n=e.getSortedVisibleDatasetMetas();for(let a=n.length-1;a>=0;--a){const t=n[a].$filler;jf(t)&&Tf(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,r){const n=t.meta.$filler;jf(n)&&"beforeDatasetDraw"===r.drawTime&&Tf(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ff=(e,t)=>{let{boxHeight:r=t,boxWidth:n=t}=e;return e.usePointStyle&&(r=Math.min(r,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}};class If extends og{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ad(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,r)=>e.sort(t,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,n=Hu(r.font),a=n.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:i}=Ff(r,a);let l,c;t.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,a,o,i)+10):(c=this.maxHeight,l=this._fitCols(s,n,o,i)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:a,maxWidth:s,options:{labels:{padding:o}}}=this,i=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+o;let d=e;a.textAlign="left",a.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,m)=>{const g=r+t/2+a.measureText(e.text).width;(0===m||l[l.length-1]+g+2*o>s)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),i[m]={left:0,top:h,row:u,width:g,height:n},l[l.length-1]+=g+o}),d}_fitCols(e,t,r,n){const{ctx:a,maxHeight:s,options:{labels:{padding:o}}}=this,i=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let d=o,u=0,h=0,m=0,g=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:f,itemHeight:p}=function(e,t,r,n,a){const s=function(e,t,r,n){let a=e.text;a&&"string"!==typeof a&&(a=a.reduce((e,t)=>e.length>t.length?e:t));return t+r.size/2+n.measureText(a).width}(n,e,t,r),o=function(e,t,r){let n=e;"string"!==typeof t.text&&(n=Bf(t,r));return n}(a,n,t.lineHeight);return{itemWidth:s,itemHeight:o}}(r,t,a,e,n);s>0&&h+p+2*o>c&&(d+=u+o,l.push({width:u,height:h}),m+=u+o,g++,u=h=0),i[s]={left:m,top:h,col:g,width:f,height:p},u=Math.max(u,f),h+=p+o}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:a}}=this,s=Ah(a,this.left,this.width);if(this.isHorizontal()){let a=0,o=Qd(r,this.left+n,this.right-this.lineWidths[a]);for(const i of t)a!==i.row&&(a=i.row,o=Qd(r,this.left+n,this.right-this.lineWidths[a])),i.top+=this.top+e+n,i.left=s.leftForLtr(s.x(o),i.width),o+=i.width+n}else{let a=0,o=Qd(r,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const i of t)i.col!==a&&(a=i.col,o=Qd(r,this.top+e+n,this.bottom-this.columnSizes[a].height)),i.top=o,i.left+=this.left+n,i.left=s.leftForLtr(s.x(i.left),i.width),o+=i.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Eu(e,this),this._draw(),Au(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:a,labels:s}=e,o=yu.color,i=Ah(e.rtl,this.left,this.width),l=Hu(s.font),{padding:c}=s,d=l.size,u=d/2;let h;this.drawTitle(),n.textAlign=i.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:m,boxHeight:g,itemHeight:f}=Ff(s,d),p=this.isHorizontal(),x=this._computeTitleHeight();h=p?{x:Qd(a,this.left+c,this.right-r[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:Qd(a,this.top+x+c,this.bottom-t[0].height),line:0},_h(this.ctx,e.textDirection);const b=f+c;this.legendItems.forEach((y,v)=>{n.strokeStyle=y.fontColor,n.fillStyle=y.fontColor;const k=n.measureText(y.text).width,w=i.textAlign(y.textAlign||(y.textAlign=s.textAlign)),j=m+u+k;let N=h.x,S=h.y;i.setWidth(this.width),p?v>0&&N+j+c>this.right&&(S=h.y+=b,h.line++,N=h.x=Qd(a,this.left+c,this.right-r[h.line])):v>0&&S+b>this.bottom&&(N=h.x=N+t[h.line].width+c,h.line++,S=h.y=Qd(a,this.top+x+c,this.bottom-t[h.line].height));if(function(e,t,r){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;n.save();const a=rd(r.lineWidth,1);if(n.fillStyle=rd(r.fillStyle,o),n.lineCap=rd(r.lineCap,"butt"),n.lineDashOffset=rd(r.lineDashOffset,0),n.lineJoin=rd(r.lineJoin,"miter"),n.lineWidth=a,n.strokeStyle=rd(r.strokeStyle,o),n.setLineDash(rd(r.lineDash,[])),s.usePointStyle){const o={radius:g*Math.SQRT2/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:a},l=i.xPlus(e,m/2);Su(n,o,l,t+u,s.pointStyleWidth&&m)}else{const s=t+Math.max((d-g)/2,0),o=i.leftForLtr(e,m),l=Wu(r.borderRadius);n.beginPath(),Object.values(l).some(e=>0!==e)?Du(n,{x:o,y:s,w:m,h:g,radius:l}):n.rect(o,s,m,g),n.fill(),0!==a&&n.stroke()}n.restore()}(i.x(N),S,y),N=((e,t,r,n)=>e===(n?"left":"right")?r:"center"===e?(t+r)/2:t)(w,N+m+u,p?N+j:this.right,e.rtl),function(e,t,r){Ou(n,r.text,e,t+f/2,l,{strikethrough:r.hidden,textAlign:i.textAlign(r.textAlign)})}(i.x(N),S,y),p)h.x+=j+c;else if("string"!==typeof y.text){const e=l.lineHeight;h.y+=Bf(y,e)+c}else h.y+=b}),Th(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Hu(t.font),n=Uu(t.padding);if(!t.display)return;const a=Ah(e.rtl,this.left,this.width),s=this.ctx,o=t.position,i=r.size/2,l=n.top+i;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=Qd(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+Qd(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Qd(o,d,d+u);s.textAlign=a.textAlign(Jd(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,Ou(s,t.text,h,c,r)}_computeTitleHeight(){const e=this.options.title,t=Hu(e.font),r=Uu(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,a;if(Ud(e,this.left,this.right)&&Ud(t,this.top,this.bottom))for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(n=a[r],Ud(e,n.left,n.left+n.width)&&Ud(t,n.top,n.top+n.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,o=(a=r,null!==(n=s)&&null!==a&&n.datasetIndex===a.datasetIndex&&n.index===a.index);s&&!o&&ad(t.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!o&&ad(t.onHover,[e,r,this],this)}else r&&ad(t.onClick,[e,r,this],this);var n,a}}function Bf(e,t){return t*(e.text?e.text.length:0)}var zf={id:"legend",_element:If,start(e,t,r){const n=e.legend=new If({ctx:e.ctx,options:r,chart:e});Um.configure(e,n,r),Um.addBox(e,n)},stop(e){Um.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const n=e.legend;Um.configure(e,n,r),n.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const n=t.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:s,useBorderRadius:o,borderRadius:i}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(r?0:void 0),c=Uu(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:a||l.textAlign,borderRadius:o&&(i||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Wf extends og{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=Qc(r.text)?r.text.length:1;this._padding=Uu(r.padding);const a=n*Hu(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:n,right:a,options:s}=this,o=s.align;let i,l,c,d=0;return this.isHorizontal()?(l=Qd(o,r,a),c=t+e,i=a-r):("left"===s.position?(l=r+e,c=Qd(o,n,t),d=-.5*yd):(l=a-e,c=Qd(o,t,n),d=.5*yd),i=n-t),{titleX:l,titleY:c,maxWidth:i,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Hu(t.font),n=r.lineHeight/2+this._padding.top,{titleX:a,titleY:s,maxWidth:o,rotation:i}=this._drawArgs(n);Ou(e,t.text,0,0,r,{color:t.color,maxWidth:o,rotation:i,textAlign:Jd(t.align),textBaseline:"middle",translation:[a,s]})}}var Uf={id:"title",_element:Wf,start(e,t,r){!function(e,t){const r=new Wf({ctx:e.ctx,options:t,chart:e});Um.configure(e,r,t),Um.addBox(e,r),e.titleBlock=r}(e,r)},stop(e){const t=e.titleBlock;Um.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;Um.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Hf={average(e){if(!e.length)return!1;let t,r,n=new Set,a=0,s=0;for(t=0,r=e.length;t<r;++t){const r=e[t].element;if(r&&r.hasValue()){const e=r.tooltipPosition();n.add(e.x),a+=e.y,++s}}if(0===s||0===n.size)return!1;return{x:[...n].reduce((e,t)=>e+t)/n.size,y:a/s}},nearest(e,t){if(!e.length)return!1;let r,n,a,s=t.x,o=t.y,i=Number.POSITIVE_INFINITY;for(r=0,n=e.length;r<n;++r){const n=e[r].element;if(n&&n.hasValue()){const e=Fd(t,n.getCenterPoint());e<i&&(i=e,a=n)}}if(a){const e=a.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function Vf(e,t){return t&&(Qc(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Gf(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function qf(e,t){const{element:r,datasetIndex:n,index:a}=t,s=e.getDatasetMeta(n).controller,{label:o,value:i}=s.getLabelAndValue(a);return{chart:e,label:o,parsed:s.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:i,dataset:s.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function $f(e,t){const r=e.chart.ctx,{body:n,footer:a,title:s}=e,{boxWidth:o,boxHeight:i}=t,l=Hu(t.bodyFont),c=Hu(t.titleFont),d=Hu(t.footerFont),u=s.length,h=a.length,m=n.length,g=Uu(t.padding);let f=g.height,p=0,x=n.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){f+=m*(t.displayColors?Math.max(i,l.lineHeight):l.lineHeight)+(x-m)*l.lineHeight+(x-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){p=Math.max(p,r.measureText(e).width+b)};return r.save(),r.font=c.string,sd(e.title,y),r.font=l.string,sd(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?o+2+t.boxPadding:0,sd(n,e=>{sd(e.before,y),sd(e.lines,y),sd(e.after,y)}),b=0,r.font=d.string,sd(e.footer,y),r.restore(),p+=g.width,{width:p,height:f}}function Kf(e,t,r,n){const{x:a,width:s}=r,{width:o,chartArea:{left:i,right:l}}=e;let c="center";return"center"===n?c=a<=(i+l)/2?"left":"right":a<=s/2?c="left":a>=o-s/2&&(c="right"),function(e,t,r,n){const{x:a,width:s}=n,o=r.caretSize+r.caretPadding;return"left"===e&&a+s+o>t.width||"right"===e&&a-s-o<0||void 0}(c,e,t,r)&&(c="center"),c}function Yf(e,t,r){const n=r.yAlign||t.yAlign||function(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}(e,r);return{xAlign:r.xAlign||t.xAlign||Kf(e,t,r,n),yAlign:n}}function Xf(e,t,r,n){const{caretSize:a,caretPadding:s,cornerRadius:o}=e,{xAlign:i,yAlign:l}=r,c=a+s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=Wu(o);let g=function(e,t){let{x:r,width:n}=e;return"right"===t?r-=n:"center"===t&&(r-=n/2),r}(t,i);const f=function(e,t,r){let{y:n,height:a}=e;return"top"===t?n+=r:n-="bottom"===t?a+r:a/2,n}(t,l,c);return"center"===l?"left"===i?g+=c:"right"===i&&(g-=c):"left"===i?g-=Math.max(d,h)+a:"right"===i&&(g+=Math.max(u,m)+a),{x:Wd(g,0,n.width-t.width),y:Wd(f,0,n.height-t.height)}}function Jf(e,t,r){const n=Uu(r.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function Qf(e){return Vf([],Gf(e))}function Zf(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const ep={beforeTitle:Yc,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:Yc,beforeBody:Yc,beforeLabel:Yc,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return Jc(r)||(t+=r),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Yc,afterBody:Yc,beforeFooter:Yc,footer:Yc,afterFooter:Yc};function tp(e,t,r,n){const a=e[t].call(r,n);return"undefined"===typeof a?ep[t].call(r,n):a}class rp extends og{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,a=new Gh(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,r=this._tooltipItems,Gu(e,{tooltip:t,tooltipItems:r,type:"tooltip"})));var e,t,r}getTitle(e,t){const{callbacks:r}=t,n=tp(r,"beforeTitle",this,e),a=tp(r,"title",this,e),s=tp(r,"afterTitle",this,e);let o=[];return o=Vf(o,Gf(n)),o=Vf(o,Gf(a)),o=Vf(o,Gf(s)),o}getBeforeBody(e,t){return Qf(tp(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return sd(e,e=>{const t={before:[],lines:[],after:[]},a=Zf(r,e);Vf(t.before,Gf(tp(a,"beforeLabel",this,e))),Vf(t.lines,tp(a,"label",this,e)),Vf(t.after,Gf(tp(a,"afterLabel",this,e))),n.push(t)}),n}getAfterBody(e,t){return Qf(tp(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=tp(r,"beforeFooter",this,e),a=tp(r,"footer",this,e),s=tp(r,"afterFooter",this,e);let o=[];return o=Vf(o,Gf(n)),o=Vf(o,Gf(a)),o=Vf(o,Gf(s)),o}_createItems(e){const t=this._active,r=this.chart.data,n=[],a=[],s=[];let o,i,l=[];for(o=0,i=t.length;o<i;++o)l.push(qf(this.chart,t[o]));return e.filter&&(l=l.filter((t,n,a)=>e.filter(t,n,a,r))),e.itemSort&&(l=l.sort((t,n)=>e.itemSort(t,n,r))),sd(l,t=>{const r=Zf(e.callbacks,t);n.push(tp(r,"labelColor",this,t)),a.push(tp(r,"labelPointStyle",this,t)),s.push(tp(r,"labelTextColor",this,t))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let a,s=[];if(n.length){const e=Hf[r.position].call(this,n,this._eventPosition);s=this._createItems(r),this.title=this.getTitle(s,r),this.beforeBody=this.getBeforeBody(s,r),this.body=this.getBody(s,r),this.afterBody=this.getAfterBody(s,r),this.footer=this.getFooter(s,r);const t=this._size=$f(this,r),o=Object.assign({},e,t),i=Yf(this.chart,r,o),l=Xf(r,o,i,this.chart);this.xAlign=i.xAlign,this.yAlign=i.yAlign,a={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=s,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const a=this.getCaretPosition(e,r,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:a}=this,{caretSize:s,cornerRadius:o}=r,{topLeft:i,topRight:l,bottomLeft:c,bottomRight:d}=Wu(o),{x:u,y:h}=e,{width:m,height:g}=t;let f,p,x,b,y,v;return"center"===a?(y=h+g/2,"left"===n?(f=u,p=f-s,b=y+s,v=y-s):(f=u+m,p=f+s,b=y-s,v=y+s),x=f):(p="left"===n?u+Math.max(i,c)+s:"right"===n?u+m-Math.max(l,d)-s:this.caretX,"top"===a?(b=h,y=b-s,f=p-s,x=p+s):(b=h+g,y=b+s,f=p+s,x=p-s),v=b),{x1:f,x2:p,x3:x,y1:b,y2:y,y3:v}}drawTitle(e,t,r){const n=this.title,a=n.length;let s,o,i;if(a){const l=Ah(r.rtl,this.x,this.width);for(e.x=Jf(this,r.titleAlign,r),t.textAlign=l.textAlign(r.titleAlign),t.textBaseline="middle",s=Hu(r.titleFont),o=r.titleSpacing,t.fillStyle=r.titleColor,t.font=s.string,i=0;i<a;++i)t.fillText(n[i],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,i+1===a&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,t,r,n,a){const s=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:i,boxWidth:l}=a,c=Hu(a.bodyFont),d=Jf(this,"left",a),u=n.x(d),h=i<c.lineHeight?(c.lineHeight-i)/2:0,m=t.y+h;if(a.usePointStyle){const t={radius:Math.min(l,i)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},r=n.leftForLtr(u,l)+l/2,c=m+i/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Nu(e,t,r,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Nu(e,t,r,c)}else{e.lineWidth=Zc(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=n.leftForLtr(u,l),r=n.leftForLtr(n.xPlus(u,1),l-2),o=Wu(s.borderRadius);Object.values(o).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Du(e,{x:t,y:m,w:l,h:i,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Du(e,{x:r,y:m+1,w:l-2,h:i-2,radius:o}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,m,l,i),e.strokeRect(t,m,l,i),e.fillStyle=s.backgroundColor,e.fillRect(r,m+1,l-2,i-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:a,bodyAlign:s,displayColors:o,boxHeight:i,boxWidth:l,boxPadding:c}=r,d=Hu(r.bodyFont);let u=d.lineHeight,h=0;const m=Ah(r.rtl,this.x,this.width),g=function(r){t.fillText(r,m.x(e.x+h),e.y+u/2),e.y+=u+a},f=m.textAlign(s);let p,x,b,y,v,k,w;for(t.textAlign=s,t.textBaseline="middle",t.font=d.string,e.x=Jf(this,f,r),t.fillStyle=r.bodyColor,sd(this.beforeBody,g),h=o&&"right"!==f?"center"===s?l/2+c:l+2+c:0,y=0,k=n.length;y<k;++y){for(p=n[y],x=this.labelTextColors[y],t.fillStyle=x,sd(p.before,g),b=p.lines,o&&b.length&&(this._drawColorBox(t,e,y,m,r),u=Math.max(d.lineHeight,i)),v=0,w=b.length;v<w;++v)g(b[v]),u=d.lineHeight;sd(p.after,g)}h=0,u=d.lineHeight,sd(this.afterBody,g),e.y-=a}drawFooter(e,t,r){const n=this.footer,a=n.length;let s,o;if(a){const i=Ah(r.rtl,this.x,this.width);for(e.x=Jf(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=i.textAlign(r.footerAlign),t.textBaseline="middle",s=Hu(r.footerFont),t.fillStyle=r.footerColor,t.font=s.string,o=0;o<a;++o)t.fillText(n[o],i.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:a,yAlign:s}=this,{x:o,y:i}=e,{width:l,height:c}=r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=Wu(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(o+d,i),"top"===s&&this.drawCaret(e,t,r,n),t.lineTo(o+l-u,i),t.quadraticCurveTo(o+l,i,o+l,i+u),"center"===s&&"right"===a&&this.drawCaret(e,t,r,n),t.lineTo(o+l,i+c-m),t.quadraticCurveTo(o+l,i+c,o+l-m,i+c),"bottom"===s&&this.drawCaret(e,t,r,n),t.lineTo(o+h,i+c),t.quadraticCurveTo(o,i+c,o,i+c-h),"center"===s&&"left"===a&&this.drawCaret(e,t,r,n),t.lineTo(o,i+d),t.quadraticCurveTo(o,i,o+d,i),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,a=r&&r.y;if(n||a){const r=Hf[e.position].call(this,this._active,this._eventPosition);if(!r)return;const s=this._size=$f(this,e),o=Object.assign({},r,this._size),i=Yf(t,e,o),l=Xf(e,o,i,t);n._to===l.x&&a._to===l.y||(this.xAlign=i.xAlign,this.yAlign=i.yAlign,this.width=s.width,this.height=s.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const s=Uu(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,n,t),_h(e,t.textDirection),a.y+=s.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Th(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map(e=>{let{datasetIndex:t,index:r}=e;const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[r],index:r}}),a=!od(r,n),s=this._positionChanged(n,t);(a||s)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],s=this._getActiveElements(e,a,t,r),o=this._positionChanged(s,e),i=t||!od(s,a)||o;return i&&(this._active=s,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),i}_getActiveElements(e,t,r,n){const a=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:r,caretY:n,options:a}=this,s=Hf[a.position].call(this,e,t);return!1!==s&&(r!==s.x||n!==s.y)}}(0,Jt.A)(rp,"positioners",Hf);var np={id:"tooltip",_element:rp,positioners:Hf,afterInit(e,t,r){r&&(e.tooltip=new rp({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,o.A)((0,o.A)({},r),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ep},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function ap(e,t,r,n){const a=e.indexOf(t);if(-1===a)return((e,t,r,n)=>("string"===typeof t?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r))(e,t,r,n);return a!==e.lastIndexOf(t)?r:a}function sp(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class op extends pg{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:r,label:n}of t)e[r]===n&&e.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Jc(e))return null;const r=this.getLabels();return((e,t)=>null===e?null:Wd(Math.round(e),0,t))(t=isFinite(t)&&r[t]===e?t:ap(r,e,rd(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let s=e;s<=t;s++)n.push({value:s});return n}getLabelForValue(e){return sp.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function ip(e,t){const r=[],{bounds:n,step:a,min:s,max:o,precision:i,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=a||1,m=c-1,{min:g,max:f}=t,p=!Jc(s),x=!Jc(o),b=!Jc(l),y=(f-g)/(d+1);let v,k,w,j,N=Td((f-g)/m/h)*h;if(N<1e-14&&!p&&!x)return[{value:g},{value:f}];j=Math.ceil(f/N)-Math.floor(g/N),j>m&&(N=Td(j*N/m/h)*h),Jc(i)||(v=Math.pow(10,i),N=Math.ceil(N*v)/v),"ticks"===n?(k=Math.floor(g/N)*N,w=Math.ceil(f/N)*N):(k=g,w=f),p&&x&&a&&function(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}((o-s)/a,N/1e3)?(j=Math.round(Math.min((o-s)/N,c)),N=(o-s)/j,k=s,w=o):b?(k=p?s:k,w=x?o:w,j=l-1,N=(w-k)/j):(j=(w-k)/N,j=_d(j,Math.round(j),N/1e3)?Math.round(j):Math.ceil(j));const S=Math.max(Rd(N),Rd(k));v=Math.pow(10,Jc(i)?S:i),k=Math.round(k*v)/v,w=Math.round(w*v)/v;let C=0;for(p&&(u&&k!==s?(r.push({value:s}),k<s&&C++,_d(Math.round((k+C*N)*v)/v,s,lp(s,y,e))&&C++):k<s&&C++);C<j;++C){const e=Math.round((k+C*N)*v)/v;if(x&&e>o)break;r.push({value:e})}return x&&u&&w!==o?r.length&&_d(r[r.length-1].value,o,lp(o,y,e))?r[r.length-1].value=o:r.push({value:o}):x&&w!==o||r.push({value:w}),r}function lp(e,t,r){let{horizontal:n,minRotation:a}=r;const s=Od(a),o=(n?Math.sin(s):Math.cos(s))||.001,i=.75*t*(""+e).length;return Math.min(t/o,i)}(0,Jt.A)(op,"id","category"),(0,Jt.A)(op,"defaults",{ticks:{callback:sp}});class cp extends pg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Jc(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this;const s=e=>n=t?n:e,o=e=>a=r?a:e;if(e){const e=Ad(n),t=Ad(a);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(n===a){let t=0===a?1:Math.abs(.05*a);o(a+t),e||s(n-t)}this.min=n,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:r,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(n," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),r=r||11),r&&(t=Math.min(r,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n=ip({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Md(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return uu(e,this.chart.options.locale,this.options.ticks.format)}}class dp extends cp{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ed(e)?e:0,this.max=ed(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Od(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,Jt.A)(dp,"id","linear"),(0,Jt.A)(dp,"defaults",{ticks:{callback:mu.formatters.numeric}});const up=e=>Math.floor(Ed(e)),hp=(e,t)=>Math.pow(10,up(e)+t);function mp(e){return 1===e/Math.pow(10,up(e))}function gp(e,t,r){const n=Math.pow(10,r),a=Math.floor(e/n);return Math.ceil(t/n)-a}function fp(e,t){let{min:r,max:n}=t;r=td(e.min,r);const a=[],s=up(r);let o=function(e,t){let r=up(t-e);for(;gp(e,t,r)>10;)r++;for(;gp(e,t,r)<10;)r--;return Math.min(r,up(e))}(r,n),i=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,d=Math.round((r-c)*i)/i,u=Math.floor((r-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,o)),m=td(e.min,Math.round((c+u+h*Math.pow(10,o))*i)/i);for(;m<n;)a.push({value:m,major:mp(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,i=o>=0?1:i),m=Math.round((c+u+h*Math.pow(10,o))*i)/i;const g=td(e.max,m);return a.push({value:g,major:mp(g),significand:h}),a}class pp extends pg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=cp.prototype.parse.apply(this,[e,t]);if(0!==r)return ed(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ed(e)?Math.max(0,e):null,this.max=ed(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ed(this._userMin)&&(this.min=e===hp(this.min,0)?hp(this.min,-1):hp(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,n=this.max;const a=t=>r=e?r:t,s=e=>n=t?n:e;r===n&&(r<=0?(a(1),s(10)):(a(hp(r,-1)),s(hp(n,1)))),r<=0&&a(hp(n,-1)),n<=0&&s(hp(r,1)),this.min=r,this.max=n}buildTicks(){const e=this.options,t=fp({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Md(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":uu(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ed(e),this._valueRange=Ed(this.max)-Ed(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ed(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function xp(e){const t=e.ticks;if(t.display&&e.display){const e=Uu(t.backdropPadding);return rd(t.font&&t.font.size,yu.font.size)+e.height}return 0}function bp(e,t,r){return r=Qc(r)?r:[r],{w:ku(e,t.string,r),h:r.length*t.lineHeight}}function yp(e,t,r,n,a){return e===n||e===a?{start:t-r/2,end:t+r/2}:e<n||e>a?{start:t-r,end:t}:{start:t,end:t+r}}function vp(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},r=Object.assign({},t),n=[],a=[],s=e._pointLabels.length,o=e.options.pointLabels,i=o.centerPointLabels?yd/s:0;for(let l=0;l<s;l++){const s=o.setContext(e.getPointLabelContext(l));a[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+a[l],i),d=Hu(s.font),u=bp(e.ctx,d,e._pointLabels[l]);n[l]=u;const h=Bd(e.getIndexAngle(l)+i),m=Math.round(Dd(h));kp(r,t,h,yp(m,c.x,u.w,0,180),yp(m,c.y,u.h,90,270))}e.setCenterPoint(t.l-r.l,r.r-t.r,t.t-r.t,r.b-t.b),e._pointLabelItems=function(e,t,r){const n=[],a=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:i}=s.pointLabels,l={extra:xp(s)/2,additionalAngle:o?yd/a:0};let c;for(let d=0;d<a;d++){l.padding=r[d],l.size=t[d];const a=wp(e,d,l);n.push(a),"auto"===i&&(a.visible=jp(a,c),a.visible&&(c=a))}return n}(e,n,a)}function kp(e,t,r,n,a){const s=Math.abs(Math.sin(r)),o=Math.abs(Math.cos(r));let i=0,l=0;n.start<t.l?(i=(t.l-n.start)/s,e.l=Math.min(e.l,t.l-i)):n.end>t.r&&(i=(n.end-t.r)/s,e.r=Math.max(e.r,t.r+i)),a.start<t.t?(l=(t.t-a.start)/o,e.t=Math.min(e.t,t.t-l)):a.end>t.b&&(l=(a.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function wp(e,t,r){const n=e.drawingArea,{extra:a,additionalAngle:s,padding:o,size:i}=r,l=e.getPointPosition(t,n+a+o,s),c=Math.round(Dd(Bd(l.angle+Nd))),d=function(e,t,r){90===r||270===r?e-=t/2:(r>270||r<90)&&(e-=t);return e}(l.y,i.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,r){"right"===r?e-=t:"center"===r&&(e-=t/2);return e}(l.x,i.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+i.w,bottom:d+i.h}}function jp(e,t){if(!t)return!0;const{left:r,top:n,right:a,bottom:s}=e;return!(Cu({x:r,y:n},t)||Cu({x:r,y:s},t)||Cu({x:a,y:n},t)||Cu({x:a,y:s},t))}function Np(e,t,r){const{left:n,top:a,right:s,bottom:o}=r,{backdropColor:i}=t;if(!Jc(i)){const r=Wu(t.borderRadius),l=Uu(t.backdropPadding);e.fillStyle=i;const c=n-l.left,d=a-l.top,u=s-n+l.width,h=o-a+l.height;Object.values(r).some(e=>0!==e)?(e.beginPath(),Du(e,{x:c,y:d,w:u,h:h,radius:r}),e.fill()):e.fillRect(c,d,u,h)}}function Sp(e,t,r,n){const{ctx:a}=e;if(r)a.arc(e.xCenter,e.yCenter,t,0,vd);else{let r=e.getPointPosition(0,t);a.moveTo(r.x,r.y);for(let s=1;s<n;s++)r=e.getPointPosition(s,t),a.lineTo(r.x,r.y)}}(0,Jt.A)(pp,"id","logarithmic"),(0,Jt.A)(pp,"defaults",{ticks:{callback:mu.formatters.logarithmic,major:{enabled:!0}}});class Cp extends cp{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Uu(xp(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ed(e)&&!isNaN(e)?e:0,this.max=ed(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xp(this.options))}generateTickLabels(e){cp.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const r=ad(this.options.pointLabels.callback,[e,t],this);return r||0===r?r:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?vp(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,n))}getIndexAngle(e){return Bd(e*(vd/(this._pointLabels.length||1))+Od(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Jc(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Jc(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function(e,t,r){return Gu(e,{label:r,index:t,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.getIndexAngle(e)-Nd+r;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:n,bottom:a}=this._pointLabelItems[e];return{left:t,top:r,right:n,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),Sp(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:n,border:a}=t,s=this._pointLabels.length;let o,i,l;if(t.pointLabels.display&&function(e,t){const{ctx:r,options:{pointLabels:n}}=e;for(let a=t-1;a>=0;a--){const t=e._pointLabelItems[a];if(!t.visible)continue;const s=n.setContext(e.getPointLabelContext(a));Np(r,s,t);const o=Hu(s.font),{x:i,y:l,textAlign:c}=t;Ou(r,e._pointLabels[a],i,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),n.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){i=this.getDistanceFromCenterForValue(e.value);const r=this.getContext(t),o=n.setContext(r),l=a.setContext(r);!function(e,t,r,n,a){const s=e.ctx,o=t.circular,{color:i,lineWidth:l}=t;!o&&!n||!i||!l||r<0||(s.save(),s.strokeStyle=i,s.lineWidth=l,s.setLineDash(a.dash||[]),s.lineDashOffset=a.dashOffset,s.beginPath(),Sp(e,r,o,n),s.closePath(),s.stroke(),s.restore())}(this,o,i,s,l)}}),r.display){for(e.save(),o=s-1;o>=0;o--){const n=r.setContext(this.getPointLabelContext(o)),{color:a,lineWidth:s}=n;s&&a&&(e.lineWidth=s,e.strokeStyle=a,e.setLineDash(n.borderDash),e.lineDashOffset=n.borderDashOffset,i=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,i),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let a,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((n,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const i=r.setContext(this.getContext(o)),l=Hu(i.font);if(a=this.getDistanceFromCenterForValue(this.ticks[o].value),i.showLabelBackdrop){e.font=l.string,s=e.measureText(n.label).width,e.fillStyle=i.backdropColor;const t=Uu(i.backdropPadding);e.fillRect(-s/2-t.left,-a-l.size/2-t.top,s+t.width,l.size+t.height)}Ou(e,n.label,0,-a,l,{color:i.color,strokeColor:i.textStrokeColor,strokeWidth:i.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,Jt.A)(Cp,"id","radialLinear"),(0,Jt.A)(Cp,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:mu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,Jt.A)(Cp,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Jt.A)(Cp,"descriptors",{angleLines:{_fallback:"grid"}});const Ep={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ap=Object.keys(Ep);function _p(e,t){return e-t}function Tp(e,t){if(Jc(t))return null;const r=e._adapter,{parser:n,round:a,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof n&&(o=n(o)),ed(o)||(o="string"===typeof n?r.parse(o,n):r.parse(o)),null===o?null:(a&&(o="week"!==a||!Ld(s)&&!0!==s?r.startOf(o,a):r.startOf(o,"isoWeek",s)),+o)}function Lp(e,t,r,n){const a=Ap.length;for(let s=Ap.indexOf(e);s<a-1;++s){const e=Ep[Ap[s]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((r-t)/(a*e.size))<=n)return Ap[s]}return Ap[a-1]}function Mp(e,t,r){if(r){if(r.length){const{lo:n,hi:a}=Hd(r,t);e[r[n]>=t?r[n]:r[a]]=!0}}else e[t]=!0}function Op(e,t,r){const n=[],a={},s=t.length;let o,i;for(o=0;o<s;++o)i=t[o],a[i]=o,n.push({value:i,major:!1});return 0!==s&&r?function(e,t,r,n){const a=e._adapter,s=+a.startOf(t[0].value,n),o=t[t.length-1].value;let i,l;for(i=s;i<=o;i=+a.add(i,1,n))l=r[i],l>=0&&(t[l].major=!0);return t}(e,n,a,r):n}class Dp extends pg{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.time||(e.time={}),n=this._adapter=new wm(e.adapters.date);n.init(t),ud(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Tp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:a,minDefined:s,maxDefined:o}=this.getUserBounds();function i(e){s||isNaN(e.min)||(n=Math.min(n,e.min)),o||isNaN(e.max)||(a=Math.max(a,e.max))}s&&o||(i(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||i(this.getMinMax(!1))),n=ed(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),a=ed(a)&&!isNaN(a)?a:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,s=function(e,t,r){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>r;)a--;return n>0||a<e.length?e.slice(n,a):e}(n,a,this.max);return this._unit=t.unit||(r.autoSkip?Lp(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,r,n,a){for(let s=Ap.length-1;s>=Ap.indexOf(r);s--){const r=Ap[s];if(Ep[r].common&&e._adapter.diff(a,n,r)>=t-1)return r}return Ap[r?Ap.indexOf(r):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function(e){for(let t=Ap.indexOf(e)+1,r=Ap.length;t<r;++t)if(Ep[Ap[t]].common)return Ap[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&s.reverse(),Op(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0,a=0;this.options.offset&&r.length&&(e=this.getDecimalForValue(r[0]),n=1===r.length?1-e:(this.getDecimalForValue(r[1])-e)/2,t=this.getDecimalForValue(r[r.length-1]),a=1===r.length?t:(t-this.getDecimalForValue(r[r.length-2]))/2);const s=r.length<3?.5:.25;n=Wd(n,0,s),a=Wd(a,0,s),this._offsets={start:n,end:a,factor:1/(n+1+a)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,a=n.time,s=a.unit||Lp(a.minUnit,t,r,this._getLabelCapacity(t)),o=rd(n.ticks.stepSize,1),i="week"===s&&a.isoWeekday,l=Ld(i)||!0===i,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",i)),h=+e.startOf(h,l?"day":s),e.diff(r,t,s)>1e5*o)throw new Error(t+" and "+r+" are too far apart with stepSize of "+o+" "+s);const m="data"===n.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<r;d=+e.add(d,o,s),u++)Mp(c,d,m);return d!==r&&"ticks"!==n.bounds&&1!==u||Mp(c,d,m),Object.keys(c).sort(_p).map(e=>+e)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,n=this._unit,a=t||r[n];return this._adapter.format(e,a)}_tickFormatFunction(e,t,r,n){const a=this.options,s=a.ticks.callback;if(s)return ad(s,[e,t,r],this);const o=a.time.displayFormats,i=this._unit,l=this._majorUnit,c=i&&o[i],d=l&&o[l],u=r[t],h=l&&d&&u&&u.major;return this._adapter.format(e,n||(h?d:c))}generateTickLabels(e){let t,r,n;for(t=0,r=e.length;t<r;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=Od(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(n),s=Math.sin(n),o=this._resolveTickFontOptions(0).size;return{w:r*a+o*s,h:r*s+o*a}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,a=this._tickFormatFunction(e,0,Op(this,[e],this._majorUnit),n),s=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,r=this._cache.data||[];if(r.length)return r;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)r=r.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(t=0,r=n.length;t<r;++t)e.push(Tp(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Kd(e.sort(_p))}}function Rp(e,t,r){let n,a,s,o,i=0,l=e.length-1;r?(t>=e[i].pos&&t<=e[l].pos&&({lo:i,hi:l}=Vd(e,"pos",t)),({pos:n,time:s}=e[i]),({pos:a,time:o}=e[l])):(t>=e[i].time&&t<=e[l].time&&({lo:i,hi:l}=Vd(e,"time",t)),({time:n,pos:s}=e[i]),({time:a,pos:o}=e[l]));const c=a-n;return c?s+(o-s)*(t-n)/c:s}(0,Jt.A)(Dp,"id","time"),(0,Jt.A)(Dp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Pp extends Dp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Rp(t,this.min),this._tableRange=Rp(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,n=[],a=[];let s,o,i,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=r&&n.push(l);if(n.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,o=n.length;s<o;++s)c=n[s+1],i=n[s-1],l=n[s],Math.round((c+i)/2)!==l&&a.push({time:l,pos:s/(o-1)});return a}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return r.includes(e)&&r.length||r.splice(0,0,e),r.includes(t)&&1!==r.length||r.push(t),r.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Rp(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Rp(this._table,r*this._tableRange+this._minPos,!0)}}(0,Jt.A)(Pp,"id","timeseries"),(0,Jt.A)(Pp,"defaults",Dp.defaults);const Fp=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Ip="label";function Bp(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function zp(e,t){e.labels=t}function Wp(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ip;const n=[];e.datasets=t.map(t=>{const a=e.datasets.find(e=>e[r]===t[r]);return a&&t.data&&!n.includes(a)?(n.push(a),Object.assign(a,t),a):(0,o.A)({},t)})}function Up(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ip;const r={labels:[],datasets:[]};return zp(r,e.labels),Wp(r,e.datasets,t),r}function Hp(e,t){const{height:r=150,width:a=300,redraw:i=!1,datasetIdKey:l,type:c,data:d,options:u,plugins:h=[],fallbackContent:m,updateMode:g}=e,f=s(e,Fp),p=(0,n.useRef)(null),x=(0,n.useRef)(null),b=()=>{p.current&&(x.current=new $g(p.current,{type:c,data:Up(d,l),options:u&&(0,o.A)({},u),plugins:h}),Bp(t,x.current))},y=()=>{Bp(t,null),x.current&&(x.current.destroy(),x.current=null)};return(0,n.useEffect)(()=>{!i&&x.current&&u&&function(e,t){const r=e.options;r&&t&&Object.assign(r,t)}(x.current,u)},[i,u]),(0,n.useEffect)(()=>{!i&&x.current&&zp(x.current.config.data,d.labels)},[i,d.labels]),(0,n.useEffect)(()=>{!i&&x.current&&d.datasets&&Wp(x.current.config.data,d.datasets,l)},[i,d.datasets]),(0,n.useEffect)(()=>{x.current&&(i?(y(),setTimeout(b)):x.current.update(g))},[i,u,d.labels,d.datasets,g]),(0,n.useEffect)(()=>{x.current&&(y(),setTimeout(b))},[c]),(0,n.useEffect)(()=>(b(),()=>y()),[]),n.createElement("canvas",(0,o.A)({ref:p,role:"img",height:r,width:a},f),m)}const Vp=(0,n.forwardRef)(Hp);function Gp(e,t){return $g.register(t),(0,n.forwardRef)((t,r)=>n.createElement(Vp,(0,o.A)((0,o.A)({},t),{},{ref:r,type:e})))}const qp=Gp("line",fm),$p=Gp("bar",hm);$g.register(op,dp,uf,cf,Uf,np,zf,Pf);const Kp=e=>{let{map:t,onSave:r,onClose:a}=e;const{user:s}=di(e=>e.auth),[i]=(0,n.useState)(Date.now()),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(null),[g,f]=(0,n.useState)([]),[p,x]=(0,n.useState)(0),[b,y]=(0,n.useState)(null),[v,k]=(0,n.useState)(null),[w,j]=(0,n.useState)(0),[N,S]=(0,n.useState)(0),[C,E]=(0,n.useState)(!1),[A,_]=(0,n.useState)(""),[T,L]=(0,n.useState)(""),[M,O]=(0,n.useState)(!1),[D,R]=(0,n.useState)(!1),[P,F]=(0,n.useState)(null),[I,B]=(0,n.useState)(null),z=(0,n.useRef)(null),[W,U]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),[H,V]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&!z.current&&(z.current=new google.maps.ElevationService)},[t]),(0,n.useEffect)(()=>{if(!t||l.length>=2)return;const e=t.addListener("click",e=>{e.latLng&&l.length<2&&G(e.latLng.lat(),e.latLng.lng())});return()=>{google.maps.event.removeListener(e)}},[t,l]),(0,n.useEffect)(()=>{if(!t||l.length<2)return;h&&h.setMap(null);const e=new google.maps.Polyline({path:l,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:3,map:t});m(e);const r=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(l[0].lat,l[0].lng),new google.maps.LatLng(l[1].lat,l[1].lng));x(r),q()},[l,t]);const G=async(e,r)=>{if(l.length>=2)return;if(!Sl(e,r))return void Cl();const n=await Ol(e,r,s);if(!n.allowed)return void U({isOpen:!0,type:"error",title:"Region Access Denied",message:n.message||"You don't have access to this region. Contact your administrator."});const a={lat:e,lng:r};if(c(e=>[...e,a]),t){const n=new google.maps.Marker({position:{lat:e,lng:r},map:t,label:{text:0===l.length?"A":"B",color:"white",fontWeight:"bold"},title:"Point ".concat(0===l.length?"A":"B")});u(e=>[...e,n])}},q=async()=>{if(z.current&&!(l.length<2)){E(!0);try{const e={path:l,samples:100};z.current.getElevationAlongPath(e,(e,t)=>{"OK"===t&&e?$(e):(console.error("Elevation request failed:",t),U({isOpen:!0,type:"error",title:"Elevation Fetch Failed",message:"Failed to fetch elevation data. Please check your API key and quota."})),E(!1)})}catch(e){console.error("Error fetching elevation:",e),E(!1)}}},$=e=>{const r=e.map((t,r)=>{var n,a;const s=p/e.length*r;return{elevation:t.elevation,resolution:t.resolution||0,location:{lat:(null===(n=t.location)||void 0===n?void 0:n.lat())||0,lng:(null===(a=t.location)||void 0===a?void 0:a.lng())||0},distance:s}});f(r);let n=r[0],a=r[0];if(r.forEach(e=>{e.elevation>n.elevation&&(n=e),e.elevation<a.elevation&&(a=e)}),y(n),k(a),t){P&&P.setMap(null),I&&I.setMap(null);const e=new google.maps.Marker({position:{lat:n.location.lat,lng:n.location.lng},map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#10b981",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},title:"High Point: ".concat(n.elevation.toFixed(2),"m"),zIndex:999}),r=new google.maps.InfoWindow({content:'<div style="padding: 8px;">\n          <strong style="color: #10b981;">\u2b06 HIGH POINT</strong><br/>\n          <strong>'.concat(n.elevation.toFixed(2)," m</strong><br/>\n          ").concat(Y(n.distance)," from start\n        </div>")});e.addListener("click",()=>{r.open(t,e)});const s=new google.maps.Marker({position:{lat:a.location.lat,lng:a.location.lng},map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#3b82f6",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},title:"Low Point: ".concat(a.elevation.toFixed(2),"m"),zIndex:999}),o=new google.maps.InfoWindow({content:'<div style="padding: 8px;">\n          <strong style="color: #3b82f6;">\u2b07 LOW POINT</strong><br/>\n          <strong>'.concat(a.elevation.toFixed(2)," m</strong><br/>\n          ").concat(Y(a.distance)," from start\n        </div>")});s.addListener("click",()=>{o.open(t,s)}),F(e),B(s)}let s=0,o=0;for(let t=1;t<r.length;t++){const e=r[t].elevation-r[t-1].elevation;e>0?s+=e:o+=Math.abs(e)}j(s),S(o)},K=()=>{d.forEach(e=>e.setMap(null)),h&&h.setMap(null),P&&P.setMap(null),I&&I.setMap(null),c([]),u([]),m(null),f([]),x(0),y(null),k(null),F(null),B(null),j(0),S(0)},Y=e=>e<1e3?"".concat(e.toFixed(0)," m"):"".concat((e/1e3).toFixed(2)," km"),X=e=>"".concat(e.toFixed(1)," m"),J={labels:g.map((e,t)=>{const r=p/g.length*t;return Y(r)}),datasets:[{label:"Elevation (m)",data:g.map(e=>e.elevation),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4,pointRadius:g.map(e=>b&&e.elevation===b.elevation&&e.distance===b.distance||v&&e.elevation===v.elevation&&e.distance===v.distance?8:0),pointBackgroundColor:g.map(e=>b&&e.elevation===b.elevation&&e.distance===b.distance?"#10b981":v&&e.elevation===v.elevation&&e.distance===v.distance?"#3b82f6":"rgb(59, 130, 246)"),pointBorderColor:"#ffffff",pointBorderWidth:2,pointHoverRadius:5}]},Q={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){return"Elevation: ".concat(e.parsed.y.toFixed(1)," m")}}}},scales:{x:{display:!0,title:{display:!0,text:"Distance"},ticks:{maxTicksLimit:10}},y:{display:!0,title:{display:!0,text:"Elevation (m)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsxs)("div",{className:"fixed top-16 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 max-w-md z-40 max-h-[80vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),"Elevation Profile"]}),a&&(0,Vi.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsx)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:(0,Vi.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:0===l.length?"Click on the map to place the start point (A)":1===l.length?"Click on the map to place the end point (B)":"Elevation profile created. View the graph below."})}),C&&(0,Vi.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-md flex items-center",children:[(0,Vi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600 mr-2"}),(0,Vi.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Fetching elevation data..."})]}),2===l.length&&g.length>0&&(0,Vi.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,Vi.jsxs)("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md flex justify-between",children:[(0,Vi.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Distance"}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:Y(p)})]}),b&&(0,Vi.jsxs)("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-md flex justify-between",children:[(0,Vi.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Highest Point"}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:X(b.elevation)})]}),v&&(0,Vi.jsxs)("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-md flex justify-between",children:[(0,Vi.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Lowest Point"}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:X(v.elevation)})]}),(0,Vi.jsxs)("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded-md flex justify-between",children:[(0,Vi.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Elevation Gain"}),(0,Vi.jsxs)("span",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:["\u2191 ",X(w)]})]}),(0,Vi.jsxs)("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/20 rounded-md flex justify-between",children:[(0,Vi.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Elevation Loss"}),(0,Vi.jsxs)("span",{className:"text-sm font-bold text-orange-600 dark:text-orange-400",children:["\u2193 ",X(N)]})]})]}),g.length>0&&(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Elevation Profile"}),(0,Vi.jsxs)("button",{onClick:()=>R(!0),className:"flex items-center space-x-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors text-xs font-medium",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),(0,Vi.jsx)("span",{children:"View Full Size"})]})]}),(0,Vi.jsx)("div",{className:"h-40 bg-gray-50 dark:bg-gray-900 rounded-md p-2",children:(0,Vi.jsx)(qp,{data:J,options:Q})})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2",children:[(0,Vi.jsx)("button",{onClick:K,disabled:0===l.length,className:"flex-1 px-3 py-2 text-sm font-medium text-red-700 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-md hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"}),(0,Vi.jsx)("button",{onClick:()=>O(!0),disabled:l.length<2||0===g.length||H,className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:H?"Saving...":"Save"})]})]}),D&&(0,Vi.jsx)("div",{className:"fixed inset-0 top-16 bg-black bg-opacity-90 flex items-center justify-center z-40",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 w-full h-full p-8 flex flex-col",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Elevation Profile - Fullscreen View"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Total Distance: ",Y(p)," \u2022 High:"," ",b?X(b.elevation):"N/A"," \u2022 Low: ",v?X(v.elevation):"N/A"]})]}),(0,Vi.jsxs)("button",{onClick:()=>R(!1),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,Vi.jsx)("span",{children:"Close"})]})]}),(0,Vi.jsx)("div",{className:"flex-1 min-h-0",children:(0,Vi.jsx)(qp,{data:J,options:Q})})]})}),M&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Save Elevation Profile"}),(0,Vi.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),(0,Vi.jsx)("input",{type:"text",value:A,onChange:e=>_(e.target.value),placeholder:"Enter profile name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white text-gray-900 dark:bg-gray-700 dark:text-white",autoFocus:!0})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,Vi.jsx)("textarea",{value:T,onChange:e=>L(e.target.value),placeholder:"Enter description (optional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white text-gray-900 dark:bg-gray-700 dark:text-white"})]})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(l.length<2||0===g.length)return void U({isOpen:!0,type:"warning",title:"Profile Required",message:"Please create an elevation profile first"});if(!A.trim())return void U({isOpen:!0,type:"warning",title:"Name Required",message:"Please enter a name for this elevation profile"});const e={id:"elev_".concat(Date.now()),name:A.trim(),points:l,elevationData:g,highPoint:b,lowPoint:v,totalDistance:p,elevationGain:w,elevationLoss:N,graph:{type:"line",data:J,options:Q},createdAt:new Date,updatedAt:new Date,description:T.trim()||void 0};r&&r(e),V(!0);try{if(await hc.create({profile_name:A.trim(),start_point:l[0],end_point:l[1],elevation_data:g,total_distance:p,max_elevation:b?b.elevation:0,min_elevation:v?v.elevation:0,notes:T.trim()})){const e=Math.round((Date.now()-i)/1e3);Kl({toolName:"elevation-profile",userId:(null===s||void 0===s?void 0:s.id)||"guest",userName:(null===s||void 0===s?void 0:s.name)||"Guest User",duration:e}),U({isOpen:!0,type:"success",title:"Success!",message:"Elevation profile saved to database!"}),K(),O(!1),_(""),L("")}}catch(t){return console.error("Error saving elevation profile:",t),void U({isOpen:!0,type:"error",title:"Error",message:"Failed to save elevation profile. Please try again."})}finally{V(!1)}},disabled:H,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:H?"Saving...":"Save"})]})]})}),(0,Vi.jsx)(ql,{isOpen:W.isOpen,onClose:()=>U((0,o.A)((0,o.A)({},W),{},{isOpen:!1})),type:W.type,title:W.title,message:W.message,autoClose:!0,autoCloseDelay:3e3})]})},Yp=e=>{var t,r,a,s,i,l;let{map:c,onSave:d,onClose:u}=e;const{user:h}=di(e=>e.auth),[m]=(0,n.useState)(Date.now()),[g,f]=(0,n.useState)([]),[p,x]=(0,n.useState)(new Map),[b,y]=(0,n.useState)(null),[v,k]=(0,n.useState)(!1),[w,j]=(0,n.useState)(!1),[N,S]=(0,n.useState)({}),[C,E]=(0,n.useState)(!1),[A,_]=(0,n.useState)(null),[T,L]=(0,n.useState)(""),[M,O]=(0,n.useState)(""),[D,R]=(0,n.useState)(!1),[P,F]=(0,n.useState)(null),[I,B]=(0,n.useState)(new Set),[z,W]=(0,n.useState)(null),[U,H]=(0,n.useState)({type:"POP",name:"",networkId:"",contactName:"",contactNo:"",isRented:!1,structureType:"Tower",upsAvailability:!1,backupCapacity:"",powerSource:"Grid",status:"Active"}),[V,G]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""});(0,n.useEffect)(()=>{q()},[]),(0,n.useEffect)(()=>{if(!c||!C)return;const e=c.addListener("click",e=>{if(e.latLng){const t=e.latLng.lat(),r=e.latLng.lng();if(!Sl(t,r))return void Cl();_({lat:t,lng:r}),E(!1)}});return()=>{google.maps.event.removeListener(e)}},[c,C]),(0,n.useEffect)(()=>{c&&K()},[g,c]);const q=()=>{const e=localStorage.getItem("gis_infrastructures");if(e){const t=JSON.parse(e).map(e=>(0,o.A)((0,o.A)({},e),{},{createdOn:new Date(e.createdOn),updatedOn:new Date(e.updatedOn),agreementDates:e.agreementDates?{start:new Date(e.agreementDates.start),end:new Date(e.agreementDates.end)}:void 0}));f(t)}},$=e=>{localStorage.setItem("gis_infrastructures",JSON.stringify(e)),f(e),d&&d()},K=()=>{if(!c)return;p.forEach(e=>e.setMap(null));const e=new Map;J(g).forEach(t=>{const r=Y(t),n=new google.maps.Marker({position:t.coordinates,map:c,title:t.name,icon:r,label:"KML"===t.source?void 0:{text:"POP"===t.type?"P":"S",color:"white",fontWeight:"bold"}});n.addListener("click",()=>{y(t),X(n,t)}),e.set(t.id,n)}),x(e)},Y=e=>{const t="KML"===e.source,r="POP"===e.type;let n="";return n=t?r?"#4CAF50":"#8BC34A":r?"#2196F3":"#03A9F4",{path:google.maps.SymbolPath.CIRCLE,fillColor:n,fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2,scale:r?10:7}},X=(e,t)=>{const r='\n      <div class="p-2">\n        <h3 class="font-bold text-lg mb-2">'.concat(t.name,'</h3>\n        <div class="text-sm space-y-1">\n          <p><strong>Type:</strong> ').concat(t.type,"</p>\n          <p><strong>ID:</strong> ").concat(t.uniqueId||t.networkId,'</p>\n          <p><strong>Status:</strong> <span class="px-2 py-1 rounded ').concat("Active"===t.status?"bg-green-100 text-green-800":"Inactive"===t.status?"bg-gray-100 text-gray-800":"Maintenance"===t.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800",'">').concat(t.status,"</span></p>\n          <p><strong>Contact:</strong> ").concat(t.contactName," (").concat(t.contactNo,")</p>\n          <p><strong>Source:</strong> ").concat(t.source,"</p>\n          ").concat(t.isRented?"<p><strong>Rented:</strong> \u20b9".concat(t.rentAmount,"/month</p>"):"","\n        </div>\n      </div>\n    ");new google.maps.InfoWindow({content:r}).open(c,e)},J=e=>{let t=[...e];if(N.type&&(t=t.filter(e=>e.type===N.type)),N.source&&(t=t.filter(e=>e.source===N.source)),N.status&&(t=t.filter(e=>e.status===N.status)),N.state&&(t=t.filter(e=>e.address.state.toLowerCase().includes(N.state.toLowerCase()))),N.city&&(t=t.filter(e=>e.address.city.toLowerCase().includes(N.city.toLowerCase()))),N.searchTerm){const e=N.searchTerm.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.uniqueId.toLowerCase().includes(e)||t.networkId.toLowerCase().includes(e))}return t},Q=e=>{const t=Math.random().toString(36).substring(2,8).toUpperCase();return"POP"===e?{uniqueId:"POP.".concat(t),networkId:"BHARAT-POP.".concat(t)}:{uniqueId:"SUBPOP.".concat(t),networkId:"BHARAT-SUBPOP.".concat(t)}},Z=()=>{H({type:"POP",name:"",networkId:"",contactName:"",contactNo:"",isRented:!1,structureType:"Tower",upsAvailability:!1,backupCapacity:"",powerSource:"Grid",status:"Active"}),_(null),k(!1),E(!1),L(""),O("")},ee=e=>{if(c){c.setCenter(e.coordinates),c.setZoom(15);const t=p.get(e.id);t&&X(t,e)}};return(0,Vi.jsxs)("div",{className:"fixed top-16 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 max-w-2xl z-40 max-h-[80vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4 top-0 bg-white dark:bg-gray-800 pb-2",children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Infrastructure Management"]}),u&&(0,Vi.jsx)("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[(0,Vi.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md text-center",children:[(0,Vi.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g.filter(e=>"POP"===e.type).length}),(0,Vi.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"POPs"})]}),(0,Vi.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-md text-center",children:[(0,Vi.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:g.filter(e=>"SubPOP"===e.type).length}),(0,Vi.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"SubPOPs"})]}),(0,Vi.jsxs)("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-md text-center",children:[(0,Vi.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:g.filter(e=>"KML"===e.source).length}),(0,Vi.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"From KML"})]}),(0,Vi.jsxs)("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-md text-center",children:[(0,Vi.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:g.filter(e=>"Manual"===e.source).length}),(0,Vi.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Manual"})]})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,Vi.jsxs)("button",{onClick:()=>k(!v),className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 flex items-center justify-center",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New"]}),(0,Vi.jsxs)("label",{className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-green-100 dark:bg-green-900/20 rounded-md hover:bg-green-200 dark:hover:bg-green-900/30 cursor-pointer flex items-center justify-center",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import KML",(0,Vi.jsx)("input",{type:"file",accept:".kml",onChange:async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){try{const e=await r.text(),t=new DOMParser,i=t.parseFromString(e,"text/xml").getElementsByTagName("Placemark"),l=[];for(let c=0;c<i.length;c++){var n,a,s,o;const e=i[c],t=(null===(n=e.getElementsByTagName("name")[0])||void 0===n?void 0:n.textContent)||"Import ".concat(c+1),d=(null===(a=e.getElementsByTagName("description")[0])||void 0===a?void 0:a.textContent)||"",u=null===(s=e.getElementsByTagName("coordinates")[0])||void 0===s||null===(o=s.textContent)||void 0===o?void 0:o.trim();if(u){const[e,n]=u.split(",").map(parseFloat),a=t.toLowerCase().includes("subpop")||d.toLowerCase().includes("subpop")?"SubPOP":"POP",s={id:"kml_".concat(Date.now(),"_").concat(c),type:a,name:t,uniqueId:"KML-".concat(a,"-").concat(String(c+1).padStart(3,"0")),networkId:"NET-".concat(Date.now(),"-").concat(c),coordinates:{lat:n,lng:e},address:{street:"",city:"",state:"",pincode:""},contactName:"",contactNo:"",isRented:!1,structureType:"Tower",upsAvailability:!1,backupCapacity:"",powerSource:"Grid",source:"KML",kmlFileName:r.name,createdOn:new Date,updatedOn:new Date,status:"Active",notes:d};l.push(s)}}l.length>0?($([...g,...l]),G({isOpen:!0,type:"success",title:"Import Successful!",message:"Successfully imported ".concat(l.length," infrastructure items from KML")})):G({isOpen:!0,type:"warning",title:"No Data Found",message:"No valid placemarks found in KML file"})}catch(i){console.error("Error importing KML:",i),G({isOpen:!0,type:"error",title:"Import Failed",message:"Failed to import KML file. Please check the file format."})}e.target.value=""}},className:"hidden"})]}),(0,Vi.jsxs)("button",{onClick:()=>j(!w),className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),w?"Hide":"Show"," Table"]})]}),v&&(0,Vi.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-md space-y-3",children:[(0,Vi.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Add New Infrastructure"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type *"}),(0,Vi.jsxs)("select",{value:U.type,onChange:e=>H((0,o.A)((0,o.A)({},U),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[(0,Vi.jsx)("option",{value:"POP",children:"POP"}),(0,Vi.jsx)("option",{value:"SubPOP",children:"SubPOP"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,Vi.jsx)("input",{type:"text",value:U.name,onChange:e=>H((0,o.A)((0,o.A)({},U),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-sm",placeholder:"e.g., Mumbai Central POP"})]}),(0,Vi.jsxs)("div",{className:"space-y-2",children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location *"}),(0,Vi.jsx)("button",{onClick:()=>E(!C),className:"w-full px-3 py-2 text-sm font-medium rounded-md ".concat(C?"bg-blue-600 text-white":"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400"),children:C?"Cancel Map Click":"Click to Place on Map"}),(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("div",{className:"flex-1 border-t border-gray-300 dark:border-gray-600"}),(0,Vi.jsx)("span",{className:"px-2 text-xs text-gray-500 dark:text-gray-400",children:"OR"}),(0,Vi.jsx)("div",{className:"flex-1 border-t border-gray-300 dark:border-gray-600"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Vi.jsx)("input",{type:"number",step:"any",placeholder:"Latitude",value:T,onChange:e=>L(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 dark:text-white"}),(0,Vi.jsx)("input",{type:"number",step:"any",placeholder:"Longitude",value:M,onChange:e=>O(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 dark:text-white"})]}),(0,Vi.jsx)("button",{onClick:()=>{const e=parseFloat(T),t=parseFloat(M);isNaN(e)||isNaN(t)?G({isOpen:!0,type:"warning",title:"Invalid Coordinates",message:"Please enter valid latitude and longitude values"}):Sl(e,t)?(_({lat:e,lng:t}),E(!1)):Cl()},disabled:!T||!M,className:"w-full px-3 py-2 text-sm font-medium bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-md hover:bg-green-200 dark:hover:bg-green-900/30 disabled:opacity-50 disabled:cursor-not-allowed",children:"Set Manual Coordinates"}),A&&(0,Vi.jsxs)("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm text-green-700 dark:text-green-400 font-mono",children:["\u2713 Location Set: ",A.lat.toFixed(6),","," ",A.lng.toFixed(6)]})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contact Name"}),(0,Vi.jsx)("input",{type:"text",value:U.contactName,onChange:e=>H((0,o.A)((0,o.A)({},U),{},{contactName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-sm"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contact Number"}),(0,Vi.jsx)("input",{type:"text",value:U.contactNo,onChange:e=>H((0,o.A)((0,o.A)({},U),{},{contactNo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-sm"})]})]}),(0,Vi.jsxs)("div",{className:"space-y-2",children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Address"}),(0,Vi.jsx)("input",{type:"text",placeholder:"Street",value:(null===(t=U.address)||void 0===t?void 0:t.street)||"",onChange:e=>{var t,r,n;return H((0,o.A)((0,o.A)({},U),{},{address:(0,o.A)((0,o.A)({},U.address),{},{street:e.target.value,city:(null===(t=U.address)||void 0===t?void 0:t.city)||"",state:(null===(r=U.address)||void 0===r?void 0:r.state)||"",pincode:(null===(n=U.address)||void 0===n?void 0:n.pincode)||""})}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Vi.jsx)("input",{type:"text",placeholder:"City",value:(null===(r=U.address)||void 0===r?void 0:r.city)||"",onChange:e=>{var t,r,n;return H((0,o.A)((0,o.A)({},U),{},{address:(0,o.A)((0,o.A)({},U.address),{},{street:(null===(t=U.address)||void 0===t?void 0:t.street)||"",city:e.target.value,state:(null===(r=U.address)||void 0===r?void 0:r.state)||"",pincode:(null===(n=U.address)||void 0===n?void 0:n.pincode)||""})}))},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-sm"}),(0,Vi.jsx)("input",{type:"text",placeholder:"State",value:(null===(a=U.address)||void 0===a?void 0:a.state)||"",onChange:e=>{var t,r,n;return H((0,o.A)((0,o.A)({},U),{},{address:(0,o.A)((0,o.A)({},U.address),{},{street:(null===(t=U.address)||void 0===t?void 0:t.street)||"",city:(null===(r=U.address)||void 0===r?void 0:r.city)||"",state:e.target.value,pincode:(null===(n=U.address)||void 0===n?void 0:n.pincode)||""})}))},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-sm"}),(0,Vi.jsx)("input",{type:"text",placeholder:"Pincode",value:(null===(s=U.address)||void 0===s?void 0:s.pincode)||"",onChange:e=>{var t,r,n;return H((0,o.A)((0,o.A)({},U),{},{address:(0,o.A)((0,o.A)({},U.address),{},{street:(null===(t=U.address)||void 0===t?void 0:t.street)||"",city:(null===(r=U.address)||void 0===r?void 0:r.city)||"",state:(null===(n=U.address)||void 0===n?void 0:n.state)||"",pincode:e.target.value})}))},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-sm"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reference Code"}),(0,Vi.jsx)("input",{type:"text",value:U.refCode||"",onChange:e=>H((0,o.A)((0,o.A)({},U),{},{refCode:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",placeholder:"e.g., REF-001"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,Vi.jsxs)("select",{value:U.status||"Active",onChange:e=>H((0,o.A)((0,o.A)({},U),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[(0,Vi.jsx)("option",{value:"Active",children:"Active"}),(0,Vi.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,Vi.jsx)("option",{value:"Maintenance",children:"Maintenance"}),(0,Vi.jsx)("option",{value:"Planned",children:"Planned"}),(0,Vi.jsx)("option",{value:"RFS",children:"RFS"})]})]}),(0,Vi.jsxs)("div",{className:"space-y-2",children:[(0,Vi.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("input",{type:"checkbox",checked:U.isRented||!1,onChange:e=>H((0,o.A)((0,o.A)({},U),{},{isRented:e.target.checked})),className:"rounded border-gray-300"}),(0,Vi.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Is Rented"})]}),U.isRented&&(0,Vi.jsxs)("div",{className:"space-y-2 pl-6",children:[(0,Vi.jsx)("input",{type:"number",placeholder:"Rent Amount",value:U.rentAmount||"",onChange:e=>H((0,o.A)((0,o.A)({},U),{},{rentAmount:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-sm"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Agreement Start"}),(0,Vi.jsx)("input",{type:"date",value:null!==(i=U.agreementDates)&&void 0!==i&&i.start?new Date(U.agreementDates.start).toISOString().split("T")[0]:"",onChange:e=>{var t;return H((0,o.A)((0,o.A)({},U),{},{agreementDates:{start:new Date(e.target.value),end:(null===(t=U.agreementDates)||void 0===t?void 0:t.end)||new Date}}))},className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-xs"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Agreement End"}),(0,Vi.jsx)("input",{type:"date",value:null!==(l=U.agreementDates)&&void 0!==l&&l.end?new Date(U.agreementDates.end).toISOString().split("T")[0]:"",onChange:e=>{var t;return H((0,o.A)((0,o.A)({},U),{},{agreementDates:{start:(null===(t=U.agreementDates)||void 0===t?void 0:t.start)||new Date,end:new Date(e.target.value)}}))},className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 dark:text-white text-xs"})]})]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nature of Business"}),(0,Vi.jsx)("input",{type:"text",value:U.natureOfBusiness||"",onChange:e=>H((0,o.A)((0,o.A)({},U),{},{natureOfBusiness:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",placeholder:"e.g., LBO, Enterprise"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Structure Type"}),(0,Vi.jsxs)("select",{value:U.structureType||"Tower",onChange:e=>H((0,o.A)((0,o.A)({},U),{},{structureType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[(0,Vi.jsx)("option",{value:"Tower",children:"Tower"}),(0,Vi.jsx)("option",{value:"Building",children:"Building"}),(0,Vi.jsx)("option",{value:"Ground",children:"Ground"}),(0,Vi.jsx)("option",{value:"Rooftop",children:"Rooftop"}),(0,Vi.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Vi.jsxs)("div",{className:"space-y-2",children:[(0,Vi.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("input",{type:"checkbox",checked:U.upsAvailability||!1,onChange:e=>H((0,o.A)((0,o.A)({},U),{},{upsAvailability:e.target.checked})),className:"rounded border-gray-300"}),(0,Vi.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"UPS Availability"})]}),(0,Vi.jsx)("input",{type:"text",placeholder:"Backup Capacity (in KVA)",value:U.backupCapacity||"",onChange:e=>H((0,o.A)((0,o.A)({},U),{},{backupCapacity:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm"})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,Vi.jsx)("button",{onClick:Z,className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{let e=null;if(A)e=A;else if(T&&M){const t=parseFloat(T),r=parseFloat(M);if(!isNaN(t)&&!isNaN(r)){if(!Sl(t,r))return void Cl();e={lat:t,lng:r}}}if(!e||!U.name)return void G({isOpen:!0,type:"warning",title:"Missing Information",message:"Please fill in all required fields (Name and Coordinates - either click on map OR enter manually)"});const t=await Ol(e.lat,e.lng,h);if(!t.allowed)return void G({isOpen:!0,type:"error",title:"Region Access Denied",message:t.message||"You don't have access to this region. Contact your administrator."});const r=Q(U.type),n={id:"manual_".concat(Date.now()),type:U.type,name:U.name,uniqueId:r.uniqueId,networkId:r.networkId,coordinates:e,address:U.address||{street:"",city:"",state:"",pincode:""},contactName:U.contactName||"",contactNo:U.contactNo||"",contactEmail:U.contactEmail,isRented:U.isRented||!1,rentAmount:U.rentAmount,agreementDates:U.agreementDates,landlordName:U.landlordName,landlordContact:U.landlordContact,structureType:U.structureType||"Tower",height:U.height,upsAvailability:U.upsAvailability||!1,upsCapacity:U.upsCapacity,backupCapacity:U.backupCapacity||"",powerSource:U.powerSource||"Grid",equipmentList:U.equipmentList,connectedTo:U.connectedTo,bandwidth:U.bandwidth,source:"Manual",createdOn:new Date,updatedOn:new Date,status:U.status||"Active",notes:U.notes};$([...g,n]);const a=Math.round((Date.now()-m)/1e3);Kl({toolName:"infrastructure-management",userId:(null===h||void 0===h?void 0:h.id)||"guest",userName:(null===h||void 0===h?void 0:h.name)||"Guest User",duration:a}),G({isOpen:!0,type:"success",title:"Success!",message:"Infrastructure added successfully!"}),Z()},className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Add Infrastructure"})]})]}),w&&(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[(0,Vi.jsxs)("select",{value:N.type||"",onChange:e=>S((0,o.A)((0,o.A)({},N),{},{type:e.target.value})),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,Vi.jsx)("option",{value:"",children:"All Types"}),(0,Vi.jsx)("option",{value:"POP",children:"POP"}),(0,Vi.jsx)("option",{value:"SubPOP",children:"SubPOP"})]}),(0,Vi.jsxs)("select",{value:N.source||"",onChange:e=>S((0,o.A)((0,o.A)({},N),{},{source:e.target.value})),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,Vi.jsx)("option",{value:"",children:"All Sources"}),(0,Vi.jsx)("option",{value:"KML",children:"KML"}),(0,Vi.jsx)("option",{value:"Manual",children:"Manual"})]}),(0,Vi.jsx)("input",{type:"text",value:N.searchTerm||"",onChange:e=>S((0,o.A)((0,o.A)({},N),{},{searchTerm:e.target.value})),placeholder:"Search...",className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 dark:text-white"})]}),I.size>0&&(0,Vi.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md flex items-center justify-between",children:[(0,Vi.jsxs)("span",{className:"text-sm text-blue-700 dark:text-blue-400",children:[I.size," item(s) selected"]}),(0,Vi.jsx)("button",{onClick:()=>{if(0===I.size)return void G({isOpen:!0,type:"warning",title:"No Selection",message:"Please select items to delete"});const e=g.filter(e=>!I.has(e.id));$(e),B(new Set),G({isOpen:!0,type:"success",title:"Deleted",message:"".concat(I.size," item(s) deleted successfully")})},className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete Selected"})]}),(0,Vi.jsx)("div",{className:"overflow-x-auto border border-gray-200 dark:border-gray-700 rounded-md max-h-96",children:(0,Vi.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,Vi.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900 sticky top-0",children:(0,Vi.jsxs)("tr",{children:[(0,Vi.jsx)("th",{className:"px-3 py-2 text-left",children:(0,Vi.jsx)("input",{type:"checkbox",checked:I.size===J(g).length&&J(g).length>0,onChange:()=>{const e=J(g);I.size===e.length?B(new Set):B(new Set(e.map(e=>e.id)))},className:"rounded border-gray-300"})}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Name"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Type"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"ID"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Source"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Status"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),(0,Vi.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:J(g).map(e=>(0,Vi.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,Vi.jsx)("td",{className:"px-3 py-2",children:(0,Vi.jsx)("input",{type:"checkbox",checked:I.has(e.id),onChange:()=>(e=>{const t=new Set(I);t.has(e)?t.delete(e):t.add(e),B(t)})(e.id),className:"rounded border-gray-300"})}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-white",children:e.name}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,Vi.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("POP"===e.type?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400"),children:e.type})}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm font-mono text-gray-600 dark:text-gray-400",children:e.uniqueId}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,Vi.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("KML"===e.source?"bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400":"bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400"),children:e.source})}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm",children:(0,Vi.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("Active"===e.status?"bg-green-100 text-green-700":"Inactive"===e.status?"bg-gray-100 text-gray-700":"bg-yellow-100 text-yellow-700"),children:e.status})}),(0,Vi.jsxs)("td",{className:"px-3 py-2 text-sm space-x-1",children:[(0,Vi.jsx)("button",{onClick:()=>(e=>{F(e),R(!0)})(e),className:"text-purple-600 hover:text-purple-800 dark:text-purple-400",title:"View Details",children:(0,Vi.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,Vi.jsx)("button",{onClick:()=>ee(e),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400",title:"View on Map",children:(0,Vi.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Vi.jsx)("button",{onClick:()=>{return t=e.id,void W(t);var t},className:"text-red-600 hover:text-red-800 dark:text-red-400",title:"Delete",children:(0,Vi.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))})]})})]}),(0,Vi.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-md",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Marker Legend"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Manual POP"})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("div",{className:"w-3 h-3 rounded-full bg-cyan-400"}),(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Manual SubPOP"})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("div",{className:"w-4 h-4 rounded-full bg-green-500"}),(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"KML POP"})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("div",{className:"w-3 h-3 rounded-full bg-lime-400"}),(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"KML SubPOP"})]})]})]}),D&&P&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[10000]",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Infrastructure Details"}),(0,Vi.jsx)("button",{onClick:()=>{R(!1),F(null)},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Name"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.name})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Type"}),(0,Vi.jsx)("p",{className:"text-sm",children:(0,Vi.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("POP"===P.type?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400"),children:P.type})})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Unique ID"}),(0,Vi.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white",children:P.uniqueId})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Network ID"}),(0,Vi.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white",children:P.networkId})]}),P.refCode&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Reference Code"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.refCode})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Status"}),(0,Vi.jsx)("p",{className:"text-sm",children:(0,Vi.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("Active"===P.status?"bg-green-100 text-green-700":"Inactive"===P.status?"bg-gray-100 text-gray-700":"bg-yellow-100 text-yellow-700"),children:P.status})})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Coordinates"}),(0,Vi.jsxs)("p",{className:"text-sm font-mono text-gray-900 dark:text-white",children:[P.coordinates.lat.toFixed(6),","," ",P.coordinates.lng.toFixed(6)]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Address"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-900 dark:text-white",children:[P.address.street&&"".concat(P.address.street,", "),P.address.city&&"".concat(P.address.city,", "),P.address.state&&"".concat(P.address.state," "),P.address.pincode]})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Contact Name"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.contactName})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Contact Number"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.contactNo})]}),P.contactEmail&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Email"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.contactEmail})]})]}),P.isRented&&(0,Vi.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,Vi.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Rental Information"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[P.rentAmount&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Rent Amount"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-900 dark:text-white",children:["\u20b9",P.rentAmount]})]}),P.agreementDates&&(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Agreement Start"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(P.agreementDates.start).toLocaleDateString()})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Agreement End"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(P.agreementDates.end).toLocaleDateString()})]})]})]})]}),(0,Vi.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,Vi.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Technical Details"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Structure Type"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.structureType})]}),P.natureOfBusiness&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Nature of Business"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.natureOfBusiness})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"UPS Available"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.upsAvailability?"Yes":"No"})]}),P.backupCapacity&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Backup Capacity"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.backupCapacity})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Power Source"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.powerSource})]})]})]}),(0,Vi.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,Vi.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Metadata"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Source"}),(0,Vi.jsx)("p",{className:"text-sm",children:(0,Vi.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("KML"===P.source?"bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400":"bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400"),children:P.source})})]}),P.kmlFileName&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"KML File"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:P.kmlFileName})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Created On"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(P.createdOn).toLocaleString()})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Updated On"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(P.updatedOn).toLocaleString()})]})]})]}),P.notes&&(0,Vi.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,Vi.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Notes"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:P.notes})]})]}),(0,Vi.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 p-4 flex justify-end space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>{ee(P),R(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"View on Map"}),(0,Vi.jsx)("button",{onClick:()=>{R(!1),F(null)},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 text-sm",children:"Close"})]})]})}),z&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[10001]",children:(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Confirm Delete"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Are you sure you want to delete this infrastructure? This action cannot be undone."}),(0,Vi.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>W(null),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 text-sm",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:()=>{if(z){const e=g.filter(e=>e.id!==z);$(e),W(null),G({isOpen:!0,type:"success",title:"Deleted",message:"Infrastructure deleted successfully"})}},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Delete"})]})]})]})})}),(0,Vi.jsx)(ql,{isOpen:V.isOpen,onClose:()=>G((0,o.A)((0,o.A)({},V),{},{isOpen:!1})),type:V.type,title:V.title,message:V.message,autoClose:!0,autoCloseDelay:3e3})]})};function Xp(e){return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(e/22.5)%16]}const Jp=e=>{let{map:t,onSave:r,onClose:a}=e;const{user:s}=di(e=>e.auth),[i]=(0,n.useState)(Date.now()),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(1e3),[g,f]=(0,n.useState)(0),[p,x]=(0,n.useState)(60),[b,y]=(0,n.useState)(null),[v,k]=(0,n.useState)(null),[w,j]=(0,n.useState)(0),[N,S]=(0,n.useState)(0),[C,E]=(0,n.useState)(""),[A,_]=(0,n.useState)(""),[T,L]=(0,n.useState)("#FF5722"),[M,O]=(0,n.useState)(.4),[D,R]=(0,n.useState)(""),[P,F]=(0,n.useState)(""),[I,B]=(0,n.useState)(""),[z,W]=(0,n.useState)("4G"),[U,H]=(0,n.useState)(""),[V,G]=(0,n.useState)("Active"),[q,$]=(0,n.useState)(!1),[K,Y]=(0,n.useState)(!1),[X,J]=(0,n.useState)(!0),[Q,Z]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),[ee,te]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!t||!X)return;const e=t.addListener("click",e=>{e.latLng&&re(e.latLng.lat(),e.latLng.lng())});return()=>{google.maps.event.removeListener(e)}},[t,X]),(0,n.useEffect)(()=>{if(!t||!l)return;b&&b.setMap(null),v&&v.setMap(null);const e=ne(l,h,g,p),r=new google.maps.Polygon({paths:e,strokeColor:T,strokeOpacity:.8,strokeWeight:2,fillColor:T,fillOpacity:M,map:t,editable:!1}),n=ae(l,h,g),a=new google.maps.Polyline({path:[l,n],strokeColor:T,strokeOpacity:1,strokeWeight:3,map:t,icons:[{icon:{path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:4,strokeColor:T,fillColor:T,fillOpacity:1},offset:"100%"}]});y(r),k(a),se(h,p)},[l,h,g,p,t,T,M]);const re=async(e,r)=>{if(!Sl(e,r))return void Cl();const n=await Ol(e,r,s);if(n.allowed){if(c({lat:e,lng:r}),J(!1),t){const n=new google.maps.Marker({position:{lat:e,lng:r},map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#FF5722",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"\ud83d\udce1",fontSize:"16px"},title:"Tower Location",draggable:!0});n.addListener("dragend",async()=>{const e=n.getPosition();if(e){const t=e.lat(),r=e.lng();if(!Sl(t,r))return Cl(),void n.setPosition(l);const a=await Ol(t,r,s);if(!a.allowed)return Z({isOpen:!0,type:"error",title:"Region Access Denied",message:a.message||"Cannot move tower to this region."}),void n.setPosition(l);c({lat:t,lng:r})}}),u(n)}}else Z({isOpen:!0,type:"error",title:"Region Access Denied",message:n.message||"You don't have access to this region. Contact your administrator."})},ne=(e,t,r,n)=>{const a=[];a.push(e);const s=r-n/2,o=r+n/2;for(let i=0;i<=30;i++){const r=ae(e,t,s+i/30*(o-s));a.push(r)}return a.push(e),a},ae=(e,t,r)=>{const n=6371e3,a=r*Math.PI/180,s=e.lat*Math.PI/180,o=e.lng*Math.PI/180,i=Math.asin(Math.sin(s)*Math.cos(t/n)+Math.cos(s)*Math.sin(t/n)*Math.cos(a)),l=o+Math.atan2(Math.sin(a)*Math.sin(t/n)*Math.cos(s),Math.cos(t/n)-Math.sin(s)*Math.sin(i));return{lat:180*i/Math.PI,lng:180*l/Math.PI}},se=(e,t)=>{const r=t*Math.PI/180,n=r/(2*Math.PI)*Math.PI*e*e;j(n);const a=r/(2*Math.PI)*2*Math.PI*e;S(a)},oe=()=>{b&&(b.setMap(null),y(null)),v&&(v.setMap(null),k(null)),d&&(d.setMap(null),u(null)),c(null),m(1e3),f(0),x(60),j(0),S(0),J(!0)},ie=e=>e<1e3?"".concat(e.toFixed(2)," m"):"".concat((e/1e3).toFixed(2)," km");return(0,Vi.jsxs)("div",{className:"fixed top-16 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 max-w-md z-40 max-h-[85vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("span",{className:"mr-2",children:"\ud83d\udce1"}),"Sector RF Coverage"]}),(0,Vi.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),X&&(0,Vi.jsx)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,Vi.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"\ud83d\udccd Click on the map to place the tower location"})}),l&&(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Coverage Radius: ",ie(h)]}),(0,Vi.jsx)("input",{type:"range",min:"100",max:"20000",step:"100",value:h,onChange:e=>m(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),(0,Vi.jsx)("div",{className:"flex gap-2 mt-2 flex-wrap",children:[{label:"500m",value:500},{label:"1km",value:1e3},{label:"2km",value:2e3},{label:"5km",value:5e3},{label:"10km",value:1e4}].map(e=>(0,Vi.jsx)("button",{onClick:()=>m(e.value),className:"px-2 py-1 text-xs rounded ".concat(h===e.value?"bg-orange-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:e.label},e.value))})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Azimuth (Direction): ",g,"\xb0 ",Xp(g)]}),(0,Vi.jsx)("input",{type:"range",min:"0",max:"360",step:"1",value:g,onChange:e=>f(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),(0,Vi.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(0,Vi.jsx)("span",{children:"N (0\xb0)"}),(0,Vi.jsx)("span",{children:"E (90\xb0)"}),(0,Vi.jsx)("span",{children:"S (180\xb0)"}),(0,Vi.jsx)("span",{children:"W (270\xb0)"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Beamwidth: ",p,"\xb0"]}),(0,Vi.jsx)("input",{type:"range",min:"10",max:"360",step:"5",value:p,onChange:e=>x(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),(0,Vi.jsx)("div",{className:"flex gap-2 mt-2 flex-wrap",children:[{label:"30\xb0",value:30},{label:"60\xb0",value:60},{label:"90\xb0",value:90},{label:"120\xb0",value:120},{label:"180\xb0",value:180}].map(e=>(0,Vi.jsx)("button",{onClick:()=>x(e.value),className:"px-2 py-1 text-xs rounded ".concat(p===e.value?"bg-orange-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:e.label},e.value))})]}),(0,Vi.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Coverage Area"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Area:"}),(0,Vi.jsx)("span",{className:"ml-2 font-semibold text-gray-900 dark:text-white",children:(le=w,le<1e4?"".concat(le.toFixed(2)," m\xb2"):le<1e6?"".concat((le/1e4).toFixed(2)," hectares"):"".concat((le/1e6).toFixed(2)," km\xb2"))})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Arc:"}),(0,Vi.jsx)("span",{className:"ml-2 font-semibold text-gray-900 dark:text-white",children:ie(N)})]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),(0,Vi.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,Vi.jsx)("input",{type:"color",value:T,onChange:e=>L(e.target.value),className:"w-12 h-10 rounded cursor-pointer"}),(0,Vi.jsx)("input",{type:"text",value:T,onChange:e=>L(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"#FF5722"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Fill Opacity: ",(100*M).toFixed(0),"%"]}),(0,Vi.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:M,onChange:e=>O(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]}),(0,Vi.jsxs)("button",{onClick:()=>Y(!K),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-sm font-medium flex items-center justify-between",children:[(0,Vi.jsx)("span",{children:"RF Technical Details (Optional)"}),(0,Vi.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(K?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),K&&(0,Vi.jsxs)("div",{className:"space-y-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tower Name"}),(0,Vi.jsx)("input",{type:"text",value:D,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"e.g., Tower-MH-001"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sector Name"}),(0,Vi.jsx)("input",{type:"text",value:P,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"e.g., Alpha, Sector-A"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frequency (MHz)"}),(0,Vi.jsx)("input",{type:"number",value:I,onChange:e=>B(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"e.g., 2100"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Technology"}),(0,Vi.jsxs)("select",{value:z,onChange:e=>W(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[(0,Vi.jsx)("option",{value:"2G",children:"2G"}),(0,Vi.jsx)("option",{value:"3G",children:"3G"}),(0,Vi.jsx)("option",{value:"4G",children:"4G"}),(0,Vi.jsx)("option",{value:"5G",children:"5G"}),(0,Vi.jsx)("option",{value:"Wi-Fi",children:"Wi-Fi"}),(0,Vi.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Antenna Height (m)"}),(0,Vi.jsx)("input",{type:"number",value:U,onChange:e=>H(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"e.g., 30"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,Vi.jsxs)("select",{value:V,onChange:e=>G(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[(0,Vi.jsx)("option",{value:"Active",children:"Active"}),(0,Vi.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,Vi.jsx)("option",{value:"Planned",children:"Planned"}),(0,Vi.jsx)("option",{value:"Testing",children:"Testing"})]})]})]})]}),(0,Vi.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-gray-200 dark:border-gray-600",children:[(0,Vi.jsx)("button",{onClick:()=>$(!0),disabled:ee,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:ee?"Saving...":"Save Sector"}),(0,Vi.jsx)("button",{onClick:oe,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"Clear"})]})]}),q&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-2xl",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Save Sector Configuration"}),(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),(0,Vi.jsx)("input",{type:"text",value:C,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., North Sector Coverage",autoFocus:!0})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,Vi.jsx)("textarea",{value:A,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"Optional description..."})]})]}),(0,Vi.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,Vi.jsx)("button",{onClick:async()=>{if(!l)return void Z({isOpen:!0,type:"warning",title:"Location Required",message:"Please place the tower location on the map"});if(!C.trim())return void Z({isOpen:!0,type:"warning",title:"Name Required",message:"Please enter a name for this sector"});const e={id:"sector_".concat(Date.now()),name:C.trim(),center:l,radius:h,azimuth:g,beamwidth:p,area:w,arcLength:N,color:T,fillOpacity:M,strokeWeight:2,createdAt:new Date,updatedAt:new Date,createdBy:null===s||void 0===s?void 0:s.id,description:A.trim()||void 0,status:V,towerName:D.trim()||void 0,sectorName:P.trim()||void 0,frequency:I?parseFloat(I):void 0,technology:z||void 0,antennaHeight:U?parseFloat(U):void 0};r&&r(e),te(!0);try{if(await uc.create({sector_name:C.trim(),tower_lat:l.lat,tower_lng:l.lng,azimuth:g,beamwidth:p,radius:h,frequency:I?parseFloat(I):void 0,antenna_height:U?parseFloat(U):void 0,fill_color:T,stroke_color:T,opacity:M,notes:A.trim()})){const e=Math.round((Date.now()-i)/1e3);Kl({toolName:"sector-rf",userId:(null===s||void 0===s?void 0:s.id)||"guest",userName:(null===s||void 0===s?void 0:s.name)||"Guest User",duration:e}),Z({isOpen:!0,type:"success",title:"Success!",message:"Sector saved to database!"}),oe(),$(!1),E(""),_(""),R(""),F(""),B(""),H("")}}catch(t){return console.error("Error saving sector:",t),void Z({isOpen:!0,type:"error",title:"Error",message:"Failed to save sector. Please try again."})}finally{te(!1)}},disabled:ee,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:ee?"Saving...":"Save"}),(0,Vi.jsx)("button",{onClick:()=>$(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"})]})]})}),(0,Vi.jsx)(ql,{isOpen:Q.isOpen,onClose:()=>Z((0,o.A)((0,o.A)({},Q),{},{isOpen:!1})),type:Q.type,title:Q.title,message:Q.message})]});var le};var Qp={version:"0.18.5"},Zp=1200,ex=1252,tx=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],rx={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},nx=function(e){-1!=tx.indexOf(e)&&(ex=rx[0]=e)};var ax=function(e){Zp=e,nx(e)};function sx(){ax(1200),nx(1252)}function ox(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var ix,lx=function(e){return String.fromCharCode(e)},cx=function(e){return String.fromCharCode(e)};var dx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ux(e){for(var t="",r=0,n=0,a=0,s=0,o=0,i=0,l=0,c=0;c<e.length;)s=(r=e.charCodeAt(c++))>>2,o=(3&r)<<4|(n=e.charCodeAt(c++))>>4,i=(15&n)<<2|(a=e.charCodeAt(c++))>>6,l=63&a,isNaN(n)?i=l=64:isNaN(a)&&(l=64),t+=dx.charAt(s)+dx.charAt(o)+dx.charAt(i)+dx.charAt(l);return t}function hx(e){var t="",r=0,n=0,a=0,s=0,o=0,i=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)r=dx.indexOf(e.charAt(l++))<<2|(s=dx.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(r),n=(15&s)<<4|(o=dx.indexOf(e.charAt(l++)))>>2,64!==o&&(t+=String.fromCharCode(n)),a=(3&o)<<6|(i=dx.indexOf(e.charAt(l++))),64!==i&&(t+=String.fromCharCode(a));return t}var mx=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),gx=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(JE){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function fx(e){return mx?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function px(e){return mx?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var xx=function(e){return mx?gx(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function bx(e){if("undefined"===typeof ArrayBuffer)return xx(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}function yx(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}var vx=mx?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:gx(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if("string"==typeof e[t])throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var kx=/\u0000/g,wx=/[\u0001-\u0006]/g;function jx(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Nx(e,t){var r=""+e;return r.length>=t?r:Pb("0",t-r.length)+r}function Sx(e,t){var r=""+e;return r.length>=t?r:Pb(" ",t-r.length)+r}function Cx(e,t){var r=""+e;return r.length>=t?r:r+Pb(" ",t-r.length)}var Ex=Math.pow(2,32);function Ax(e,t){return e>Ex||e<-Ex?function(e,t){var r=""+Math.round(e);return r.length>=t?r:Pb("0",t-r.length)+r}(e,t):function(e,t){var r=""+e;return r.length>=t?r:Pb("0",t-r.length)+r}(Math.round(e),t)}function _x(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var Tx=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Lx=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var Mx={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},Ox={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Dx={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Rx(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,o=1,i=0,l=1,c=0,d=0,u=Math.floor(a);c<t&&(i=(u=Math.floor(a))*o+s,d=u*c+l,!(a-u<5e-8));)a=1/(a-u),s=o,o=i,l=c,c=d;if(d>t&&(c>t?(d=l,i=s):(d=c,i=o)),!r)return[0,n*i,d];var h=Math.floor(n*i/d);return[h,n*i-h*d,d]}function Px(e,t,r){if(e>2958465||e<0)return null;var n=0|e,a=Math.floor(86400*(e-n)),s=0,o=[],i={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(i.u)<1e-6&&(i.u=0),t&&t.date1904&&(n+=1462),i.u>.9999&&(i.u=0,86400==++a&&(i.T=a=0,++n,++i.D)),60===n)o=r?[1317,10,29]:[1900,2,29],s=3;else if(0===n)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=function(e,t){t[0]-=581;var r=e.getDay();e<60&&(r=(r+6)%7);return r}(l,o))}return i.y=o[0],i.m=o[1],i.d=o[2],i.S=a%60,a=Math.floor(a/60),i.M=a%60,a=Math.floor(a/60),i.H=a,i.q=s,i}var Fx=new Date(1899,11,31,0,0,0),Ix=Fx.getTime(),Bx=new Date(1900,2,1,0,0,0);function zx(e,t){var r=e.getTime();return t?r-=1262304e5:e>=Bx&&(r+=864e5),(r-(Ix+6e4*(e.getTimezoneOffset()-Fx.getTimezoneOffset())))/864e5}function Wx(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Ux(e){var t,r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=r>=-4&&r<=-1?e.toPrecision(10+r):Math.abs(r)<=9?function(e){var t=e<0?12:11,r=Wx(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10)).length<=t?r:e.toExponential(5)}(e):10===r?e.toFixed(10).substr(0,12):function(e){var t=Wx(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Wx(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function Hx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Ux(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return db(14,zx(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Vx(e,t,r,n){var a,s="",o=0,i=0,l=r.y,c=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:a=l%100,c=2;break;default:a=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:a=r.m,c=t.length;break;case 3:return Lx[r.m-1][1];case 5:return Lx[r.m-1][0];default:return Lx[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:a=r.d,c=t.length;break;case 3:return Tx[r.q][0];default:return Tx[r.q][1]}break;case 104:switch(t.length){case 1:case 2:a=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:a=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:a=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==r.u||"s"!=t&&"ss"!=t?(i=n>=2?3===n?1e3:100:1===n?10:1,(o=Math.round(i*(r.S+r.u)))>=60*i&&(o=0),"s"===t?0===o?"0":""+o/i:(s=Nx(o,2+n),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):Nx(r.S,t.length);case 90:switch(t){case"[h]":case"[hh]":a=24*r.D+r.H;break;case"[m]":case"[mm]":a=60*(24*r.D+r.H)+r.M;break;case"[s]":case"[ss]":a=60*(60*(24*r.D+r.H)+r.M)+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:a=l,c=1}return c>0?Nx(a,c):""}function Gx(e){if(e.length<=3)return e;for(var t=e.length%3,r=e.substr(0,t);t!=e.length;t+=3)r+=(r.length>0?",":"")+e.substr(t,3);return r}var qx=/%/g;function $x(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+$x(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),-1===(r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a)).indexOf("e")){var o=Math.floor(Math.log(t)*Math.LOG10E);for(-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);"0."===r.substr(0,2);)r=(r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(a+s)%a)+"."+n.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Kx=/# (\?+)( ?)\/( ?)(\d+)/;var Yx=/^#*0*\.([0#]+)/,Xx=/\).*[0#]/,Jx=/\(###\) ###\\?-####/;function Qx(e){for(var t,r="",n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function Zx(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function eb(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function tb(e,t,r){if(40===e.charCodeAt(0)&&!t.match(Xx)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?tb("n",n,r):"("+tb("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return ab(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(qx,""),a=t.length-n.length;return ab(e,n,r*Math.pow(10,2*a))+Pb("%",a)}(e,t,r);if(-1!==t.indexOf("E"))return $x(t,r);if(36===t.charCodeAt(0))return"$"+tb(e,t.substr(" "==t.charAt(1)?2:1),r);var a,s,o,i,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Ax(l,t.length);if(t.match(/^[#?]+$/))return"0"===(a=Ax(r,0))&&(a=""),a.length>t.length?a:Qx(t.substr(0,t.length-a.length))+a;if(s=t.match(Kx))return function(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),o=a-s*n,i=n;return r+(0===s?"":""+s)+" "+(0===o?Pb(" ",e[1].length+1+e[4].length):Sx(o,e[1].length)+e[2]+"/"+e[3]+Nx(i,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+Ax(l,t.length-t.indexOf("0"));if(s=t.match(Yx))return a=Zx(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Qx(s[1])).replace(/\.$/,"."+Qx(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+Pb("0",Qx(s[1]).length-t.length)}),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+Zx(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Gx(Ax(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+tb(e,t,-r):Gx(""+(Math.floor(r)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(r,s[1].length)))+"."+Nx(eb(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return tb(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=jx(tb(e,t.replace(/[\\-]/g,""),r)),o=0,jx(jx(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return o<a.length?a.charAt(o++):"0"===e?"0":""}));if(t.match(Jx))return"("+(a=tb(e,"##########",r)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),i=Rx(l,Math.pow(10,o)-1,!1),a=""+c," "==(d=ab("n",s[1],i[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=Cx(i[2],o)).length<s[4].length&&(d=Qx(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c+((i=Rx(l,Math.pow(10,o)-1,!0))[0]||(i[1]?"":"0"))+" "+(i[1]?Sx(i[1],o)+s[2]+"/"+s[3]+Cx(i[2],o):Pb(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Ax(r,0),t.length<=a.length?a:Qx(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var u=t.indexOf(".")-o,h=t.length-a.length-u;return Qx(t.substr(0,u)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=eb(r,s[1].length),r<0?"-"+tb(e,t,-r):Gx(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?Nx(0,3-e.length):"")+e})+"."+Nx(o,s[1].length);switch(t){case"###,##0.00":return tb(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Gx(Ax(l,0));return"0"!==m?c+m:"";case"###,###.00":return tb(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return tb(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function rb(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+rb(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),!(r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a)).match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(a+s)%a)+"."+n.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function nb(e,t,r){if(40===e.charCodeAt(0)&&!t.match(Xx)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?nb("n",n,r):"("+nb("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return ab(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(qx,""),a=t.length-n.length;return ab(e,n,r*Math.pow(10,2*a))+Pb("%",a)}(e,t,r);if(-1!==t.indexOf("E"))return rb(t,r);if(36===t.charCodeAt(0))return"$"+nb(e,t.substr(" "==t.charAt(1)?2:1),r);var a,s,o,i,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Nx(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,0===r&&(a=""),a.length>t.length?a:Qx(t.substr(0,t.length-a.length))+a;if(s=t.match(Kx))return function(e,t,r){return r+(0===t?"":""+t)+Pb(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+Nx(l,t.length-t.indexOf("0"));if(s=t.match(Yx))return a=(a=(""+r).replace(/^([^\.]+)$/,"$1."+Qx(s[1])).replace(/\.$/,"."+Qx(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+Pb("0",Qx(s[1]).length-t.length)}),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Gx(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+nb(e,t,-r):Gx(""+r)+"."+Pb("0",s[1].length);if(s=t.match(/^#,#*,#0/))return nb(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=jx(nb(e,t.replace(/[\\-]/g,""),r)),o=0,jx(jx(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return o<a.length?a.charAt(o++):"0"===e?"0":""}));if(t.match(Jx))return"("+(a=nb(e,"##########",r)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),i=Rx(l,Math.pow(10,o)-1,!1),a=""+c," "==(d=ab("n",s[1],i[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=Cx(i[2],o)).length<s[4].length&&(d=Qx(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c+((i=Rx(l,Math.pow(10,o)-1,!0))[0]||(i[1]?"":"0"))+" "+(i[1]?Sx(i[1],o)+s[2]+"/"+s[3]+Cx(i[2],o):Pb(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Qx(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var u=t.indexOf(".")-o,h=t.length-a.length-u;return Qx(t.substr(0,u)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+nb(e,t,-r):Gx(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?Nx(0,3-e.length):"")+e})+"."+Nx(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Gx(""+l);return"0"!==m?c+m:"";default:if(t.match(/\.[0#?]*$/))return nb(e,t.slice(0,t.lastIndexOf(".")),r)+Qx(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function ab(e,t,r){return(0|r)===r?nb(e,t,r):tb(e,t,r)}var sb=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ob(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":_x(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(n=r;"]"!==e.charAt(t++)&&t<e.length;)n+=e.charAt(t);if(n.match(sb))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||"\\"==r&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var ib=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function lb(e,t){if(null==t)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0}return!1}function cb(e,t){var r=function(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),!0===r)throw new Error("Format |"+e+"| unterminated string ");return t}(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if("number"!==typeof t)return[4,4===r.length||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"]}var s=t>0?r[0]:t<0?r[1]:r[2];if(-1===r[0].indexOf("[")&&-1===r[1].indexOf("["))return[n,s];if(null!=r[0].match(/\[[=<>]/)||null!=r[1].match(/\[[=<>]/)){var o=r[0].match(ib),i=r[1].match(ib);return lb(t,o)?[n,r[0]]:lb(t,i)?[n,r[1]]:[n,r[null!=o&&null!=i?2:1]]}return[n,s]}function db(e,t,r){null==r&&(r={});var n="";switch(typeof e){case"string":n="m/d/yy"==e&&r.dateNF?r.dateNF:e;break;case"number":null==(n=14==e&&r.dateNF?r.dateNF:(null!=r.table?r.table:Mx)[e])&&(n=r.table&&r.table[Ox[e]]||Mx[Ox[e]]),null==n&&(n=Dx[e]||"General")}if(_x(n,0))return Hx(t,r);t instanceof Date&&(t=zx(t,r.date1904));var a=cb(n,t);if(_x(a[1]))return Hx(t,r);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,r,n){for(var a,s,o,i=[],l="",c=0,d="",u="t",h="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!_x(e,c))throw new Error("unrecognized character "+d+" in "+e);i[i.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(o=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(o);i[i.length]={t:"t",v:l},++c;break;case"\\":var m=e.charAt(++c),g="("===m||")"===m?m:"t";i[i.length]={t:g,v:m},++c;break;case"_":i[i.length]={t:"t",v:" "},c+=2;break;case"@":i[i.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==a&&null==(a=Px(t,r,"2"===e.charAt(c+1))))return"";i[i.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==a&&null==(a=Px(t,r)))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=h),i[i.length]={t:d,v:l},u=d;break;case"A":case"a":case"\u4e0a":var f={t:d,v:d};if(null==a&&(a=Px(t,r)),"A/P"===e.substr(c,3).toUpperCase()?(null!=a&&(f.v=a.H>=12?"P":"A"),f.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=a&&(f.v=a.H>=12?"PM":"AM"),f.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=a&&(f.v=a.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),f.t="T",c+=5,h="h"):(f.t="t",++c),null==a&&"T"===f.t)return"";i[i.length]=f,u=d;break;case"[":for(l=d;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(sb)){if(null==a&&null==(a=Px(t,r)))return"";i[i.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",ob(e)||(i[i.length]={t:"t",v:l}));break;case".":if(null!=a){for(l=d;++c<e.length&&"0"===(d=e.charAt(c));)l+=d;i[i.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;i[i.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;i[i.length]={t:d,v:l},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":i[i.length]={t:1===n?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);i[i.length]={t:"D",v:l};break;case" ":i[i.length]={t:d,v:d},++c;break;case"$":i[i.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);i[i.length]={t:"t",v:d},++c}var p,x=0,b=0;for(c=i.length-1,u="t";c>=0;--c)switch(i[c].t){case"h":case"H":i[c].t=h,u="h",x<1&&(x=1);break;case"s":(p=i[c].v.match(/\.0+$/))&&(b=Math.max(b,p[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":u=i[c].t;break;case"m":"s"===u&&(i[c].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&i[c].v.match(/[Hh]/)&&(x=1),x<2&&i[c].v.match(/[Mm]/)&&(x=2),x<3&&i[c].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M),a.M>=60&&(a.M=0,++a.H);break;case 2:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M)}var y,v="";for(c=0;c<i.length;++c)switch(i[c].t){case"t":case"T":case" ":case"D":break;case"X":i[c].v="",i[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[c].v=Vx(i[c].t.charCodeAt(0),i[c].v,a,b),i[c].t="t";break;case"n":case"?":for(y=c+1;null!=i[y]&&("?"===(d=i[y].t)||"D"===d||(" "===d||"t"===d)&&null!=i[y+1]&&("?"===i[y+1].t||"t"===i[y+1].t&&"/"===i[y+1].v)||"("===i[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===i[y].v||" "===i[y].v&&null!=i[y+1]&&"?"==i[y+1].t));)i[c].v+=i[y].v,i[y]={v:"",t:";"},++y;v+=i[c].v,c=y-1;break;case"G":i[c].t="t",i[c].v=Hx(t,r)}var k,w,j="";if(v.length>0){40==v.charCodeAt(0)?(k=t<0&&45===v.charCodeAt(0)?-t:t,w=ab("n",v,k)):(w=ab("n",v,k=t<0&&n>1?-t:t),k<0&&i[0]&&"t"==i[0].t&&(w=w.substr(1),i[0].v="-"+i[0].v)),y=w.length-1;var N=i.length;for(c=0;c<i.length;++c)if(null!=i[c]&&"t"!=i[c].t&&i[c].v.indexOf(".")>-1){N=c;break}var S=i.length;if(N===i.length&&-1===w.indexOf("E")){for(c=i.length-1;c>=0;--c)null!=i[c]&&-1!=="n?".indexOf(i[c].t)&&(y>=i[c].v.length-1?(y-=i[c].v.length,i[c].v=w.substr(y+1,i[c].v.length)):y<0?i[c].v="":(i[c].v=w.substr(0,y+1),y=-1),i[c].t="t",S=c);y>=0&&S<i.length&&(i[S].v=w.substr(0,y+1)+i[S].v)}else if(N!==i.length&&-1===w.indexOf("E")){for(y=w.indexOf(".")-1,c=N;c>=0;--c)if(null!=i[c]&&-1!=="n?".indexOf(i[c].t)){for(s=i[c].v.indexOf(".")>-1&&c===N?i[c].v.indexOf(".")-1:i[c].v.length-1,j=i[c].v.substr(s+1);s>=0;--s)y>=0&&("0"===i[c].v.charAt(s)||"#"===i[c].v.charAt(s))&&(j=w.charAt(y--)+j);i[c].v=j,i[c].t="t",S=c}for(y>=0&&S<i.length&&(i[S].v=w.substr(0,y+1)+i[S].v),y=w.indexOf(".")+1,c=N;c<i.length;++c)if(null!=i[c]&&(-1!=="n?(".indexOf(i[c].t)||c===N)){for(s=i[c].v.indexOf(".")>-1&&c===N?i[c].v.indexOf(".")+1:0,j=i[c].v.substr(0,s);s<i[c].v.length;++s)y<w.length&&(j+=w.charAt(y++));i[c].v=j,i[c].t="t",S=c}}}for(c=0;c<i.length;++c)null!=i[c]&&"n?".indexOf(i[c].t)>-1&&(k=n>1&&t<0&&c>0&&"-"===i[c-1].v?-t:t,i[c].v=ab(i[c].t,i[c].v,k),i[c].t="t");var C="";for(c=0;c!==i.length;++c)null!=i[c]&&(C+=i[c].v);return C}(a[1],t,r,a[0])}function ub(e,t){if("number"!=typeof t){t=+t||-1;for(var r=0;r<392;++r)if(void 0!=Mx[r]){if(Mx[r]==e){t=r;break}}else t<0&&(t=r);t<0&&(t=391)}return Mx[t]=e,t}function hb(e){for(var t=0;392!=t;++t)void 0!==e[t]&&ub(e[t],t)}function mb(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',Mx=e}var gb=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var fb=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var r=function(e){var t=0,r=0,n=0,a="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)a[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=a[t]=r>>>8^e[255&r];var s=[];for(n=1;16!=n;++n)s[n-1]="undefined"!==typeof Int32Array?a.subarray(256*n,256*n+256):a.slice(256*n,256*n+256);return s}(t),n=r[0],a=r[1],s=r[2],o=r[3],i=r[4],l=r[5],c=r[6],d=r[7],u=r[8],h=r[9],m=r[10],g=r[11],f=r[12],p=r[13],x=r[14];return e.table=t,e.bstr=function(e,r){for(var n=-1^r,a=0,s=e.length;a<s;)n=n>>>8^t[255&(n^e.charCodeAt(a++))];return~n},e.buf=function(e,r){for(var b=-1^r,y=e.length-15,v=0;v<y;)b=x[e[v++]^255&b]^p[e[v++]^b>>8&255]^f[e[v++]^b>>16&255]^g[e[v++]^b>>>24]^m[e[v++]]^h[e[v++]]^u[e[v++]]^d[e[v++]]^c[e[v++]]^l[e[v++]]^i[e[v++]]^o[e[v++]]^s[e[v++]]^a[e[v++]]^n[e[v++]]^t[e[v++]];for(y+=15;v<y;)b=b>>>8^t[255&(b^e[v++])];return~b},e.str=function(e,r){for(var n=-1^r,a=0,s=e.length,o=0,i=0;a<s;)(o=e.charCodeAt(a++))<128?n=n>>>8^t[255&(n^o)]:o<2048?n=(n=n>>>8^t[255&(n^(192|o>>6&31))])>>>8^t[255&(n^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),i=1023&e.charCodeAt(a++),n=(n=(n=(n=n>>>8^t[255&(n^(240|o>>8&7))])>>>8^t[255&(n^(128|o>>2&63))])>>>8^t[255&(n^(128|i>>6&15|(3&o)<<4))])>>>8^t[255&(n^(128|63&i))]):n=(n=(n=n>>>8^t[255&(n^(224|o>>12&15))])>>>8^t[255&(n^(128|o>>6&63))])>>>8^t[255&(n^(128|63&o))];return~n},e}(),pb=function(){var e,t={};function r(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function n(e){if("/"==e.charAt(e.length-1))return n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function a(e,t){"string"===typeof t&&(t=new Date(t));var r=t.getHours();r=(r=r<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,r);var n=t.getFullYear()-1980;n=(n=n<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,n)}function s(e){uv(e,0);for(var t={},r=0;e.l<=e.length-4;){var n=e.read_shift(2),a=e.read_shift(2),s=e.l+a,o={};if(21589===n)1&(r=e.read_shift(1))&&(o.mtime=e.read_shift(4)),a>5&&(2&r&&(o.atime=e.read_shift(4)),4&r&&(o.ctime=e.read_shift(4))),o.mtime&&(o.mt=new Date(1e3*o.mtime));e.l=s,t[n]=o}return t}function o(){return e||(e={})}function i(e,t){if(80==e[0]&&75==e[1])return ne(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=w(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var r=t&&t.root||"",n=(mx&&Buffer.isBuffer(e)?e.toString("binary"):w(e)).split("\r\n"),a=0,s="";for(a=0;a<n.length;++a)if(s=n[a],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),r||(r=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,r.length)!=r))for(;r.length>0&&(r=(r=r.slice(0,r.length-1)).slice(0,r.lastIndexOf("/")+1),s.slice(0,r.length)!=r););var o=(n[1]||"").match(/boundary="(.*?)"/);if(!o)throw new Error("MAD cannot find boundary");var i="--"+(o[1]||""),l=[],c=[],d={FileIndex:l,FullPaths:c};h(d);var u,m=0;for(a=0;a<n.length;++a){var g=n[a];g!==i&&g!==i+"--"||(m++&&ce(d,n.slice(u,a),r),u=a)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var r,n,a,s,o,i,m=512,g=[],f=e.slice(0,512);uv(f,0);var p=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(b,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(f);switch(r=p[0]){case 3:m=512;break;case 4:m=4096;break;case 0:if(0==p[1])return ne(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+r)}512!==m&&uv(f=e.slice(0,m),28);var y=e.slice(0,m);!function(e,t){var r=9;switch(e.l+=2,r=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+r);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+r);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+r)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(f,r);var v=f.read_shift(4,"i");if(3===r&&0!==v)throw new Error("# Directory Sectors: Expected 0 saw "+v);f.l+=4,s=f.read_shift(4,"i"),f.l+=4,f.chk("00100000","Mini Stream Cutoff Size: "),o=f.read_shift(4,"i"),n=f.read_shift(4,"i"),i=f.read_shift(4,"i"),a=f.read_shift(4,"i");for(var k=-1,j=0;j<109&&!((k=f.read_shift(4,"i"))<0);++j)g[j]=k;var N=function(e,t){for(var r=Math.ceil(e.length/t)-1,n=[],a=1;a<r;++a)n[a-1]=e.slice(a*t,(a+1)*t);return n[r-1]=e.slice(r*t),n}(e,m);c(i,a,N,m,g);var S=function(e,t,r,n){var a=e.length,s=[],o=[],i=[],l=[],c=n-1,d=0,u=0,h=0,m=0;for(d=0;d<a;++d)if(i=[],(h=d+t)>=a&&(h-=a),!o[h]){l=[];var g=[];for(u=h;u>=0;){g[u]=!0,o[u]=!0,i[i.length]=u,l.push(e[u]);var f=r[Math.floor(4*u/n)];if(n<4+(m=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+n);if(!e[f])break;if(g[u=nv(e[f],m)])break}s[h]={nodes:i,data:My([l])}}return s}(N,s,g,m);S[s].name="!Directory",n>0&&o!==x&&(S[o].name="!MiniFAT"),S[g[0]].name="!FAT",S.fat_addrs=g,S.ssz=m;var C=[],E=[],A=[];!function(e,t,r,n,a,s,o,i){for(var c,h=0,m=n.length?2:0,g=t[e].data,f=0,p=0;f<g.length;f+=128){var b=g.slice(f,f+128);uv(b,64),p=b.read_shift(2),c=Dy(b,0,p-m),n.push(c);var y={name:c,type:b.read_shift(1),color:b.read_shift(1),L:b.read_shift(4,"i"),R:b.read_shift(4,"i"),C:b.read_shift(4,"i"),clsid:b.read_shift(16),state:b.read_shift(4,"i"),start:0,size:0};0!==b.read_shift(2)+b.read_shift(2)+b.read_shift(2)+b.read_shift(2)&&(y.ct=u(b,b.l-8)),0!==b.read_shift(2)+b.read_shift(2)+b.read_shift(2)+b.read_shift(2)&&(y.mt=u(b,b.l-8)),y.start=b.read_shift(4,"i"),y.size=b.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=x,y.name=""),5===y.type?(h=y.start,a>0&&h!==x&&(t[h].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=d(r,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:h!==x&&y.start!==x&&t[h]&&(y.content=l(y,t[h].data,(t[i]||{}).data))),y.content&&uv(y.content,0),s[c]=y,o.push(y)}}(s,S,N,C,n,{},E,o),function(e,t,r){for(var n=0,a=0,s=0,o=0,i=0,l=r.length,c=[],d=[];n<l;++n)c[n]=d[n]=n,t[n]=r[n];for(;i<d.length;++i)a=e[n=d[i]].L,s=e[n].R,o=e[n].C,c[n]===n&&(-1!==a&&c[a]!==a&&(c[n]=c[a]),-1!==s&&c[s]!==s&&(c[n]=c[s])),-1!==o&&(c[o]=n),-1!==a&&n!=c[n]&&(c[a]=c[n],d.lastIndexOf(a)<i&&d.push(a)),-1!==s&&n!=c[n]&&(c[s]=c[n],d.lastIndexOf(s)<i&&d.push(s));for(n=1;n<l;++n)c[n]===n&&(-1!==s&&c[s]!==s?c[n]=c[s]:-1!==a&&c[a]!==a&&(c[n]=c[a]));for(n=1;n<l;++n)if(0!==e[n].type){if((i=n)!=c[i])do{i=c[i],t[n]=t[i]+"/"+t[n]}while(0!==i&&-1!==c[i]&&i!=c[i]);c[n]=-1}for(t[0]+="/",n=1;n<l;++n)2!==e[n].type&&(t[n]+="/")}(E,A,C),C.shift();var _={FileIndex:E,FullPaths:A};return t&&t.raw&&(_.raw={header:y,sectors:N}),_}function l(e,t,r){for(var n=e.start,a=e.size,s=[],o=n;r&&a>0&&o>=0;)s.push(t.slice(o*p,o*p+p)),a-=p,o=nv(r,4*o);return 0===s.length?mv(0):vx(s).slice(0,e.size)}function c(e,t,r,n,a){var s=x;if(e===x){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var o=r[e],i=(n>>>2)-1;if(!o)return;for(var l=0;l<i&&(s=nv(o,4*l))!==x;++l)a.push(s);c(nv(o,n-4),t-1,r,n,a)}}function d(e,t,r,n,a){var s=[],o=[];a||(a=[]);var i=n-1,l=0,c=0;for(l=t;l>=0;){a[l]=!0,s[s.length]=l,o.push(e[l]);var d=r[Math.floor(4*l/n)];if(n<4+(c=4*l&i))throw new Error("FAT boundary crossed: "+l+" 4 "+n);if(!e[d])break;l=nv(e[d],c)}return{nodes:s,data:My([o])}}function u(e,t){return new Date(1e3*(rv(e,t+4)/1e7*Math.pow(2,32)+rv(e,t)/1e7-11644473600))}function h(e,t){var r=t||{},n=r.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=n+"/",e.FileIndex[0]={name:n,type:5}),r.CLSID&&(e.FileIndex[0].clsid=r.CLSID),function(e){var t="\x01Sh33tJ5";if(pb.find(e,"/"+t))return;var r=mv(4);r[0]=55,r[1]=r[3]=50,r[2]=54,e.FileIndex.push({name:t,type:2,content:r,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),m(e)}(e)}function m(e,t){h(e);for(var a=!1,s=!1,o=e.FullPaths.length-1;o>=0;--o){var i=e.FileIndex[o];switch(i.type){case 0:s?a=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(i.R*i.L*i.C)&&(a=!0),i.R>-1&&i.L>-1&&i.R==i.L&&(a=!0);break;default:a=!0}}if(a||t){var l=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(o=0;o<e.FullPaths.length;++o)d[e.FullPaths[o]]=!0,0!==e.FileIndex[o].type&&u.push([e.FullPaths[o],e.FileIndex[o]]);for(o=0;o<u.length;++o){var m=r(u[o][0]);(s=d[m])||(u.push([m,{name:n(m).replace("/",""),type:1,clsid:v,ct:l,mt:l,content:null}]),d[m]=!0)}for(u.sort(function(e,t){return function(e,t){for(var r=e.split("/"),n=t.split("/"),a=0,s=0,o=Math.min(r.length,n.length);a<o;++a){if(s=r[a].length-n[a].length)return s;if(r[a]!=n[a])return r[a]<n[a]?-1:1}return r.length-n.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],o=0;o<u.length;++o)e.FullPaths[o]=u[o][0],e.FileIndex[o]=u[o][1];for(o=0;o<u.length;++o){var g=e.FileIndex[o],f=e.FullPaths[o];if(g.name=n(f).replace("/",""),g.L=g.R=g.C=-(g.color=1),g.size=g.content?g.content.length:0,g.start=0,g.clsid=g.clsid||v,0===o)g.C=u.length>1?1:-1,g.size=0,g.type=5;else if("/"==f.slice(-1)){for(c=o+1;c<u.length&&r(e.FullPaths[c])!=f;++c);for(g.C=c>=u.length?-1:c,c=o+1;c<u.length&&r(e.FullPaths[c])!=r(f);++c);g.R=c>=u.length?-1:c,g.type=1}else r(e.FullPaths[o+1]||"")==r(f)&&(g.R=o+1),g.type=2}}}function g(e,t){var r=t||{};if("mad"==r.fileType)return function(e,t){for(var r=t||{},n=r.boundary||"SheetJS",a=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(n="------="+n).slice(2)+'"',"","",""],s=e.FullPaths[0],o=s,i=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(o=e.FullPaths[l].slice(s.length),(i=e.FileIndex[l]).size&&i.content&&"\x01Sh33tJ5"!=o){o=o.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=i.content,d=mx&&Buffer.isBuffer(c)?c.toString("binary"):w(c),u=0,h=Math.min(1024,d.length),m=0,g=0;g<=h;++g)(m=d.charCodeAt(g))>=32&&m<128&&++u;var f=u>=4*h/5;a.push(n),a.push("Content-Location: "+(r.root||"file:///C:/SheetJS/")+o),a.push("Content-Transfer-Encoding: "+(f?"quoted-printable":"base64")),a.push("Content-Type: "+oe(i,o)),a.push(""),a.push(f?le(d):ie(d))}return a.push(n+"--\r\n"),a.join("\r\n")}(e,r);if(m(e),"zip"===r.fileType)return function(e,t){var r=t||{},n=[],s=[],o=mv(1),i=r.compression?8:0,l=0;0;var c=0,d=0,u=0,h=0,m=e.FullPaths[0],g=m,f=e.FileIndex[0],p=[],x=0;for(c=1;c<e.FullPaths.length;++c)if(g=e.FullPaths[c].slice(m.length),(f=e.FileIndex[c]).size&&f.content&&"\x01Sh33tJ5"!=g){var b=u,y=mv(g.length);for(d=0;d<g.length;++d)y.write_shift(1,127&g.charCodeAt(d));y=y.slice(0,y.l),p[h]=fb.buf(f.content,0);var v=f.content;8==i&&(v=j(v)),(o=mv(30)).write_shift(4,67324752),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,i),f.mt?a(o,f.mt):o.write_shift(4,0),o.write_shift(-4,8&l?0:p[h]),o.write_shift(4,8&l?0:v.length),o.write_shift(4,8&l?0:f.content.length),o.write_shift(2,y.length),o.write_shift(2,0),u+=o.length,n.push(o),u+=y.length,n.push(y),u+=v.length,n.push(v),8&l&&((o=mv(12)).write_shift(-4,p[h]),o.write_shift(4,v.length),o.write_shift(4,f.content.length),u+=o.l,n.push(o)),(o=mv(46)).write_shift(4,33639248),o.write_shift(2,0),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,i),o.write_shift(4,0),o.write_shift(-4,p[h]),o.write_shift(4,v.length),o.write_shift(4,f.content.length),o.write_shift(2,y.length),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(4,0),o.write_shift(4,b),x+=o.l,s.push(o),x+=y.length,s.push(y),++h}return o=mv(22),o.write_shift(4,101010256),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,h),o.write_shift(2,h),o.write_shift(4,x),o.write_shift(4,u),o.write_shift(2,0),vx([vx(n),vx(s),o])}(e,r);var n=function(e){for(var t=0,r=0,n=0;n<e.FileIndex.length;++n){var a=e.FileIndex[n];if(a.content){var s=a.content.length;s>0&&(s<4096?t+=s+63>>6:r+=s+511>>9)}}for(var o=e.FullPaths.length+3>>2,i=t+127>>7,l=(t+7>>3)+r+o+i,c=l+127>>7,d=c<=109?0:Math.ceil((c-109)/127);l+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,i,o,r,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),s=mv(n[7]<<9),o=0,i=0;for(o=0;o<8;++o)s.write_shift(1,y[o]);for(o=0;o<8;++o)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),o=0;o<3;++o)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,n[2]),s.write_shift(4,n[0]+n[1]+n[2]+n[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,n[3]?n[0]+n[1]+n[2]-1:x),s.write_shift(4,n[3]),s.write_shift(-4,n[1]?n[0]-1:x),s.write_shift(4,n[1]),o=0;o<109;++o)s.write_shift(-4,o<n[2]?n[1]+o:-1);if(n[1])for(i=0;i<n[1];++i){for(;o<236+127*i;++o)s.write_shift(-4,o<n[2]?n[1]+o:-1);s.write_shift(-4,i===n[1]-1?x:i+1)}var l=function(e){for(i+=e;o<i-1;++o)s.write_shift(-4,o+1);e&&(++o,s.write_shift(-4,x))};for(i=o=0,i+=n[1];o<i;++o)s.write_shift(-4,k.DIFSECT);for(i+=n[2];o<i;++o)s.write_shift(-4,k.FATSECT);l(n[3]),l(n[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=i,l(d+511>>9)));for(l(n[6]+7>>3);511&s.l;)s.write_shift(-4,k.ENDOFCHAIN);for(i=o=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=i,l(d+63>>6)));for(;511&s.l;)s.write_shift(-4,k.ENDOFCHAIN);for(o=0;o<n[4]<<2;++o){var h=e.FullPaths[o];if(h&&0!==h.length){u=e.FileIndex[o],0===o&&(u.start=u.size?u.start-1:x);var g=0===o&&r.root||u.name;if(d=2*(g.length+1),s.write_shift(64,g,"utf16le"),s.write_shift(2,d),s.write_shift(1,u.type),s.write_shift(1,u.color),s.write_shift(-4,u.L),s.write_shift(-4,u.R),s.write_shift(-4,u.C),u.clsid)s.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,u.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,u.start),s.write_shift(4,u.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(o=1;o<e.FileIndex.length;++o)if((u=e.FileIndex[o]).size>=4096)if(s.l=u.start+1<<9,mx&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(o=1;o<e.FileIndex.length;++o)if((u=e.FileIndex[o]).size>0&&u.size<4096)if(mx&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(mx)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var f,p=64,x=-2,b="d0cf11e0a1b11ae1",y=[208,207,17,224,161,177,26,225],v="00000000000000000000000000000000",k={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:x,FREESECT:-1,HEADER_SIGNATURE:b,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:v,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function w(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function j(e){return f?f.deflateRawSync(e):K(e)}var N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function E(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var A="undefined"!==typeof Uint8Array,_=A?new Uint8Array(256):[],T=0;T<256;++T)_[T]=E(T);function L(e,t){var r=_[255&e];return t<=8?r>>>8-t:(r=r<<8|_[e>>8&255],t<=16?r>>>16-t:(r=r<<8|_[e>>16&255])>>>24-t)}function M(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=6?0:e[n+1]<<8))>>>r&3}function O(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=5?0:e[n+1]<<8))>>>r&7}function D(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=3?0:e[n+1]<<8))>>>r&31}function R(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=1?0:e[n+1]<<8))>>>r&127}function P(e,t,r){var n=7&t,a=t>>>3,s=(1<<r)-1,o=e[a]>>>n;return r<8-n?o&s:(o|=e[a+1]<<8-n,r<16-n?o&s:(o|=e[a+2]<<16-n,r<24-n?o&s:(o|=e[a+3]<<24-n)&s))}function F(e,t,r){var n=7&t,a=t>>>3;return n<=5?e[a]|=(7&r)<<n:(e[a]|=r<<n&255,e[a+1]=(7&r)>>8-n),t+3}function I(e,t,r){return r=(1&r)<<(7&t),e[t>>>3]|=r,t+1}function B(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=r,t+8}function z(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=255&r,e[n+2]=r>>>8,t+16}function W(e,t){var r=e.length,n=2*r>t?2*r:t+5,a=0;if(r>=t)return e;if(mx){var s=px(n);if(e.copy)e.copy(s);else for(;a<e.length;++a)s[a]=e[a];return s}if(A){var o=new Uint8Array(n);if(o.set)o.set(e);else for(;a<r;++a)o[a]=e[a];return o}return e.length=n,e}function U(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}function H(e,t,r){var n=1,a=0,s=0,o=0,i=0,l=e.length,c=A?new Uint16Array(32):U(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<r;++s)e[s]=0;l=e.length;var d=A?new Uint16Array(l):U(l);for(s=0;s<l;++s)c[a=e[s]]++,n<a&&(n=a),d[s]=0;for(c[0]=0,s=1;s<=n;++s)c[s+16]=i=i+c[s-1]<<1;for(s=0;s<l;++s)0!=(i=e[s])&&(d[s]=c[i+16]++);var u=0;for(s=0;s<l;++s)if(0!=(u=e[s]))for(i=L(d[s],n)>>n-u,o=(1<<n+4-u)-1;o>=0;--o)t[i|o<<u]=15&u|s<<4;return n}var V=A?new Uint16Array(512):U(512),G=A?new Uint16Array(32):U(32);if(!A){for(var q=0;q<512;++q)V[q]=0;for(q=0;q<32;++q)G[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);H(e,G,32);var r=[];for(t=0;t<=143;t++)r.push(8);for(;t<=255;t++)r.push(9);for(;t<=279;t++)r.push(7);for(;t<=287;t++)r.push(8);H(r,V,288)}();var $=function(){for(var e=A?new Uint8Array(32768):[],t=0,r=0;t<C.length-1;++t)for(;r<C[t+1];++r)e[r]=t;for(;r<32768;++r)e[r]=29;var n=A?new Uint8Array(259):[];for(t=0,r=0;t<S.length-1;++t)for(;r<S[t+1];++r)n[r]=t;return function(t,r){return t.length<8?function(e,t){for(var r=0;r<e.length;){var n=Math.min(65535,e.length-r),a=r+n==e.length;for(t.write_shift(1,+a),t.write_shift(2,n),t.write_shift(2,65535&~n);n-- >0;)t[t.l++]=e[r++]}return t.l}(t,r):function(t,r){for(var a=0,s=0,o=A?new Uint16Array(32768):[];s<t.length;){var i=Math.min(65535,t.length-s);if(i<10){for(7&(a=F(r,a,+!(s+i!=t.length)))&&(a+=8-(7&a)),r.l=a/8|0,r.write_shift(2,i),r.write_shift(2,65535&~i);i-- >0;)r[r.l++]=t[s++];a=8*r.l}else{a=F(r,a,+!(s+i!=t.length)+2);for(var l=0;i-- >0;){var c=t[s],d=-1,u=0;if((d=o[l=32767&(l<<5^c)])&&((d|=-32768&s)>s&&(d-=32768),d<s))for(;t[d+u]==t[s+u]&&u<250;)++u;if(u>2){(c=n[u])<=22?a=B(r,a,_[c+1]>>1)-1:(B(r,a,3),B(r,a+=5,_[c-23]>>5),a+=3);var h=c<8?0:c-4>>2;h>0&&(z(r,a,u-S[c]),a+=h),c=e[s-d],a=B(r,a,_[c]>>3),a-=3;var m=c<4?0:c-2>>1;m>0&&(z(r,a,s-d-C[c]),a+=m);for(var g=0;g<u;++g)o[l]=32767&s,l=32767&(l<<5^t[s]),++s;i-=u-1}else c<=143?c+=48:a=I(r,a,1),a=B(r,a,_[c]),o[l]=32767&s,++s}a=B(r,a,0)-1}}return r.l=(a+7)/8|0,r.l}(t,r)}}();function K(e){var t=mv(50+Math.floor(1.1*e.length)),r=$(e,t);return t.slice(0,r)}var Y=A?new Uint16Array(32768):U(32768),X=A?new Uint16Array(32768):U(32768),J=A?new Uint16Array(128):U(128),Q=1,Z=1;function ee(e,t){var r=D(e,t)+257,n=D(e,t+=5)+1,a=function(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=4?0:e[n+1]<<8))>>>r&15}(e,t+=5)+4;t+=4;for(var s=0,o=A?new Uint8Array(19):U(19),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=A?new Uint8Array(8):U(8),d=A?new Uint8Array(8):U(8),u=o.length,h=0;h<a;++h)o[N[h]]=s=O(e,t),l<s&&(l=s),c[s]++,t+=3;var m=0;for(c[0]=0,h=1;h<=l;++h)d[h]=m=m+c[h-1]<<1;for(h=0;h<u;++h)0!=(m=o[h])&&(i[h]=d[m]++);var g=0;for(h=0;h<u;++h)if(0!=(g=o[h])){m=_[i[h]]>>8-g;for(var f=(1<<7-g)-1;f>=0;--f)J[m|f<<g]=7&g|h<<3}var p=[];for(l=1;p.length<r+n;)switch(t+=7&(m=J[R(e,t)]),m>>>=3){case 16:for(s=3+M(e,t),t+=2,m=p[p.length-1];s-- >0;)p.push(m);break;case 17:for(s=3+O(e,t),t+=3;s-- >0;)p.push(0);break;case 18:for(s=11+R(e,t),t+=7;s-- >0;)p.push(0);break;default:p.push(m),l<m&&(l=m)}var x=p.slice(0,r),b=p.slice(r);for(h=r;h<286;++h)x[h]=0;for(h=n;h<30;++h)b[h]=0;return Q=H(x,Y,286),Z=H(b,X,30),t}function te(e,t){var r=function(e,t){if(3==e[0]&&!(3&e[1]))return[fx(t),2];for(var r=0,n=0,a=px(t||1<<18),s=0,o=a.length>>>0,i=0,l=0;0==(1&n);)if(n=O(e,r),r+=3,n>>>1!=0)for(n>>1==1?(i=9,l=5):(r=ee(e,r),i=Q,l=Z);;){!t&&o<s+32767&&(o=(a=W(a,s+32767)).length);var c=P(e,r,i),d=n>>>1==1?V[c]:Y[c];if(r+=15&d,0===((d>>>=4)>>>8&255))a[s++]=d;else{if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var h=s+S[d];u>0&&(h+=P(e,r,u),r+=u),c=P(e,r,l),r+=15&(d=n>>>1==1?G[c]:X[c]);var m=(d>>>=4)<4?0:d-2>>1,g=C[d];for(m>0&&(g+=P(e,r,m),r+=m),!t&&o<h&&(o=(a=W(a,h+100)).length);s<h;)a[s]=a[s-g],++s}}else{7&r&&(r+=8-(7&r));var f=e[r>>>3]|e[(r>>>3)+1]<<8;if(r+=32,f>0)for(!t&&o<s+f&&(o=(a=W(a,s+f)).length);f-- >0;)a[s++]=e[r>>>3],r+=8}return t?[a,r+7>>>3]:[a.slice(0,s),r+7>>>3]}(e.slice(e.l||0),t);return e.l+=r[1],r[0]}function re(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function ne(e,t){var r=e;uv(r,0);var n={FileIndex:[],FullPaths:[]};h(n,{root:t.root});for(var a=r.length-4;(80!=r[a]||75!=r[a+1]||5!=r[a+2]||6!=r[a+3])&&a>=0;)--a;r.l=a+4,r.l+=4;var o=r.read_shift(2);r.l+=6;var i=r.read_shift(4);for(r.l=i,a=0;a<o;++a){r.l+=20;var l=r.read_shift(4),c=r.read_shift(4),d=r.read_shift(2),u=r.read_shift(2),m=r.read_shift(2);r.l+=8;var g=r.read_shift(4),f=s(r.slice(r.l+d,r.l+d+u));r.l+=d+u+m;var p=r.l;r.l=g+4,ae(r,l,c,n,f),r.l=p}return n}function ae(e,t,r,n,a){e.l+=2;var o=e.read_shift(2),i=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),r=65535&e.read_shift(2),n=new Date,a=31&r,s=15&(r>>>=5);r>>>=4,n.setMilliseconds(0),n.setFullYear(r+1980),n.setMonth(s-1),n.setDate(a);var o=31&t,i=63&(t>>>=5);return t>>>=6,n.setHours(t),n.setMinutes(i),n.setSeconds(o<<1),n}(e);if(8257&o)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),h=e.read_shift(2),m="",g=0;g<u;++g)m+=String.fromCharCode(e[e.l++]);if(h){var p=s(e.slice(e.l,e.l+h));(p[21589]||{}).mt&&(l=p[21589].mt),((a||{})[21589]||{}).mt&&(l=a[21589].mt)}e.l+=h;var x=e.slice(e.l,e.l+c);switch(i){case 8:x=function(e,t){if(!f)return te(e,t);var r=new(0,f.InflateRaw),n=r._processChunk(e.slice(e.l),r._finishFlushFlag);return e.l+=r.bytesRead,n}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+i)}var b=!1;8&o&&(134695760==e.read_shift(4)&&(e.read_shift(4),b=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&re(b,"Bad compressed size: "+t+" != "+c),d!=r&&re(b,"Bad uncompressed size: "+r+" != "+d),de(n,m,x,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function oe(e,t){if(e.ctype)return e.ctype;var r=e.name||"",n=r.match(/\.([^\.]+)$/);return n&&se[n[1]]||t&&(n=(r=t).match(/[\.\\]([^\.\\])+$/))&&se[n[1]]?se[n[1]]:"application/octet-stream"}function ie(e){for(var t=ux(e),r=[],n=0;n<t.length;n+=76)r.push(t.slice(n,n+76));return r.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var r=[],n=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),a=0;a<n.length;++a){var s=n[a];if(0!=s.length)for(var o=0;o<s.length;){var i=76,l=s.slice(o,o+i);"="==l.charAt(i-1)?i--:"="==l.charAt(i-2)?i-=2:"="==l.charAt(i-3)&&(i-=3),l=s.slice(o,o+i),(o+=i)<s.length&&(l+="="),r.push(l)}else r.push("")}return r.join("\r\n")}function ce(e,t,r){for(var n,a="",s="",o="",i=0;i<10;++i){var l=t[i];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":a=c[2].trim();break;case"content-type":o=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++i,s.toLowerCase()){case"base64":n=xx(hx(t.slice(i).join("")));break;case"quoted-printable":n=function(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r];r<=e.length&&"="==n.charAt(n.length-1);)n=n.slice(0,n.length-1)+e[++r];t.push(n)}for(var a=0;a<t.length;++a)t[a]=t[a].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return xx(t.join("\r\n"))}(t.slice(i));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var d=de(e,a.slice(r.length),n,{unsafe:!0});o&&(d.ctype=o)}function de(e,t,r,a){var s=a&&a.unsafe;s||h(e);var o=!s&&pb.find(e,t);if(!o){var i=e.FullPaths[0];t.slice(0,i.length)==i?i=t:("/"!=i.slice(-1)&&(i+="/"),i=(i+t).replace("//","/")),o={name:n(t),type:2},e.FileIndex.push(o),e.FullPaths.push(i),s||pb.utils.cfb_gc(e)}return o.content=r,o.size=r?r.length:0,a&&(a.CLSID&&(o.clsid=a.CLSID),a.mt&&(o.mt=a.mt),a.ct&&(o.ct=a.ct)),o}return t.find=function(e,t){var r=e.FullPaths.map(function(e){return e.toUpperCase()}),n=r.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),a=!1;47===t.charCodeAt(0)?(a=!0,t=r[0].slice(0,-1)+t):a=-1!==t.indexOf("/");var s=t.toUpperCase(),o=!0===a?r.indexOf(s):n.indexOf(s);if(-1!==o)return e.FileIndex[o];var i=!s.match(wx);for(s=s.replace(kx,""),i&&(s=s.replace(wx,"!")),o=0;o<r.length;++o){if((i?r[o].replace(wx,"!"):r[o]).replace(kx,"")==s)return e.FileIndex[o];if((i?n[o].replace(wx,"!"):n[o]).replace(kx,"")==s)return e.FileIndex[o]}return null},t.read=function(t,r){var n=r&&r.type;switch(n||mx&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return function(t,r){return o(),i(e.readFileSync(t),r)}(t,r);case"base64":return i(xx(hx(t)),r);case"binary":return i(xx(t),r)}return i(t,r)},t.parse=i,t.write=function(t,r){var n=g(t,r);switch(r&&r.type||"buffer"){case"file":return o(),e.writeFileSync(r.filename,n),n;case"binary":return"string"==typeof n?n:w(n);case"base64":return ux("string"==typeof n?n:w(n));case"buffer":if(mx)return Buffer.isBuffer(n)?n:gx(n);case"array":return"string"==typeof n?xx(n):n}return n},t.writeFile=function(t,r,n){o();var a=g(t,n);e.writeFileSync(r,a)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:de,cfb_del:function(e,t){h(e);var r=pb.find(e,t);if(r)for(var n=0;n<e.FileIndex.length;++n)if(e.FileIndex[n]==r)return e.FileIndex.splice(n,1),e.FullPaths.splice(n,1),!0;return!1},cfb_mov:function(e,t,r){h(e);var a=pb.find(e,t);if(a)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==a)return e.FileIndex[s].name=n(r),e.FullPaths[s]=r,!0;return!1},cfb_gc:function(e){m(e,!0)},ReadShift:sv,CheckField:dv,prep_blob:uv,bconcat:vx,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");f=e}catch(JE){console.error("cannot use native zlib: "+(JE.message||JE))}},_deflateRaw:K,_inflateRaw:te,consts:k},t}();let xb;function bb(e){return"string"===typeof e?bx(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function yb(e,t,r){if("undefined"!==typeof xb&&xb.writeFileSync)return r?xb.writeFileSync(e,t,r):xb.writeFileSync(e,t);if("undefined"!==typeof Deno){if(r&&"string"==typeof t)switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=bx(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n="utf8"==r?ny(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(n,e);if("undefined"!==typeof Blob){var a=new Blob([bb(n)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if("undefined"!==typeof saveAs)return saveAs(a,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(null!=o.download)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var i=File(e);return i.open("w"),i.encoding="binary",Array.isArray(t)&&(t=yx(t)),i.write(t),i.close(),t}catch(JE){if(!JE.message||!JE.message.match(/onstruct/))throw JE}throw new Error("cannot save file "+e)}function vb(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function kb(e,t){for(var r=[],n=vb(e),a=0;a!==n.length;++a)null==r[e[n[a]][t]]&&(r[e[n[a]][t]]=n[a]);return r}function wb(e){for(var t=[],r=vb(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function jb(e){for(var t=[],r=vb(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}var Nb=new Date(1899,11,30,0,0,0);function Sb(e,t){var r=e.getTime();return t&&(r-=1263168e5),(r-(Nb.getTime()+6e4*(e.getTimezoneOffset()-Nb.getTimezoneOffset())))/864e5}var Cb=new Date,Eb=Nb.getTime()+6e4*(Cb.getTimezoneOffset()-Nb.getTimezoneOffset()),Ab=Cb.getTimezoneOffset();function _b(e){var t=new Date;return t.setTime(24*e*60*60*1e3+Eb),t.getTimezoneOffset()!==Ab&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Ab)),t}var Tb=new Date("2017-02-19T19:06:09.000Z"),Lb=isNaN(Tb.getFullYear())?new Date("2/19/17"):Tb,Mb=2017==Lb.getFullYear();function Ob(e,t){var r=new Date(e);if(Mb)return t>0?r.setTime(r.getTime()+60*r.getTimezoneOffset()*1e3):t<0&&r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3),r;if(e instanceof Date)return e;if(1917==Lb.getFullYear()&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function Db(e,t){if(mx&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return ny(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return ny(ox(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return ny(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return ny(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return r[e]||e})}catch(JE){}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Rb(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Rb(e[r]));return t}function Pb(e,t){for(var r="";r.length<t;)r+=e;return r}function Fb(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return isNaN(t=Number(n))?(n=n.replace(/[(](.*)[)]/,function(e,t){return r=-r,t}),isNaN(t=Number(n))?t:t/r):t/r}var Ib=["january","february","march","april","may","june","july","august","september","october","november","december"];function Bb(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Ib.indexOf(o))return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&101!=n?t:e.match(/[^-0-9:,\/\\]/)?r:t}function zb(e,t,r){if(e.FullPaths){var n;if("string"==typeof r)return n=mx?gx(r):function(e){for(var t=[],r=0,n=e.length+250,a=fx(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|63&o;else if(o>=55296&&o<57344){o=64+(1023&o);var i=1023&e.charCodeAt(++s);a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|i>>6&15|(3&o)<<4,a[r++]=128|63&i}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|63&o;r>n&&(t.push(a.slice(0,r)),r=0,a=fx(65535),n=65530)}return t.push(a.slice(0,r)),vx(t)}(r),pb.utils.cfb_add(e,t,n);pb.utils.cfb_add(e,t,r)}else e.file(t,r)}function Wb(){return pb.utils.cfb_new()}var Ub='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var Hb={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Vb=wb(Hb),Gb=/[&<>'"]/g,qb=/[\u0000-\u0008\u000b-\u001f]/g;function $b(e){return(e+"").replace(Gb,function(e){return Vb[e]}).replace(qb,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Kb(e){return $b(e).replace(/ /g,"_x0020_")}var Yb=/[\u0000-\u001f]/g;function Xb(e){return(e+"").replace(Gb,function(e){return Vb[e]}).replace(/\n/g,"<br/>").replace(Yb,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Jb(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Qb(e){for(var t="",r=0,n=0,a=0,s=0,o=0,i=0;r<e.length;)(n=e.charCodeAt(r++))<128?t+=String.fromCharCode(n):(a=e.charCodeAt(r++),n>191&&n<224?(o=(31&n)<<6,o|=63&a,t+=String.fromCharCode(o)):(s=e.charCodeAt(r++),n<240?t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&s):(i=((7&n)<<18|(63&a)<<12|(63&s)<<6|63&(o=e.charCodeAt(r++)))-65536,t+=String.fromCharCode(55296+(i>>>10&1023)),t+=String.fromCharCode(56320+(1023&i)))));return t}function Zb(e){var t,r,n,a=fx(2*e.length),s=1,o=0,i=0;for(r=0;r<e.length;r+=s)s=1,(n=e.charCodeAt(r))<128?t=n:n<224?(t=64*(31&n)+(63&e.charCodeAt(r+1)),s=2):n<240?(t=4096*(15&n)+64*(63&e.charCodeAt(r+1))+(63&e.charCodeAt(r+2)),s=3):(s=4,t=262144*(7&n)+4096*(63&e.charCodeAt(r+1))+64*(63&e.charCodeAt(r+2))+(63&e.charCodeAt(r+3)),i=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==i&&(a[o++]=255&i,a[o++]=i>>>8,i=0),a[o++]=t%256,a[o++]=t>>>8;return a.slice(0,o).toString("ucs2")}function ey(e){return gx(e,"binary").toString("utf8")}var ty="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",ry=mx&&(ey(ty)==Qb(ty)&&ey||Zb(ty)==Qb(ty)&&Zb)||Qb,ny=mx?function(e){return gx(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(63&n)));break;case n>=55296&&n<57344:n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(63&a)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)))}return t.join("")},ay=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}}();var sy=/(^\s|\s$|\n)/;function oy(e,t){return"<"+e+(t.match(sy)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function iy(e){return vb(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function ly(e,t,r){return"<"+e+(null!=r?iy(r):"")+(null!=t?(t.match(sy)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function cy(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(JE){if(t)throw JE}return""}var dy="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",uy="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",hy="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",my="http://schemas.openxmlformats.org/package/2006/content-types",gy="http://schemas.openxmlformats.org/package/2006/relationships",fy="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",py="http://purl.org/dc/elements/1.1/",xy="http://purl.org/dc/terms/",by="http://purl.org/dc/dcmitype/",yy="http://schemas.openxmlformats.org/officeDocument/2006/relationships",vy="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",ky="http://www.w3.org/2001/XMLSchema-instance",wy="http://www.w3.org/2001/XMLSchema",jy=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ny="urn:schemas-microsoft-com:office:office",Sy="urn:schemas-microsoft-com:office:excel",Cy="urn:schemas-microsoft-com:office:spreadsheet",Ey="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Ay="http://macVmlSchemaUri",_y="urn:schemas-microsoft-com:vml",Ty="http://www.w3.org/TR/REC-html40";var Ly=function(e){for(var t=[],r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,a=e[0][r].length;n<a;n+=10240)t.push.apply(t,e[0][r].slice(n,n+10240));return t},My=mx?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:gx(e)})):Ly(e)}:Ly,Oy=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(ev(e,a)));return n.join("").replace(kx,"")},Dy=mx?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(kx,""):Oy(e,t,r)}:Oy,Ry=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Py=mx?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):Ry(e,t,r)}:Ry,Fy=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Zy(e,a)));return n.join("")},Iy=mx?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):Fy(e,t,r)}:Fy,By=function(e,t){var r=rv(e,t);return r>0?Iy(e,t+4,t+4+r-1):""},zy=By,Wy=function(e,t){var r=rv(e,t);return r>0?Iy(e,t+4,t+4+r-1):""},Uy=Wy,Hy=function(e,t){var r=2*rv(e,t);return r>0?Iy(e,t+4,t+4+r-1):""},Vy=Hy,Gy=function(e,t){var r=rv(e,t);return r>0?Dy(e,t+4,t+4+r):""},qy=Gy,$y=function(e,t){var r=rv(e,t);return r>0?Iy(e,t+4,t+4+r):""},Ky=$y,Yy=function(e,t){return function(e,t){for(var r=1-2*(e[t+7]>>>7),n=((127&e[t+7])<<4)+(e[t+6]>>>4&15),a=15&e[t+6],s=5;s>=0;--s)a=256*a+e[t+s];return 2047==n?0==a?r*(1/0):NaN:(0==n?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}(e,t)},Xy=Yy,Jy=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function Qy(){Dy=function(e,t,r){return ix.utils.decode(1200,e.slice(t,r)).replace(kx,"")},Iy=function(e,t,r){return ix.utils.decode(65001,e.slice(t,r))},zy=function(e,t){var r=rv(e,t);return r>0?ix.utils.decode(ex,e.slice(t+4,t+4+r-1)):""},Uy=function(e,t){var r=rv(e,t);return r>0?ix.utils.decode(Zp,e.slice(t+4,t+4+r-1)):""},Vy=function(e,t){var r=2*rv(e,t);return r>0?ix.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},qy=function(e,t){var r=rv(e,t);return r>0?ix.utils.decode(1200,e.slice(t+4,t+4+r)):""},Ky=function(e,t){var r=rv(e,t);return r>0?ix.utils.decode(65001,e.slice(t+4,t+4+r)):""}}mx&&(zy=function(e,t){if(!Buffer.isBuffer(e))return By(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},Uy=function(e,t){if(!Buffer.isBuffer(e))return Wy(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},Vy=function(e,t){if(!Buffer.isBuffer(e))return Hy(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},qy=function(e,t){if(!Buffer.isBuffer(e))return Gy(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},Ky=function(e,t){if(!Buffer.isBuffer(e))return $y(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},Xy=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):Yy(e,t)},Jy=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof ix&&Qy();var Zy=function(e,t){return e[t]},ev=function(e,t){return 256*e[t+1]+e[t]},tv=function(e,t){var r=256*e[t+1]+e[t];return r<32768?r:-1*(65535-r+1)},rv=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},nv=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},av=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function sv(e,t){var r,n,a,s,o,i,l="",c=[];switch(t){case"dbcs":if(i=this.l,mx&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(o=0;o<e;++o)l+=String.fromCharCode(ev(this,i)),i+=2;e*=2;break;case"utf8":l=Iy(this,this.l,this.l+e);break;case"utf16le":e*=2,l=Dy(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof ix)return sv.call(this,e,"dbcs");l=ix.utils.decode(Zp,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=zy(this,this.l),e=4+rv(this,this.l);break;case"lpstr-cp":l=Uy(this,this.l),e=4+rv(this,this.l);break;case"lpwstr":l=Vy(this,this.l),e=4+2*rv(this,this.l);break;case"lpp4":e=4+rv(this,this.l),l=qy(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+rv(this,this.l),l=Ky(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(a=Zy(this,this.l+e++));)c.push(lx(a));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(a=ev(this,this.l+e));)c.push(lx(a)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",i=this.l,o=0;o<e;++o){if(this.lens&&-1!==this.lens.indexOf(i))return a=Zy(this,i),this.l=i+1,s=sv.call(this,e-o,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(lx(ev(this,i))),i+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof ix){l=ix.utils.decode(Zp,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",i=this.l,o=0;o!=e;++o){if(this.lens&&-1!==this.lens.indexOf(i))return a=Zy(this,i),this.l=i+1,s=sv.call(this,e-o,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(lx(Zy(this,i))),i+=1}l=c.join("");break;default:switch(e){case 1:return r=Zy(this,this.l),this.l++,r;case 2:return r=("i"===t?tv:ev)(this,this.l),this.l+=2,r;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(r=(e>0?nv:av)(this,this.l),this.l+=4,r):(n=rv(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return n=8==e?Xy(this,this.l):Xy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:l=Py(this,this.l,e)}}return this.l+=e,l}var ov=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},iv=function(e,t,r){e[r]=255&t,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},lv=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255};function cv(e,t,r){var n=0,a=0;if("dbcs"===r){for(a=0;a!=t.length;++a)lv(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if("sbcs"===r){if("undefined"!==typeof ix&&874==ex)for(a=0;a!=t.length;++a){var s=ix.utils.encode(ex,t.charAt(a));this[this.l+a]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=255&t.charCodeAt(a);n=t.length}else{if("hex"===r){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}if("utf16le"===r){var o=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=255&i,this[this.l++]=i>>8}for(;this.l<o;)this[this.l++]=0;return this}switch(e){case 1:n=1,this[this.l]=255&t;break;case 2:n=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:n=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:n=4,ov(this,t,this.l);break;case 8:if(n=8,"f"===r){!function(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,o=n?-t:t;isFinite(o)?0==o?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var i=0;i<=5;++i,s/=256)e[r+i]=255&s;e[r+6]=(15&a)<<4|15&s,e[r+7]=a>>4|n}(this,t,this.l);break}case 16:break;case-4:n=4,iv(this,t,this.l)}}return this.l+=n,this}function dv(e,t){var r=Py(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function uv(e,t){e.l=t,e.read_shift=sv,e.chk=dv,e.write_shift=cv}function hv(e,t){e.l+=t}function mv(e){var t=fx(e);return uv(t,0),t}function gv(){var e=[],t=mx?256:2048,r=function(e){var t=mv(e);return uv(t,0),t},n=r(t),a=function(){n&&(n.length>n.l&&((n=n.slice(0,n.l)).l=n.length),n.length>0&&e.push(n),n=null)},s=function(e){return n&&e<n.length-n.l?n:(a(),n=r(Math.max(e+1,t)))};return{next:s,push:function(e){a(),null==(n=e).l&&(n.l=n.length),s(t)},end:function(){return a(),vx(e)},_bufs:e}}function fv(e,t,r,n){var a,s=+t;if(!isNaN(s)){n||(n=TN[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var o=e.next(a);s<=127?o.write_shift(1,s):(o.write_shift(1,128+(127&s)),o.write_shift(1,s>>7));for(var i=0;4!=i;++i){if(!(n>=128)){o.write_shift(1,n);break}o.write_shift(1,128+(127&n)),n>>=7}n>0&&Jy(r)&&e.push(r)}}function pv(e,t,r){var n=Rb(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function xv(e,t,r){var n=Rb(e);return n.s=pv(n.s,t.s,r),n.e=pv(n.e,t.s,r),n}function bv(e,t){if(e.cRel&&e.c<0)for(e=Rb(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Rb(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Sv(e);return e.cRel||null==e.cRel||(r=r.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(r=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(r)),r}function yv(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?bv(e.s,t.biff)+":"+bv(e.e,t.biff):(e.s.rRel?"":"$")+kv(e.s.r)+":"+(e.e.rRel?"":"$")+kv(e.e.r):(e.s.cRel?"":"$")+jv(e.s.c)+":"+(e.e.cRel?"":"$")+jv(e.e.c)}function vv(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function kv(e){return""+(e+1)}function wv(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function jv(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Nv(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Sv(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Cv(e){var t=e.indexOf(":");return-1==t?{s:Nv(e),e:Nv(e)}:{s:Nv(e.slice(0,t)),e:Nv(e.slice(t+1))}}function Ev(e,t){return"undefined"===typeof t||"number"===typeof t?Ev(e.s,e.e):("string"!==typeof e&&(e=Sv(e)),"string"!==typeof t&&(t=Sv(t)),e==t?e:e+":"+t)}function Av(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||10!=a)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function _v(e,t){var r="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=db(e.z,r?Sb(t):t)}catch(JE){}try{return e.w=db((e.XF||{}).numFmtId||(r?14:0),r?Sb(t):t)}catch(JE){return""+t}}function Tv(e,t,r){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),"e"==e.t?uk[e.v]||e.v:_v(e,void 0==t?e.v:t))}function Lv(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Mv(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense;var s=e||(a?[]:{}),o=0,i=0;if(s&&null!=n.origin){if("number"==typeof n.origin)o=n.origin;else{var l="string"==typeof n.origin?Nv(n.origin):n.origin;o=l.r,i=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Av(s["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==o&&(c.e.r=o=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[u].length;++h)if("undefined"!==typeof t[u][h]){var m={v:t[u][h]},g=o+u,f=i+h;if(c.s.r>g&&(c.s.r=g),c.s.c>f&&(c.s.c=f),c.e.r<g&&(c.e.r=g),c.e.c<f&&(c.e.c=f),!t[u][h]||"object"!==typeof t[u][h]||Array.isArray(t[u][h])||t[u][h]instanceof Date)if(Array.isArray(m.v)&&(m.f=t[u][h][1],m.v=m.v[0]),null===m.v)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else{if(!n.sheetStubs)continue;m.t="z"}else"number"===typeof m.v?m.t="n":"boolean"===typeof m.v?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Mx[14],n.cellDates?(m.t="d",m.w=db(m.z,Sb(m.v))):(m.t="n",m.v=Sb(m.v),m.w=db(m.z,m.v))):m.t="s";else m=t[u][h];if(a)s[g]||(s[g]=[]),s[g][f]&&s[g][f].z&&(m.z=s[g][f].z),s[g][f]=m;else{var p=Sv({c:f,r:g});s[p]&&s[p].z&&(m.z=s[p].z),s[p]=m}}}return c.s.c<1e7&&(s["!ref"]=Ev(c)),s}function Ov(e,t){return Mv(null,e,t)}function Dv(e,t){return t||(t=mv(4)),t.write_shift(4,e),t}function Rv(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function Pv(e,t){var r=!1;return null==t&&(r=!0,t=mv(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Fv(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Iv(e,t){var r=e.l,n=e.read_shift(1),a=Rv(e),s=[],o={t:a,h:a};if(0!==(1&n)){for(var i=e.read_shift(4),l=0;l!=i;++l)s.push(Fv(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var Bv=Iv;function zv(e,t){var r=!1;return null==t&&(r=!0,t=mv(23+4*e.t.length)),t.write_shift(1,1),Pv(e.t,t),t.write_shift(4,1),function(e,t){t||(t=mv(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function Wv(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Uv(e,t){return null==t&&(t=mv(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Hv(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Vv(e,t){return null==t&&(t=mv(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Gv=Rv,qv=Pv;function $v(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function Kv(e,t){var r=!1;return null==t&&(r=!0,t=mv(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Yv=Rv,Xv=$v,Jv=Kv;function Qv(e){var t=e.slice(e.l,e.l+4),r=1&t[0],n=2&t[0];e.l+=4;var a=0===n?Xy([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):nv(t,0)>>2;return r?a/100:a}function Zv(e,t){null==t&&(t=mv(4));var r=0,n=0,a=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?n=1:a==(0|a)&&a>=-(1<<29)&&a<1<<29&&(n=1,r=1),!n)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((r?a:e)<<2)+(r+2))}function ek(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var tk=ek,rk=function(e,t){return t||(t=mv(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function nk(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function ak(e,t){return(t||mv(8)).write_shift(8,e,"f")}function sk(e,t){if(t||(t=mv(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),e.rgb&&null==e.theme){var n=e.rgb||"FFFFFF";"number"==typeof n&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var ok=80,ik={1:{n:"CodePage",t:2},2:{n:"Category",t:ok},3:{n:"PresentationFormat",t:ok},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:ok},15:{n:"Company",t:ok},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:ok},27:{n:"ContentStatus",t:ok},28:{n:"Language",t:ok},29:{n:"Version",t:ok},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},lk={1:{n:"CodePage",t:2},2:{n:"Title",t:ok},3:{n:"Subject",t:ok},4:{n:"Author",t:ok},5:{n:"Keywords",t:ok},6:{n:"Comments",t:ok},7:{n:"Template",t:ok},8:{n:"LastAuthor",t:ok},9:{n:"RevNumber",t:ok},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:ok},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function ck(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var dk=Rb(ck([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),uk={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},hk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},mk={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function gk(e,t){var r,n=function(e){for(var t=[],r=vb(e),n=0;n!==r.length;++n)null==t[e[r[n]]]&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}(hk),a=[];a[a.length]=Ub,a[a.length]=ly("Types",null,{xmlns:my,"xmlns:xsd":wy,"xmlns:xsi":ky}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return ly("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(n){e[n]&&e[n].length>0&&(r=e[n][0],a[a.length]=ly("Override",null,{PartName:("/"==r[0]?"":"/")+r,ContentType:mk[n][t.bookType]||mk[n].xlsx}))},o=function(r){(e[r]||[]).forEach(function(e){a[a.length]=ly("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:mk[r][t.bookType]||mk[r].xlsx})})},i=function(t){(e[t]||[]).forEach(function(e){a[a.length]=ly("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:n[t][0]})})};return s("workbooks"),o("sheets"),o("charts"),i("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(i),i("vba"),i("comments"),i("threadedcomments"),i("drawings"),o("metadata"),i("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var fk={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function pk(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function xk(e){var t=[Ub,ly("Relationships",null,{xmlns:gy})];return vb(e["!id"]).forEach(function(r){t[t.length]=ly("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function bk(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,s?a.TargetMode=s:[fk.HLINK,fk.XPATH,fk.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function yk(e,t,r){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function vk(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function kk(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Qp.version+"</meta:generator></office:meta></office:document-meta>"}var wk=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function jk(e,t,r,n,a){null==a[e]&&null!=t&&""!==t&&(a[e]=t,t=$b(t),n[n.length]=r?ly(e,t,r):oy(e,t))}function Nk(e,t){var r=t||{},n=[Ub,ly("cp:coreProperties",null,{"xmlns:cp":dy,"xmlns:dc":py,"xmlns:dcterms":xy,"xmlns:dcmitype":by,"xmlns:xsi":ky})],a={};if(!e&&!r.Props)return n.join("");e&&(null!=e.CreatedDate&&jk("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:cy(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),null!=e.ModifiedDate&&jk("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:cy(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=wk.length;++s){var o=wk[s],i=r.Props&&null!=r.Props[o[1]]?r.Props[o[1]]:e?e[o[1]]:null;!0===i?i="1":!1===i?i="0":"number"==typeof i&&(i=String(i)),null!=i&&jk(o[0],i,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Sk=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Ck=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Ek(e){var t=[],r=ly;return e||(e={}),e.Application="SheetJS",t[t.length]=Ub,t[t.length]=ly("Properties",null,{xmlns:hy,"xmlns:vt":vy}),Sk.forEach(function(n){if(void 0!==e[n[1]]){var a;switch(n[2]){case"string":a=$b(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false"}void 0!==a&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+$b(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Ak(e){var t=[Ub,ly("Properties",null,{xmlns:uy,"xmlns:vt":vy})];if(!e)return t.join("");var r=1;return vb(e).forEach(function(n){++r,t[t.length]=ly("property",function(e,t){switch(typeof e){case"string":var r=ly("vt:lpwstr",$b(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return ly((0|e)==e?"vt:i4":"vt:r8",$b(String(e)));case"boolean":return ly("vt:bool",e?"true":"false")}if(e instanceof Date)return ly("vt:filetime",cy(e));throw new Error("Unable to serialize "+e)}(e[n],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:$b(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var _k={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Tk(e,t){var r=mv(4),n=mv(4);switch(r.write_shift(4,80==e?31:e),e){case 3:n.write_shift(-4,t);break;case 5:(n=mv(8)).write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,r=t%Math.pow(2,32),n=(t-r)/Math.pow(2,32);n*=1e7;var a=(r*=1e7)/Math.pow(2,32)|0;a>0&&(r%=Math.pow(2,32),n+=a);var s=mv(8);return s.write_shift(4,r),s.write_shift(4,n),s}(t);break;case 31:case 80:for((n=mv(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return vx([r,n])}var Lk=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Mk(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function Ok(e,t,r){var n=mv(8),a=[],s=[],o=8,i=0,l=mv(8),c=mv(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),a.push(c),o+=8+l.length,!t){(c=mv(8)).write_shift(4,0),a.unshift(c);var d=[mv(4)];for(d[0].write_shift(4,e.length),i=0;i<e.length;++i){var u=e[i][0];for((l=mv(8+2*(u.length+1)+(u.length%2?0:2))).write_shift(4,i+2),l.write_shift(4,u.length+1),l.write_shift(0,u,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=vx(d),s.unshift(l),o+=8+l.length}for(i=0;i<e.length;++i)if((!t||t[e[i][0]])&&!(Lk.indexOf(e[i][0])>-1||Ck.indexOf(e[i][0])>-1)&&null!=e[i][1]){var h=e[i][1],m=0;if(t){var g=r[m=+t[e[i][0]]];if("version"==g.p&&"string"==typeof h){var f=h.split(".");h=(+f[0]<<16)+(+f[1]||0)}l=Tk(g.t,h)}else{var p=Mk(h);-1==p&&(p=31,h=String(h)),l=Tk(p,h)}s.push(l),(c=mv(8)).write_shift(4,t?m:2+i),a.push(c),o+=8+l.length}var x=8*(s.length+1);for(i=0;i<s.length;++i)a[i].write_shift(4,x),x+=s[i].length;return n.write_shift(4,o),n.write_shift(4,s.length),vx([n].concat(a).concat(s))}function Dk(e,t,r,n,a,s){var o=mv(a?68:48),i=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,pb.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var l=Ok(e,r,n);if(i.push(l),a){var c=Ok(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),i.push(c)}return vx(i)}function Rk(e,t){return 1===e.read_shift(t)}function Pk(e,t){return t||(t=mv(2)),t.write_shift(2,+!!e),t}function Fk(e){return e.read_shift(2,"u")}function Ik(e,t){return t||(t=mv(2)),t.write_shift(2,e),t}function Bk(e,t,r){return r||(r=mv(2)),r.write_shift(1,"e"==t?+e:+!!e),r.write_shift(1,"e"==t?1:0),r}function zk(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont",s=Zp;(r&&r.biff>=8&&(Zp=1200),r&&8!=r.biff)?12==r.biff&&(a="wstr"):e.read_shift(1)&&(a="dbcs-cont");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return Zp=s,o}function Wk(e){var t=e.t||"",r=mv(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=mv(2*t.length);return n.write_shift(2*t.length,t,"utf16le"),vx([r,n])}function Uk(e,t,r){if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function Hk(e,t,r){var n=e.read_shift(r&&2==r.biff?1:2);return 0===n?(e.l++,""):Uk(e,n,r)}function Vk(e,t,r){if(r.biff>5)return Hk(e,0,r);var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Gk(e,t,r){return r||(r=mv(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function qk(e,t){t||(t=mv(6+2*e.length)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function $k(e){var t=mv(512),r=0,n=e.Target;"file://"==n.slice(0,7)&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(28==s)qk(n=n.slice(1),t);else if(2&s){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var i=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(i.length+1)),r=0;r<i.length;++r)t.write_shift(2,i.charCodeAt(r));t.write_shift(2,0),8&s&&qk(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var l=0;"../"==n.slice(3*l,3*l+3)||"..\\"==n.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,255&n.charCodeAt(r+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Kk(e,t,r,n){return n||(n=mv(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Yk(e,t,r){var n=r.biff>8?4:2;return[e.read_shift(n),e.read_shift(n,"i"),e.read_shift(n,"i")]}function Xk(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:r}}}function Jk(e,t){return t||(t=mv(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Qk(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":case"xla":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;default:throw new Error("unsupported BIFF version")}var s=mv(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Zk(e,t){var r=!t||t.biff>=8?2:1,n=mv(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function ew(e,t,r,n){var a=r&&5==r.biff;n||(n=mv(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return null==s.l&&(s.l=s.length),s}function tw(e,t,r,n){var a=r&&5==r.biff;n||(n=mv(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function rw(e,t,r){if(r.biff<8)return function(e,t,r){3==e[e.l+1]&&e[e.l]++;var n=zk(e,0,r);return 3==n.charCodeAt(0)?n.slice(1):n}(e,0,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);0!==s--;)n.push(Yk(e,r.biff,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function nw(e){var t=mv(24),r=Nv(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return vx([t,$k(e[1])])}function aw(e){var t=e[1].Tooltip,r=mv(10+2*(t.length+1));r.write_shift(2,2048);var n=Nv(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function sw(e,t,r){if(!r.cellStyles)return hv(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),i=e.read_shift(n),l=e.read_shift(2);2==n&&(e.l+=2);var c={s:a,e:s,w:o,ixfe:i,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}var ow=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=wb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(t,r){var n=r||{};n.dateNF||(n.dateNF="yyyymmdd");var a=Ov(function(t,r){var n=[],a=fx(1);switch(r.type){case"base64":a=xx(hx(t));break;case"binary":a=xx(t);break;case"buffer":case"array":a=t}uv(a,0);var s=a.read_shift(1),o=!!(136&s),i=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:i=!0,o=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,d=521;2==s&&(c=a.read_shift(2)),a.l+=3,2!=s&&(c=a.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(d=a.read_shift(2));var u=a.read_shift(2),h=r.codepage||1252;2!=s&&(a.l+=16,a.read_shift(1),0!==a[a.l]&&(h=e[a[a.l]]),a.l+=1,a.l+=2),l&&(a.l+=36);for(var m=[],g={},f=Math.min(a.length,2==s?521:d-10-(i?264:0)),p=l?32:11;a.l<f&&13!=a[a.l];)switch((g={}).name=ix.utils.decode(h,a.slice(a.l,a.l+p)).replace(/[\u0000\r\n].*$/g,""),a.l+=p,g.type=String.fromCharCode(a.read_shift(1)),2==s||l||(g.offset=a.read_shift(4)),g.len=a.read_shift(1),2==s&&(g.offset=a.read_shift(2)),g.dec=a.read_shift(1),g.name.length&&m.push(g),2!=s&&(a.l+=l?13:14),g.type){case"B":i&&8==g.len||!r.WTF||console.log("Skipping "+g.name+":"+g.type);break;case"G":case"P":r.WTF&&console.log("Skipping "+g.name+":"+g.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+g.type)}if(13!==a[a.l]&&(a.l=d-1),13!==a.read_shift(1))throw new Error("DBF Terminator not found "+a.l+" "+a[a.l]);a.l=d;var x=0,b=0;for(n[0]=[],b=0;b!=m.length;++b)n[0][b]=m[b].name;for(;c-- >0;)if(42!==a[a.l])for(++a.l,n[++x]=[],b=0,b=0;b!=m.length;++b){var y=a.slice(a.l,a.l+m[b].len);a.l+=m[b].len,uv(y,0);var v=ix.utils.decode(h,y);switch(m[b].type){case"C":v.trim().length&&(n[x][b]=v.replace(/\s+$/,""));break;case"D":8===v.length?n[x][b]=new Date(+v.slice(0,4),+v.slice(4,6)-1,+v.slice(6,8)):n[x][b]=v;break;case"F":n[x][b]=parseFloat(v.trim());break;case"+":case"I":n[x][b]=l?2147483648^y.read_shift(-4,"i"):y.read_shift(4,"i");break;case"L":switch(v.trim().toUpperCase()){case"Y":case"T":n[x][b]=!0;break;case"N":case"F":n[x][b]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+v+"|")}break;case"M":if(!o)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));n[x][b]="##MEMO##"+(l?parseInt(v.trim(),10):y.read_shift(4));break;case"N":(v=v.replace(/\u0000/g,"").trim())&&"."!=v&&(n[x][b]=+v||0);break;case"@":n[x][b]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":n[x][b]=new Date(864e5*(y.read_shift(4)-2440588)+y.read_shift(4));break;case"Y":n[x][b]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":n[x][b]=-y.read_shift(-8,"f");break;case"B":if(i&&8==m[b].len){n[x][b]=y.read_shift(8,"f");break}case"G":case"P":y.l+=m[b].len;break;case"0":if("_NullFlags"===m[b].name)break;default:throw new Error("DBF Unsupported data type "+m[b].type)}}else a.l+=u;if(2!=s&&a.l<a.length&&26!=a[a.l++])throw new Error("DBF EOF Marker missing "+(a.l-1)+" of "+a.length+" "+a[a.l-1].toString(16));return r&&r.sheetRows&&(n=n.slice(0,r.sheetRows)),r.DBF=m,n}(t,n),n);return a["!cols"]=n.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete n.DBF,a}var n={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return Lv(r(e,t),t)}catch(JE){if(t&&t.WTF)throw JE}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function(e,r){var a=r||{};if(+a.codepage>=0&&ax(+a.codepage),"string"==a.type)throw new Error("Cannot write DBF to JS string");var s=gv(),o=AS(e,{header:1,raw:!0,cellDates:!0}),i=o[0],l=o.slice(1),c=e["!cols"]||[],d=0,u=0,h=0,m=1;for(d=0;d<i.length;++d)if(((c[d]||{}).DBF||{}).name)i[d]=c[d].DBF.name,++h;else if(null!=i[d]){if(++h,"number"===typeof i[d]&&(i[d]=i[d].toString(10)),"string"!==typeof i[d])throw new Error("DBF Invalid column name "+i[d]+" |"+typeof i[d]+"|");if(i.indexOf(i[d])!==d)for(u=0;u<1024;++u)if(-1==i.indexOf(i[d]+"_"+u)){i[d]+="_"+u;break}}var g=Av(e["!ref"]),f=[],p=[],x=[];for(d=0;d<=g.e.c-g.s.c;++d){var b="",y="",v=0,k=[];for(u=0;u<l.length;++u)null!=l[u][d]&&k.push(l[u][d]);if(0!=k.length&&null!=i[d]){for(u=0;u<k.length;++u){switch(typeof k[u]){case"number":y="B";break;case"string":default:y="C";break;case"boolean":y="L";break;case"object":y=k[u]instanceof Date?"D":"C"}v=Math.max(v,String(k[u]).length),b=b&&b!=y?"C":y}v>250&&(v=250),"C"==(y=((c[d]||{}).DBF||{}).type)&&c[d].DBF.len>v&&(v=c[d].DBF.len),"B"==b&&"N"==y&&(b="N",x[d]=c[d].DBF.dec,v=c[d].DBF.len),p[d]="C"==b||"N"==y?v:n[b]||0,m+=p[d],f[d]=b}else f[d]="?"}var w=s.next(32);for(w.write_shift(4,318902576),w.write_shift(4,l.length),w.write_shift(2,296+32*h),w.write_shift(2,m),d=0;d<4;++d)w.write_shift(4,0);for(w.write_shift(4,(+t[ex]||3)<<8),d=0,u=0;d<i.length;++d)if(null!=i[d]){var j=s.next(32),N=(i[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);j.write_shift(1,N,"sbcs"),j.write_shift(1,"?"==f[d]?"C":f[d],"sbcs"),j.write_shift(4,u),j.write_shift(1,p[d]||n[f[d]]||0),j.write_shift(1,x[d]||0),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(1,0),j.write_shift(4,0),j.write_shift(4,0),u+=p[d]||n[f[d]]||0}var S=s.next(264);for(S.write_shift(4,13),d=0;d<65;++d)S.write_shift(4,0);for(d=0;d<l.length;++d){var C=s.next(m);for(C.write_shift(1,0),u=0;u<i.length;++u)if(null!=i[u])switch(f[u]){case"L":C.write_shift(1,null==l[d][u]?63:l[d][u]?84:70);break;case"B":C.write_shift(8,l[d][u]||0,"f");break;case"N":var E="0";for("number"==typeof l[d][u]&&(E=l[d][u].toFixed(x[u]||0)),h=0;h<p[u]-E.length;++h)C.write_shift(1,32);C.write_shift(1,E,"sbcs");break;case"D":l[d][u]?(C.write_shift(4,("0000"+l[d][u].getFullYear()).slice(-4),"sbcs"),C.write_shift(2,("00"+(l[d][u].getMonth()+1)).slice(-2),"sbcs"),C.write_shift(2,("00"+l[d][u].getDate()).slice(-2),"sbcs")):C.write_shift(8,"00000000","sbcs");break;case"C":var A=String(null!=l[d][u]?l[d][u]:"").slice(0,p[u]);for(C.write_shift(1,A,"sbcs"),h=0;h<p[u]-A.length;++h)C.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),iw=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+vb(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(t,r){var n=e[r];return"number"==typeof n?cx(n):n},n=function(e,t,r){var n=t.charCodeAt(0)-32<<4|r.charCodeAt(0)-48;return 59==n?e:cx(n)};function a(e,a){var s,o=e.split(/[\n\r]+/),i=-1,l=-1,c=0,d=0,u=[],h=[],m=null,g={},f=[],p=[],x=[],b=0;for(+a.codepage>=0&&ax(+a.codepage);c!==o.length;++c){b=0;var y,v=o[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),k=v.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),w=k[0];if(v.length>0)switch(w){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==k[1].charAt(0)&&h.push(v.slice(3).replace(/;;/g,";"));break;case"C":var j=!1,N=!1,S=!1,C=!1,E=-1,A=-1;for(d=1;d<k.length;++d)switch(k[d].charAt(0)){case"A":case"G":break;case"X":l=parseInt(k[d].slice(1))-1,N=!0;break;case"Y":for(i=parseInt(k[d].slice(1))-1,N||(l=0),s=u.length;s<=i;++s)u[s]=[];break;case"K":'"'===(y=k[d].slice(1)).charAt(0)?y=y.slice(1,y.length-1):"TRUE"===y?y=!0:"FALSE"===y?y=!1:isNaN(Fb(y))?isNaN(Bb(y).getDate())||(y=Ob(y)):(y=Fb(y),null!==m&&ob(m)&&(y=_b(y))),"undefined"!==typeof ix&&"string"==typeof y&&"string"!=(a||{}).type&&(a||{}).codepage&&(y=ix.utils.decode(a.codepage,y)),j=!0;break;case"E":C=!0;var _=Qw(k[d].slice(1),{r:i,c:l});u[i][l]=[u[i][l],_];break;case"S":S=!0,u[i][l]=[u[i][l],"S5S"];break;case"R":E=parseInt(k[d].slice(1))-1;break;case"C":A=parseInt(k[d].slice(1))-1;break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+v)}if(j&&(u[i][l]&&2==u[i][l].length?u[i][l][0]=y:u[i][l]=y,m=null),S){if(C)throw new Error("SYLK shared formula cannot have own formula");var T=E>-1&&u[E][A];if(!T||!T[1])throw new Error("SYLK shared formula cannot find base");u[i][l][1]=tj(T[1],{r:i-E,c:l-A})}break;case"F":var L=0;for(d=1;d<k.length;++d)switch(k[d].charAt(0)){case"X":l=parseInt(k[d].slice(1))-1,++L;break;case"Y":for(i=parseInt(k[d].slice(1))-1,s=u.length;s<=i;++s)u[s]=[];break;case"M":b=parseInt(k[d].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":m=h[parseInt(k[d].slice(1))];break;case"W":for(x=k[d].slice(1).split(" "),s=parseInt(x[0],10);s<=parseInt(x[1],10);++s)b=parseInt(x[2],10),p[s-1]=0===b?{hidden:!0}:{wch:b},Nw(p[s-1]);break;case"C":p[l=parseInt(k[d].slice(1))-1]||(p[l]={});break;case"R":f[i=parseInt(k[d].slice(1))-1]||(f[i]={}),b>0?(f[i].hpt=b,f[i].hpx=Ew(b)):0===b&&(f[i].hidden=!0);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+v)}L<1&&(m=null);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+v)}}return f.length>0&&(g["!rows"]=f),p.length>0&&(g["!cols"]=p),a&&a.sheetRows&&(u=u.slice(0,a.sheetRows)),[u,g]}function s(e,t){var r=function(e,t){switch(t.type){case"base64":return a(hx(e),t);case"binary":return a(e,t);case"buffer":return a(mx&&Buffer.isBuffer(e)?e.toString("binary"):yx(e),t);case"array":return a(Db(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),n=r[0],s=r[1],o=Ov(n,t);return vb(s).forEach(function(e){o[e]=s[e]}),o}function o(e,t,r,n){var a="C;Y"+(r+1)+";X"+(n+1)+";K";switch(e.t){case"n":a+=e.v||0,e.f&&!e.F&&(a+=";E"+ej(e.f,{r:r,c:n}));break;case"b":a+=e.v?"TRUE":"FALSE";break;case"e":a+=e.w||e.v;break;case"d":a+='"'+(e.w||e.v)+'"';break;case"s":a+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return a}return e["|"]=254,{to_workbook:function(e,t){return Lv(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var r,n,a=["ID;PWXL;N;E"],s=[],i=Av(e["!ref"]),l=Array.isArray(e),c="\r\n";a.push("P;PGeneral"),a.push("F;P0;DG0G8;M255"),e["!cols"]&&(n=a,e["!cols"].forEach(function(e,t){var r="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?r+="0":("number"!=typeof e.width||e.wpx||(e.wpx=kw(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=ww(e.wpx)),"number"==typeof e.wch&&(r+=Math.round(e.wch)))," "!=r.charAt(r.length-1)&&n.push(r)})),e["!rows"]&&function(e,t){t.forEach(function(t,r){var n="F;";t.hidden?n+="M0;":t.hpt?n+="M"+20*t.hpt+";":t.hpx&&(n+="M"+20*Cw(t.hpx)+";"),n.length>2&&e.push(n+"R"+(r+1))})}(a,e["!rows"]),a.push("B;Y"+(i.e.r-i.s.r+1)+";X"+(i.e.c-i.s.c+1)+";D"+[i.s.c,i.s.r,i.e.c,i.e.r].join(" "));for(var d=i.s.r;d<=i.e.r;++d)for(var u=i.s.c;u<=i.e.c;++u){var h=Sv({r:d,c:u});(r=l?(e[d]||[])[u]:e[h])&&(null!=r.v||r.f&&!r.F)&&s.push(o(r,0,d,u))}return a.join(c)+c+s.join(c)+c+"E"+c}}}(),lw=function(){function e(e,t){for(var r=e.split("\n"),n=-1,a=-1,s=0,o=[];s!==r.length;++s)if("BOT"!==r[s].trim()){if(!(n<0)){for(var i=r[s].trim().split(","),l=i[0],c=i[1],d=r[++s]||"";1&(d.match(/["]/g)||[]).length&&s<r.length-1;)d+="\n"+r[++s];switch(d=d.trim(),+l){case-1:if("BOT"===d){o[++n]=[],a=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?o[n][a]=!0:"FALSE"===d?o[n][a]=!1:isNaN(Fb(c))?isNaN(Bb(c).getDate())?o[n][a]=c:o[n][a]=Ob(c):o[n][a]=Fb(c),++a;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),o[n][a++]=""!==d?d:null}if("EOD"===d)break}}else o[++n]=[],a=0;return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}function t(t,r){return Ov(function(t,r){switch(r.type){case"base64":return e(hx(t),r);case"binary":return e(t,r);case"buffer":return e(mx&&Buffer.isBuffer(t)?t.toString("binary"):yx(t),r);case"array":return e(Db(t),r)}throw new Error("Unrecognized type "+r.type)}(t,r),r)}return{to_workbook:function(e,r){return Lv(t(e,r),r)},to_sheet:t,from_sheet:function(){var e=function(e,t,r,n,a){e.push(t),e.push(r+","+n),e.push('"'+a.replace(/"/g,'""')+'"')},t=function(e,t,r,n){e.push(t+","+r),e.push(1==t?'"'+n.replace(/"/g,'""')+'"':n)};return function(r){var n,a=[],s=Av(r["!ref"]),o=Array.isArray(r);e(a,"TABLE",0,1,"sheetjs"),e(a,"VECTORS",0,s.e.r-s.s.r+1,""),e(a,"TUPLES",0,s.e.c-s.s.c+1,""),e(a,"DATA",0,0,"");for(var i=s.s.r;i<=s.e.r;++i){t(a,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=Sv({r:i,c:l});if(n=o?(r[i]||[])[l]:r[c])switch(n.t){case"n":var d=n.w;d||null==n.v||(d=n.v),null==d?n.f&&!n.F?t(a,1,0,"="+n.f):t(a,1,0,""):t(a,0,d,"V");break;case"b":t(a,0,n.v?1:0,n.v?"TRUE":"FALSE");break;case"s":t(a,1,0,isNaN(n.v)?n.v:'="'+n.v+'"');break;case"d":n.w||(n.w=db(n.z||Mx[14],Sb(Ob(n.v)))),t(a,0,n.w,"V");break;default:t(a,1,0,"")}else t(a,1,0,"")}}t(a,-1,0,"EOD");return a.join("\r\n")}}()}}(),cw=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(t,r){return Ov(function(t,r){for(var n=t.split("\n"),a=-1,s=-1,o=0,i=[];o!==n.length;++o){var l=n[o].trim().split(":");if("cell"===l[0]){var c=Nv(l[1]);if(i.length<=c.r)for(a=i.length;a<=c.r;++a)i[a]||(i[a]=[]);switch(a=c.r,s=c.c,l[2]){case"t":i[a][s]=e(l[3]);break;case"v":i[a][s]=+l[3];break;case"vtf":var d=l[l.length-1];case"vtc":"nl"===l[3]?i[a][s]=!!+l[4]:i[a][s]=+l[4],"vtf"==l[2]&&(i[a][s]=[i[a][s],d])}}}return r&&r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}(t,r),r)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),o="--SocialCalcSpreadsheetControlSave--";function i(e){if(!e||!e["!ref"])return"";for(var r,n=[],a=[],s="",o=Cv(e["!ref"]),i=Array.isArray(e),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c)if(s=Sv({r:l,c:c}),(r=i?(e[l]||[])[c]:e[s])&&null!=r.v&&"z"!==r.t){switch(a=["cell",s,"t"],r.t){case"s":case"str":a.push(t(r.v));break;case"n":r.f?(a[2]="vtf",a[3]="n",a[4]=r.v,a[5]=t(r.f)):(a[2]="v",a[3]=r.v);break;case"b":a[2]="vt"+(r.f?"f":"c"),a[3]="nl",a[4]=r.v?"1":"0",a[5]=t(r.f||(r.v?"TRUE":"FALSE"));break;case"d":var d=Sb(Ob(r.v));a[2]="vtc",a[3]="nd",a[4]=""+d,a[5]=r.w||db(r.z||Mx[14],d);break;case"e":continue}n.push(a.join(":"))}return n.push("sheet:c:"+(o.e.c-o.s.c+1)+":r:"+(o.e.r-o.s.r+1)+":tvf:1"),n.push("valueformat:1:text-wiki"),n.join("\n")}return{to_workbook:function(e,t){return Lv(r(e,t),t)},to_sheet:r,from_sheet:function(e){return[n,a,s,a,i(e),o].join("\n")}}}(),dw=function(){function e(e,t,r,n,a){a.raw?t[r][n]=e:""===e||("TRUE"===e?t[r][n]=!0:"FALSE"===e?t[r][n]=!1:isNaN(Fb(e))?isNaN(Bb(e).getDate())?t[r][n]=e:t[r][n]=Ob(e):t[r][n]=Fb(e))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(e){for(var n={},a=!1,s=0,o=0;s<e.length;++s)34==(o=e.charCodeAt(s))?a=!a:!a&&o in t&&(n[o]=(n[o]||0)+1);for(s in o=[],n)Object.prototype.hasOwnProperty.call(n,s)&&o.push([n[s],s]);if(!o.length)for(s in n=r)Object.prototype.hasOwnProperty.call(n,s)&&o.push([n[s],s]);return o.sort(function(e,t){return e[0]-t[0]||r[e[1]]-r[t[1]]}),t[o.pop()[1]]||44}function a(e,t){var r=t||{},a="";var s=r.dense?[]:{},o={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(a=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(a=e.charAt(4),e=e.slice(6)):a=n(e.slice(0,1024)):a=r&&r.FS?r.FS:n(e.slice(0,1024));var i=0,l=0,c=0,d=0,u=0,h=a.charCodeAt(0),m=!1,g=0,f=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var p=null!=r.dateNF?function(e){var t="number"==typeof e?Mx[e]:e;return t=t.replace(gb,"(\\d+)"),new RegExp("^"+t+"$")}(r.dateNF):null;function x(){var t=e.slice(d,u),n={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)n.t="z";else if(r.raw)n.t="s",n.v=t;else if(0===t.trim().length)n.t="s",n.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(n.t="s",n.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(n.t="n",n.f=t.slice(1)):(n.t="s",n.v=t);else if("TRUE"==t)n.t="b",n.v=!0;else if("FALSE"==t)n.t="b",n.v=!1;else if(isNaN(c=Fb(t)))if(!isNaN(Bb(t).getDate())||p&&t.match(p)){n.z=r.dateNF||Mx[14];var a=0;p&&t.match(p)&&(t=function(e,t,r){var n=-1,a=-1,s=-1,o=-1,i=-1,l=-1;(t.match(gb)||[]).forEach(function(e,t){var c=parseInt(r[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":n=c;break;case"d":s=c;break;case"h":o=c;break;case"s":l=c;break;case"m":o>=0?i=c:a=c}}),l>=0&&-1==i&&a>=0&&(i=a,a=-1);var c=(""+(n>=0?n:(new Date).getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==o&&-1==i&&-1==l?c:-1==n&&-1==a&&-1==s?d:c+"T"+d}(0,r.dateNF,t.match(p)||[]),a=1),r.cellDates?(n.t="d",n.v=Ob(t,a)):(n.t="n",n.v=Sb(Ob(t,a))),!1!==r.cellText&&(n.w=db(n.z,n.v instanceof Date?Sb(n.v):n.v)),r.cellNF||delete n.z}else n.t="s",n.v=t;else n.t="n",!1!==r.cellText&&(n.w=t),n.v=c;if("z"==n.t||(r.dense?(s[i]||(s[i]=[]),s[i][l]=n):s[Sv({c:l,r:i})]=n),d=u+1,f=e.charCodeAt(d),o.e.c<l&&(o.e.c=l),o.e.r<i&&(o.e.r=i),g==h)++l;else if(l=0,++i,r.sheetRows&&r.sheetRows<=i)return!0}e:for(;u<e.length;++u)switch(g=e.charCodeAt(u)){case 34:34===f&&(m=!m);break;case h:case 10:case 13:if(!m&&x())break e}return u-d>0&&x(),s["!ref"]=Ev(o),s}function s(t,r){return r&&r.PRN?r.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?a(t,r):Ov(function(t,r){var n=r||{},a=[];if(!t||0===t.length)return a;for(var s=t.split(/[\r\n]/),o=s.length-1;o>=0&&0===s[o].length;)--o;for(var i=10,l=0,c=0;c<=o;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,i=Math.max(i,l);for(c=0;c<=o;++c){a[c]=[];var d=0;for(e(s[c].slice(0,i).trim(),a,c,d,n),d=1;d<=(s[c].length-i)/10+1;++d)e(s[c].slice(i+10*(d-1),i+10*d).trim(),a,c,d,n)}return n.sheetRows&&(a=a.slice(0,n.sheetRows)),a}(t,r),r):a(t,r)}function o(e,t){var r="",n="string"==t.type?[0,0,0,0]:yS(e,t);switch(t.type){case"base64":r=hx(e);break;case"binary":case"string":r=e;break;case"buffer":r=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof ix?ix.utils.decode(t.codepage,e):mx&&Buffer.isBuffer(e)?e.toString("binary"):yx(e);break;case"array":r=Db(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]?r=ry(r.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?r=ry(r):"binary"==t.type&&"undefined"!==typeof ix&&t.codepage&&(r=ix.utils.decode(t.codepage,ix.utils.encode(28591,r))),"socialcalc:version:"==r.slice(0,19)?cw.to_sheet("string"==t.type?r:ry(r),t):s(r,t)}return{to_workbook:function(e,t){return Lv(o(e,t),t)},to_sheet:o,from_sheet:function(e){for(var t,r=[],n=Av(e["!ref"]),a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){for(var o=[],i=n.s.c;i<=n.e.c;++i){var l=Sv({r:s,c:i});if((t=a?(e[s]||[])[i]:e[l])&&null!=t.v){for(var c=(t.w||(Tv(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";o.push(c+(0===i?" ":""))}else o.push("          ")}r.push(o.join(""))}return r.join("\n")}}}();var uw=function(){function e(e,t,r){if(e){uv(e,e.l||0);for(var n=r.Enum||x;e.l<e.length;){var a=e.read_shift(2),s=n[a]||n[65535],o=e.read_shift(2),i=e.l+o,l=s.f&&s.f(e,o,r);if(e.l=i,t(l,s,a))return}}}function t(t,r){if(!t)return t;var n=r||{};var a=n.dense?[]:{},s="Sheet1",o="",i=0,l={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},h=n.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])n.Enum=x,e(t,function(e,t,r){switch(r){case 0:n.vers=e,e>=4096&&(n.qpro=!0);break;case 6:u=e;break;case 204:e&&(o=e);break;case 222:o=e;break;case 15:case 51:n.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==r&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=n.dateNF||Mx[14],n.cellDates&&(e[1].t="d",e[1].v=_b(e[1].v))),n.qpro&&e[3]>i&&(a["!ref"]=Ev(u),l[s]=a,c.push(s),a=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},i=e[3],s=o||"Sheet"+(i+1),o="");var d=n.dense?(a[e[0].r]||[])[e[0].c]:a[Sv(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}n.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[Sv(e[0])]=e[1]}},n);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);n.Enum=b,14==t[2]&&(n.qpro=!0,t.l=0),e(t,function(e,t,r){switch(r){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>i&&(a["!ref"]=Ev(u),l[s]=a,c.push(s),a=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},i=e[3],s="Sheet"+(i+1)),h>0&&e[0].r>=h)break;n.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[Sv(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==i&&(s=e[1])}},n)}if(a["!ref"]=Ev(u),l[o||s]=a,c.push(o||s),!d.length)return{SheetNames:c,Sheets:l};for(var m={},g=[],f=0;f<d.length;++f)l[c[f]]?(g.push(d[f]||c[f]),m[d[f]]=l[d[f]]||l[c[f]]):(g.push(d[f]),m[d[f]]={"!ref":"A1"});return{SheetNames:g,Sheets:m}}function r(e,t,r){var n=[{c:0,r:0},{t:"n",v:0},0,0];return r.qpro&&20768!=r.vers?(n[0].c=e.read_shift(1),n[3]=e.read_shift(1),n[0].r=e.read_shift(2),e.l+=2):(n[2]=e.read_shift(1),n[0].c=e.read_shift(2),n[0].r=e.read_shift(2)),n}function n(e,t,n){var a=e.l+t,s=r(e,0,n);if(s[1].t="s",20768==n.vers){e.l++;var o=e.read_shift(1);return s[1].v=e.read_shift(o,"utf8"),s}return n.qpro&&e.l++,s[1].v=e.read_shift(a-e.l,"cstr"),s}function a(e,t,r){var n=mv(7+r.length);n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(1,39);for(var a=0;a<n.length;++a){var s=r.charCodeAt(a);n.write_shift(1,s>=128?95:s)}return n.write_shift(1,0),n}function s(e,t,r){var n=mv(7);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r,"i"),n}function o(e,t,r){var n=mv(13);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(8,r,"f"),n}function i(e,t,r){var n=32768&t;return t=(n?e:0)+((t&=-32769)>=8192?t-16384:t),(n?"":"$")+(r?jv(t):kv(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function d(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,r,n){var a=mv(6+n.length);a.write_shift(2,e),a.write_shift(1,r),a.write_shift(1,t),a.write_shift(1,39);for(var s=0;s<n.length;++s){var o=n.charCodeAt(s);a.write_shift(1,o>=128?95:o)}return a.write_shift(1,0),a}function h(e,t){var r=d(e),n=e.read_shift(4),a=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===n&&3221225472===a?(r[1].t="e",r[1].v=15):0===n&&3489660928===a?(r[1].t="e",r[1].v=42):r[1].v=0,r;var o=32768&s;return s=(32767&s)-16446,r[1].v=(1-2*o)*(a*Math.pow(2,s+32)+n*Math.pow(2,s)),r}function m(e,t,r,n){var a=mv(14);if(a.write_shift(2,e),a.write_shift(1,r),a.write_shift(1,t),0==n)return a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,65535),a;var s,o=0,i=0,l=0;return n<0&&(o=1,n=-n),i=0|Math.log2(n),0==(2147483648&(l=(n/=Math.pow(2,i-31))>>>0))&&(++i,l=(n/=2)>>>0),n-=l,l|=2147483648,l>>>=0,s=(n*=Math.pow(2,32))>>>0,a.write_shift(4,s),a.write_shift(4,l),i+=16383+(o?32768:0),a.write_shift(2,i),a}function g(e,t){var r=d(e),n=e.read_shift(8,"f");return r[1].v=n,r}function f(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function p(e,t){var r=mv(5+e.length);r.write_shift(2,14e3),r.write_shift(2,t);for(var n=0;n<e.length;++n){var a=e.charCodeAt(n);r[r.l++]=a>127?95:a}return r[r.l++]=0,r}var x={0:{n:"BOF",f:Fk},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,r){var n={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&r.qpro?(n.s.c=e.read_shift(1),e.l++,n.s.r=e.read_shift(2),n.e.c=e.read_shift(1),e.l++,n.e.r=e.read_shift(2),n):(n.s.c=e.read_shift(2),n.s.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),n.e.c=e.read_shift(2),n.e.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),65535==n.s.c&&(n.s.c=n.e.c=n.s.r=n.e.r=0),n)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,n){var a=r(e,0,n);return a[1].v=e.read_shift(2,"i"),a}},14:{n:"NUMBER",f:function(e,t,n){var a=r(e,0,n);return a[1].v=e.read_shift(8,"f"),a}},15:{n:"LABEL",f:n},16:{n:"FORMULA",f:function(e,t,n){var a=e.l+t,s=r(e,0,n);if(s[1].v=e.read_shift(8,"f"),n.qpro)e.l=a;else{var o=e.read_shift(2);!function(e,t){uv(e,0);var r=[],n=0,a="",s="",o="",d="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:r.push(e.read_shift(8,"f"));break;case 1:s=i(t[0].c,e.read_shift(2),!0),a=i(t[0].r,e.read_shift(2),!1),r.push(s+a);break;case 2:var h=i(t[0].c,e.read_shift(2),!0),m=i(t[0].r,e.read_shift(2),!1);s=i(t[0].c,e.read_shift(2),!0),a=i(t[0].r,e.read_shift(2),!1),r.push(h+m+":"+s+a);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:r.push("("+r.pop()+")");break;case 5:r.push(e.read_shift(2));break;case 6:for(var g="";u=e[e.l++];)g+=String.fromCharCode(u);r.push('"'+g.replace(/"/g,'""')+'"');break;case 8:r.push("-"+r.pop());break;case 23:r.push("+"+r.pop());break;case 22:r.push("NOT("+r.pop()+")");break;case 20:case 21:d=r.pop(),o=r.pop(),r.push(["AND","OR"][u-20]+"("+o+","+d+")");break;default:if(u<32&&c[u])d=r.pop(),o=r.pop(),r.push(o+c[u]+d);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(n=l[u][1])&&(n=e[e.l++]),n>r.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+r.join("|")+"|");var f=r.slice(-n);r.length-=n,r.push(l[u][0]+"("+f.join(",")+")")}}}1==r.length?t[1].f=""+r[0]:console.error("WK1 bad formula parse |"+r.join("|")+"|")}(e.slice(e.l,e.l+o),s),e.l+=o}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:n},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:f},222:{n:"SHEETNAMELP",f:function(e,t){var r=e[e.l++];r>t-1&&(r=t-1);for(var n="";n.length<r;)n+=String.fromCharCode(e[e.l++]);return n}},65535:{n:""}},b={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var r=d(e);return r[1].t="s",r[1].v=e.read_shift(t-4,"cstr"),r}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var r=d(e);r[1].v=e.read_shift(2);var n=r[1].v>>1;if(1&r[1].v)switch(7&n){case 0:n=5e3*(n>>3);break;case 1:n=500*(n>>3);break;case 2:n=(n>>3)/20;break;case 3:n=(n>>3)/200;break;case 4:n=(n>>3)/2e3;break;case 5:n=(n>>3)/2e4;break;case 6:n=(n>>3)/16;break;case 7:n=(n>>3)/64}return r[1].v=n,r}},25:{n:"FORMULA19",f:function(e,t){var r=h(e);return e.l+=t-14,r}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var r={},n=e.l+t;e.l<n;){var a=e.read_shift(2);if(14e3==a){for(r[a]=[0,""],r[a][0]=e.read_shift(2);e[e.l];)r[a][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return r}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var r=d(e),n=e.read_shift(4);return r[1].v=n>>6,r}},38:{n:"??"},39:{n:"NUMBER27",f:g},40:{n:"FORMULA28",f:function(e,t){var r=g(e);return e.l+=t-10,r}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:f},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,r){if(r.qpro&&!(t<21)){var n=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[n,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var r=t||{};if(+r.codepage>=0&&ax(+r.codepage),"string"==r.type)throw new Error("Cannot write WK1 to JS string");var n=gv(),i=Av(e["!ref"]),l=Array.isArray(e),c=[];LN(n,0,function(e){var t=mv(2);return t.write_shift(2,e),t}(1030)),LN(n,6,function(e){var t=mv(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(i));for(var d=Math.min(i.e.r,8191),u=i.s.r;u<=d;++u)for(var h=kv(u),m=i.s.c;m<=i.e.c;++m){u===i.s.r&&(c[m]=jv(m));var g=c[m]+h,f=l?(e[u]||[])[m]:e[g];if(f&&"z"!=f.t)if("n"==f.t)(0|f.v)==f.v&&f.v>=-32768&&f.v<=32767?LN(n,13,s(u,m,f.v)):LN(n,14,o(u,m,f.v));else LN(n,15,a(u,m,Tv(f).slice(0,239)))}return LN(n,1),n.end()},book_to_wk3:function(e,t){var r=t||{};if(+r.codepage>=0&&ax(+r.codepage),"string"==r.type)throw new Error("Cannot write WK3 to JS string");var n=gv();LN(n,0,function(e){var t=mv(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var r=0,n=0,a=0,s=0;s<e.SheetNames.length;++s){var o=e.SheetNames[s],i=e.Sheets[o];if(i&&i["!ref"]){++a;var l=Cv(i["!ref"]);r<l.e.r&&(r=l.e.r),n<l.e.c&&(n=l.e.c)}}r>8191&&(r=8191);return t.write_shift(2,r),t.write_shift(1,a),t.write_shift(1,n),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var a=0,s=0;a<e.SheetNames.length;++a)(e.Sheets[e.SheetNames[a]]||{})["!ref"]&&LN(n,27,p(e.SheetNames[a],s++));var o=0;for(a=0;a<e.SheetNames.length;++a){var i=e.Sheets[e.SheetNames[a]];if(i&&i["!ref"]){for(var l=Av(i["!ref"]),c=Array.isArray(i),d=[],h=Math.min(l.e.r,8191),g=l.s.r;g<=h;++g)for(var f=kv(g),x=l.s.c;x<=l.e.c;++x){g===l.s.r&&(d[x]=jv(x));var b=d[x]+f,y=c?(i[g]||[])[x]:i[b];if(y&&"z"!=y.t)if("n"==y.t)LN(n,23,m(g,x,o,y.v));else LN(n,22,u(g,x,o,Tv(y).slice(0,239)))}++o}}return LN(n,1),n.end()},to_workbook:function(e,r){switch(r.type){case"base64":return t(xx(hx(e)),r);case"binary":return t(xx(e),r);case"buffer":case"array":return t(e,r)}throw"Unsupported type "+r.type}}}();var hw=/^\s|\s$|[\t\n\r]/;function mw(e,t){if(!t.bookSST)return"";var r=[Ub];r[r.length]=ly("sst",null,{xmlns:jy[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(null!=e[n]){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(hw)&&(s+=' xml:space="preserve"'),s+=">"+$b(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}var gw=function(e,t){var r=!1;return null==t&&(r=!0,t=mv(15+4*e.t.length)),t.write_shift(1,0),Pv(e.t,t),r?t.slice(0,t.l):t};function fw(e){var t=gv();fv(t,159,function(e,t){return t||(t=mv(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var r=0;r<e.length;++r)fv(t,19,gw(e[r]));return fv(t,160),t.end()}function pw(e){if("undefined"!==typeof ix)return ix.utils.encode(ex,e);for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function xw(e){var t,r,n=0,a=pw(e),s=a.length+1;for((t=fx(s))[0]=a.length,r=1;r!=s;++r)t[r]=a[r-1];for(r=s-1;r>=0;--r)n=((0===(16384&n)?0:1)|n<<1&32767)^t[r];return 52811^n}var bw=function(){function e(e,r){switch(r.type){case"base64":return t(hx(e),r);case"binary":return t(e,r);case"buffer":return t(mx&&Buffer.isBuffer(e)?e.toString("binary"):yx(e),r);case"array":return t(Db(e),r)}throw new Error("Unrecognized type "+r.type)}function t(e,t){var r=(t||{}).dense?[]:{},n=e.match(/\\trowd.*?\\row\b/g);if(!n.length)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:n.length-1}};return n.forEach(function(e,t){Array.isArray(r)&&(r[t]=[]);for(var n,s=/\\\w+\b/g,o=0,i=-1;n=s.exec(e);){if("\\cell"===n[0]){var l=e.slice(o,s.lastIndex-n[0].length);if(" "==l[0]&&(l=l.slice(1)),++i,l.length){var c={v:l,t:"s"};Array.isArray(r)?r[t][i]=c:r[Sv({r:t,c:i})]=c}}o=s.lastIndex}i>a.e.c&&(a.e.c=i)}),r["!ref"]=Ev(a),r}return{to_workbook:function(t,r){return Lv(e(t,r),r)},to_sheet:e,from_sheet:function(e){for(var t,r=["{\\rtf1\\ansi"],n=Av(e["!ref"]),a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){r.push("\\trowd\\trautofit1");for(var o=n.s.c;o<=n.e.c;++o)r.push("\\cellx"+(o+1));for(r.push("\\pard\\intbl"),o=n.s.c;o<=n.e.c;++o){var i=Sv({r:s,c:o});(t=a?(e[s]||[])[o]:e[i])&&(null!=t.v||t.f&&!t.F)&&(r.push(" "+(t.w||(Tv(t),t.w))),r.push("\\cell"))}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}}}();function yw(e){for(var t=0,r=1;3!=t;++t)r=256*r+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var vw=6;function kw(e){return Math.floor((e+Math.round(128/vw)/256)*vw)}function ww(e){return Math.floor((e-5)/vw*100+.5)/100}function jw(e){return Math.round((e*vw+5)/vw*256)/256}function Nw(e){e.width?(e.wpx=kw(e.width),e.wch=ww(e.wpx),e.MDW=vw):e.wpx?(e.wch=ww(e.wpx),e.width=jw(e.wch),e.MDW=vw):"number"==typeof e.wch&&(e.width=jw(e.wch),e.wpx=kw(e.width),e.MDW=vw),e.customWidth&&delete e.customWidth}var Sw=96;function Cw(e){return 96*e/Sw}function Ew(e){return e*Sw/96}function Aw(e,t){var r,n=[Ub,ly("styleSheet",null,{xmlns:jy[0],"xmlns:vt":vy})];return e.SSF&&null!=(r=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=e[n]&&(t[t.length]=ly("numFmt",null,{numFmtId:n,formatCode:$b(e[n])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=ly("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function(e){var t=[];return t[t.length]=ly("cellXfs",null),e.forEach(function(e){t[t.length]=ly("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=ly("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function _w(e,t,r){r||(r=mv(6+4*t.length)),r.write_shift(2,e),Pv(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return null==r.l&&(r.l=r.length),n}function Tw(e,t){t||(t=mv(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=mv(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,r),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var r=0;"superscript"==e.vertAlign?r=1:"subscript"==e.vertAlign&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),sk(e.color,t);var n=0;return"major"==e.scheme&&(n=1),"minor"==e.scheme&&(n=2),t.write_shift(1,n),Pv(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Lw,Mw=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ow=hv;function Dw(e,t){t||(t=mv(84)),Lw||(Lw=wb(Mw));var r=Lw[e.patternType];null==r&&(r=40),t.write_shift(4,r);var n=0;if(40!=r)for(sk({auto:1},t),sk({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Rw(e,t,r){r||(r=mv(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);return r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Pw(e,t){return t||(t=mv(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Fw=hv;function Iw(e){var t;fv(e,613,Dv(1)),fv(e,46,(t||(t=mv(51)),t.write_shift(1,0),Pw(0,t),Pw(0,t),Pw(0,t),Pw(0,t),Pw(0,t),t.length>t.l?t.slice(0,t.l):t)),fv(e,614)}function Bw(e){var t,r;fv(e,619,Dv(1)),fv(e,48,(t={xfId:0,builtinId:0,name:"Normal"},r||(r=mv(52)),r.write_shift(4,t.xfId),r.write_shift(2,1),r.write_shift(1,+t.builtinId),r.write_shift(1,0),Kv(t.name||"",r),r.length>r.l?r.slice(0,r.l):r)),fv(e,620)}function zw(e){fv(e,508,function(e,t,r){var n=mv(2052);return n.write_shift(4,e),Kv(t,n),Kv(r,n),n.length>n.l?n.slice(0,n.l):n}(0,"TableStyleMedium9","PivotStyleMedium4")),fv(e,509)}function Ww(e,t){var r=gv();return fv(r,278),function(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var n=e[0];n<=e[1];++n)null!=t[n]&&++r}),0!=r&&(fv(e,615,Dv(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=t[n]&&fv(e,44,_w(n,t[n]))}),fv(e,616))}}(r,e.SSF),function(e){fv(e,611,Dv(1)),fv(e,43,Tw({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),fv(e,612)}(r),function(e){fv(e,603,Dv(2)),fv(e,45,Dw({patternType:"none"})),fv(e,45,Dw({patternType:"gray125"})),fv(e,604)}(r),Iw(r),function(e){fv(e,626,Dv(1)),fv(e,47,Rw({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),fv(e,627)}(r),function(e,t){fv(e,617,Dv(t.length)),t.forEach(function(t){fv(e,47,Rw(t,0))}),fv(e,618)}(r,t.cellXfs),Bw(r),function(e){fv(e,505,Dv(0)),fv(e,506)}(r),zw(r),fv(r,279),r.end()}function Uw(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var r=[Ub];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Hw(){var e=gv();return fv(e,332),fv(e,334,Dv(1)),fv(e,335,function(e){var t=mv(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Pv(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),fv(e,336),fv(e,339,function(e,t){var r=mv(8+2*t.length);return r.write_shift(4,e),Pv(t,r),r.slice(0,r.l)}(1,"XLDAPR")),fv(e,52),fv(e,35,Dv(514)),fv(e,4096,Dv(0)),fv(e,4097,Ik(1)),fv(e,36),fv(e,53),fv(e,340),fv(e,337,function(e,t){var r=mv(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}(1,!0)),fv(e,51,function(e){var t=mv(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}([[1,0]])),fv(e,338),fv(e,333),e.end()}function Vw(){var e=[Ub];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var Gw=1024;function qw(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[ly("xml",null,{"xmlns:v":_y,"xmlns:o":Ny,"xmlns:x":Sy,"xmlns:mv":Ay}).replace(/\/>/,">"),ly("o:shapelayout",ly("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ly("v:shapetype",[ly("v:stroke",null,{joinstyle:"miter"}),ly("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Gw<1e3*e;)Gw+=1e3;return t.forEach(function(e){var t=Nv(e[0]),r={color2:"#BEFF82",type:"gradient"};"gradient"==r.type&&(r.angle="-180");var n="gradient"==r.type?ly("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=ly("v:fill",n,r);++Gw,a=a.concat(["<v:shape"+iy({id:"_x0000_s"+Gw,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,ly("v:shadow",null,{on:"t",obscured:"t"}),ly("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",oy("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),oy("x:AutoFill","False"),oy("x:Row",String(t.r)),oy("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function $w(e){var t=[Ub,ly("comments",null,{xmlns:jy[0]})],r=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var n=$b(e.a);-1==r.indexOf(n)&&(r.push(n),t.push("<author>"+n+"</author>")),e.T&&e.ID&&-1==r.indexOf("tc="+e.ID)&&(r.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==r.length&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var n=0,a=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?n=r.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(n=r.indexOf($b(e.a))),a.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+n+'"><text>'),a.length<=1)t.push(oy("t",$b(a[0]||"")));else{for(var s="Comment:\n    "+a[0]+"\n",o=1;o<a.length;++o)s+="Reply:\n    "+a[o]+"\n";t.push(oy("t",$b(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Kw(e,t,r){var n=[Ub,ly("ThreadedComments",null,{xmlns:fy}).replace(/[\/]>/,">")];return e.forEach(function(e){var a="";(e[1]||[]).forEach(function(s,o){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var i={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};0==o?a=i.id:i.parentId=a,s.ID=i.id,s.a&&(i.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(ly("threadedComment",oy("text",s.t||""),i))}else delete s.ID})}),n.push("</ThreadedComments>"),n.join("")}var Yw=Rv;function Xw(e){var t=gv(),r=[];return fv(t,628),fv(t,630),e.forEach(function(e){e[1].forEach(function(e){r.indexOf(e.a)>-1||(r.push(e.a.slice(0,54)),fv(t,632,function(e){return Pv(e.slice(0,54))}(e.a)))})}),fv(t,631),fv(t,633),e.forEach(function(e){e[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var a={s:Nv(e[0]),e:Nv(e[0])};fv(t,635,function(e,t){return null==t&&(t=mv(36)),t.write_shift(4,e[1].iauthor),rk(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([a,n])),n.t&&n.t.length>0&&fv(t,637,zv(n)),fv(t,636),delete n.iauthor})}),fv(t,634),fv(t,629),t.end()}var Jw=["xlsb","xlsm","xlam","biff8","xla"];var Qw=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(e,r,n,a){var s=!1,o=!1;0==n.length?o=!0:"["==n.charAt(0)&&(o=!0,n=n.slice(1,-1)),0==a.length?s=!0:"["==a.charAt(0)&&(s=!0,a=a.slice(1,-1));var i=n.length>0?0|parseInt(n,10):0,l=a.length>0?0|parseInt(a,10):0;return s?l+=t.c:--l,o?i+=t.r:--i,r+(s?"":"$")+jv(l)+(o?"":"$")+kv(i)}return function(n,a){return t=a,n.replace(e,r)}}(),Zw=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,ej=function(){return function(e,t){return e.replace(Zw,function(e,r,n,a,s,o){var i=wv(a)-(n?0:t.c),l=vv(o)-(s?0:t.r);return r+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==i?"":n?i+1:"["+i+"]")})}}();function tj(e,t){return e.replace(Zw,function(e,r,n,a,s,o){return r+("$"==n?n+a:jv(wv(a)+t.c))+("$"==s?s+o:kv(vv(o)+t.r))})}function rj(e){e.l+=1}function nj(e,t){var r=e.read_shift(1==t?1:2);return[16383&r,r>>14&1,r>>15&1]}function aj(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return sj(e);12==r.biff&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),o=nj(e,2),i=nj(e,2);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function sj(e){var t=nj(e,2),r=nj(e,2),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function oj(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return function(e){var t=nj(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}(e);var n=e.read_shift(r&&12==r.biff?4:2),a=nj(e,2);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function ij(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:255&r,fQuoted:!!(16384&r),cRel:r>>15,rRel:r>>15}}function lj(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function cj(e){return[e.read_shift(1),e.read_shift(1)]}function dj(e,t){var r=[e.read_shift(1)];if(12==t)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2}switch(r[0]){case 4:r[1]=Rk(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:r[1]=uk[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:r[1]=nk(e);break;case 2:r[1]=Vk(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function uj(e,t,r){for(var n=e.read_shift(12==r.biff?4:2),a=[],s=0;s!=n;++s)a.push((12==r.biff?tk:Xk)(e,8));return a}function hj(e,t,r){var n=0,a=0;12==r.biff?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,0==--a&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var i=0;i!=a;++i)o[s][i]=dj(e,r.biff);return o}function mj(e,t,r){return e.l+=2,[ij(e)]}function gj(e){return e.l+=6,[]}function fj(e){return e.l+=2,[Fk(e),1&e.read_shift(2)]}var pj=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var xj={1:{n:"PtgExp",f:function(e,t,r){return e.l++,r&&12==r.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(r&&2==r.biff?1:2)]}},2:{n:"PtgTbl",f:hv},3:{n:"PtgAdd",f:rj},4:{n:"PtgSub",f:rj},5:{n:"PtgMul",f:rj},6:{n:"PtgDiv",f:rj},7:{n:"PtgPower",f:rj},8:{n:"PtgConcat",f:rj},9:{n:"PtgLt",f:rj},10:{n:"PtgLe",f:rj},11:{n:"PtgEq",f:rj},12:{n:"PtgGe",f:rj},13:{n:"PtgGt",f:rj},14:{n:"PtgNe",f:rj},15:{n:"PtgIsect",f:rj},16:{n:"PtgUnion",f:rj},17:{n:"PtgRange",f:rj},18:{n:"PtgUplus",f:rj},19:{n:"PtgUminus",f:rj},20:{n:"PtgPercent",f:rj},21:{n:"PtgParen",f:rj},22:{n:"PtgMissArg",f:rj},23:{n:"PtgStr",f:function(e,t,r){return e.l++,zk(e,0,r)}},26:{n:"PtgSheet",f:function(e,t,r){return e.l+=5,e.l+=2,e.l+=2==r.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,r){return e.l+=2==r.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,uk[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,nk(e)}},32:{n:"PtgArray",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=2==r.biff?6:12==r.biff?14:7,[n]}},33:{n:"PtgFunc",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[Pj[a],Rj[a],n]}},34:{n:"PtgFuncVar",f:function(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[88==n?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[a,(0===s[0]?Rj:Dj)[s[1]]]}},35:{n:"PtgName",f:function(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[n,0,s]}},36:{n:"PtgRef",f:function(e,t,r){var n=(96&e[e.l])>>5;return e.l+=1,[n,oj(e,0,r)]}},37:{n:"PtgArea",f:function(e,t,r){return[(96&e[e.l++])>>5,aj(e,r.biff>=2&&r.biff,r)]}},38:{n:"PtgMemArea",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=r&&2==r.biff?3:4,[n,e.read_shift(r&&2==r.biff?1:2)]}},39:{n:"PtgMemErr",f:hv},40:{n:"PtgMemNoMem",f:hv},41:{n:"PtgMemFunc",f:function(e,t,r){return[e.read_shift(1)>>>5&3,e.read_shift(r&&2==r.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,12==r.biff&&(e.l+=2),[n]}},43:{n:"PtgAreaErr",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}},44:{n:"PtgRefN",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=function(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return function(e){var t=e.read_shift(2),r=e.read_shift(1),n=(32768&t)>>15,a=(16384&t)>>14;return t&=16383,1==n&&t>=8192&&(t-=16384),1==a&&r>=128&&(r-=256),{r:t,c:r,cRel:a,rRel:n}}(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(16384&s)>>14,i=(32768&s)>>15;if(s&=16383,1==i)for(;a>524287;)a-=1048576;if(1==o)for(;s>8191;)s-=16384;return{r:a,c:s,cRel:o,rRel:i}}(e,0,r);return[n,a]}},45:{n:"PtgAreaN",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=function(e,t,r){if(r.biff<8)return sj(e);var n=e.read_shift(12==r.biff?4:2),a=e.read_shift(12==r.biff?4:2),s=nj(e,2),o=nj(e,2);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}(e,0,r);return[n,a]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,r){return 5==r.biff?function(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(2);return r&&5==r.biff&&(e.l+=12),[n,a,oj(e,0,r)]}},59:{n:"PtgArea3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2,"i");if(r)switch(r.biff){case 5:e.l+=12;break;case 12:0}return[n,a,aj(e,0,r)]}},60:{n:"PtgRefErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[n,a]}},61:{n:"PtgAreaErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[n,a]}},255:{}},bj={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},yj={1:{n:"PtgElfLel",f:fj},2:{n:"PtgElfRw",f:mj},3:{n:"PtgElfCol",f:mj},6:{n:"PtgElfRwV",f:mj},7:{n:"PtgElfColV",f:mj},10:{n:"PtgElfRadical",f:mj},11:{n:"PtgElfRadicalS",f:gj},13:{n:"PtgElfColS",f:gj},15:{n:"PtgElfColSV",f:gj},16:{n:"PtgElfRadicalLel",f:fj},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&r,rt:pj[r>>2&31],idx:n,c:a,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},vj={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=r&&2==r.biff?3:4,[n]}},2:{n:"PtgAttrIf",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,r){e.l+=2;for(var n=e.read_shift(r&&2==r.biff?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&2==r.biff?1:2));return a}},8:{n:"PtgAttrGoto",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,r){e.l+=r&&2==r.biff?3:4}},32:{n:"PtgAttrBaxcel",f:lj},33:{n:"PtgAttrBaxcel",f:lj},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),cj(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),cj(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function kj(e,t,r,n){if(n.biff<8)return hv(e,t);for(var a=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=hj(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=uj(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&12==n.biff&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return 0!==(t=a-e.l)&&s.push(hv(e,t)),s}function wj(e,t,r){for(var n,a,s=e.l+t,o=[];s!=e.l;)t=s-e.l,a=e[e.l],n=xj[a]||xj[bj[a]],24!==a&&25!==a||(n=(24===a?yj:vj)[e[e.l+1]]),n&&n.f?o.push([n.n,n.f(e,t,r)]):hv(e,t);return o}function jj(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)if(2===o[0])a.push('"'+o[1].replace(/"/g,'""')+'"');else a.push(o[1]);else a.push("")}t.push(a.join(","))}return t.join(";")}var Nj={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Sj(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=-1==n[1]?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return null!=r.SID?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=-1==n[1]?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[n[0]][0][3]?(a=-1==n[1]?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Cj(e,t,r){var n=Sj(e,t,r);return"#REF"==n?n:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(n,r)}function Ej(e,t,r,n,a){var s,o,i,l,c=a&&a.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],h=0,m=0,g="";if(!e[0]||!e[0][0])return"";for(var f=-1,p="",x=0,b=e[0].length;x<b;++x){var y=e[0][x];switch(y[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=u.pop(),o=u.pop(),f>=0){switch(e[0][f][1][0]){case 0:p=Pb(" ",e[0][f][1][1]);break;case 1:p=Pb("\r",e[0][f][1][1]);break;default:if(p="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][f][1][0])}o+=p,f=-1}u.push(o+Nj[y[0]]+s);break;case"PtgIsect":s=u.pop(),o=u.pop(),u.push(o+" "+s);break;case"PtgUnion":s=u.pop(),o=u.pop(),u.push(o+","+s);break;case"PtgRange":s=u.pop(),o=u.pop(),u.push(o+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":i=pv(y[1][1],d,a),u.push(bv(i,c));break;case"PtgRefN":i=r?pv(y[1][1],r,a):y[1][1],u.push(bv(i,c));break;case"PtgRef3d":h=y[1][1],i=pv(y[1][2],d,a);g=Cj(n,h,a);u.push(g+"!"+bv(i,c));break;case"PtgFunc":case"PtgFuncVar":var v=y[1][0],k=y[1][1];v||(v=0);var w=0==(v&=127)?[]:u.slice(-v);u.length-=v,"User"===k&&(k=w.shift()),u.push(k+"("+w.join(",")+")");break;case"PtgBool":u.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(y[1]);break;case"PtgNum":u.push(String(y[1]));break;case"PtgStr":u.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=xv(y[1][1],r?{s:r}:d,a),u.push(yv(l,a));break;case"PtgArea":l=xv(y[1][1],d,a),u.push(yv(l,a));break;case"PtgArea3d":h=y[1][1],l=y[1][2],g=Cj(n,h,a),u.push(g+"!"+yv(l,a));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":m=y[1][2];var j=(n.names||[])[m-1]||(n[0]||[])[m],N=j?j.Name:"SH33TJSNAME"+String(m);N&&"_xlfn."==N.slice(0,6)&&!a.xlfn&&(N=N.slice(6)),u.push(N);break;case"PtgNameX":var S,C=y[1][1];if(m=y[1][2],!(a.biff<=5)){var E="";if(14849==((n[C]||[])[0]||[])[0]||(1025==((n[C]||[])[0]||[])[0]?n[C][m]&&n[C][m].itab>0&&(E=n.SheetNames[n[C][m].itab-1]+"!"):E=n.SheetNames[m-1]+"!"),n[C]&&n[C][m])E+=n[C][m].Name;else if(n[0]&&n[0][m])E+=n[0][m].Name;else{var A=(Sj(n,C,a)||"").split(";;");A[m-1]?E=A[m-1]:E+="SH33TJSERRX"}u.push(E);break}C<0&&(C=-C),n[C]&&(S=n[C][m]),S||(S={Name:"SH33TJSERRY"}),u.push(S.Name);break;case"PtgParen":var _="(",T=")";if(f>=0){switch(p="",e[0][f][1][0]){case 2:_=Pb(" ",e[0][f][1][1])+_;break;case 3:_=Pb("\r",e[0][f][1][1])+_;break;case 4:T=Pb(" ",e[0][f][1][1])+T;break;case 5:T=Pb("\r",e[0][f][1][1])+T;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][f][1][0])}f=-1}u.push(_+u.pop()+T);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":i={c:y[1][1],r:y[1][0]};var L={c:r.c,r:r.r};if(n.sharedf[Sv(i)]){var M=n.sharedf[Sv(i)];u.push(Ej(M,d,L,n,a))}else{var O=!1;for(s=0;s!=n.arrayf.length;++s)if(o=n.arrayf[s],!(i.c<o[0].s.c||i.c>o[0].e.c)&&!(i.r<o[0].s.r||i.r>o[0].e.r)){u.push(Ej(o[1],d,L,n,a)),O=!0;break}O||u.push(y[1])}break;case"PtgArray":u.push("{"+jj(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":f=x;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=a.biff&&f>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][x][0])){var D=!0;switch((y=e[0][f])[1][0]){case 4:D=!1;case 0:p=Pb(" ",y[1][1]);break;case 5:D=!1;case 1:p=Pb("\r",y[1][1]);break;default:if(p="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}u.push((D?p:"")+u.pop()+(D?"":p)),f=-1}}if(u.length>1&&a.WTF)throw new Error("bad formula stack");return u[0]}function Aj(e,t,r,n,a){var s=Kk(t,r,a),o=function(e){if(null==e){var t=mv(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return ak("number"==typeof e?e:0)}(e.v),i=mv(6);i.write_shift(2,33),i.write_shift(4,0);for(var l=mv(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return vx([s,o,i,l])}function _j(e,t,r){var n=e.read_shift(4),a=wj(e,n,r),s=e.read_shift(4);return[a,s>0?kj(e,s,a,r):null]}var Tj=_j,Lj=_j,Mj=_j,Oj=_j,Dj={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Rj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Pj={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Fj(e){return("of:="+e.replace(Zw,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function Ij(e){return e.replace(/\./,"!")}var Bj="undefined"!==typeof Map;function zj(e,t,r){var n=0,a=e.length;if(r){if(Bj?r.has(t):Object.prototype.hasOwnProperty.call(r,t))for(var s=Bj?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t:t},e.Count++,e.Unique++,r&&(Bj?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function Wj(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(vw=t.MDW),null!=t.width?r.customWidth=1:null!=t.wpx?n=ww(t.wpx):null!=t.wch&&(n=t.wch),n>-1?(r.width=jw(n),r.customWidth=1):null!=t.width&&(r.width=t.width),t.hidden&&(r.hidden=!0),null!=t.level&&(r.outlineLevel=r.level=t.level),r}function Uj(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(r=[1,1,1,1,.5,.5]),null==e.left&&(e.left=r[0]),null==e.right&&(e.right=r[1]),null==e.top&&(e.top=r[2]),null==e.bottom&&(e.bottom=r[3]),null==e.header&&(e.header=r[4]),null==e.footer&&(e.footer=r[5])}}function Hj(e,t,r){var n=r.revssf[null!=t.z?t.z:"General"],a=60,s=e.length;if(null==n&&r.ssf)for(;a<392;++a)if(null==r.ssf[a]){ub(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Vj(e,t,r){if(e&&e["!ref"]){var n=Av(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}var Gj=["objects","scenarios","selectLockedCells","selectUnlockedCells"],qj=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function $j(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var a="",s=e.t,o=e.v;if("z"!==e.t)switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=uk[e.v];break;case"d":n&&n.cellDates?a=Ob(e.v,-1).toISOString():((e=Rb(e)).t="n",a=""+(e.v=Sb(Ob(e.v)))),"undefined"===typeof e.z&&(e.z=Mx[14]);break;default:a=e.v}var i=oy("v",$b(a)),l={r:t},c=Hj(n.cellXfs,e,n);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){i=oy("v",""+zj(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=o),"string"==typeof e.f&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;i=ly("f",$b(e.f),d)+(null!=e.v?i:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),ly("c",i,l)}function Kj(e,t,r,n){var a,s=[Ub,ly("worksheet",null,{xmlns:jy[0],"xmlns:r":yy})],o=r.SheetNames[e],i="",l=r.Sheets[o];null==l&&(l={});var c=l["!ref"]||"A1",d=Av(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=Ev(d)}n||(n={}),l["!comments"]=[];var u=[];!function(e,t,r,n,a){var s=!1,o={},i=null;if("xlsx"!==n.bookType&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch(JE){}s=!0,o.codeName=ny($b(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),i=(i||"")+ly("outlinePr",null,c)}(s||i)&&(a[a.length]=ly("sheetPr",i,o))}(l,r,e,t,s),s[s.length]=ly("dimension",null,{ref:c}),s[s.length]=function(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ly("sheetViews",ly("sheetView",null,a),{})}(0,0,0,r),t.sheetFormat&&(s[s.length]=ly("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var r,n=["<cols>"],a=0;a!=t.length;++a)(r=t[a])&&(n[n.length]=ly("col",null,Wj(a,r)));return n[n.length]="</cols>",n.join("")}(0,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(i=function(e,t){var r,n,a=[],s=[],o=Av(e["!ref"]),i="",l="",c=[],d=0,u=0,h=e["!rows"],m=Array.isArray(e),g={r:l},f=-1;for(u=o.s.c;u<=o.e.c;++u)c[u]=jv(u);for(d=o.s.r;d<=o.e.r;++d){for(s=[],l=kv(d),u=o.s.c;u<=o.e.c;++u){r=c[u]+l;var p=m?(e[d]||[])[u]:e[r];void 0!==p&&null!=(i=$j(p,r,e,t))&&s.push(i)}(s.length>0||h&&h[d])&&(g={r:l},h&&h[d]&&((n=h[d]).hidden&&(g.hidden=1),f=-1,n.hpx?f=Cw(n.hpx):n.hpt&&(f=n.hpt),f>-1&&(g.ht=f,g.customHeight=1),n.level&&(g.outlineLevel=n.level)),a[a.length]=ly("row",s.join(""),g))}if(h)for(;d<h.length;++d)h&&h[d]&&(g={r:d+1},(n=h[d]).hidden&&(g.hidden=1),f=-1,n.hpx?f=Cw(n.hpx):n.hpt&&(f=n.hpt),f>-1&&(g.ht=f,g.customHeight=1),n.level&&(g.outlineLevel=n.level),a[a.length]=ly("row","",g));return a.join("")}(l,t,0,0),i.length>0&&(s[s.length]=i)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return Gj.forEach(function(r){null!=e[r]&&e[r]&&(t[r]="1")}),qj.forEach(function(r){null==e[r]||e[r]||(t[r]="0")}),e.password&&(t.password=xw(e.password).toString(16).toUpperCase()),ly("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,r,n){var a="string"==typeof e.ref?e.ref:Ev(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Cv(a);o.s.r==o.e.r&&(o.e.r=Cv(t["!ref"]).e.r,a=Ev(o));for(var i=0;i<s.length;++i){var l=s[i];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return i==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),ly("autoFilter",null,{ref:a})}(l["!autofilter"],l,r,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Ev(e[r])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,m,g=-1,f=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(f=bk(n,-1,$b(e[1].Target).replace(/#.*$/,""),fk.HLINK),h["r:id"]="rId"+f),(g=e[1].Target.indexOf("#"))>-1&&(h.location=$b(e[1].Target.slice(g+1))),e[1].Tooltip&&(h.tooltip=$b(e[1].Tooltip)),s[s.length]=ly("hyperlink",null,h))}),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(Uj(m=l["!margins"]),ly("pageMargins",null,m))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=oy("ignoredErrors",ly("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(f=bk(n,-1,"../drawings/drawing"+(e+1)+".xml",fk.DRAW),s[s.length]=ly("drawing",null,{"r:id":"rId"+f}),l["!drawing"]=u),l["!comments"].length>0&&(f=bk(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",fk.VML),s[s.length]=ly("legacyDrawing",null,{"r:id":"rId"+f}),l["!legacy"]=f),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Yj(e,t,r,n){var a=function(e,t,r){var n=mv(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=20*Cw(a.hpx):a.hpt&&(s=20*a.hpt),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var i=0,l=n.l;n.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var u=-1,h=-1,m=d<<10;m<d+1<<10;++m)c.c=m,(Array.isArray(r)?(r[c.r]||[])[c.c]:r[Sv(c)])&&(u<0&&(u=m),h=m);u<0||(++i,n.write_shift(4,u),n.write_shift(4,h))}var g=n.l;return n.l=l,n.write_shift(4,i),n.l=g,n.length>n.l?n.slice(0,n.l):n}(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&fv(e,0,a)}var Xj=tk,Jj=rk;function Qj(e){return[Hv(e),nk(e),"n"]}var Zj=tk,eN=rk;var tN=["left","right","top","bottom","header","footer"];function rN(e,t,r,n,a,s,o){if(void 0===t.v)return!1;var i="";switch(t.t){case"b":i=t.v?"1":"0";break;case"d":(t=Rb(t)).z=t.z||Mx[14],t.v=Sb(Ob(t.v)),t.t="n";break;case"n":case"e":i=""+t.v;break;default:i=t.v}var l={r:r,c:n};switch(l.s=Hj(a.cellXfs,t,a),t.l&&s["!links"].push([Sv(l),t.l]),t.c&&s["!comments"].push([Sv(l),t.c]),t.t){case"s":case"str":return a.bookSST?(i=zj(a.Strings,t.v,a.revStrings),l.t="s",l.v=i,o?fv(e,18,function(e,t,r){return null==r&&(r=mv(8)),Vv(t,r),r.write_shift(4,t.v),r}(0,l)):fv(e,7,function(e,t,r){return null==r&&(r=mv(12)),Uv(t,r),r.write_shift(4,t.v),r}(0,l))):(l.t="str",o?fv(e,17,function(e,t,r){return null==r&&(r=mv(8+4*e.v.length)),Vv(t,r),Pv(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l)):fv(e,6,function(e,t,r){return null==r&&(r=mv(12+4*e.v.length)),Uv(t,r),Pv(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?o?fv(e,13,function(e,t,r){return null==r&&(r=mv(8)),Vv(t,r),Zv(e.v,r),r}(t,l)):fv(e,2,function(e,t,r){return null==r&&(r=mv(12)),Uv(t,r),Zv(e.v,r),r}(t,l)):o?fv(e,16,function(e,t,r){return null==r&&(r=mv(12)),Vv(t,r),ak(e.v,r),r}(t,l)):fv(e,5,function(e,t,r){return null==r&&(r=mv(16)),Uv(t,r),ak(e.v,r),r}(t,l)),!0;case"b":return l.t="b",o?fv(e,15,function(e,t,r){return null==r&&(r=mv(5)),Vv(t,r),r.write_shift(1,e.v?1:0),r}(t,l)):fv(e,4,function(e,t,r){return null==r&&(r=mv(9)),Uv(t,r),r.write_shift(1,e.v?1:0),r}(t,l)),!0;case"e":return l.t="e",o?fv(e,14,function(e,t,r){return null==r&&(r=mv(8)),Vv(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}(t,l)):fv(e,3,function(e,t,r){return null==r&&(r=mv(9)),Uv(t,r),r.write_shift(1,e.v),r}(t,l)),!0}return o?fv(e,12,function(e,t,r){return null==r&&(r=mv(4)),Vv(t,r)}(0,l)):fv(e,1,function(e,t,r){return null==r&&(r=mv(8)),Uv(t,r)}(0,l)),!0}function nN(e,t){var r,n;t&&t["!merges"]&&(fv(e,177,(r=t["!merges"].length,null==n&&(n=mv(4)),n.write_shift(4,r),n)),t["!merges"].forEach(function(t){fv(e,176,eN(t))}),fv(e,178))}function aN(e,t){t&&t["!cols"]&&(fv(e,390),t["!cols"].forEach(function(t,r){t&&fv(e,60,function(e,t,r){null==r&&(r=mv(18));var n=Wj(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,256*(n.width||10)),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),"number"==typeof n.width&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}(r,t))}),fv(e,391))}function sN(e,t){t&&t["!ref"]&&(fv(e,648),fv(e,649,function(e){var t=mv(24);return t.write_shift(4,4),t.write_shift(4,1),rk(e,t),t}(Av(t["!ref"]))),fv(e,650))}function oN(e,t,r){t["!links"].forEach(function(t){if(t[1].Target){var n=bk(r,-1,t[1].Target.replace(/#.*$/,""),fk.HLINK);fv(e,494,function(e,t){var r=mv(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));rk({s:Nv(e[0]),e:Nv(e[0])},r),Jv("rId"+t,r);var n=e[1].Target.indexOf("#");return Pv((-1==n?"":e[1].Target.slice(n+1))||"",r),Pv(e[1].Tooltip||"",r),Pv("",r),r.slice(0,r.l)}(t,n))}}),delete t["!links"]}function iN(e,t,r){fv(e,133),fv(e,137,function(e,t,r){null==r&&(r=mv(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}(0,r)),fv(e,138),fv(e,134)}function lN(e,t){var r,n;t["!protect"]&&fv(e,535,(r=t["!protect"],null==n&&(n=mv(66)),n.write_shift(2,r.password?xw(r.password):0),n.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?n.write_shift(4,null==r[e[0]]||r[e[0]]?0:1):n.write_shift(4,null!=r[e[0]]&&r[e[0]]?0:1)}),n))}function cN(e,t,r,n){var a=gv(),s=r.SheetNames[e],o=r.Sheets[s]||{},i=s;try{r&&r.Workbook&&(i=r.Workbook.Sheets[e].CodeName||i)}catch(JE){}var l,c,d=Av(o["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],fv(a,129),(r.vbaraw||o["!outline"])&&fv(a,147,function(e,t,r){null==r&&(r=mv(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return sk({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),qv(e,r),r.slice(0,r.l)}(i,o["!outline"])),fv(a,148,Jj(d)),iN(a,0,r.Workbook),aN(a,o),function(e,t,r,n){var a,s=Av(t["!ref"]||"A1"),o="",i=[];fv(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=c;++d){o=kv(d),Yj(e,t,s,d);var u=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(i[h]=jv(h)),a=i[h]+o;var m=l?(t[d]||[])[h]:t[a];u=!!m&&rN(e,m,d,h,n,t,u)}}fv(e,146)}(a,o,0,t),lN(a,o),function(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s="string"===typeof a.ref?a.ref:Ev(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,i=Cv(s);i.s.r==i.e.r&&(i.e.r=Cv(t["!ref"]).e.r,s=Ev(i));for(var l=0;l<o.length;++l){var c=o[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),fv(e,161,rk(Av(s))),fv(e,162)}}(a,o,r,e),nN(a,o),oN(a,o,n),o["!margins"]&&fv(a,476,(l=o["!margins"],null==c&&(c=mv(48)),Uj(l),tN.forEach(function(e){ak(l[e],c)}),c)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||sN(a,o),function(e,t,r,n){if(t["!comments"].length>0){var a=bk(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",fk.VML);fv(e,551,Jv("rId"+a)),t["!legacy"]=a}}(a,o,e,n),fv(a,130),a.end()}var dN=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var uN="][*?/\\".split("");function hN(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return uN.forEach(function(n){if(-1!=e.indexOf(n)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}function mN(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,r,n,a=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,r=a,n=!!e.vbaraw,t.forEach(function(e,a){hN(e);for(var s=0;s<a;++s)if(e==t[s])throw new Error("Duplicate Sheet Name: "+e);if(n){var o=r&&r[a]&&r[a].CodeName||e;if(95==o.charCodeAt(0)&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}});for(var s=0;s<e.SheetNames.length;++s)Vj(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}function gN(e){var t=[Ub];t[t.length]=ly("workbook",null,{xmlns:jy[0],"xmlns:r":yy});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(dN.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(n[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=ly("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&a[s]&&a[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:$b(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden"}t[t.length]=ly("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var r={name:e.Name};e.Comment&&(r.comment=e.Comment),null!=e.Sheet&&(r.localSheetId=""+e.Sheet),e.Hidden&&(r.hidden="1"),e.Ref&&(t[t.length]=ly("definedName",$b(e.Ref),r))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function fN(e,t){return t||(t=mv(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),Jv(e.strRelID,t),Pv(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function pN(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var r,n,a=t.Workbook.Sheets,s=0,o=-1,i=-1;s<a.length;++s)!a[s]||!a[s].Hidden&&-1==o?o=s:1==a[s].Hidden&&-1==i&&(i=s);if(!(i>o))fv(e,135),fv(e,158,(r=o,n||(n=mv(29)),n.write_shift(-4,0),n.write_shift(-4,460),n.write_shift(4,28800),n.write_shift(4,17600),n.write_shift(4,500),n.write_shift(4,r),n.write_shift(4,r),n.write_shift(1,120),n.length>n.l?n.slice(0,n.l):n)),fv(e,136)}}function xN(e,t){var r=gv();return fv(r,131),fv(r,128,function(e,t){t||(t=mv(127));for(var r=0;4!=r;++r)t.write_shift(4,0);return Pv("SheetJS",t),Pv(Qp.version,t),Pv(Qp.version,t),Pv("7262",t),t.length>t.l?t.slice(0,t.l):t}()),fv(r,153,function(e,t){t||(t=mv(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),qv(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),pN(r,e),function(e,t){fv(e,143);for(var r=0;r!=t.SheetNames.length;++r)fv(e,156,fN({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]}));fv(e,144)}(r,e),fv(r,132),r.end()}function bN(e,t,r,n,a){return(".bin"===t.slice(-4)?cN:Kj)(e,r,n,a)}function yN(e,t,r){return(".bin"===t.slice(-4)?Xw:$w)(e,r)}function vN(e,t){var r=[];return e.Props&&r.push(function(e,t){var r=[];return vb(_k).map(function(e){for(var t=0;t<wk.length;++t)if(wk[t][1]==e)return wk[t];for(t=0;t<Sk.length;++t)if(Sk[t][1]==e)return Sk[t];throw e}).forEach(function(n){if(null!=e[n[1]]){var a=t&&t.Props&&null!=t.Props[n[1]]?t.Props[n[1]]:e[n[1]];"date"===n[2]&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof a?a=String(a):!0===a||!1===a?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(oy(_k[n[1]]||n[1],a))}}),ly("DocumentProperties",r.join(""),{xmlns:Ny})}(e.Props,t)),e.Custprops&&r.push(function(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&vb(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var n=0;n<wk.length;++n)if(t==wk[n][1])return;for(n=0;n<Sk.length;++n)if(t==Sk[n][1])return;for(n=0;n<r.length;++n)if(t==r[n])return;var s=e[t],o="string";"number"==typeof s?(o="float",s=String(s)):!0===s||!1===s?(o="boolean",s=s?"1":"0"):s=String(s),a.push(ly(Kb(t),s,{"dt:dt":o}))}}),t&&vb(t).forEach(function(r){if(Object.prototype.hasOwnProperty.call(t,r)&&(!e||!Object.prototype.hasOwnProperty.call(e,r))){var n=t[r],s="string";"number"==typeof n?(s="float",n=String(n)):!0===n||!1===n?(s="boolean",n=n?"1":"0"):n instanceof Date?(s="dateTime.tz",n=n.toISOString()):n=String(n),a.push(ly(Kb(r),n,{"dt:dt":s}))}}),"<"+n+' xmlns="'+Ny+'">'+a.join("")+"</"+n+">"}(e.Props,e.Custprops)),r.join("")}function kN(e){return ly("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+ej(e.Ref,{r:0,c:0})})}function wN(e,t,r,n,a,s,o){if(!e||void 0==e.v&&void 0==e.f)return"";var i={};if(e.f&&(i["ss:Formula"]="="+$b(ej(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var l=Nv(e.F.slice(t.length+1));i["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(e.l&&e.l.Target&&(i["ss:HRef"]=$b(e.l.Target),e.l.Tooltip&&(i["x:HRefScreenTip"]=$b(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c==o.c&&c[d].s.r==o.r&&(c[d].e.c>c[d].s.c&&(i["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(i["ss:MergeDown"]=c[d].e.r-c[d].s.r));var u="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":u="Number",h=String(e.v);break;case"b":u="Boolean",h=e.v?"1":"0";break;case"e":u="Error",h=uk[e.v];break;case"d":u="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||Mx[14]);break;case"s":u="String",h=((e.v||"")+"").replace(Gb,function(e){return Vb[e]}).replace(Yb,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var m=Hj(n.cellXfs,e,n);i["ss:StyleID"]="s"+(21+m),i["ss:Index"]=o.c+1;var g=null!=e.v?h:"",f="z"==e.t?"":'<Data ss:Type="'+u+'">'+g+"</Data>";return(e.c||[]).length>0&&(f+=e.c.map(function(e){var t=ly("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return ly("Comment",t,{"ss:Author":e.a})}).join("")),ly("Cell",f,i)}function jN(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Ew(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function NN(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],o=s?function(e,t,r,n){if(!e)return"";if(!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var i=a[o];i.Sheet==r&&(i.Name.match(/^_xlfn\./)||s.push(kN(i)))}return s.join("")}(s,0,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?function(e,t){if(!e["!ref"])return"";var r=Av(e["!ref"]),n=e["!merges"]||[],a=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){Nw(e);var r=!!e.width,n=Wj(t,e),a={"ss:Index":t+1};r&&(a["ss:Width"]=kw(n.width)),e.hidden&&(a["ss:Hidden"]="1"),s.push(ly("Column",null,a))});for(var o=Array.isArray(e),i=r.s.r;i<=r.e.r;++i){for(var l=[jN(i,(e["!rows"]||[])[i])],c=r.s.c;c<=r.e.c;++c){var d=!1;for(a=0;a!=n.length;++a)if(!(n[a].s.c>c)&&!(n[a].s.r>i)&&!(n[a].e.c<c)&&!(n[a].e.r<i)){n[a].s.c==c&&n[a].s.r==i||(d=!0);break}if(!d){var u={r:i,c:c},h=Sv(u),m=o?(e[i]||[])[c]:e[h];l.push(wN(m,h,e,t,0,0,u))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(function(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(ly("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(ly("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(ly("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(ly("Visible",1==n.Workbook.Sheets[r].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&(!n.Workbook.Sheets[s]||n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(oy("ProtectContents","True")),e["!protect"].objects&&a.push(oy("ProtectObjects","True")),e["!protect"].scenarios&&a.push(oy("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||a.push(oy("EnableSelection","UnlockedCells")):a.push(oy("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&a.push("<"+t[1]+"/>")})),0==a.length?"":ly("WorksheetOptions",a.join(""),{xmlns:Sy})}(s,0,e,r)),n.join("")}function SN(e,t){t||(t={}),e.SSF||(e.SSF=Rb(Mx)),e.SSF&&(mb(),hb(e.SSF),t.revssf=jb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Hj(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(vN(e,t)),r.push(""),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(ly("Worksheet",NN(n,t,e),{"ss:Name":$b(e.SheetNames[n])}));return r[2]=function(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var n=[];n.push(ly("NumberFormat",null,{"ss:Format":$b(Mx[e.numFmtId])}));var a={"ss:ID":"s"+(21+t)};r.push(ly("Style",n.join(""),a))}),ly("Styles",r.join(""))}(0,t),r[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];null==a.Sheet&&(a.Name.match(/^_xlfn\./)||r.push(kN(a)))}return ly("Names",r.join(""))}(e),Ub+ly("Workbook",r.join(""),{xmlns:Cy,"xmlns:o":Ny,"xmlns:x":Sy,"xmlns:ss":Cy,"xmlns:dt":Ey,"xmlns:html":Ty})}var CN="e0859ff2f94f6810ab9108002b27b3d9",EN="02d5cdd59c2e1b10939708002b2cf9ae",AN="05d5cdd59c2e1b10939708002b2cf9ae";function _N(e,t){var r=t||{},n=pb.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return pb.utils.cfb_add(n,a,zN(e,r)),8==r.biff&&(e.Props||e.Custprops)&&function(e,t){var r,n=[],a=[],s=[],o=0,i=kb(ik,"n"),l=kb(lk,"n");if(e.Props)for(r=vb(e.Props),o=0;o<r.length;++o)(Object.prototype.hasOwnProperty.call(i,r[o])?n:Object.prototype.hasOwnProperty.call(l,r[o])?a:s).push([r[o],e.Props[r[o]]]);if(e.Custprops)for(r=vb(e.Custprops),o=0;o<r.length;++o)Object.prototype.hasOwnProperty.call(e.Props||{},r[o])||(Object.prototype.hasOwnProperty.call(i,r[o])?n:Object.prototype.hasOwnProperty.call(l,r[o])?a:s).push([r[o],e.Custprops[r[o]]]);var c=[];for(o=0;o<s.length;++o)Lk.indexOf(s[o][0])>-1||Ck.indexOf(s[o][0])>-1||null!=s[o][1]&&c.push(s[o]);a.length&&pb.utils.cfb_add(t,"/\x05SummaryInformation",Dk(a,CN,l,lk)),(n.length||c.length)&&pb.utils.cfb_add(t,"/\x05DocumentSummaryInformation",Dk(n,EN,i,ik,c.length?c:null,AN))}(e,n),8==r.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(r,n){if(0!=n){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==a.slice(-1)&&pb.utils.cfb_add(e,a,t.FileIndex[n].content)}})}(n,pb.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),n}var TN={0:{f:function(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,7&s&&(r.level=7&s),16&s&&(r.hidden=!0),32&s&&(r.hpt=a/20),r}},1:{f:function(e){return[Wv(e)]}},2:{f:function(e){return[Wv(e),Qv(e),"n"]}},3:{f:function(e){return[Wv(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Wv(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Wv(e),nk(e),"n"]}},6:{f:function(e){return[Wv(e),Rv(e),"str"]}},7:{f:function(e){return[Wv(e),e.read_shift(4),"s"]}},8:{f:function(e,t,r){var n=e.l+t,a=Wv(e);a.r=r["!row"];var s=[a,Rv(e),"str"];if(r.cellFormula){e.l+=2;var o=Lj(e,n-e.l,r);s[3]=Ej(o,0,a,r.supbooks,r)}else e.l=n;return s}},9:{f:function(e,t,r){var n=e.l+t,a=Wv(e);a.r=r["!row"];var s=[a,nk(e),"n"];if(r.cellFormula){e.l+=2;var o=Lj(e,n-e.l,r);s[3]=Ej(o,0,a,r.supbooks,r)}else e.l=n;return s}},10:{f:function(e,t,r){var n=e.l+t,a=Wv(e);a.r=r["!row"];var s=[a,e.read_shift(1),"b"];if(r.cellFormula){e.l+=2;var o=Lj(e,n-e.l,r);s[3]=Ej(o,0,a,r.supbooks,r)}else e.l=n;return s}},11:{f:function(e,t,r){var n=e.l+t,a=Wv(e);a.r=r["!row"];var s=[a,e.read_shift(1),"e"];if(r.cellFormula){e.l+=2;var o=Lj(e,n-e.l,r);s[3]=Ej(o,0,a,r.supbooks,r)}else e.l=n;return s}},12:{f:function(e){return[Hv(e)]}},13:{f:function(e){return[Hv(e),Qv(e),"n"]}},14:{f:function(e){return[Hv(e),e.read_shift(1),"e"]}},15:{f:function(e){return[Hv(e),e.read_shift(1),"b"]}},16:{f:Qj},17:{f:function(e){return[Hv(e),Rv(e),"str"]}},18:{f:function(e){return[Hv(e),e.read_shift(4),"s"]}},19:{f:Iv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=Yv(e),o=Mj(e,0,r),i=$v(e);e.l=n;var l={Name:s,Ptg:o};return a<268435455&&(l.Sheet=a),i&&(l.Comment=i),l}},40:{},42:{},43:{f:function(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1),700===e.read_shift(2)&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var i=e.read_shift(1);switch(i>0&&(n.charset=i),e.l++,n.color=function(e){var t={},r=e.read_shift(1)>>>1,n=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),i=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=n;var l=dk[n];l&&(t.rgb=yw(l));break;case 2:t.rgb=yw([s,o,i]);break;case 3:t.theme=n}return 0!=a&&(t.tint=a>0?a/32767:a/32768),t}(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor"}return n.name=Rv(e),n}},44:{f:function(e,t){return[e.read_shift(2),Rv(e)]}},45:{f:Ow},46:{f:Fw},47:{f:function(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:sw},62:{f:function(e){return[Wv(e),Iv(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Sv(r);var n=e.read_shift(1);return 2&n&&(t.l="1"),8&n&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:hv,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var r={},n=e[e.l];return++e.l,r.above=!(64&n),r.left=!(128&n),e.l+=18,r.name=Gv(e,t-19),r}},148:{f:Xj,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Rv(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(65536&n),r.backupFile=!!(64&n),r.checkCompatibility=!!(4096&n),r.date1904=!!(1&n),r.filterPrivacy=!!(8&n),r.hidePivotFieldList=!!(1024&n),r.promptedSolutions=!!(16&n),r.publishItems=!!(2048&n),r.refreshAllConnections=!!(262144&n),r.saveExternalLinkValues=!!(128&n),r.showBorderUnselectedTables=!!(4&n),r.showInkAnnotation=!!(32&n),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(32768&n),r.updateLinks=["userSet","never","always"][n>>8&3],r}},154:{},155:{},156:{f:function(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Xv(e,t-8),r.name=Rv(e),r}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:tk},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Zj},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Rv(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Xv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:rw},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,r){var n=e.l+t,a=ek(e),s=e.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var i=Tj(e,n-e.l,r);o[1]=i}else e.l=n;return o}},427:{f:function(e,t,r){var n=e.l+t,a=[tk(e,16)];if(r.cellFormula){var s=Oj(e,n-e.l,r);a[1]=s,e.l=n}else e.l=n;return a}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return tN.forEach(function(r){t[r]=nk(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var r=e.l+t,n=tk(e,16),a=$v(e),s=Rv(e),o=Rv(e),i=Rv(e);e.l=r;var l={rfx:n,relId:a,loc:s,display:i};return o&&(l.Tooltip=o),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Xv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Yw},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var r=tk(e,16);return t.rfx=r.s,t.ref=Sv(r.s),e.l+=16,t}},636:{T:-1},637:{f:Bv},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:Rv(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function LN(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&Jy(r)&&e.push(r)}}function MN(e,t,r){return e||(e=mv(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function ON(e,t,r,n){if(null!=t.v)switch(t.t){case"d":case"n":var a="d"==t.t?Sb(Ob(t.v)):t.v;return void(a==(0|a)&&a>=0&&a<65536?LN(e,2,function(e,t,r){var n=mv(9);return MN(n,e,t),n.write_shift(2,r),n}(r,n,a)):LN(e,3,function(e,t,r){var n=mv(15);return MN(n,e,t),n.write_shift(8,r,"f"),n}(r,n,a)));case"b":case"e":return void LN(e,5,function(e,t,r,n){var a=mv(9);return MN(a,e,t),Bk(r,n||"b",a),a}(r,n,t.v,t.t));case"s":case"str":return void LN(e,4,function(e,t,r){var n=mv(8+2*r.length);return MN(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}(r,n,(t.v||"").slice(0,255)))}LN(e,1,MN(null,r,n))}function DN(e,t){var r=t||{};for(var n=gv(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(0==a&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return LN(n,4==r.biff?1033:3==r.biff?521:9,Qk(0,16,r)),function(e,t,r,n){var a,s=Array.isArray(t),o=Av(t["!ref"]||"A1"),i="",l=[];if(o.e.c>255||o.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),a=Ev(o)}for(var c=o.s.r;c<=o.e.r;++c){i=kv(c);for(var d=o.s.c;d<=o.e.c;++d){c===o.s.r&&(l[d]=jv(d)),a=l[d]+i;var u=s?(t[c]||[])[d]:t[a];u&&ON(e,u,c,d)}}}(n,e.Sheets[e.SheetNames[a]],0,r),LN(n,10),n.end()}function RN(e,t,r){LN(e,49,function(e,t){var r=e.name||"Arial",n=t&&5==t.biff,a=mv(n?15+r.length:16+2*r.length);return a.write_shift(2,20*(e.sz||12)),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function PN(e,t){if(t){var r=0;t.forEach(function(t,n){++r<=256&&t&&LN(e,125,function(e,t){var r=mv(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,256*e.width),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}(Wj(n,t),n))})}}function FN(e,t,r,n,a){var s=16+Hj(a.cellXfs,t,a);if(null!=t.v||t.bf)if(t.bf)LN(e,6,Aj(t,r,n,0,s));else switch(t.t){case"d":case"n":LN(e,515,function(e,t,r,n){var a=mv(14);return Kk(e,t,n,a),ak(r,a),a}(r,n,"d"==t.t?Sb(Ob(t.v)):t.v,s));break;case"b":case"e":LN(e,517,function(e,t,r,n,a,s){var o=mv(8);return Kk(e,t,n,o),Bk(r,s,o),o}(r,n,t.v,s,0,t.t));break;case"s":case"str":if(a.bookSST)LN(e,253,function(e,t,r,n){var a=mv(10);return Kk(e,t,n,a),a.write_shift(4,r),a}(r,n,zj(a.Strings,t.v,a.revStrings),s));else LN(e,516,function(e,t,r,n,a){var s=!a||8==a.biff,o=mv(+s+8+(1+s)*r.length);return Kk(e,t,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}(r,n,(t.v||"").slice(0,255),s,a));break;default:LN(e,513,Kk(r,n,s))}else LN(e,513,Kk(r,n,s))}function IN(e,t,r){var n,a=gv(),s=r.SheetNames[e],o=r.Sheets[s]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[e]||{},c=Array.isArray(o),d=8==t.biff,u="",h=[],m=Av(o["!ref"]||"A1"),g=d?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}LN(a,2057,Qk(0,16,t)),LN(a,13,Ik(1)),LN(a,12,Ik(100)),LN(a,15,Pk(!0)),LN(a,17,Pk(!1)),LN(a,16,ak(.001)),LN(a,95,Pk(!0)),LN(a,42,Pk(!1)),LN(a,43,Pk(!1)),LN(a,130,Ik(1)),LN(a,128,function(e){var t=mv(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),LN(a,131,Pk(!1)),LN(a,132,Pk(!1)),d&&PN(a,o["!cols"]),LN(a,512,function(e,t){var r=8!=t.biff&&t.biff?2:4,n=mv(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}(m,t)),d&&(o["!links"]=[]);for(var f=m.s.r;f<=m.e.r;++f){u=kv(f);for(var p=m.s.c;p<=m.e.c;++p){f===m.s.r&&(h[p]=jv(p)),n=h[p]+u;var x=c?(o[f]||[])[p]:o[n];x&&(FN(a,x,f,p,t),d&&x.l&&o["!links"].push([n,x.l]))}}var b=l.CodeName||l.name||s;return d&&LN(a,574,function(e){var t=mv(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((i.Views||[])[0])),d&&(o["!merges"]||[]).length&&LN(a,229,function(e){var t=mv(2+8*e.length);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Jk(e[r],t);return t}(o["!merges"])),d&&function(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];LN(e,440,nw(n)),n[1].Tooltip&&LN(e,2048,aw(n))}delete t["!links"]}(a,o),LN(a,442,Gk(b)),d&&function(e,t){var r=mv(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),LN(e,2151,r),(r=mv(39)).write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Jk(Av(t["!ref"]||"A1"),r),r.write_shift(4,4),LN(e,2152,r)}(a,o),LN(a,10),a.end()}function BN(e,t,r){var n=gv(),a=(e||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},i=8==r.biff,l=5==r.biff;(LN(n,2057,Qk(0,5,r)),"xla"==r.bookType&&LN(n,135),LN(n,225,i?Ik(1200):null),LN(n,193,function(e,t){t||(t=mv(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}(2)),l&&LN(n,191),l&&LN(n,192),LN(n,226),LN(n,92,function(e,t){var r=!t||8==t.biff,n=mv(r?112:54);for(n.write_shift(8==t.biff?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}(0,r)),LN(n,66,Ik(i?1200:1252)),i&&LN(n,353,Ik(0)),i&&LN(n,448),LN(n,317,function(e){for(var t=mv(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}(e.SheetNames.length)),i&&e.vbaraw&&LN(n,211),i&&e.vbaraw)&&LN(n,442,Gk(o.CodeName||"ThisWorkbook"));LN(n,156,Ik(17)),LN(n,25,Pk(!1)),LN(n,18,Pk(!1)),LN(n,19,Ik(0)),i&&LN(n,431,Pk(!1)),i&&LN(n,444,Ik(0)),LN(n,61,function(){var e=mv(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),LN(n,64,Pk(!1)),LN(n,141,Ik(0)),LN(n,34,Pk("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Jb(e.Workbook.WBProps.date1904)?"true":"false"}(e))),LN(n,14,Pk(!0)),i&&LN(n,439,Pk(!1)),LN(n,218,Ik(0)),RN(n,0,r),function(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)null!=t[a]&&LN(e,1054,ew(a,t[a],r))})}(n,e.SSF,r),function(e,t){for(var r=0;r<16;++r)LN(e,224,tw({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(r){LN(e,224,tw(r,0,t))})}(n,r),i&&LN(n,352,Pk(!1));var c,d=n.end(),u=gv();i&&LN(u,140,(c||(c=mv(4)),c.write_shift(2,1),c.write_shift(2,1),c)),i&&r.Strings&&function(e,t,r,n){var a=n||(r||[]).length||0;if(a<=8224)return LN(e,t,r,a);var s=t;if(!isNaN(s)){for(var o=r.parts||[],i=0,l=0,c=0;c+(o[i]||8224)<=8224;)c+=o[i]||8224,i++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<a;){for((d=e.next(4)).write_shift(2,60),c=0;c+(o[i]||8224)<=8224;)c+=o[i]||8224,i++;d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}(u,252,function(e){var t=mv(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=Wk(e[n]);var a=vx([t].concat(r));return a.parts=[t.length].concat(r.map(function(e){return e.length})),a}(r.Strings)),LN(u,10);var h=u.end(),m=gv(),g=0,f=0;for(f=0;f<e.SheetNames.length;++f)g+=(i?12:11)+(i?2:1)*e.SheetNames[f].length;var p=d.length+g+h.length;for(f=0;f<e.SheetNames.length;++f){LN(m,133,Zk({pos:p,hs:(s[f]||{}).Hidden||0,dt:0,name:e.SheetNames[f]},r)),p+=t[f].length}var x=m.end();if(g!=x.length)throw new Error("BS8 "+g+" != "+x.length);var b=[];return d.length&&b.push(d),x.length&&b.push(x),h.length&&b.push(h),vx(b)}function zN(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(n&&n["!ref"])Cv(n["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}var a=t||{};switch(a.biff||2){case 8:case 5:return function(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Rb(Mx)),e&&e.SSF&&(mb(),hb(e.SSF),r.revssf=jb(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,pS(r),r.cellXfs=[],Hj(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=IN(a,r,e);return n.unshift(BN(e,n,r)),vx(n)}(e,t);case 4:case 3:case 2:return DN(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function WN(e,t,r,n){for(var a=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var i=0,l=0,c=0;c<a.length;++c)if(!(a[c].s.r>r||a[c].s.c>o)&&!(a[c].e.r<r||a[c].e.c<o)){if(a[c].s.r<r||a[c].s.c<o){i=-1;break}i=a[c].e.r-a[c].s.r+1,l=a[c].e.c-a[c].s.c+1;break}if(!(i<0)){var d=Sv({r:r,c:o}),u=n.dense?(e[r]||[])[o]:e[d],h=u&&null!=u.v&&(u.h||Xb(u.w||(Tv(u),u.w)||""))||"",m={};i>1&&(m.rowspan=i),l>1&&(m.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":u&&(m["data-t"]=u&&u.t||"z",null!=u.v&&(m["data-v"]=u.v),null!=u.z&&(m["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(h='<a href="'+u.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(ly("td",h,m))}}return"<tr>"+s.join("")+"</tr>"}var UN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HN="</body></html>";function VN(e,t,r){return[].join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function GN(e,t){var r=t||{},n=null!=r.header?r.header:UN,a=null!=r.footer?r.footer:HN,s=[n],o=Cv(e["!ref"]);r.dense=Array.isArray(e),s.push(VN(0,0,r));for(var i=o.s.r;i<=o.e.r;++i)s.push(WN(e,o,i,r));return s.push("</table>"+a),s.join("")}function qN(e,t,r){var n=r||{};var a=0,s=0;if(null!=n.origin)if("number"==typeof n.origin)a=n.origin;else{var o="string"==typeof n.origin?Nv(n.origin):n.origin;a=o.r,s=o.c}var i=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,i.length),c={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Cv(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==a&&(c.e.r=a=d.e.r+1)}var u=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,f=0,p=0,x=0,b=0,y=0;for(e["!cols"]||(e["!cols"]=[]);g<i.length&&f<l;++g){var v=i[g];if(KN(v)){if(n.display)continue;m[f]={hidden:!0}}var k=v.children;for(p=x=0;p<k.length;++p){var w=k[p];if(!n.display||!KN(w)){var j=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):ay(w.innerHTML),N=w.getAttribute("data-z")||w.getAttribute("z");for(h=0;h<u.length;++h){var S=u[h];S.s.c==x+s&&S.s.r<f+a&&f+a<=S.e.r&&(x=S.e.c+1-s,h=-1)}y=+w.getAttribute("colspan")||1,((b=+w.getAttribute("rowspan")||1)>1||y>1)&&u.push({s:{r:f+a,c:x+s},e:{r:f+a+(b||1)-1,c:x+s+(y||1)-1}});var C={t:"s",v:j},E=w.getAttribute("data-t")||w.getAttribute("t")||"";null!=j&&(0==j.length?C.t=E||"z":n.raw||0==j.trim().length||"s"==E||("TRUE"===j?C={t:"b",v:!0}:"FALSE"===j?C={t:"b",v:!1}:isNaN(Fb(j))?isNaN(Bb(j).getDate())||(C={t:"d",v:Ob(j)},n.cellDates||(C={t:"n",v:Sb(C.v)}),C.z=n.dateNF||Mx[14]):C={t:"n",v:Fb(j)})),void 0===C.z&&null!=N&&(C.z=N);var A="",_=w.getElementsByTagName("A");if(_&&_.length)for(var T=0;T<_.length&&(!_[T].hasAttribute("href")||"#"==(A=_[T].getAttribute("href")).charAt(0));++T);A&&"#"!=A.charAt(0)&&(C.l={Target:A}),n.dense?(e[f+a]||(e[f+a]=[]),e[f+a][x+s]=C):e[Sv({c:x+s,r:f+a})]=C,c.e.c<x+s&&(c.e.c=x+s),x+=y}}++f}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,f-1+a),e["!ref"]=Ev(c),f>=l&&(e["!fullref"]=Ev((c.e.r=i.length-g+f-1+a,c))),e}function $N(e,t){return qN((t||{}).dense?[]:{},e,t)}function KN(e){var t="",r=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var YN=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+iy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ub+t}}(),XN=function(){var e=function(e){return $b(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",r=function(r,n,a){var s=[];s.push('      <table:table table:name="'+$b(n.SheetNames[a])+'" table:style-name="ta1">\n');var o=0,i=0,l=Cv(r["!ref"]||"A1"),c=r["!merges"]||[],d=0,u=Array.isArray(r);if(r["!cols"])for(i=0;i<=l.e.c;++i)s.push("        <table:table-column"+(r["!cols"][i]?' table:style-name="co'+r["!cols"][i].ods+'"':"")+"></table:table-column>\n");var h="",m=r["!rows"]||[];for(o=0;o<l.s.r;++o)h=m[o]?' table:style-name="ro'+m[o].ods+'"':"",s.push("        <table:table-row"+h+"></table:table-row>\n");for(;o<=l.e.r;++o){for(h=m[o]?' table:style-name="ro'+m[o].ods+'"':"",s.push("        <table:table-row"+h+">\n"),i=0;i<l.s.c;++i)s.push(t);for(;i<=l.e.c;++i){var g=!1,f={},p="";for(d=0;d!=c.length;++d)if(!(c[d].s.c>i)&&!(c[d].s.r>o)&&!(c[d].e.c<i)&&!(c[d].e.r<o)){c[d].s.c==i&&c[d].s.r==o||(g=!0),f["table:number-columns-spanned"]=c[d].e.c-c[d].s.c+1,f["table:number-rows-spanned"]=c[d].e.r-c[d].s.r+1;break}if(g)s.push("          <table:covered-table-cell/>\n");else{var x=Sv({r:o,c:i}),b=u?(r[o]||[])[i]:r[x];if(b&&b.f&&(f["table:formula"]=$b(Fj(b.f)),b.F&&b.F.slice(0,x.length)==x)){var y=Cv(b.F);f["table:number-matrix-columns-spanned"]=y.e.c-y.s.c+1,f["table:number-matrix-rows-spanned"]=y.e.r-y.s.r+1}if(b){switch(b.t){case"b":p=b.v?"TRUE":"FALSE",f["office:value-type"]="boolean",f["office:boolean-value"]=b.v?"true":"false";break;case"n":p=b.w||String(b.v||0),f["office:value-type"]="float",f["office:value"]=b.v||0;break;case"s":case"str":p=null==b.v?"":b.v,f["office:value-type"]="string";break;case"d":p=b.w||Ob(b.v).toISOString(),f["office:value-type"]="date",f["office:date-value"]=Ob(b.v).toISOString(),f["table:style-name"]="ce1";break;default:s.push(t);continue}var v=e(p);if(b.l&&b.l.Target){var k=b.l.Target;"#"==(k="#"==k.charAt(0)?"#"+Ij(k.slice(1)):k).charAt(0)||k.match(/^\w+:/)||(k="../"+k),v=ly("text:a",v,{"xlink:href":k.replace(/&/g,"&amp;")})}s.push("          "+ly("table:table-cell",ly("text:p",v,{}),f)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var n=[Ub],a=iy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=iy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(n.push("<office:document"+a+s+">\n"),n.push(kk().replace(/office:document-meta/g,"office:meta"))):n.push("<office:document-content"+a+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var n=0;n<t["!cols"].length;++n)if(t["!cols"][n]){var a=t["!cols"][n];if(null==a.width&&null==a.wpx&&null==a.wch)continue;Nw(a),a.ods=r;var s=t["!cols"][n].wpx+"px";e.push('  <style:style style:name="co'+r+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++r}});var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var r=0;r<t["!rows"].length;++r)if(t["!rows"][r]){t["!rows"][r].ods=n;var a=t["!rows"][r].hpx+"px";e.push('  <style:style style:name="ro'+n+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+a+'"/>\n'),e.push("  </style:style>\n"),++n}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(n,e),n.push("  <office:body>\n"),n.push("    <office:spreadsheet>\n");for(var o=0;o!=e.SheetNames.length;++o)n.push(r(e.Sheets[e.SheetNames[o]],e,o));return n.push("    </office:spreadsheet>\n"),n.push("  </office:body>\n"),"fods"==t.bookType?n.push("</office:document>"):n.push("</office:document-content>"),n.join("")}}();function JN(e,t){if("fods"==t.bookType)return XN(e,t);var r=Wb(),n="",a=[],s=[];return zb(r,n="mimetype","application/vnd.oasis.opendocument.spreadsheet"),zb(r,n="content.xml",XN(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),zb(r,n="styles.xml",YN(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),zb(r,n="meta.xml",Ub+kk()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),zb(r,n="manifest.rdf",function(e){var t=[Ub];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var r=0;r!=e.length;++r)t.push(yk(e[r][0],e[r][1])),t.push(vk("",e[r][0]));return t.push(yk("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),a.push([n,"application/rdf+xml"]),zb(r,n="META-INF/manifest.xml",function(e){var t=[Ub];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(a)),r}function QN(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ZN(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):xx(ny(e))}function eS(e){var t=e.reduce(function(e,t){return e+t.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(e,n),n+=e.length}),r}function tS(e,t){var r=t?t[0]:0,n=127&e[r];e:if(e[r++]>=128){if(n|=(127&e[r])<<7,e[r++]<128)break e;if(n|=(127&e[r])<<14,e[r++]<128)break e;if(n|=(127&e[r])<<21,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,28),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,35),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,42),++r,e[r++]<128)break e}return t&&(t[0]=r),n}function rS(e){var t=new Uint8Array(7);t[0]=127&e;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383)break e;if(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)break e;if(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)break e;if(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)break e;if(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103)break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function nS(e){var t=0,r=127&e[t];e:if(e[t++]>=128){if(r|=(127&e[t])<<7,e[t++]<128)break e;if(r|=(127&e[t])<<14,e[t++]<128)break e;if(r|=(127&e[t])<<21,e[t++]<128)break e;r|=(127&e[t])<<28}return r}function aS(e){for(var t=[],r=[0];r[0]<e.length;){var n,a=r[0],s=tS(e,r),o=7&s,i=0;if(0==(s=Math.floor(s/8)))break;switch(o){case 0:for(var l=r[0];e[r[0]++]>=128;);n=e.slice(l,r[0]);break;case 5:i=4,n=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,n=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=tS(e,r),n=e.slice(r[0],r[0]+i),r[0]+=i;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(s," at offset ").concat(a))}var c={data:n,type:o};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function sS(e){var t=[];return e.forEach(function(e,r){e.forEach(function(e){e.data&&(t.push(rS(8*r+e.type)),2==e.type&&t.push(rS(e.data.length)),t.push(e.data))})}),eS(t)}function oS(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=tS(e,n),s=aS(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:nS(s[1][0].data),messages:[]};s[2].forEach(function(t){var r=aS(t.data),a=nS(r[3][0].data);o.messages.push({meta:r,data:e.slice(n[0],n[0]+a)}),n[0]+=a}),(null==(t=s[3])?void 0:t[0])&&(o.merge=nS(s[3][0].data)>>>0>0),r.push(o)}return r}function iS(e){var t=[];return e.forEach(function(e){var r=[];r[1]=[{data:rS(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:rS(+!!e.merge),type:0}]);var n=[];e.messages.forEach(function(e){n.push(e.data),e.meta[3]=[{type:0,data:rS(e.data.length)}],r[2].push({data:sS(e.meta),type:2})});var a=sS(r);t.push(rS(a.length)),t.push(a),n.forEach(function(e){return t.push(e)})}),eS(t)}function lS(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=tS(t,r),a=[];r[0]<t.length;){var s=3&t[r[0]];if(0!=s){var o=0,i=0;if(1==s?(i=4+(t[r[0]]>>2&7),o=(224&t[r[0]++])<<3,o|=t[r[0]++]):(i=1+(t[r[0]++]>>2),2==s?(o=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(o=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[eS(a)],0==o)throw new Error("Invalid offset 0");if(o>a[0].length)throw new Error("Invalid offset beyond length");if(i>=o)for(a.push(a[0].slice(-o)),i-=o;i>=a[a.length-1].length;)a.push(a[a.length-1]),i-=a[a.length-1].length;a.push(a[0].slice(-o,-o+i))}else{var l=t[r[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[r[0]],c>1&&(l|=t[r[0]+1]<<8),c>2&&(l|=t[r[0]+2]<<16),c>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=c}a.push(t.slice(r[0],r[0]+l)),r[0]+=l}}var d=eS(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function cS(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(lS(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return eS(t)}function dS(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=rS(n),o=s.length;t.push(s),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=255&o,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return eS(t)}function uS(e,t){var r=new Uint8Array(32),n=QN(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,function(e,t,r){var n=Math.floor(0==r?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(127&n)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=255&a;e[t+15]|=r>=0?0:128}(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function hS(e,t){var r=new Uint8Array(32),n=QN(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function mS(e){return tS(aS(e)[1][0].data)}function gS(e,t,r){var n,a,s,o;if(!(null==(n=e[6])?void 0:n[0])||!(null==(a=e[7])?void 0:a[0]))throw"Mutation only works on post-BNC storages!";if((null==(o=null==(s=e[8])?void 0:s[0])?void 0:o.data)&&nS(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var i=0,l=QN(e[7][0].data),c=0,d=[],u=QN(e[4][0].data),h=0,m=[],g=0;g<t.length;++g)if(null!=t[g]){var f,p;switch(l.setUint16(2*g,c,!0),u.setUint16(2*g,h,!0),typeof t[g]){case"string":f=uS({t:"s",v:t[g]},r),p=hS({t:"s",v:t[g]},r);break;case"number":f=uS({t:"n",v:t[g]},r),p=hS({t:"n",v:t[g]},r);break;case"boolean":f=uS({t:"b",v:t[g]},r),p=hS({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}d.push(f),c+=f.length,m.push(p),h+=p.length,++i}else l.setUint16(2*g,65535,!0),u.setUint16(2*g,65535);for(e[2][0].data=rS(i);g<e[7][0].data.length/2;++g)l.setUint16(2*g,65535,!0),u.setUint16(2*g,65535,!0);return e[6][0].data=eS(d),e[3][0].data=eS(m),i}function fS(e){return function(t){for(var r=0;r!=e.length;++r){var n=e[r];void 0===t[n[0]]&&(t[n[0]]=n[1]),"n"===n[2]&&(t[n[0]]=Number(t[n[0]]))}}}function pS(e){fS([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function xS(e,t){return"ods"==t.bookType?JN(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Cv(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Ev(n)));var s=AS(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&o.push(e)})});var i={},l=[],c=pb.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],r=e[1];2==t.type&&t.name.match(/\.iwa/)&&oS(cS(t.content)).forEach(function(e){l.push(e.id),i[e.id]={deps:[],location:r,type:nS(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var d=l.filter(function(e){return e>1}).map(function(e){return[e,rS(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&oS(cS(t.content)).forEach(function(e){e.messages.forEach(function(t){d.forEach(function(t){e.messages.some(function(e){return 11006!=nS(e.meta[1][0].data)&&function(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}(e.data,t[1])})&&i[t[0]].deps.push(e.id)})})})});for(var u,h=pb.find(c,i[1].location),m=oS(cS(h.content)),g=0;g<m.length;++g){var f=m[g];1==f.id&&(u=f)}var p=mS(aS(u.messages[0].data)[1][0].data);for(m=oS(cS((h=pb.find(c,i[p].location)).content)),g=0;g<m.length;++g)(f=m[g]).id==p&&(u=f);for(p=mS(aS(u.messages[0].data)[2][0].data),m=oS(cS((h=pb.find(c,i[p].location)).content)),g=0;g<m.length;++g)(f=m[g]).id==p&&(u=f);for(p=mS(aS(u.messages[0].data)[2][0].data),m=oS(cS((h=pb.find(c,i[p].location)).content)),g=0;g<m.length;++g)(f=m[g]).id==p&&(u=f);var x=aS(u.messages[0].data);x[6][0].data=rS(n.e.r+1),x[7][0].data=rS(n.e.c+1);for(var b=mS(x[46][0].data),y=pb.find(c,i[b].location),v=oS(cS(y.content)),k=0;k<v.length&&v[k].id!=b;++k);if(v[k].id!=b)throw"Bad ColumnRowUIDMapArchive";var w=aS(v[k].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var j=0;j<=n.e.c;++j){var N=[];N[1]=N[2]=[{type:0,data:rS(j+420690)}],w[1].push({type:2,data:sS(N)}),w[2].push({type:0,data:rS(j)}),w[3].push({type:0,data:rS(j)})}w[4]=[],w[5]=[],w[6]=[];for(var S=0;S<=n.e.r;++S)(N=[])[1]=N[2]=[{type:0,data:rS(S+726270)}],w[4].push({type:2,data:sS(N)}),w[5].push({type:0,data:rS(S)}),w[6].push({type:0,data:rS(S)});v[k].messages[0].data=sS(w),y.content=dS(iS(v)),y.size=y.content.length,delete x[46];var C=aS(x[4][0].data);C[7][0].data=rS(n.e.r+1);var E=mS(aS(C[1][0].data)[2][0].data);if((v=oS(cS((y=pb.find(c,i[E].location)).content)))[0].id!=E)throw"Bad HeaderStorageBucket";var A=aS(v[0].messages[0].data);for(S=0;S<s.length;++S){var _=aS(A[2][0].data);_[1][0].data=rS(S),_[4][0].data=rS(s[S].length),A[2][S]={type:A[2][0].type,data:sS(_)}}v[0].messages[0].data=sS(A),y.content=dS(iS(v)),y.size=y.content.length;var T=mS(C[2][0].data);if((v=oS(cS((y=pb.find(c,i[T].location)).content)))[0].id!=T)throw"Bad HeaderStorageBucket";for(A=aS(v[0].messages[0].data),j=0;j<=n.e.c;++j)(_=aS(A[2][0].data))[1][0].data=rS(j),_[4][0].data=rS(n.e.r+1),A[2][j]={type:A[2][0].type,data:sS(_)};v[0].messages[0].data=sS(A),y.content=dS(iS(v)),y.size=y.content.length;var L=mS(C[4][0].data);!function(){for(var e,t=pb.find(c,i[L].location),r=oS(cS(t.content)),n=0;n<r.length;++n){var a=r[n];a.id==L&&(e=a)}var s=aS(e.messages[0].data);s[3]=[];var l=[];o.forEach(function(e,t){l[1]=[{type:0,data:rS(t)}],l[2]=[{type:0,data:rS(1)}],l[3]=[{type:2,data:ZN(e)}],s[3].push({type:2,data:sS(l)})}),e.messages[0].data=sS(s);var d=dS(iS(r));t.content=d,t.size=t.content.length}();var M=aS(C[3][0].data),O=M[1][0];delete M[2];var D=aS(O.data),R=mS(D[2][0].data);!function(){for(var e,t=pb.find(c,i[R].location),r=oS(cS(t.content)),a=0;a<r.length;++a){var l=r[a];l.id==R&&(e=l)}var d=aS(e.messages[0].data);delete d[6],delete M[7];var u=new Uint8Array(d[5][0].data);d[5]=[];for(var h=0,m=0;m<=n.e.r;++m){var g=aS(u);h+=gS(g,s[m],o),g[1][0].data=rS(m),d[5].push({data:sS(g),type:2})}d[1]=[{type:0,data:rS(n.e.c+1)}],d[2]=[{type:0,data:rS(n.e.r+1)}],d[3]=[{type:0,data:rS(h)}],d[4]=[{type:0,data:rS(n.e.r+1)}],e.messages[0].data=sS(d);var f=dS(iS(r));t.content=f,t.size=t.content.length}(),O.data=sS(D),C[3][0].data=sS(M),x[4][0].data=sS(C),u.messages[0].data=sS(x);var P=dS(iS(m));return h.content=P,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){Gw=1024,e&&!e.SSF&&(e.SSF=Rb(Mx));e&&e.SSF&&(mb(),hb(e.SSF),t.revssf=jb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Bj?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xlsb"==t.bookType?"bin":"xml",n=Jw.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};pS(t=t||{});var s=Wb(),o="",i=0;t.cellXfs=[],Hj(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(zb(s,o="docProps/core.xml",Nk(e.Props,t)),a.coreprops.push(o),bk(t.rels,2,o,fk.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,zb(s,o,Ek(e.Props)),a.extprops.push(o),bk(t.rels,3,o,fk.EXT_PROPS),e.Custprops!==e.Props&&vb(e.Custprops||{}).length>0&&(zb(s,o="docProps/custom.xml",Ak(e.Custprops)),a.custprops.push(o),bk(t.rels,4,o,fk.CUST_PROPS));for(i=1;i<=e.SheetNames.length;++i){var d={"!id":{}},u=e.Sheets[e.SheetNames[i-1]];(u||{})["!type"];if(zb(s,o="xl/worksheets/sheet"+i+"."+r,bN(i-1,o,t,e,d)),a.sheets.push(o),bk(t.wbrels,-1,"worksheets/sheet"+i+"."+r,fk.WS[0]),u){var h=u["!comments"],m=!1,g="";h&&h.length>0&&(zb(s,g="xl/comments"+i+"."+r,yN(h,g,t)),a.comments.push(g),bk(d,-1,"../comments"+i+"."+r,fk.CMNT),m=!0),u["!legacy"]&&m&&zb(s,"xl/drawings/vmlDrawing"+i+".vml",qw(i,u["!comments"])),delete u["!comments"],delete u["!legacy"]}d["!id"].rId1&&zb(s,pk(o),xk(d))}null!=t.Strings&&t.Strings.length>0&&(zb(s,o="xl/sharedStrings."+r,function(e,t,r){return(".bin"===t.slice(-4)?fw:mw)(e,r)}(t.Strings,o,t)),a.strs.push(o),bk(t.wbrels,-1,"sharedStrings."+r,fk.SST));zb(s,o="xl/workbook."+r,function(e,t,r){return(".bin"===t.slice(-4)?xN:gN)(e,r)}(e,o,t)),a.workbooks.push(o),bk(t.rels,1,o,fk.WB),zb(s,o="xl/theme/theme1.xml",Uw(e.Themes,t)),a.themes.push(o),bk(t.wbrels,-1,"theme/theme1.xml",fk.THEME),zb(s,o="xl/styles."+r,function(e,t,r){return(".bin"===t.slice(-4)?Ww:Aw)(e,r)}(e,o,t)),a.styles.push(o),bk(t.wbrels,-1,"styles."+r,fk.STY),e.vbaraw&&n&&(zb(s,o="xl/vbaProject.bin",e.vbaraw),a.vba.push(o),bk(t.wbrels,-1,"vbaProject.bin",fk.VBA));return zb(s,o="xl/metadata."+r,function(e){return(".bin"===e.slice(-4)?Hw:Vw)()}(o)),a.metadata.push(o),bk(t.wbrels,-1,"metadata."+r,fk.XLMETA),zb(s,"[Content_Types].xml",gk(a,t)),zb(s,"_rels/.rels",xk(t.rels)),zb(s,"xl/_rels/workbook."+r+".rels",xk(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):bS(e,t)}function bS(e,t){Gw=1024,e&&!e.SSF&&(e.SSF=Rb(Mx)),e&&e.SSF&&(mb(),hb(e.SSF),t.revssf=jb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Bj?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Jw.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};pS(t=t||{});var s=Wb(),o="",i=0;if(t.cellXfs=[],Hj(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),zb(s,o="docProps/core.xml",Nk(e.Props,t)),a.coreprops.push(o),bk(t.rels,2,o,fk.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,zb(s,o,Ek(e.Props)),a.extprops.push(o),bk(t.rels,3,o,fk.EXT_PROPS),e.Custprops!==e.Props&&vb(e.Custprops||{}).length>0&&(zb(s,o="docProps/custom.xml",Ak(e.Custprops)),a.custprops.push(o),bk(t.rels,4,o,fk.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,i=1;i<=e.SheetNames.length;++i){var u={"!id":{}},h=e.Sheets[e.SheetNames[i-1]];(h||{})["!type"];if(zb(s,o="xl/worksheets/sheet"+i+"."+r,Kj(i-1,t,e,u)),a.sheets.push(o),bk(t.wbrels,-1,"worksheets/sheet"+i+"."+r,fk.WS[0]),h){var m=h["!comments"],g=!1,f="";if(m&&m.length>0){var p=!1;m.forEach(function(e){e[1].forEach(function(e){1==e.T&&(p=!0)})}),p&&(zb(s,f="xl/threadedComments/threadedComment"+i+"."+r,Kw(m,d,t)),a.threadedcomments.push(f),bk(u,-1,"../threadedComments/threadedComment"+i+"."+r,fk.TCMNT)),zb(s,f="xl/comments"+i+"."+r,$w(m)),a.comments.push(f),bk(u,-1,"../comments"+i+"."+r,fk.CMNT),g=!0}h["!legacy"]&&g&&zb(s,"xl/drawings/vmlDrawing"+i+".vml",qw(i,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&zb(s,pk(o),xk(u))}return null!=t.Strings&&t.Strings.length>0&&(zb(s,o="xl/sharedStrings."+r,mw(t.Strings,t)),a.strs.push(o),bk(t.wbrels,-1,"sharedStrings."+r,fk.SST)),zb(s,o="xl/workbook."+r,gN(e)),a.workbooks.push(o),bk(t.rels,1,o,fk.WB),zb(s,o="xl/theme/theme1.xml",Uw(e.Themes,t)),a.themes.push(o),bk(t.wbrels,-1,"theme/theme1.xml",fk.THEME),zb(s,o="xl/styles."+r,Aw(e,t)),a.styles.push(o),bk(t.wbrels,-1,"styles."+r,fk.STY),e.vbaraw&&n&&(zb(s,o="xl/vbaProject.bin",e.vbaraw),a.vba.push(o),bk(t.wbrels,-1,"vbaProject.bin",fk.VBA)),zb(s,o="xl/metadata."+r,Vw()),a.metadata.push(o),bk(t.wbrels,-1,"metadata."+r,fk.XLMETA),d.length>1&&(zb(s,o="xl/persons/person.xml",function(e){var t=[Ub,ly("personList",null,{xmlns:fy,"xmlns:x":jy[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,r){t.push(ly("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(d)),a.people.push(o),bk(t.wbrels,-1,"persons/person.xml",fk.PEOPLE)),zb(s,"[Content_Types].xml",gk(a,t)),zb(s,"_rels/.rels",xk(t.rels)),zb(s,"xl/_rels/workbook.xml.rels",xk(t.wbrels)),delete t.revssf,delete t.ssf,s}function yS(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=hx(e.slice(0,12));break;case"binary":r=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function vS(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return yb(t.file,pb.write(e,{type:mx?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return pb.write(e,t)}function kS(e,t){var r={},n=mx?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?pb.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if("undefined"!==typeof Deno&&"string"==typeof a){if("binary"==t.type||"base64"==t.type)return a;a=new Uint8Array(bx(a))}return t.password&&"undefined"!==typeof encrypt_agile?vS(encrypt_agile(a,t.password),t):"file"===t.type?yb(t.file,a):"string"==t.type?ry(a):a}function wS(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return ux(ny(n));case"binary":return ny(n);case"string":return e;case"file":return yb(t.file,n,"utf8");case"buffer":return mx?gx(n,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(n):wS(n,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function jS(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return"base64"==t.type?ux(r):"string"==t.type?ry(r):r;case"file":return yb(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function NS(e,t){sx(),mN(e);var r=Rb(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),"array"==r.type){r.type="binary";var n=NS(e,r);return r.type="array",bx(n)}var a=0;if(r.sheet&&(a="number"==typeof r.sheet?r.sheet:e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return wS(SN(e,r),r);case"slk":case"sylk":return wS(iw.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return wS(GN(e.Sheets[e.SheetNames[a]],r),r);case"txt":return function(e,t){switch(t.type){case"base64":return ux(e);case"binary":case"string":return e;case"file":return yb(t.file,e,"binary");case"buffer":return mx?gx(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(MS(e.Sheets[e.SheetNames[a]],r),r);case"csv":return wS(LS(e.Sheets[e.SheetNames[a]],r),r,"\ufeff");case"dif":return wS(lw.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return jS(ow.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return wS(dw.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return wS(bw.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return wS(cw.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return wS(JN(e,r),r);case"wk1":return jS(uw.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return jS(uw.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),jS(zN(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),function(e,t){var r=t||{};return vS(_N(e,r),r)}(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var r=Rb(t||{});return kS(xS(e,r),r)}(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function SS(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function CS(e,t,r){var n=r||{};return n.type="file",n.file=t,SS(n),NS(e,n)}function ES(e,t,r,n,a,s,o,i){var l=kv(r),c=i.defval,d=i.raw||!Object.prototype.hasOwnProperty.call(i,"raw"),u=!0,h=1===a?[]:{};if(1!==a)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch(JE){h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[n[m]+l];if(void 0!==g&&void 0!==g.t){var f=g.v;switch(g.t){case"z":if(null==f)break;continue;case"e":f=0==f?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(null!=s[m]){if(null==f)if("e"==g.t&&null===f)h[s[m]]=null;else if(void 0!==c)h[s[m]]=c;else{if(!d||null!==f)continue;h[s[m]]=null}else h[s[m]]=d&&("n"!==g.t||"n"===g.t&&!1!==i.rawNumbers)?f:Tv(g,f,i);null!=f&&(u=!1)}}else{if(void 0===c)continue;null!=s[m]&&(h[s[m]]=c)}}return{row:h,isempty:u}}function AS(e,t){if(null==e||null==e["!ref"])return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,i="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?n=1:"A"===c.header?n=2:Array.isArray(c.header)?n=3:null==c.header&&(n=0),typeof d){case"string":l=Av(d);break;case"number":(l=Av(e["!ref"])).s.r=d;break;default:l=d}n>0&&(a=0);var u=kv(l.s.r),h=[],m=[],g=0,f=0,p=Array.isArray(e),x=l.s.r,b=0,y={};p&&!e[x]&&(e[x]=[]);var v=c.skipHidden&&e["!cols"]||[],k=c.skipHidden&&e["!rows"]||[];for(b=l.s.c;b<=l.e.c;++b)if(!(v[b]||{}).hidden)switch(h[b]=jv(b),r=p?e[x][b]:e[h[b]+u],n){case 1:s[b]=b-l.s.c;break;case 2:s[b]=h[b];break;case 3:s[b]=c.header[b-l.s.c];break;default:if(null==r&&(r={w:"__EMPTY",t:"s"}),i=o=Tv(r,null,c),f=y[o]||0){do{i=o+"_"+f++}while(y[i]);y[o]=f,y[i]=1}else y[o]=1;s[b]=i}for(x=l.s.r+a;x<=l.e.r;++x)if(!(k[x]||{}).hidden){var w=ES(e,l,x,h,n,s,p,c);(!1===w.isempty||(1===n?!1!==c.blankrows:c.blankrows))&&(m[g++]=w.row)}return m.length=g,m}var _S=/"/g;function TS(e,t,r,n,a,s,o,i){for(var l=!0,c=[],d="",u=kv(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=i.dense?(e[r]||[])[h]:e[n[h]+u];if(null==m)d="";else if(null!=m.v){l=!1,d=""+(i.rawNumbers&&"n"==m.t?m.v:Tv(m,null,i));for(var g=0,f=0;g!==d.length;++g)if((f=d.charCodeAt(g))===a||f===s||34===f||i.forceQuotes){d='"'+d.replace(_S,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==m.f||m.F?d="":(l=!1,(d="="+m.f).indexOf(",")>=0&&(d='"'+d.replace(_S,'""')+'"'));c.push(d)}return!1===i.blankrows&&l?null:c.join(o)}function LS(e,t){var r=[],n=null==t?{}:t;if(null==e||null==e["!ref"])return"";var a=Av(e["!ref"]),s=void 0!==n.FS?n.FS:",",o=s.charCodeAt(0),i=void 0!==n.RS?n.RS:"\n",l=i.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),d="",u=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(u[g]=jv(g));for(var f=0,p=a.s.r;p<=a.e.r;++p)(m[p]||{}).hidden||null!=(d=TS(e,a,p,u,o,l,s,n))&&(n.strip&&(d=d.replace(c,"")),(d||!1!==n.blankrows)&&r.push((f++?i:"")+d));return delete n.dense,r.join("")}function MS(e,t){t||(t={}),t.FS="\t",t.RS="\n";var r=LS(e,t);if("undefined"==typeof ix||"string"==t.type)return r;var n=ix.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+n}function OS(e,t,r){var n,a=r||{},s=+!a.skipHeader,o=e||{},i=0,l=0;if(o&&null!=a.origin)if("number"==typeof a.origin)i=a.origin;else{var c="string"==typeof a.origin?Nv(a.origin):a.origin;i=c.r,l=c.c}var d={s:{c:0,r:0},e:{c:l,r:i+t.length-1+s}};if(o["!ref"]){var u=Av(o["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==i&&(i=u.e.r+1,d.e.r=i+t.length-1+s)}else-1==i&&(i=0,d.e.r=t.length-1+s);var h=a.header||[],m=0;t.forEach(function(e,t){vb(e).forEach(function(r){-1==(m=h.indexOf(r))&&(h[m=h.length]=r);var c=e[r],d="z",u="",g=Sv({c:l+m,r:i+t+s});n=DS(o,g),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",a.cellDates||(d="n",c=Sb(c)),u=a.dateNF||Mx[14]):null===c&&a.nullError&&(d="e",c=0),n?(n.t=d,n.v=c,delete n.w,delete n.R,u&&(n.z=u)):o[g]=n={t:d,v:c},u&&(n.z=u)):o[g]=c})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=kv(i);if(s)for(m=0;m<h.length;++m)o[jv(m+l)+g]={t:"s",v:h[m]};return o["!ref"]=Ev(d),o}function DS(e,t,r){if("string"==typeof t){if(Array.isArray(e)){var n=Nv(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return DS(e,Sv("number"!=typeof t?t:{r:t,c:r||0}))}function RS(){return{SheetNames:[],Sheets:{}}}function PS(e,t,r,n){var a=1;if(!r)for(;a<=65535&&-1!=e.SheetNames.indexOf(r="Sheet"+a);++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&-1!=e.SheetNames.indexOf(r=o+a);++a);}if(hN(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function FS(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}var IS={encode_col:jv,encode_row:kv,encode_cell:Sv,encode_range:Ev,decode_col:wv,decode_row:vv,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Nv,decode_range:Cv,format_cell:Tv,sheet_add_aoa:Mv,sheet_add_json:OS,sheet_add_dom:qN,aoa_to_sheet:Ov,json_to_sheet:function(e,t){return OS(null,e,t)},table_to_sheet:$N,table_to_book:function(e,t){return Lv($N(e,t),t)},sheet_to_csv:LS,sheet_to_txt:MS,sheet_to_json:AS,sheet_to_html:GN,sheet_to_formulae:function(e){var t,r="",n="";if(null==e||null==e["!ref"])return[];var a,s=Av(e["!ref"]),o="",i=[],l=[],c=Array.isArray(e);for(a=s.s.c;a<=s.e.c;++a)i[a]=jv(a);for(var d=s.s.r;d<=s.e.r;++d)for(o=kv(d),a=s.s.c;a<=s.e.c;++a)if(r=i[a]+o,n="",void 0!==(t=c?(e[d]||[])[a]:e[r])){if(null!=t.F){if(r=t.F,!t.f)continue;n=t.f,-1==r.indexOf(":")&&(r=r+":"+r)}if(null!=t.f)n=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)n=""+t.v;else if("b"==t.t)n=t.v?"TRUE":"FALSE";else if(void 0!==t.w)n="'"+t.w;else{if(void 0===t.v)continue;n="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=r+"="+n}return l},sheet_to_row_object_array:AS,sheet_get_cell:DS,book_new:RS,book_append_sheet:PS,book_set_sheet_visibility:function(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:FS,cell_set_internal_link:function(e,t,r){return FS(e,"#"+t,r)},cell_add_comment:function(e,t,r){e.c||(e.c=[]),e.c.push({t:t,a:r||"SheetJS"})},sheet_set_array_formula:function(e,t,r,n){for(var a="string"!=typeof t?t:Av(t),s="string"==typeof t?t:Ev(t),o=a.s.r;o<=a.e.r;++o)for(var i=a.s.c;i<=a.e.c;++i){var l=DS(e,o,i);l.t="n",l.F=s,delete l.v,o==a.s.r&&i==a.s.c&&(l.f=r,n&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Qp.version;const BS="http://localhost:5005/api",zS=()=>{const e=sessionStorage.getItem("opti_connect_token");return{"Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""}},WS=()=>{const e=[];try{JSON.parse(localStorage.getItem("gis_distance_measurements")||"[]").forEach(t=>{t&&t.id&&t.name&&e.push({id:t.id,type:"Distance",name:t.name,createdAt:new Date(t.createdAt||Date.now()),savedAt:new Date(t.updatedAt||t.createdAt||Date.now()),fileSize:JSON.stringify(t).length,source:"Manual",data:t})});JSON.parse(localStorage.getItem("gis_polygons")||"[]").forEach(t=>{t&&t.id&&t.name&&e.push({id:t.id,type:"Polygon",name:t.name,createdAt:new Date(t.createdAt||Date.now()),savedAt:new Date(t.updatedAt||t.createdAt||Date.now()),fileSize:JSON.stringify(t).length,source:"Manual",data:t})});JSON.parse(localStorage.getItem("gis_circles")||"[]").forEach(t=>{t&&t.id&&t.name&&e.push({id:t.id,type:"Circle",name:t.name,createdAt:new Date(t.createdAt||Date.now()),savedAt:new Date(t.updatedAt||t.createdAt||Date.now()),fileSize:JSON.stringify(t).length,source:"Manual",data:t})});JSON.parse(localStorage.getItem("gis_elevation_profiles")||"[]").forEach(t=>{t&&t.id&&t.name&&e.push({id:t.id,type:"Elevation",name:t.name,createdAt:new Date(t.createdAt||Date.now()),savedAt:new Date(t.updatedAt||t.createdAt||Date.now()),fileSize:JSON.stringify(t).length,source:"Manual",data:t})});JSON.parse(localStorage.getItem("gis_infrastructures")||"[]").forEach(t=>{t&&t.id&&t.name&&e.push({id:t.id,type:"Infrastructure",name:t.name,createdAt:new Date(t.createdOn||Date.now()),savedAt:new Date(t.updatedOn||t.createdOn||Date.now()),fileSize:JSON.stringify(t).length,source:"KML"===t.source?"Import":"Manual",data:t})});JSON.parse(localStorage.getItem("gis_sector_rf")||"[]").forEach(t=>{t&&t.id&&t.name&&e.push({id:t.id,type:"SectorRF",name:t.name,createdAt:new Date(t.createdAt||Date.now()),savedAt:new Date(t.updatedAt||t.createdAt||Date.now()),fileSize:JSON.stringify(t).length,source:"Manual",data:t})}),e.sort((e,t)=>t.savedAt.getTime()-e.savedAt.getTime())}catch(t){console.error("Error loading from localStorage:",t)}return e},US=async e=>{try{if(!(await fetch("".concat(BS,"/datahub/delete"),{method:"DELETE",headers:zS(),body:JSON.stringify({ids:e})})).ok)throw new Error("Failed to delete");return}catch(n){console.error("Backend delete failed, falling back to localStorage:",n)}const t=(await WS()).filter(t=>e.includes(t.id)),r={};t.forEach(e=>{r[e.type]||(r[e.type]=[]),r[e.type].push(e.id)}),Object.keys(r).forEach(e=>{const t=HS(e),n=JSON.parse(localStorage.getItem(t)||"[]").filter(t=>!r[e].includes(t.id));localStorage.setItem(t,JSON.stringify(n))})},HS=e=>{switch(e){case"Distance":return"gis_distance_measurements";case"Polygon":return"gis_polygons";case"Circle":return"gis_circles";case"Elevation":return"gis_elevation_profiles";case"Infrastructure":return"gis_infrastructures";case"SectorRF":return"gis_sector_rf";default:return""}},VS=e=>{let{map:t,onClose:r}=e;const[a,s]=(0,n.useState)([]),[i,l]=(0,n.useState)(new Set),[c,d]=(0,n.useState)({}),[u,h]=(0,n.useState)({totalEntries:0,totalSize:0,byType:{Distance:0,Polygon:0,Circle:0,Elevation:0,Infrastructure:0,SectorRF:0},bySource:{Manual:0,Import:0}}),[m,g]=(0,n.useState)(!1),[f,p]=(0,n.useState)("list"),[x,b]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),[y,v]=(0,n.useState)(null),[k,w]=(0,n.useState)(!1),[j,N]=(0,n.useState)(null),[S,C]=(0,n.useState)(null),[E,A]=(0,n.useState)(!1),[_,T]=(0,n.useState)("me"),[L,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{const e=JSON.parse(sessionStorage.getItem("opti_connect_user")||"{}");M(e),O()},[]),(0,n.useEffect)(()=>{L&&O()},[_]),(0,n.useEffect)(()=>{D()},[a]);const O=async()=>{try{console.log("\ud83d\udd04 Loading data from database (filter: ".concat(_,")..."));const e=await(async e=>{try{const t=e&&"me"!==e?"".concat(BS,"/datahub/all?userFilter=").concat(e):"".concat(BS,"/datahub/all"),r=await fetch(t,{headers:zS()});if(!r.ok)throw console.error("Fetch failed:",r.status,r.statusText),new Error("Failed to fetch data: ".concat(r.statusText));return(await r.json()).data||[]}catch(t){return console.error("Backend fetch failed, falling back to localStorage:",t),WS()}return WS()})(_);console.log("\u2705 Total entries loaded from database:",e.length),console.log("\ud83d\udcca Entries:",e),s(e)}catch(e){console.error("Error loading data from database:",e),b({isOpen:!0,type:"error",title:"Load Error",message:"Failed to load data from database. Make sure backend is running."})}},D=()=>{const e={totalEntries:a.length,totalSize:0,byType:{Distance:0,Polygon:0,Circle:0,Elevation:0,Infrastructure:0,SectorRF:0},bySource:{Manual:0,Import:0}};a.forEach(t=>{e.totalSize+=t.fileSize,e.byType[t.type]++,e.bySource[t.source]++}),h(e)},R=e=>e.filter(e=>(!c.type||e.type===c.type)&&((!c.source||e.source===c.source)&&(!(c.searchTerm&&!e.name.toLowerCase().includes(c.searchTerm.toLowerCase()))&&(!(c.dateFrom&&e.savedAt<c.dateFrom)&&!(c.dateTo&&e.savedAt>c.dateTo))))),P=e=>{const t=new Set(i);t.has(e)?t.delete(e):t.add(e),l(t)},F=e=>{C(e),A(!0)},I=e=>{if(t)try{switch(e.type){case"Infrastructure":{const r=e.data,n=r.coordinates||{lat:parseFloat(r.latitude),lng:parseFloat(r.longitude)};if(n&&n.lat&&n.lng){const a=new google.maps.Marker({position:n,map:t,title:e.name,animation:google.maps.Animation.DROP,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#EF4444",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}}),s='\n              <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n                <div style="background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%); padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n                  <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\ud83c\udfe2 '.concat(e.name,'</h3>\n                </div>\n                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">\n                  <div style="background: #FEE2E2; padding: 8px; border-radius: 6px;">\n                    <p style="margin: 0; font-size: 10px; font-weight: 600; color: #991B1B; text-transform: uppercase;">Type</p>\n                    <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(r.type||"N/A",'</p>\n                  </div>\n                  <div style="background: #FEE2E2; padding: 8px; border-radius: 6px;">\n                    <p style="margin: 0; font-size: 10px; font-weight: 600; color: #991B1B; text-transform: uppercase;">Unique ID</p>\n                    <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(r.uniqueId||"N/A",'</p>\n                  </div>\n                </div>\n                <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #EF4444;">\n                  <p style="margin: 0 0 6px 0; font-size: 13px; color: #1F2937;"><strong>\ud83c\udd94 Network ID:</strong> ').concat(r.networkId||"N/A",'</p>\n                  <p style="margin: 0 0 6px 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udccd Coordinates:</strong> <span style="font-family: monospace; background: #E5E7EB; padding: 2px 6px; border-radius: 3px; font-size: 11px;">').concat(n.lat.toFixed(6),", ").concat(n.lng.toFixed(6),'</span></p>\n                  <p style="margin: 0 0 6px 0; font-size: 13px; color: #1F2937;"><strong>\ud83c\udfe0 Address:</strong> ').concat(r.address||"N/A",'</p>\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udc64 Contact:</strong> ').concat(r.contactPerson||"N/A","</p>\n                </div>\n                ").concat(r.description?'\n                <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(r.description,"</p>\n                </div>\n                "):"",'\n                <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n                  <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n                </div>\n              </div>\n            "),o=new google.maps.InfoWindow({content:s});o.open(t,a),a.addListener("click",()=>{o.open(t,a)}),t.panTo(n),t.setZoom(15),b({isOpen:!0,type:"success",title:"Viewing on Map",message:"".concat(e.name," displayed at ").concat(n.lat.toFixed(6),", ").concat(n.lng.toFixed(6))})}break}case"Circle":{const r=e.data,n=r.center||r.center_point,a=parseFloat(r.radius||r.circle_radius);if(n&&!isNaN(a)&&a>0){new google.maps.Circle({map:t,center:n,radius:a,fillColor:"#8B5CF6",fillOpacity:.35,strokeColor:"#8B5CF6",strokeOpacity:.8,strokeWeight:2});const s=new google.maps.Marker({position:n,map:t,title:e.name,icon:{path:google.maps.SymbolPath.CIRCLE,scale:6,fillColor:"#8B5CF6",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}}),o=Math.PI*a*a,i=2*Math.PI*a,l='\n              <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n                <div style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n                  <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\u2b55 '.concat(e.name,'</h3>\n                </div>\n                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">\n                  <div style="background: #EDE9FE; padding: 8px; border-radius: 6px;">\n                    <p style="margin: 0; font-size: 10px; font-weight: 600; color: #5B21B6; text-transform: uppercase;">Radius (km)</p>\n                    <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat((a/1e3).toFixed(2),'</p>\n                  </div>\n                  <div style="background: #EDE9FE; padding: 8px; border-radius: 6px;">\n                    <p style="margin: 0; font-size: 10px; font-weight: 600; color: #5B21B6; text-transform: uppercase;">Radius (m)</p>\n                    <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(a.toFixed(0),'</p>\n                  </div>\n                </div>\n                <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #8B5CF6;">\n                  <p style="margin: 0 0 6px 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udccf Area:</strong> ').concat((o/1e6).toFixed(2),' km\xb2</p>\n                  <p style="margin: 0 0 6px 0; font-size: 13px; color: #1F2937;"><strong>\u2b55 Circumference:</strong> ').concat((i/1e3).toFixed(2),' km</p>\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udccd Center:</strong> <span style="font-family: monospace; background: #E5E7EB; padding: 2px 6px; border-radius: 3px; font-size: 11px;">').concat(n.lat.toFixed(6),", ").concat(n.lng.toFixed(6),"</span></p>\n                </div>\n                ").concat(r.description?'\n                <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(r.description,"</p>\n                </div>\n                "):"",'\n                <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n                  <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n                </div>\n              </div>\n            "),c=new google.maps.InfoWindow({content:l});c.open(t,s),s.addListener("click",()=>{c.open(t,s)});const d=new google.maps.LatLngBounds,u=6371e3,h=a/u*(180/Math.PI),m=a/u*(180/Math.PI)/Math.cos(n.lat*Math.PI/180);d.extend({lat:n.lat+h,lng:n.lng+m}),d.extend({lat:n.lat-h,lng:n.lng-m}),t.fitBounds(d),b({isOpen:!0,type:"success",title:"Viewing on Map",message:"".concat(e.name," - Circle with ").concat((a/1e3).toFixed(2)," km radius")})}break}case"Distance":{const r=e.data.points;if(r&&r.length>0){new google.maps.Polyline({map:t,path:r,strokeColor:"#3B82F6",strokeOpacity:1,strokeWeight:3});r.forEach((e,r)=>{new google.maps.Marker({position:e,map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"#3B82F6",fillOpacity:.8,strokeColor:"#FFFFFF",strokeWeight:1.5},label:{text:"".concat(r+1),color:"#FFFFFF",fontSize:"10px",fontWeight:"bold"}})});const n=e.data,a=parseFloat(n.totalDistance||n.total_distance||0),s=r[Math.floor(r.length/2)],o='\n              <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n                <div style="background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%); padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n                  <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\ud83d\udccf '.concat(e.name,'</h3>\n                </div>\n                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">\n                  <div style="background: #DBEAFE; padding: 8px; border-radius: 6px;">\n                    <p style="margin: 0; font-size: 10px; font-weight: 600; color: #1E40AF; text-transform: uppercase;">Total Distance</p>\n                    <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(a.toFixed(2),' km</p>\n                  </div>\n                  <div style="background: #DBEAFE; padding: 8px; border-radius: 6px;">\n                    <p style="margin: 0; font-size: 10px; font-weight: 600; color: #1E40AF; text-transform: uppercase;">Points</p>\n                    <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(r.length,'</p>\n                  </div>\n                </div>\n                <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #3B82F6;">\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udd17 Segments:</strong> ').concat(r.length-1,"</p>\n                </div>\n                ").concat(n.description?'\n                <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(n.description,"</p>\n                </div>\n                "):"",'\n                <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n                  <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n                </div>\n              </div>\n            ");new google.maps.InfoWindow({content:o,position:s}).open(t);const i=new google.maps.LatLngBounds;r.forEach(e=>i.extend(e)),t.fitBounds(i),b({isOpen:!0,type:"success",title:"Viewing on Map",message:"".concat(e.name," - ").concat(a.toFixed(2)," km with ").concat(r.length," points")})}break}case"Polygon":{const r=e.data.vertices||e.data.path;if(r&&r.length>0){const n=e.data;new google.maps.Polygon({map:t,paths:r,fillColor:n.color||"#10B981",fillOpacity:n.fillOpacity||.35,strokeColor:n.color||"#10B981",strokeOpacity:.8,strokeWeight:n.strokeWeight||2});r.forEach((e,r)=>{new google.maps.Marker({position:e,map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:6,fillColor:n.color||"#10B981",fillOpacity:.9,strokeColor:"#FFFFFF",strokeWeight:1.5},label:{text:"".concat(r+1),color:"#FFFFFF",fontSize:"9px",fontWeight:"bold"}})});let a=0,s=0;r.forEach(e=>{a+=e.lat,s+=e.lng});const o={lat:a/r.length,lng:s/r.length},i=n.area||0,l=n.perimeter||0,c='\n              <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n                <div style="background: linear-gradient(135deg, #10B981 0%, #059669 100%); padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n                  <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\u2b1f '.concat(e.name,'</h3>\n                </div>\n                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">\n                  <div style="background: #D1FAE5; padding: 8px; border-radius: 6px;">\n                    <p style="margin: 0; font-size: 10px; font-weight: 600; color: #065F46; text-transform: uppercase;">Area</p>\n                    <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(i<1e4?"".concat(i.toFixed(2)," m\xb2"):i<1e6?"".concat((i/1e4).toFixed(2)," ha"):"".concat((i/1e6).toFixed(2)," km\xb2"),'</p>\n                  </div>\n                  <div style="background: #D1FAE5; padding: 8px; border-radius: 6px;">\n                    <p style="margin: 0; font-size: 10px; font-weight: 600; color: #065F46; text-transform: uppercase;">Vertices</p>\n                    <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(r.length,'</p>\n                  </div>\n                </div>\n                <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #10B981;">\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udccf Perimeter:</strong> ').concat((l/1e3).toFixed(2)," km</p>\n                </div>\n                ").concat(n.description?'\n                <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(n.description,"</p>\n                </div>\n                "):"",'\n                <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n                  <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n                </div>\n              </div>\n            ");new google.maps.InfoWindow({content:c,position:o}).open(t);const d=new google.maps.LatLngBounds;r.forEach(e=>d.extend(e)),t.fitBounds(d),b({isOpen:!0,type:"success",title:"Viewing on Map",message:"".concat(e.name," - Polygon with ").concat(r.length," vertices")})}break}case"Elevation":{const r=e.data.points;if(r&&r.length>0){new google.maps.Polyline({map:t,path:r,strokeColor:"#F59E0B",strokeOpacity:1,strokeWeight:3});r.forEach((e,r)=>{new google.maps.Marker({position:e,map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"#F59E0B",fillOpacity:.8,strokeColor:"#FFFFFF",strokeWeight:1.5},label:{text:"".concat(r+1),color:"#FFFFFF",fontSize:"10px",fontWeight:"bold"}})});const n=e.data,a=Math.floor(r.length/2),s=r[a],o=300,i=100,l=n.elevationData||[];let c="",d=1/0,u=-1/0;if(l.length>0){l.forEach(e=>{const t=e.elevation||0;d=Math.min(d,t),u=Math.max(u,t)});const e=u-d||1;c=l.map((t,r)=>{const n=r/(l.length-1)*o,a=(t.elevation-d)/e,s=i-(a*(i-20)+10);return"".concat(n,",").concat(s)}).join(" ")}else c=r.map((e,t)=>{const n=t/(r.length-1)*o,a=i-(30*Math.sin(.5*t)+50);return"".concat(n,",").concat(a)}).join(" ");const h='\n              <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n                <div style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n                  <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\ud83d\udcc8 '.concat(e.name,'</h3>\n                </div>\n                <div style="background: #FFFBEB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n                  <p style="margin: 0 0 8px 0; font-size: 12px; font-weight: 600; color: #92400E; text-align: center;">\ud83d\udcca Elevation Graph</p>\n                  <svg width="').concat(o,'" height="').concat(i,'" style="background: white; border-radius: 4px; border: 1px solid #FDE68A;">\n                    <polyline points="').concat(c,'" fill="none" stroke="#F59E0B" stroke-width="2"/>\n                    <polyline points="0,').concat(i," ").concat(c," ").concat(o,",").concat(i,'" fill="#FEF3C7" fill-opacity="0.3" stroke="none"/>\n                    <line x1="0" y1="').concat(i,'" x2="').concat(o,'" y2="').concat(i,'" stroke="#D1D5DB" stroke-width="1"/>\n                  </svg>\n                  <p style="margin: 4px 0 0 0; font-size: 10px; color: #9CA3AF; text-align: center;">Distance \u2192</p>\n                </div>\n                <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n                  <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px; font-size: 13px;">\n                    <span style="color: #6B7280; font-weight: 500;">\ud83d\udd22 Points:</span>\n                    <span style="color: #1F2937; font-weight: 600;">').concat(r.length,'</span>\n\n                    <span style="color: #6B7280; font-weight: 500;">\ud83d\udccf Distance:</span>\n                    <span style="color: #1F2937; font-weight: 600;">').concat(n.totalDistance?(n.totalDistance/1e3).toFixed(2)+" km":"N/A","</span>\n\n                    ").concat(l.length>0?'\n                    <span style="color: #6B7280; font-weight: 500;">\u2b06\ufe0f High Point:</span>\n                    <span style="color: #1F2937; font-weight: 600;">'.concat(u.toFixed(1),' m</span>\n\n                    <span style="color: #6B7280; font-weight: 500;">\u2b07\ufe0f Low Point:</span>\n                    <span style="color: #1F2937; font-weight: 600;">').concat(d.toFixed(1),' m</span>\n\n                    <span style="color: #6B7280; font-weight: 500;">\ud83d\udcc8 Elevation Gain:</span>\n                    <span style="color: #1F2937; font-weight: 600;">').concat(n.elevationGain?n.elevationGain.toFixed(1)+" m":"N/A","</span>\n                    "):"","\n                  </div>\n                </div>\n                ").concat(n.description?'\n                <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n                  <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(n.description,"</p>\n                </div>\n                "):"",'\n                <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n                  <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n                </div>\n              </div>\n            ");new google.maps.InfoWindow({content:h,position:s}).open(t);const m=new google.maps.LatLngBounds;r.forEach(e=>m.extend(e)),t.fitBounds(m),b({isOpen:!0,type:"success",title:"Viewing on Map",message:"".concat(e.name," - Elevation profile with ").concat(r.length," points")})}break}default:return void b({isOpen:!0,type:"warning",title:"No Location Data",message:"Location data not available for this entry"})}setTimeout(()=>{r&&r()},1500)}catch(n){console.error("Error viewing on map:",n),b({isOpen:!0,type:"error",title:"Error",message:"Failed to display on map"})}else b({isOpen:!0,type:"error",title:"Map Not Available",message:"Map instance is not available"})},B=e=>{if("XLSX"===e){const e=IS.book_new(),t=[{Name:"Example Distance Measurement","Total Distance (km)":"10.5","Created At":(new Date).toLocaleString(),"Saved At":(new Date).toLocaleString(),Source:"Import"}],r=IS.json_to_sheet(t);IS.book_append_sheet(e,r,"Distance");const n=[{Name:"Example Polygon","Area (sq km)":"5.25","Perimeter (km)":"12.8","Created At":(new Date).toLocaleString(),"Saved At":(new Date).toLocaleString(),Source:"Import"}],a=IS.json_to_sheet(n);IS.book_append_sheet(e,a,"Polygon");const s=[{Name:"Example Circle","Radius (m)":"500","Area (sq m)":"785398.16","Center Lat":"28.6139","Center Lng":"77.2090","Created At":(new Date).toLocaleString(),"Saved At":(new Date).toLocaleString(),Source:"Import"}],o=IS.json_to_sheet(s);IS.book_append_sheet(e,o,"Circle");const i=[{Name:"Example Elevation Profile","Max Elevation (m)":"2500.5","Min Elevation (m)":"1200.3","Elevation Gain (m)":"1300.2","Created At":(new Date).toLocaleString(),"Saved At":(new Date).toLocaleString(),Source:"Import"}],l=IS.json_to_sheet(i);IS.book_append_sheet(e,l,"Elevation");const c=[{Name:"Example POP",Type:"POP","Unique ID":"POP.ABC123","Network ID":"BHARAT-POP.ABC123",Latitude:"28.6139",Longitude:"77.2090","Contact Name":"John Doe","Contact No":"+91-9876543210",Status:"Active","Structure Type":"Tower","Is Rented":"No","Created At":(new Date).toLocaleString(),"Saved At":(new Date).toLocaleString(),Source:"Import"}],d=IS.json_to_sheet(c);return IS.book_append_sheet(e,d,"Infrastructure"),void CS(e,"gis-import-template.xlsx")}let t="",r="",n="";"JSON"===e?(t=JSON.stringify([{id:"example-id",type:"Distance",name:"Example Measurement",createdAt:(new Date).toISOString(),savedAt:(new Date).toISOString(),fileSize:0,source:"Import",data:{}}],null,2),r="import-template.json",n="application/json"):"CSV"===e&&(t="id,type,name,createdAt,savedAt,source\nexample-id,Distance,Example Measurement,"+(new Date).toISOString()+","+(new Date).toISOString()+",Import",r="import-template.csv",n="text/csv");const a=new Blob([t],{type:n}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.download=r,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},z=e=>{const t={exportDate:(new Date).toISOString(),version:"1.0",entries:e},r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});V(r,"gis-data-export-".concat(Date.now(),".json")),b({isOpen:!0,type:"success",title:"Export Successful",message:"Exported ".concat(e.length," item(s) to JSON")})},W=e=>{const t=e.map(e=>[e.type,e.name,e.createdAt.toLocaleString(),e.savedAt.toLocaleString(),e.source,(e.fileSize/1024).toFixed(2)]),r=[["Type","Name","Created At","Saved At","Source","Size (KB)"].join(","),...t.map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),n=new Blob([r],{type:"text/csv"});V(n,"gis-data-export-".concat(Date.now(),".csv")),b({isOpen:!0,type:"success",title:"Export Successful",message:"Exported ".concat(e.length," item(s) to CSV")})},U=e=>{const t=IS.book_new(),r={};e.forEach(e=>{r[e.type]||(r[e.type]=[]),r[e.type].push(e)}),Object.keys(r).forEach(e=>{const n=r[e];let a=[];switch(e){case"Distance":a=n.map(e=>{var t;return{Name:e.name,"Total Distance (km)":(null===(t=e.data.totalDistance)||void 0===t?void 0:t.toFixed(2))||"N/A","Created At":e.createdAt.toLocaleString(),"Saved At":e.savedAt.toLocaleString(),Source:e.source}});break;case"Polygon":a=n.map(e=>{var t,r;return{Name:e.name,"Area (sq km)":(null===(t=e.data.area)||void 0===t?void 0:t.toFixed(2))||"N/A","Perimeter (km)":(null===(r=e.data.perimeter)||void 0===r?void 0:r.toFixed(2))||"N/A","Created At":e.createdAt.toLocaleString(),"Saved At":e.savedAt.toLocaleString(),Source:e.source}});break;case"Circle":a=n.map(e=>{var t,r,n,a,s;return{Name:e.name,"Radius (m)":e.data.radius||"N/A","Area (sq m)":(null===(t=e.data.area)||void 0===t?void 0:t.toFixed(2))||"N/A","Center Lat":(null===(r=e.data.center)||void 0===r||null===(n=r.lat)||void 0===n?void 0:n.toFixed(6))||"N/A","Center Lng":(null===(a=e.data.center)||void 0===a||null===(s=a.lng)||void 0===s?void 0:s.toFixed(6))||"N/A","Created At":e.createdAt.toLocaleString(),"Saved At":e.savedAt.toLocaleString(),Source:e.source}});break;case"Elevation":a=n.map(e=>{var t,r,n;return{Name:e.name,"Max Elevation (m)":(null===(t=e.data.maxElevation)||void 0===t?void 0:t.toFixed(2))||"N/A","Min Elevation (m)":(null===(r=e.data.minElevation)||void 0===r?void 0:r.toFixed(2))||"N/A","Elevation Gain (m)":(null===(n=e.data.elevationGain)||void 0===n?void 0:n.toFixed(2))||"N/A","Created At":e.createdAt.toLocaleString(),"Saved At":e.savedAt.toLocaleString(),Source:e.source}});break;case"Infrastructure":a=n.map(e=>{var t,r,n,a;const s=e.data;return{Name:e.name,Type:s.type||"N/A","Unique ID":s.uniqueId||"N/A","Network ID":s.networkId||"N/A",Latitude:(null===(t=s.coordinates)||void 0===t||null===(r=t.lat)||void 0===r?void 0:r.toFixed(6))||"N/A",Longitude:(null===(n=s.coordinates)||void 0===n||null===(a=n.lng)||void 0===a?void 0:a.toFixed(6))||"N/A","Contact Name":s.contactName||"N/A","Contact No":s.contactNo||"N/A",Status:s.status||"N/A","Structure Type":s.structureType||"N/A","Is Rented":s.isRented?"Yes":"No","Created At":e.createdAt.toLocaleString(),"Saved At":e.savedAt.toLocaleString(),Source:e.source}});break;default:a=n.map(e=>({Name:e.name,Type:e.type,"Created At":e.createdAt.toLocaleString(),"Saved At":e.savedAt.toLocaleString(),Source:e.source}))}const s=IS.json_to_sheet(a);IS.book_append_sheet(t,s,e)}),CS(t,"gis-data-export-".concat(Date.now(),".xlsx")),b({isOpen:!0,type:"success",title:"Export Successful",message:"Exported ".concat(e.length," item(s) to XLSX")})},H=(e,t)=>{const r=e.filter(e=>"Infrastructure"===e.type);if(0===r.length)return void b({isOpen:!0,type:"warning",title:"No Geographic Data",message:"Only Infrastructure items can be exported to KML"});let n='<?xml version="1.0" encoding="UTF-8"?>\n<kml xmlns="http://www.opengis.net/kml/2.2">\n  <Document>\n    <name>GIS Data Export</name>\n';r.forEach(e=>{const t=e.data;n+="    <Placemark>\n      <name>".concat(e.name,"</name>\n      <description>").concat(t.contactName||"","</description>\n      <Point>\n        <coordinates>").concat(t.coordinates.lng,",").concat(t.coordinates.lat,",0</coordinates>\n      </Point>\n    </Placemark>\n")}),n+="  </Document>\n</kml>";const a=new Blob([n],{type:"application/vnd.google-earth.kml+xml"});V(a,"gis-data-export-".concat(Date.now(),".kml")),b({isOpen:!0,type:"success",title:"Export Successful",message:"Exported ".concat(r.length," item(s) to KML")})},V=(e,t)=>{const r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},G=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(2)," KB"):"".concat((e/1048576).toFixed(2)," MB"),q=e=>({Distance:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),Polygon:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),Circle:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Elevation:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Infrastructure:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),SectorRF:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})})}[e]),$=e=>({Distance:"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20",Polygon:"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20",Circle:"text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/20",Elevation:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20",Infrastructure:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20",SectorRF:"text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20"}[e]),K=R(a);return(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:r}),(0,Vi.jsxs)("div",{className:"fixed top-16 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 max-w-3xl w-full z-50 max-h-[85vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Data Hub"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Centralized GIS Data Repository"})]})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("button",{onClick:O,className:"p-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded-md",title:"Refresh Data",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,Vi.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[(0,Vi.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[(0,Vi.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Total Entries"}),(0,Vi.jsx)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:u.totalEntries})]}),(0,Vi.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[(0,Vi.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:"Total Size"}),(0,Vi.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:G(u.totalSize)})]}),(0,Vi.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3",children:[(0,Vi.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400 mb-1",children:"Manual"}),(0,Vi.jsx)("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:u.bySource.Manual})]}),(0,Vi.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3",children:[(0,Vi.jsx)("div",{className:"text-xs text-orange-600 dark:text-orange-400 mb-1",children:"Imported"}),(0,Vi.jsx)("div",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:u.bySource.Import})]})]}),(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4 space-x-2",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[("Admin"===(null===L||void 0===L?void 0:L.role)||"Manager"===(null===L||void 0===L?void 0:L.role))&&(0,Vi.jsxs)("select",{value:_,onChange:e=>T(e.target.value),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white font-medium",title:"Filter by user",children:[(0,Vi.jsx)("option",{value:"me",children:"My Data Only"}),(0,Vi.jsx)("option",{value:"all",children:"All Users"})]}),(0,Vi.jsxs)("select",{value:c.type||"",onChange:e=>d((0,o.A)((0,o.A)({},c),{},{type:e.target.value})),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",children:[(0,Vi.jsx)("option",{value:"",children:"All Types"}),(0,Vi.jsx)("option",{value:"Distance",children:"Distance"}),(0,Vi.jsx)("option",{value:"Polygon",children:"Polygon"}),(0,Vi.jsx)("option",{value:"Circle",children:"Circle"}),(0,Vi.jsx)("option",{value:"Elevation",children:"Elevation"}),(0,Vi.jsx)("option",{value:"Infrastructure",children:"Infrastructure"})]}),(0,Vi.jsxs)("select",{value:c.source||"",onChange:e=>d((0,o.A)((0,o.A)({},c),{},{source:e.target.value})),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",children:[(0,Vi.jsx)("option",{value:"",children:"All Sources"}),(0,Vi.jsx)("option",{value:"Manual",children:"Manual"}),(0,Vi.jsx)("option",{value:"Import",children:"Import"})]}),(0,Vi.jsx)("input",{type:"text",placeholder:"Search...",value:c.searchTerm||"",onChange:e=>d((0,o.A)((0,o.A)({},c),{},{searchTerm:e.target.value})),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white"})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>p("list"===f?"grid":"list"),className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:"list"===f?"Grid":"List"}),(0,Vi.jsxs)("button",{onClick:()=>w(!0),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-1",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,Vi.jsx)("span",{children:"Import"})]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsxs)("button",{onClick:()=>g(!m),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-1",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,Vi.jsx)("span",{children:"Export"})]}),m&&(0,Vi.jsx)("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-gray-700 rounded-lg shadow-xl border border-gray-200 dark:border-gray-600 z-50",children:["JSON","CSV","KML","KMZ","XLSX"].map(e=>(0,Vi.jsx)("button",{onClick:()=>(e=>{const t=a.filter(e=>!(i.size>0)||i.has(e.id));if(0!==t.length){switch(e){case"JSON":z(t);break;case"CSV":W(t);break;case"XLSX":U(t);break;case"KML":case"KMZ":H(t,"KMZ"===e)}g(!1)}else b({isOpen:!0,type:"warning",title:"No Data",message:"No data to export"})})(e),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 first:rounded-t-lg last:rounded-b-lg",children:e},e))})]})]})]}),i.size>0&&(0,Vi.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md flex items-center justify-between",children:[(0,Vi.jsxs)("span",{className:"text-sm text-blue-700 dark:text-blue-400",children:[i.size," item(s) selected"]}),(0,Vi.jsx)("button",{onClick:async()=>{if(0!==i.size)try{const e=Array.from(i);await US(e),await O(),l(new Set),b({isOpen:!0,type:"success",title:"Deleted",message:"".concat(e.length," item(s) deleted successfully")})}catch(e){console.error("Delete error:",e),b({isOpen:!0,type:"error",title:"Delete Failed",message:"Failed to delete selected items"})}else b({isOpen:!0,type:"warning",title:"No Selection",message:"Please select items to delete"})},className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete Selected"})]}),"list"===f?(0,Vi.jsx)("div",{className:"overflow-x-auto border border-gray-200 dark:border-gray-700 rounded-md",children:(0,Vi.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,Vi.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900 sticky top-0",children:(0,Vi.jsxs)("tr",{children:[(0,Vi.jsx)("th",{className:"px-3 py-2 text-left",children:(0,Vi.jsx)("input",{type:"checkbox",checked:i.size===K.length&&K.length>0,onChange:()=>{const e=R(a);i.size===e.length?l(new Set):l(new Set(e.map(e=>e.id)))},className:"rounded border-gray-300"})}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Type"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Name"}),"all"===_&&(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"User"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Source"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Size"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Saved At"}),(0,Vi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),(0,Vi.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:K.map(e=>{var t;return(0,Vi.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,Vi.jsx)("td",{className:"px-3 py-2",children:(0,Vi.jsx)("input",{type:"checkbox",checked:i.has(e.id),onChange:()=>P(e.id),className:"rounded border-gray-300"})}),(0,Vi.jsx)("td",{className:"px-3 py-2",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 px-2 py-1 rounded-md ".concat($(e.type)),children:[q(e.type),(0,Vi.jsx)("span",{className:"text-xs font-medium",children:e.type})]})}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 dark:text-white",children:e.name}),"all"===_&&(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400",children:(null===(t=e.data)||void 0===t?void 0:t.user_name)||"Unknown"}),(0,Vi.jsx)("td",{className:"px-3 py-2",children:(0,Vi.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("Manual"===e.source?"bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400":"bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400"),children:e.source})}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400",children:G(e.fileSize)}),(0,Vi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400",children:e.savedAt.toLocaleString()}),(0,Vi.jsx)("td",{className:"px-3 py-2",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>v(e),className:"p-1 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded",title:"View Details",children:(0,Vi.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,Vi.jsx)("button",{onClick:()=>I(e),className:"p-1 text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20 rounded",title:"View on Map",children:(0,Vi.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),(0,Vi.jsx)("button",{onClick:()=>F(e.id),className:"p-1 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded",title:"Delete",children:(0,Vi.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id)})})]})}):(0,Vi.jsx)("div",{className:"grid grid-cols-3 gap-3",children:K.map(e=>(0,Vi.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:shadow-md transition-shadow",children:[(0,Vi.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 px-2 py-1 rounded-md ".concat($(e.type)),children:[q(e.type),(0,Vi.jsx)("span",{className:"text-xs font-medium",children:e.type})]}),(0,Vi.jsx)("input",{type:"checkbox",checked:i.has(e.id),onChange:()=>P(e.id),className:"rounded border-gray-300"})]}),(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:e.name}),(0,Vi.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,Vi.jsx)("span",{children:G(e.fileSize)}),(0,Vi.jsx)("span",{className:"px-1.5 py-0.5 rounded ".concat("Manual"===e.source?"bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400":"bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400"),children:e.source})]}),(0,Vi.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 mb-2",children:e.savedAt.toLocaleDateString()}),(0,Vi.jsxs)("div",{className:"flex items-center justify-end space-x-1 pt-2 border-t border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("button",{onClick:()=>v(e),className:"px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded flex items-center space-x-1",title:"View Details",children:[(0,Vi.jsxs)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(0,Vi.jsx)("span",{children:"View"})]}),(0,Vi.jsxs)("button",{onClick:()=>I(e),className:"px-2 py-1 text-xs text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20 rounded flex items-center space-x-1",title:"View on Map",children:[(0,Vi.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,Vi.jsx)("span",{children:"Map"})]}),(0,Vi.jsxs)("button",{onClick:()=>F(e.id),className:"px-2 py-1 text-xs text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded flex items-center space-x-1",title:"Delete",children:[(0,Vi.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,Vi.jsx)("span",{children:"Delete"})]})]})]},e.id))}),0===K.length&&(0,Vi.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[(0,Vi.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,Vi.jsx)("p",{className:"text-lg font-medium mb-1",children:"No data found"}),(0,Vi.jsx)("p",{className:"text-sm",children:"Start creating measurements, polygons, or infrastructure to see them here"})]}),(0,Vi.jsx)(ql,{isOpen:x.isOpen,onClose:()=>b((0,o.A)((0,o.A)({},x),{},{isOpen:!1})),type:x.type,title:x.title,message:x.message,autoClose:!0,autoCloseDelay:3e3})]}),y&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-center justify-center p-4",children:(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:(0,Vi.jsxs)("div",{className:"p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Entry Details"}),(0,Vi.jsx)("button",{onClick:()=>v(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,Vi.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Type"}),(0,Vi.jsxs)("div",{className:"mt-1 flex items-center space-x-2 px-3 py-2 rounded-md ".concat($(y.type)),children:[q(y.type),(0,Vi.jsx)("span",{className:"font-medium",children:y.type})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Source"}),(0,Vi.jsx)("div",{className:"mt-1 px-3 py-2 rounded text-center ".concat("Manual"===y.source?"bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400":"bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400"),children:y.source})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Name"}),(0,Vi.jsx)("p",{className:"mt-1 text-gray-900 dark:text-white",children:y.name})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"ID"}),(0,Vi.jsx)("p",{className:"mt-1 text-gray-700 dark:text-gray-300 font-mono text-sm",children:y.id})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created At"}),(0,Vi.jsx)("p",{className:"mt-1 text-gray-700 dark:text-gray-300 text-sm",children:y.createdAt.toLocaleString()})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Saved At"}),(0,Vi.jsx)("p",{className:"mt-1 text-gray-700 dark:text-gray-300 text-sm",children:y.savedAt.toLocaleString()})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"File Size"}),(0,Vi.jsx)("p",{className:"mt-1 text-gray-700 dark:text-gray-300",children:G(y.fileSize)})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Data"}),(0,Vi.jsx)("pre",{className:"mt-1 bg-gray-100 dark:bg-gray-900 p-3 rounded text-xs overflow-x-auto",children:JSON.stringify(y.data,null,2)})]})]}),(0,Vi.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Vi.jsx)("button",{onClick:()=>v(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md",children:"Close"})})]})})}),k&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-center justify-center p-4",children:(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full",children:(0,Vi.jsxs)("div",{className:"p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Import Data"}),(0,Vi.jsx)("button",{onClick:()=>{w(!1),N(null)},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,Vi.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload File"}),(0,Vi.jsx)("input",{type:"file",accept:".json,.csv,.kml",onChange:e=>{var t;return N((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"block w-full text-sm text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-700"}),(0,Vi.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Supported formats: JSON, CSV, KML"})]}),j&&(0,Vi.jsx)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:(0,Vi.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:["Selected: ",(0,Vi.jsx)("strong",{children:j.name})]})}),(0,Vi.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Download Templates"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Vi.jsx)("button",{onClick:()=>B("JSON"),className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md",children:"JSON"}),(0,Vi.jsx)("button",{onClick:()=>B("CSV"),className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md",children:"CSV"}),(0,Vi.jsx)("button",{onClick:()=>B("XLSX"),className:"px-3 py-2 text-sm bg-green-100 dark:bg-green-900/20 hover:bg-green-200 dark:hover:bg-green-900/30 text-green-700 dark:text-green-400 rounded-md font-medium",children:"XLSX"})]})]})]}),(0,Vi.jsxs)("div",{className:"mt-6 flex justify-end space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>{w(!1),N(null)},className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(j)try{var e;const t=null===(e=j.name.split(".").pop())||void 0===e?void 0:e.toLowerCase(),r=await j.text();if("json"===t){JSON.parse(r);b({isOpen:!0,type:"info",title:"Coming Soon",message:"JSON import is under development"})}else b("csv"===t?{isOpen:!0,type:"info",title:"Coming Soon",message:"CSV import is under development"}:"kml"===t?{isOpen:!0,type:"info",title:"Coming Soon",message:"KML import is under development"}:{isOpen:!0,type:"error",title:"Invalid Format",message:"Please upload a JSON, CSV, or KML file"});w(!1),N(null)}catch(t){console.error("Import error:",t),b({isOpen:!0,type:"error",title:"Import Failed",message:"Failed to import file"})}else b({isOpen:!0,type:"warning",title:"No File",message:"Please select a file to import"})},disabled:!j,className:"px-4 py-2 rounded-md ".concat(j?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"),children:"Import"})]})]})})}),E&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-center justify-center p-4",children:(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:(0,Vi.jsxs)("div",{className:"p-6",children:[(0,Vi.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Vi.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white text-center mb-2",children:"Confirm Delete"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mb-6",children:"Are you sure you want to delete this entry? This action cannot be undone."}),(0,Vi.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>{A(!1),C(null)},className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(S)try{await US([S]),await O(),A(!1),C(null),b({isOpen:!0,type:"success",title:"Deleted",message:"Entry deleted successfully"})}catch(e){console.error("Delete error:",e),A(!1),C(null),b({isOpen:!0,type:"error",title:"Delete Failed",message:"Failed to delete entry"})}},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md",children:"Delete"})]})]})})})]})};function GS(e,t){return!isNaN(e)&&!isNaN(t)&&e>=-90&&e<=90&&t>=-180&&t<=180}function qS(e,t){const r=$S(t.lat-e.lat),n=$S(t.lng-e.lng),a=Math.sin(r/2)*Math.sin(r/2)+Math.cos($S(e.lat))*Math.cos($S(t.lat))*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function $S(e){return e*(Math.PI/180)}const KS=class{constructor(e){this.map=void 0,this.placesService=void 0,this.map=e,this.placesService=new google.maps.places.PlacesService(e)}async search(e,t){if(!e||0===e.trim().length)return[];const r=e.trim();switch(t||(t=this.detectSearchType(r)),t){case"coordinates":return this.searchCoordinates(r);case"place":return this.searchPlaces(r);case"savedData":return this.searchSavedData(r);case"imported":return this.searchImportedData(r);default:return this.searchAll(r)}}detectSearchType(e){const t=[/^-?\d+\.?\d*[,\s]+-?\d+\.?\d*$/,/^-?\d+\.?\d*\xb0?\s*[NS][,\s]+-?\d+\.?\d*\xb0?\s*[EW]$/i,/^\d+\xb0\d+'[\d.]+"\s*[NS]\s+\d+\xb0\d+'[\d.]+"\s*[EW]$/i,/@-?\d+\.?\d*,-?\d+\.?\d*/];for(const r of t)if(r.test(e))return"coordinates";return"place"}async searchCoordinates(e){const t=function(e){if(!e||"string"!==typeof e)return null;const t=e.trim(),r=t.match(/^(-?\d+\.?\d*)[,\s]+(-?\d+\.?\d*)$/);if(r){const e=parseFloat(r[1]),t=parseFloat(r[2]);if(GS(e,t))return{lat:e,lng:t,format:"decimal"}}const n=t.match(/^(-?\d+\.?\d*)\xb0?\s*([NS])[,\s]+(-?\d+\.?\d*)\xb0?\s*([EW])$/i);if(n){let e=parseFloat(n[1]),t=parseFloat(n[3]);if("S"===n[2].toUpperCase()&&(e=-e),"W"===n[4].toUpperCase()&&(t=-t),GS(e,t))return{lat:e,lng:t,format:"degrees"}}const a=t.match(/^(\d+)\xb0(\d+)'([\d.]+)"?\s*([NS])\s+(\d+)\xb0(\d+)'([\d.]+)"?\s*([EW])$/i);if(a){const e=parseInt(a[1]),t=parseInt(a[2]),r=parseFloat(a[3]),n=a[4].toUpperCase();let s=e+t/60+r/3600,o=parseInt(a[5])+parseInt(a[6])/60+parseFloat(a[7])/3600;if("S"===n&&(s=-s),"W"===a[8].toUpperCase()&&(o=-o),GS(s,o))return{lat:s,lng:o,format:"dms"}}const s=t.match(/[@?](-?\d+\.?\d*),(-?\d+\.?\d*)/);if(s){const e=parseFloat(s[1]),t=parseFloat(s[2]);if(GS(e,t))return{lat:e,lng:t,format:"url"}}return null}(e);if(!t)return[];const{lat:r,lng:n}=t,a=new google.maps.Geocoder;return new Promise(e=>{a.geocode({location:{lat:r,lng:n}},(t,a)=>{"OK"===a&&t&&t[0]?e([{id:"coord_".concat(Date.now()),name:t[0].formatted_address||"".concat(r.toFixed(6),", ").concat(n.toFixed(6)),type:"coordinates",location:{lat:r,lng:n},address:t[0].formatted_address,placeId:t[0].place_id,source:"coordinates"}]):e([{id:"coord_".concat(Date.now()),name:"".concat(r.toFixed(6),", ").concat(n.toFixed(6)),type:"coordinates",location:{lat:r,lng:n},source:"coordinates"}])})})}async searchPlaces(e){try{const t="AIzaSyAT5j5Zy8q4XSHLi1arcpkce8CNvbljbUQ";if(t){const r=await fetch("https://places.googleapis.com/v1/places:searchText",{method:"POST",headers:{"Content-Type":"application/json","X-Goog-Api-Key":t,"X-Goog-FieldMask":"places.displayName,places.formattedAddress,places.location,places.id,places.types"},body:JSON.stringify({textQuery:"".concat(e," India"),regionCode:"IN",maxResultCount:10})});if(r.ok){const e=await r.json();if(e.places&&e.places.length>0){return e.places.map(e=>{var t;const r={lat:e.location.latitude,lng:e.location.longitude},n=this.map.getCenter(),a=n?qS({lat:n.lat(),lng:n.lng()},r):void 0;return{id:e.id,name:(null===(t=e.displayName)||void 0===t?void 0:t.text)||"Unknown Place",type:"place",location:r,address:e.formattedAddress||"",placeId:e.id,source:"places",distance:a}}).sort((e,t)=>(e.distance||0)-(t.distance||0))}}}}catch(t){console.error("Places API error, using Geocoding fallback:",t)}return new Promise(t=>{(new google.maps.Geocoder).geocode({address:"".concat(e,", India"),componentRestrictions:{country:"IN"}},(e,r)=>{if("OK"===r&&e&&e.length>0){const r=e.slice(0,10).map(e=>{var t;const r={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},n=this.map.getCenter(),a=n?qS({lat:n.lat(),lng:n.lng()},r):void 0;return{id:e.place_id||"geocode_".concat(Date.now(),"_").concat(Math.random()),name:(null===(t=e.address_components[0])||void 0===t?void 0:t.long_name)||e.formatted_address.split(",")[0],type:"place",location:r,address:e.formatted_address,placeId:e.place_id,source:"places",distance:a}}).sort((e,t)=>(e.distance||0)-(t.distance||0));t(r)}else t([])})})}async searchSavedData(e){try{const t=e.toLowerCase(),r=[];JSON.parse(localStorage.getItem("gis_distance_measurements")||"[]").forEach(e=>{var n;if(null!==(n=e.name)&&void 0!==n&&n.toLowerCase().includes(t)){const t=e.points||[],n=t.length>0?t[0]:{lat:0,lng:0};r.push({id:e.id,name:e.name,type:"savedData",location:n,address:"Distance: ".concat(e.totalDistance||0,"m"),data:(0,o.A)((0,o.A)({},e),{},{type:"Distance"}),source:"saved"})}});JSON.parse(localStorage.getItem("gis_polygons")||"[]").forEach(e=>{var n;if(null!==(n=e.name)&&void 0!==n&&n.toLowerCase().includes(t)){const t=e.vertices||e.path||[];let n={lat:0,lng:0};if(t.length>0){let e=0,r=0;t.forEach(t=>{e+=t.lat,r+=t.lng}),n={lat:e/t.length,lng:r/t.length}}r.push({id:e.id,name:e.name,type:"savedData",location:n,address:"Polygon: ".concat(e.area||0,"m\xb2"),data:(0,o.A)((0,o.A)({},e),{},{type:"Polygon"}),source:"saved"})}});JSON.parse(localStorage.getItem("gis_circles")||"[]").forEach(e=>{var n;if(null!==(n=e.name)&&void 0!==n&&n.toLowerCase().includes(t)){const t=e.center||{lat:0,lng:0};r.push({id:e.id,name:e.name,type:"savedData",location:t,address:"Circle: ".concat(e.radius||0,"m radius"),data:(0,o.A)((0,o.A)({},e),{},{type:"Circle"}),source:"saved"})}});JSON.parse(localStorage.getItem("gis_elevation_profiles")||"[]").forEach(e=>{var n;if(null!==(n=e.name)&&void 0!==n&&n.toLowerCase().includes(t)){const t=e.points||[],n=t.length>0?t[0]:{lat:0,lng:0};r.push({id:e.id,name:e.name,type:"savedData",location:n,address:"Elevation Profile",data:(0,o.A)((0,o.A)({},e),{},{type:"Elevation"}),source:"saved"})}});return JSON.parse(localStorage.getItem("gis_infrastructures")||"[]").forEach(e=>{var n,a;if(null!==(n=e.name)&&void 0!==n&&n.toLowerCase().includes(t)||null!==(a=e.notes)&&void 0!==a&&a.toLowerCase().includes(t)){const t=e.coordinates||e.location||{lat:0,lng:0};let n="";if(e.address&&"object"===typeof e.address){const t=e.address;n=[t.street,t.city,t.state,t.pincode].filter(Boolean).join(", ")}else n=e.address||e.notes||"";r.push({id:e.id,name:e.name,type:"savedData",location:t,address:n,data:(0,o.A)((0,o.A)({},e),{},{type:"Infrastructure"}),source:"saved"})}}),r}catch(t){return console.error("Error searching saved data:",t),[]}}async searchImportedData(e){try{const t=e.toLowerCase(),r=[];return JSON.parse(localStorage.getItem("gis_infrastructures")||"[]").forEach(e=>{var n,a;if("KML"===e.source&&(null!==(n=e.name)&&void 0!==n&&n.toLowerCase().includes(t)||null!==(a=e.notes)&&void 0!==a&&a.toLowerCase().includes(t))){const t=e.coordinates||e.location||e.position||{lat:0,lng:0};let n="";if(e.address&&"object"===typeof e.address){const t=e.address;n=[t.street,t.city,t.state,t.pincode].filter(Boolean).join(", ")}else n=e.address||e.notes||"Imported from KML";r.push({id:e.id,name:e.name,type:"imported",location:t,address:n,data:(0,o.A)((0,o.A)({},e),{},{type:"Infrastructure"}),source:"imported"})}}),r}catch(t){return console.error("Error searching imported data:",t),[]}}async searchAll(e){const[t,r,n]=await Promise.all([this.searchPlaces(e),this.searchSavedData(e),this.searchImportedData(e)]);return[...t,...r,...n].sort((e,t)=>"places"===e.source&&"places"!==t.source?-1:"places"!==e.source&&"places"===t.source?1:(e.distance||1/0)-(t.distance||1/0))}getIndiaBounds(){return new google.maps.LatLngBounds(new google.maps.LatLng(6.4627,68.1097),new google.maps.LatLng(35.5087,97.3953))}async getPlaceDetails(e){return new Promise(t=>{this.placesService.getDetails({placeId:e,fields:["name","formatted_address","geometry","photos","rating","opening_hours","website","formatted_phone_number"]},(e,r)=>{r===google.maps.places.PlacesServiceStatus.OK&&e?t(e):t(null)})})}},YS="gis_bookmarks",XS="gis_bookmark_categories";const JS=class{getBookmarks(){try{const e=localStorage.getItem(YS);if(!e)return[];return JSON.parse(e).map(e=>(0,o.A)((0,o.A)({},e),{},{createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}catch(e){return console.error("Error loading bookmarks:",e),[]}}getBookmark(e){return this.getBookmarks().find(t=>t.id===e)||null}addBookmark(e){const t=this.getBookmarks(),r=(0,o.A)((0,o.A)({},e),{},{id:"bookmark_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),createdAt:new Date,updatedAt:new Date});return t.push(r),this.saveBookmarks(t),r}updateBookmark(e,t){const r=this.getBookmarks(),n=r.findIndex(t=>t.id===e);if(-1===n)return null;const a=(0,o.A)((0,o.A)((0,o.A)({},r[n]),t),{},{id:r[n].id,createdAt:r[n].createdAt,updatedAt:new Date});return r[n]=a,this.saveBookmarks(r),a}deleteBookmark(e){const t=this.getBookmarks(),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(this.saveBookmarks(r),!0)}deleteBookmarks(e){const t=this.getBookmarks(),r=t.filter(t=>!e.includes(t.id)),n=t.length-r.length;return this.saveBookmarks(r),n}searchBookmarks(e){const t=this.getBookmarks(),r=e.toLowerCase();return t.filter(e=>{var t,n;return e.name.toLowerCase().includes(r)||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(n=e.category)||void 0===n?void 0:n.toLowerCase().includes(r))})}getBookmarksByCategory(e){return this.getBookmarks().filter(t=>t.category===e)}isBookmarked(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return this.getBookmarks().some(n=>{const a=Math.abs(n.location.lat-e),s=Math.abs(n.location.lng-t);return a<r&&s<r})}saveBookmarks(e){try{localStorage.setItem(YS,JSON.stringify(e))}catch(t){throw console.error("Error saving bookmarks:",t),new Error("Failed to save bookmarks")}}getCategories(){try{const e=localStorage.getItem(XS);return e?JSON.parse(e):this.getDefaultCategories()}catch(e){return console.error("Error loading categories:",e),this.getDefaultCategories()}}addCategory(e){const t=this.getCategories(),r=(0,o.A)((0,o.A)({},e),{},{id:"category_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))});return t.push(r),this.saveCategories(t),r}updateCategory(e,t){const r=this.getCategories(),n=r.findIndex(t=>t.id===e);if(-1===n)return null;const a=(0,o.A)((0,o.A)((0,o.A)({},r[n]),t),{},{id:r[n].id});return r[n]=a,this.saveCategories(r),a}deleteCategory(e){const t=this.getCategories(),r=t.filter(t=>t.id!==e);if(r.length===t.length)return!1;const n=this.getBookmarks(),a=t.find(t=>t.id===e);return a&&(n.forEach(e=>{e.category===a.name&&(e.category=void 0)}),this.saveBookmarks(n)),this.saveCategories(r),!0}saveCategories(e){try{localStorage.setItem(XS,JSON.stringify(e))}catch(t){throw console.error("Error saving categories:",t),new Error("Failed to save categories")}}getDefaultCategories(){return[{id:"cat_work",name:"Work",color:"#3B82F6",icon:"\ud83d\udcbc"},{id:"cat_personal",name:"Personal",color:"#10B981",icon:"\ud83c\udfe0"},{id:"cat_travel",name:"Travel",color:"#F59E0B",icon:"\u2708\ufe0f"},{id:"cat_favorites",name:"Favorites",color:"#EF4444",icon:"\u2b50"},{id:"cat_other",name:"Other",color:"#6B7280",icon:"\ud83d\udccd"}]}exportBookmarks(){const e=this.getBookmarks(),t=this.getCategories(),r={version:"1.0",exportDate:(new Date).toISOString(),bookmarks:e,categories:t};return JSON.stringify(r,null,2)}importBookmarks(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const r=JSON.parse(e);if(!r.bookmarks||!Array.isArray(r.bookmarks))return{success:!1,count:0,error:"Invalid format"};let n=r.bookmarks.map(e=>(0,o.A)((0,o.A)({},e),{},{createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));if(t){const e=this.getBookmarks(),t=new Set(e.map(e=>e.id));n=n.filter(e=>!t.has(e.id)),n=[...e,...n]}if(this.saveBookmarks(n),r.categories&&Array.isArray(r.categories))if(t){const e=this.getCategories(),t=new Set(e.map(e=>e.id)),n=r.categories.filter(e=>!t.has(e.id));this.saveCategories([...e,...n])}else this.saveCategories(r.categories);return{success:!0,count:n.length}}catch(r){return console.error("Error importing bookmarks:",r),{success:!1,count:0,error:"Failed to parse data"}}}clearAllBookmarks(){const e=this.getBookmarks().length;return this.saveBookmarks([]),e}getStatistics(){const e=this.getBookmarks(),t={total:e.length,byType:{},byCategory:{}};return e.forEach(e=>{t.byType[e.type]=(t.byType[e.type]||0)+1;const r=e.category||"Uncategorized";t.byCategory[r]=(t.byCategory[r]||0)+1}),t}},QS="gis_search_history";const ZS=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;this.maxSize=void 0,this.maxSize=e}getHistory(){try{const e=localStorage.getItem(QS);if(!e)return[];return JSON.parse(e).map(e=>(0,o.A)((0,o.A)({},e),{},{timestamp:new Date(e.timestamp)}))}catch(e){return console.error("Error loading search history:",e),[]}}addToHistory(e){try{let t=this.getHistory();t=t.filter(t=>t.query.toLowerCase()!==e.query.toLowerCase()),t.unshift(e),t.length>this.maxSize&&(t=t.slice(0,this.maxSize)),this.saveHistory(t)}catch(t){console.error("Error adding to search history:",t)}}removeFromHistory(e){try{const t=this.getHistory(),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(this.saveHistory(r),!0)}catch(t){return console.error("Error removing from search history:",t),!1}}clearHistory(){try{const e=this.getHistory().length;return this.saveHistory([]),e}catch(e){return console.error("Error clearing search history:",e),0}}getRecent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getHistory().slice(0,e)}searchHistory(e){const t=this.getHistory(),r=e.toLowerCase();return t.filter(e=>e.query.toLowerCase().includes(r))}getByType(e){return this.getHistory().filter(t=>t.type===e)}getPopular(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=this.getHistory(),r=new Map;return t.forEach(e=>{const t=e.query.toLowerCase();r.set(t,(r.get(t)||0)+1)}),Array.from(r.entries()).map(e=>{let[t,r]=e;return{query:t,count:r}}).sort((e,t)=>t.count-e.count).slice(0,e)}saveHistory(e){try{localStorage.setItem(QS,JSON.stringify(e))}catch(t){throw console.error("Error saving search history:",t),new Error("Failed to save search history")}}exportHistory(){const e=this.getHistory(),t={version:"1.0",exportDate:(new Date).toISOString(),history:e};return JSON.stringify(t,null,2)}importHistory(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const r=JSON.parse(e);if(!r.history||!Array.isArray(r.history))return{success:!1,count:0,error:"Invalid format"};let n=r.history.map(e=>(0,o.A)((0,o.A)({},e),{},{timestamp:new Date(e.timestamp)}));if(t){const e=this.getHistory(),t=new Set(e.map(e=>e.id));n=n.filter(e=>!t.has(e.id)),n=[...e,...n],n.sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()),n.length>this.maxSize&&(n=n.slice(0,this.maxSize))}return this.saveHistory(n),{success:!0,count:n.length}}catch(r){return console.error("Error importing search history:",r),{success:!1,count:0,error:"Failed to parse data"}}}getStatistics(){const e=this.getHistory(),t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(r.getTime()-6048e5),a={total:e.length,byType:{},today:0,thisWeek:0};return e.forEach(e=>{a.byType[e.type]=(a.byType[e.type]||0)+1,e.timestamp>=r&&a.today++,e.timestamp>=n&&a.thisWeek++}),a}};function eC(e,t,r){const n=[],a=e=>r?'\n      <div style="margin-top: 10px; display: flex; gap: 8px; justify-content: center;">\n        <button id="bookmark-btn-'.concat(e,'" style="padding: 8px 16px; font-size: 13px; background: linear-gradient(135deg, #10B981 0%, #059669 100%); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);">\n          \u2b50 Bookmark\n        </button>\n      </div>\n    '):"";switch(e.type){case"Infrastructure":{const s=e.data,o=s.coordinates||s.location||{lat:0,lng:0},i=new google.maps.Marker({map:t,position:o,title:e.name,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#10B981",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"\ud83c\udfe2",color:"#FFFFFF",fontSize:"14px"}});let l="";if(s.address)if("object"===typeof s.address){const e=s.address;l=[e.street,e.city,e.state,e.pincode].filter(Boolean).join(", ")}else l=s.address;const c='\n        <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n          <div style="background: linear-gradient(135deg, #10B981 0%, #059669 100%); color: white; padding: 12px; margin: -12px -12px 12px -12px; border-radius: 8px 8px 0 0;">\n            <div style="display: flex; align-items: center; margin-bottom: 4px;">\n              <span style="font-size: 20px; margin-right: 8px;">\ud83c\udfe2</span>\n              <h3 style="margin: 0; font-size: 18px; font-weight: 700;">'.concat(e.name,'</h3>\n            </div>\n            <p style="margin: 0; font-size: 12px; opacity: 0.9;">Infrastructure</p>\n          </div>\n          <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n            <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px; font-size: 13px;">\n              <span style="color: #6B7280; font-weight: 500;">\ud83d\udccd Type:</span>\n              <span style="color: #1F2937; font-weight: 600;">').concat(s.type||"N/A",'</span>\n\n              <span style="color: #6B7280; font-weight: 500;">\ud83d\udd22 Unique ID:</span>\n              <span style="color: #1F2937; font-weight: 600;">').concat(s.uniqueId||"N/A",'</span>\n\n              <span style="color: #6B7280; font-weight: 500;">\ud83c\udf10 Network ID:</span>\n              <span style="color: #1F2937; font-weight: 600;">').concat(s.networkId||"N/A",'</span>\n\n              <span style="color: #6B7280; font-weight: 500;">\ud83d\udccc Coordinates:</span>\n              <span style="color: #1F2937; font-weight: 600; font-family: monospace;">').concat(o.lat.toFixed(6),", ").concat(o.lng.toFixed(6),"</span>\n            </div>\n          </div>\n          ").concat(l?'\n          <div style="background: #EFF6FF; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #3B82F6;">\n            <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udceb Address:</strong><br/>'.concat(l,"</p>\n          </div>\n          "):"","\n          ").concat(s.contactPerson?'\n          <div style="background: #F0FDF4; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #10B981;">\n            <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udc64 Contact:</strong> '.concat(s.contactPerson,"</p>\n            ").concat(s.contactNumber?'<p style="margin: 4px 0 0 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcde Phone:</strong> '.concat(s.contactNumber,"</p>"):"","\n          </div>\n          "):"","\n          ").concat(s.description||s.notes?'\n          <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n            <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(s.description||s.notes,"</p>\n          </div>\n          "):"","\n          ").concat(a(e.id),'\n          <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n            <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n          </div>\n        </div>\n      "),d=new google.maps.InfoWindow({content:c});i.addListener("click",()=>d.open(t,i)),d.open(t,i),r&&google.maps.event.addListenerOnce(d,"domready",()=>{const t=document.getElementById("bookmark-btn-".concat(e.id));t&&t.addEventListener("click",()=>{r.addBookmark({name:e.name,type:"Infrastructure",location:o,description:s.description||s.notes}),alert("\u2705 Bookmark added successfully!")})}),n.push(i);break}case"Circle":{const r=e.data.center,a=e.data.radius;if(r&&a){const s=new google.maps.Circle({map:t,center:r,radius:a,fillColor:"#8B5CF6",fillOpacity:.35,strokeColor:"#8B5CF6",strokeOpacity:.8,strokeWeight:2}),o=new google.maps.Marker({position:r,map:t,title:e.name,icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#8B5CF6",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}}),i=Math.PI*a*a,l=2*Math.PI*a,c='\n          <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n            <div style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); color: white; padding: 12px; margin: -12px -12px 12px -12px; border-radius: 8px 8px 0 0;">\n              <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                <span style="font-size: 20px; margin-right: 8px;">\u2b55</span>\n                <h3 style="margin: 0; font-size: 18px; font-weight: 700;">'.concat(e.name,'</h3>\n              </div>\n              <p style="margin: 0; font-size: 12px; opacity: 0.9;">Circle</p>\n            </div>\n            <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n              <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px; font-size: 13px;">\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udd35 Radius:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat((a/1e3).toFixed(2),' km</span>\n\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udcd0 Area:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat((i/1e6).toFixed(2),' km\xb2</span>\n\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udd04 Circumference:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat((l/1e3).toFixed(2),' km</span>\n\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udccc Center:</span>\n                <span style="color: #1F2937; font-weight: 600; font-family: monospace;">').concat(r.lat.toFixed(6),", ").concat(r.lng.toFixed(6),"</span>\n              </div>\n            </div>\n            ").concat(e.data.description?'\n            <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n              <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(e.data.description,"</p>\n            </div>\n            "):"",'\n            <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n              <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n            </div>\n          </div>\n        "),d=new google.maps.InfoWindow({content:c});o.addListener("click",()=>d.open(t,o)),d.open(t,o),n.push(s,o)}break}case"Distance":{const r=e.data.points;if(r&&r.length>0){const a=new google.maps.Polyline({map:t,path:r,strokeColor:"#3B82F6",strokeOpacity:1,strokeWeight:3});n.push(a),r.forEach((e,r)=>{const a=new google.maps.Marker({position:e,map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"#3B82F6",fillOpacity:.8,strokeColor:"#FFFFFF",strokeWeight:1.5},label:{text:"".concat(r+1),color:"#FFFFFF",fontSize:"10px",fontWeight:"bold"}});n.push(a)});const s=e.data.totalDistance||0,o=r[Math.floor(r.length/2)],i='\n          <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n            <div style="background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%); color: white; padding: 12px; margin: -12px -12px 12px -12px; border-radius: 8px 8px 0 0;">\n              <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                <span style="font-size: 20px; margin-right: 8px;">\ud83d\udccf</span>\n                <h3 style="margin: 0; font-size: 18px; font-weight: 700;">'.concat(e.name,'</h3>\n              </div>\n              <p style="margin: 0; font-size: 12px; opacity: 0.9;">Distance Measurement</p>\n            </div>\n            <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n              <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px; font-size: 13px;">\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udccf Total Distance:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat((s/1e3).toFixed(2),' km</span>\n\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udccd Points:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat(r.length,"</span>\n              </div>\n            </div>\n            ").concat(e.data.description?'\n            <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n              <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(e.data.description,"</p>\n            </div>\n            "):"",'\n            <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n              <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n            </div>\n          </div>\n        "),l=new google.maps.Marker({position:o,map:t,title:e.name,icon:{path:google.maps.SymbolPath.CIRCLE,scale:9,fillColor:"#1E40AF",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"\u2139\ufe0f",color:"#FFFFFF",fontSize:"12px"}}),c=new google.maps.InfoWindow({content:i});l.addListener("click",()=>c.open(t,l)),c.open(t,l),n.push(l)}break}case"Polygon":{const r=e.data.vertices||e.data.path||[];if(r&&r.length>0){const a=e.data,s=new google.maps.Polygon({map:t,paths:r,fillColor:a.color||"#F59E0B",fillOpacity:a.fillOpacity||.35,strokeColor:a.color||"#F59E0B",strokeOpacity:.8,strokeWeight:a.strokeWeight||2});n.push(s);let o=0,i=0;r.forEach(e=>{o+=e.lat,i+=e.lng});const l={lat:o/r.length,lng:i/r.length},c=e.data.area||0,d=e.data.perimeter||0,u='\n          <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n            <div style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); color: white; padding: 12px; margin: -12px -12px 12px -12px; border-radius: 8px 8px 0 0;">\n              <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                <span style="font-size: 20px; margin-right: 8px;">\u2b1f</span>\n                <h3 style="margin: 0; font-size: 18px; font-weight: 700;">'.concat(e.name,'</h3>\n              </div>\n              <p style="margin: 0; font-size: 12px; opacity: 0.9;">Polygon</p>\n            </div>\n            <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n              <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px; font-size: 13px;">\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udcd0 Area:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat((c/1e6).toFixed(2),' km\xb2</span>\n\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udccf Perimeter:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat((d/1e3).toFixed(2),' km</span>\n\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udccd Vertices:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat(r.length,"</span>\n              </div>\n            </div>\n            ").concat(e.data.description?'\n            <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n              <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(e.data.description,"</p>\n            </div>\n            "):"",'\n            <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n              <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n            </div>\n          </div>\n        "),h=new google.maps.Marker({position:l,map:t,title:e.name,icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#F59E0B",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}}),m=new google.maps.InfoWindow({content:u});h.addListener("click",()=>m.open(t,h)),m.open(t,h),n.push(h)}break}case"Bookmark":{const a=e.data.location;if(a){const s=new google.maps.Marker({map:t,position:a,title:e.name,animation:google.maps.Animation.DROP,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#F59E0B",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"\u2b50",color:"#FFFFFF",fontSize:"14px"}}),o='\n          <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n            <div style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); color: white; padding: 12px; margin: -12px -12px 12px -12px; border-radius: 8px 8px 0 0;">\n              <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                <span style="font-size: 20px; margin-right: 8px;">\u2b50</span>\n                <h3 style="margin: 0; font-size: 18px; font-weight: 700;">'.concat(e.name,'</h3>\n              </div>\n              <p style="margin: 0; font-size: 12px; opacity: 0.9;">Bookmarked Location</p>\n            </div>\n            ').concat(e.data.description?'\n            <div style="background: #EFF6FF; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #3B82F6;">\n              <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(e.data.description,"</p>\n            </div>\n            "):"","\n            ").concat(e.data.category?'\n            <div style="background: #F0FDF4; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n              <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83c\udff7\ufe0f Category:</strong> '.concat(e.data.category,"</p>\n            </div>\n            "):"",'\n            <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n              <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px; font-size: 13px;">\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udccc Coordinates:</span>\n                <span style="color: #1F2937; font-weight: 600; font-family: monospace;">').concat(a.lat.toFixed(6),", ").concat(a.lng.toFixed(6),'</span>\n              </div>\n            </div>\n            <div style="margin-top: 10px; display: flex; gap: 8px; justify-content: center;">\n              <button id="delete-bookmark-').concat(e.id,'" style="padding: 8px 16px; font-size: 13px; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(220, 38, 38, 0.3);">\n                \ud83d\uddd1\ufe0f Delete\n              </button>\n            </div>\n            <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n              <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n            </div>\n          </div>\n        "),i=new google.maps.InfoWindow({content:o});s.addListener("click",()=>i.open(t,s)),i.open(t,s),r&&google.maps.event.addListenerOnce(i,"domready",()=>{const t=document.getElementById("delete-bookmark-".concat(e.id));t&&t.addEventListener("click",()=>{const t=document.createElement("div");t.style.cssText="\n                  position: fixed;\n                  top: 0;\n                  left: 0;\n                  right: 0;\n                  bottom: 0;\n                  background: rgba(0, 0, 0, 0.5);\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  z-index: 10000;\n                  backdrop-filter: blur(4px);\n                ",t.innerHTML='\n                  <div style="background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); max-width: 400px; width: 90%; font-family: system-ui, -apple-system, sans-serif;">\n                    <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; padding: 20px; border-radius: 12px 12px 0 0;">\n                      <div style="display: flex; align-items: center; gap: 12px;">\n                        <span style="font-size: 32px;">\u26a0\ufe0f</span>\n                        <div>\n                          <h3 style="margin: 0; font-size: 20px; font-weight: 700;">Delete Bookmark</h3>\n                          <p style="margin: 4px 0 0 0; font-size: 14px; opacity: 0.9;">This action cannot be undone</p>\n                        </div>\n                      </div>\n                    </div>\n                    <div style="padding: 24px;">\n                      <p style="margin: 0 0 24px 0; font-size: 15px; color: #374151;">\n                        Are you sure you want to delete the bookmark <strong>"'.concat(e.name,'"</strong>?\n                      </p>\n                      <div style="display: flex; gap: 12px; justify-content: flex-end;">\n                        <button id="cancel-delete" style="padding: 10px 20px; font-size: 14px; background: #F3F4F6; color: #374151; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">\n                          Cancel\n                        </button>\n                        <button id="confirm-delete" style="padding: 10px 20px; font-size: 14px; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(220, 38, 38, 0.3);">\n                          Delete\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                '),document.body.appendChild(t);const n=t.querySelector("#confirm-delete"),a=t.querySelector("#cancel-delete"),o=()=>{document.body.removeChild(t)};null===n||void 0===n||n.addEventListener("click",()=>{r.deleteBookmark(e.id),s.setMap(null),i.close(),o(),window.dispatchEvent(new CustomEvent("bookmarkDeleted"))}),null===a||void 0===a||a.addEventListener("click",o),t.addEventListener("click",e=>{e.target===t&&o()})})}),n.push(s)}break}case"Elevation":{const s=e.data.points;if(s&&s.length>0){const o=new google.maps.Polyline({map:t,path:s,strokeColor:"#C2410C",strokeOpacity:1,strokeWeight:3});n.push(o),s.forEach((e,r)=>{const a=new google.maps.Marker({position:e,map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"#C2410C",fillOpacity:.8,strokeColor:"#FFFFFF",strokeWeight:1.5},label:{text:"".concat(r+1),color:"#FFFFFF",fontSize:"10px",fontWeight:"bold"}});n.push(a)});const i=Math.floor(s.length/2),l=s[i],c=e.data.elevationData||[];let d="",u=1/0,h=-1/0;if(c.length>0){c.forEach(e=>{const t=e.elevation||0;u=Math.min(u,t),h=Math.max(h,t)});const e=h-u||1,t=300,r=100;d=c.map((n,a)=>{const s=a/(c.length-1)*t,o=(n.elevation-u)/e,i=r-(o*(r-20)+10);return"".concat(s,",").concat(i)}).join(" ")}const m='\n          <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n            <div style="background: linear-gradient(135deg, #C2410C 0%, #9A3412 100%); color: white; padding: 12px; margin: -12px -12px 12px -12px; border-radius: 8px 8px 0 0;">\n              <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                <span style="font-size: 20px; margin-right: 8px;">\u26f0\ufe0f</span>\n                <h3 style="margin: 0; font-size: 18px; font-weight: 700;">'.concat(e.name,'</h3>\n              </div>\n              <p style="margin: 0; font-size: 12px; opacity: 0.9;">Elevation Profile</p>\n            </div>\n            ').concat(c.length>0?'\n            <div style="background: #FFF7ED; padding: 12px; border-radius: 6px; margin-bottom: 10px;">\n              <p style="margin: 0 0 8px 0; font-size: 12px; font-weight: 600; color: #9A3412;">\ud83d\udcca Elevation Graph</p>\n              <svg width="300" height="100" style="background: white; border-radius: 4px; border: 1px solid #FED7AA;">\n                <polyline points="'.concat(d,'" fill="none" stroke="#C2410C" stroke-width="2"/>\n                <line x1="0" y1="90" x2="300" y2="90" stroke="#E5E7EB" stroke-width="1"/>\n              </svg>\n            </div>\n            '):"",'\n            <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n              <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px; font-size: 13px;">\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udccf Distance:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat(e.data.distance?(e.data.distance/1e3).toFixed(2)+" km":"N/A","</span>\n\n                ").concat(c.length>0?'\n                <span style="color: #6B7280; font-weight: 500;">\u2b06\ufe0f High Point:</span>\n                <span style="color: #1F2937; font-weight: 600;">'.concat(h.toFixed(1),' m</span>\n\n                <span style="color: #6B7280; font-weight: 500;">\u2b07\ufe0f Low Point:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat(u.toFixed(1),' m</span>\n\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udcc8 Elevation Gain:</span>\n                <span style="color: #1F2937; font-weight: 600;">').concat(e.data.elevationGain?e.data.elevationGain.toFixed(1)+" m":"N/A","</span>\n                "):"","\n              </div>\n            </div>\n            ").concat(e.data.description?'\n            <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n              <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(e.data.description,"</p>\n            </div>\n            "):"","\n            ").concat(c.length>0?'\n            <div style="margin-top: 10px; display: flex; gap: 8px; justify-content: center;">\n              <button id="view-full-graph-'.concat(e.id,'" style="padding: 8px 16px; font-size: 13px; background: linear-gradient(135deg, #C2410C 0%, #9A3412 100%); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(194, 65, 12, 0.3);">\n                \ud83d\udcca View Full Graph\n              </button>\n            </div>\n            '):"","\n            ").concat(a(e.id),'\n            <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n              <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString(),"</p>\n            </div>\n          </div>\n        "),g=new google.maps.Marker({position:l,map:t,title:e.name,icon:{path:google.maps.SymbolPath.CIRCLE,scale:9,fillColor:"#C2410C",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"\u2139\ufe0f",color:"#FFFFFF",fontSize:"12px"}}),f=new google.maps.InfoWindow({content:m});g.addListener("click",()=>f.open(t,g)),f.open(t,g),c.length>0&&google.maps.event.addListenerOnce(f,"domready",()=>{const t=document.getElementById("view-full-graph-".concat(e.id));if(t&&t.addEventListener("click",()=>{!function(e,t,r,n){const a=document.createElement("div");a.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.75);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n    backdrop-filter: blur(4px);\n  ";const s=document.createElement("div");s.style.cssText="\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n    max-width: 900px;\n    width: 90%;\n    max-height: 90vh;\n    overflow-y: auto;\n    font-family: system-ui, -apple-system, sans-serif;\n  ";const o=n-r||1,i=800,l=400,c=t.map((e,n)=>{const a=n/(t.length-1)*i,s=(e.elevation-r)/o,c=l-(360*s+20);return"".concat(a,",").concat(c)}).join(" "),d="0,".concat(l," ").concat(c," ").concat(i,",").concat(l),u=e.data.distance||0,h=e.data.elevationGain||0,m=e.data.elevationLoss||0,g=u>0?h/(1e3*u)*100:0;s.innerHTML='\n    <div style="background: linear-gradient(135deg, #C2410C 0%, #9A3412 100%); color: white; padding: 20px; border-radius: 12px 12px 0 0;">\n      <div style="display: flex; justify-content: space-between; align-items: center;">\n        <div>\n          <h2 style="margin: 0 0 8px 0; font-size: 24px; font-weight: 700;">\u26f0\ufe0f '.concat(e.name,'</h2>\n          <p style="margin: 0; font-size: 14px; opacity: 0.9;">Elevation Profile Analysis</p>\n        </div>\n        <button id="close-modal" style="background: rgba(255, 255, 255, 0.2); border: none; color: white; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; font-size: 20px; display: flex; align-items: center; justify-content: center; transition: background 0.2s;">\n          \xd7\n        </button>\n      </div>\n    </div>\n\n    <div style="padding: 24px;">\n      \x3c!-- Statistics Grid --\x3e\n      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">\n        <div style="background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #C2410C;">\n          <p style="margin: 0 0 4px 0; font-size: 12px; color: #9A3412; font-weight: 600; text-transform: uppercase;">Distance</p>\n          <p style="margin: 0; font-size: 24px; font-weight: 700; color: #C2410C;">').concat((u/1e3).toFixed(2),' km</p>\n        </div>\n        <div style="background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #16A34A;">\n          <p style="margin: 0 0 4px 0; font-size: 12px; color: #15803D; font-weight: 600; text-transform: uppercase;">Elevation Gain</p>\n          <p style="margin: 0; font-size: 24px; font-weight: 700; color: #16A34A;">').concat(h.toFixed(0),' m</p>\n        </div>\n        <div style="background: linear-gradient(135deg, #FEF2F2 0%, #FEE2E2 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #DC2626;">\n          <p style="margin: 0 0 4px 0; font-size: 12px; color: #991B1B; font-weight: 600; text-transform: uppercase;">Elevation Loss</p>\n          <p style="margin: 0; font-size: 24px; font-weight: 700; color: #DC2626;">').concat(m.toFixed(0),' m</p>\n        </div>\n        <div style="background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #2563EB;">\n          <p style="margin: 0 0 4px 0; font-size: 12px; color: #1E40AF; font-weight: 600; text-transform: uppercase;">Avg Grade</p>\n          <p style="margin: 0; font-size: 24px; font-weight: 700; color: #2563EB;">').concat(g.toFixed(1),'%</p>\n        </div>\n      </div>\n\n      \x3c!-- Elevation Range --\x3e\n      <div style="display: flex; gap: 16px; margin-bottom: 16px;">\n        <div style="flex: 1; background: #F9FAFB; padding: 12px; border-radius: 8px;">\n          <p style="margin: 0 0 4px 0; font-size: 12px; color: #6B7280; font-weight: 600;">\u2b06\ufe0f Highest Point</p>\n          <p style="margin: 0; font-size: 18px; font-weight: 700; color: #1F2937;">').concat(n.toFixed(1),' m</p>\n        </div>\n        <div style="flex: 1; background: #F9FAFB; padding: 12px; border-radius: 8px;">\n          <p style="margin: 0 0 4px 0; font-size: 12px; color: #6B7280; font-weight: 600;">\u2b07\ufe0f Lowest Point</p>\n          <p style="margin: 0; font-size: 18px; font-weight: 700; color: #1F2937;">').concat(r.toFixed(1),' m</p>\n        </div>\n        <div style="flex: 1; background: #F9FAFB; padding: 12px; border-radius: 8px;">\n          <p style="margin: 0 0 4px 0; font-size: 12px; color: #6B7280; font-weight: 600;">\ud83d\udcca Total Climb</p>\n          <p style="margin: 0; font-size: 18px; font-weight: 700; color: #1F2937;">').concat((n-r).toFixed(1),' m</p>\n        </div>\n      </div>\n\n      \x3c!-- Elevation Graph --\x3e\n      <div style="background: white; padding: 20px; border-radius: 8px; border: 2px solid #E5E7EB; margin-bottom: 16px;">\n        <h3 style="margin: 0 0 16px 0; font-size: 16px; font-weight: 600; color: #1F2937;">\ud83d\udcca Elevation Profile</h3>\n        <div style="overflow-x: auto;">\n          <svg width="').concat(i,'" height="').concat(460,'" style="display: block;">\n            \x3c!-- Grid lines --\x3e\n            ').concat([0,.25,.5,.75,1].map(e=>'\n              <line x1="0" y1="'.concat(20+360*e,'" x2="').concat(i,'" y2="').concat(20+360*e,'"\n                    stroke="#E5E7EB" stroke-width="1" stroke-dasharray="4,4"/>\n              <text x="-5" y="').concat(20+360*e+4,'"\n                    fill="#6B7280" font-size="11px" text-anchor="end">\n                ').concat((n-o*e).toFixed(0),"m\n              </text>\n            ")).join(""),'\n\n            \x3c!-- Area fill --\x3e\n            <polygon points="').concat(d,'" fill="url(#elevGradient)" opacity="0.3"/>\n\n            \x3c!-- Elevation line --\x3e\n            <polyline points="').concat(c,'" fill="none" stroke="#C2410C" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>\n\n            \x3c!-- Data points --\x3e\n            ').concat(t.map((e,n)=>{const a=n/(t.length-1)*i,s=(e.elevation-r)/o,c=l-(360*s+20);return n%Math.ceil(t.length/20)===0?'<circle cx="'.concat(a,'" cy="').concat(c,'" r="4" fill="#C2410C" stroke="white" stroke-width="2"/>'):""}).join(""),'\n\n            \x3c!-- Gradient definition --\x3e\n            <defs>\n              <linearGradient id="elevGradient" x1="0%" y1="0%" x2="0%" y2="100%">\n                <stop offset="0%" style="stop-color:#C2410C;stop-opacity:1" />\n                <stop offset="100%" style="stop-color:#FED7AA;stop-opacity:0.3" />\n              </linearGradient>\n            </defs>\n\n            \x3c!-- X-axis labels --\x3e\n            ').concat([0,.25,.5,.75,1].map(e=>'\n              <text x="'.concat(i*e,'" y="').concat(440,'"\n                    fill="#6B7280" font-size="11px" text-anchor="middle">\n                ').concat((u/1e3*e).toFixed(1)," km\n              </text>\n            ")).join(""),'\n          </svg>\n        </div>\n        <p style="margin: 12px 0 0 0; text-align: center; font-size: 12px; color: #6B7280;">Distance (km) \u2192</p>\n      </div>\n\n      ').concat(e.data.description?'\n      <div style="background: #FEF3C7; padding: 16px; border-radius: 8px; border-left: 4px solid #F59E0B; margin-bottom: 16px;">\n        <p style="margin: 0; font-size: 14px; color: #78350F;"><strong>\ud83d\udcdd Description:</strong></p>\n        <p style="margin: 8px 0 0 0; font-size: 14px; color: #92400E;">'.concat(e.data.description,"</p>\n      </div>\n      "):"",'\n\n      <div style="border-top: 2px solid #E5E7EB; padding-top: 16px; margin-top: 16px;">\n        <p style="margin: 0; font-size: 12px; color: #9CA3AF; text-align: center;">\n          \u23f0 Created: ').concat(new Date(e.createdAt).toLocaleString()," \u2022 ").concat(t.length," data points\n        </p>\n      </div>\n    </div>\n  "),a.appendChild(s),document.body.appendChild(a);const f=()=>{document.body.removeChild(a)},p=s.querySelector("#close-modal");p&&(p.addEventListener("click",f),p.addEventListener("mouseenter",()=>{p.style.background="rgba(255, 255, 255, 0.3)"}),p.addEventListener("mouseleave",()=>{p.style.background="rgba(255, 255, 255, 0.2)"})),a.addEventListener("click",e=>{e.target===a&&f()});const x=e=>{"Escape"===e.key&&(f(),document.removeEventListener("keydown",x))};document.addEventListener("keydown",x)}(e,c,u,h)}),r){const t=document.getElementById("bookmark-btn-".concat(e.id));t&&t.addEventListener("click",()=>{r.addBookmark({name:e.name,type:"Elevation",location:s[0],description:e.data.description}),alert("\u2705 Bookmark added successfully!")})}}),n.push(g)}break}}return n}const tC=e=>{let{map:t,onResultSelect:r}=e;const[a,s]=(0,n.useState)(""),[i,l]=(0,n.useState)("place"),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!1),[x,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)([]),[k,w]=(0,n.useState)([]),[j,N]=(0,n.useState)([]),[S,C]=(0,n.useState)(null),E=(0,n.useRef)(null),A=(0,n.useRef)(null),_=(0,n.useRef)(null),T=(0,n.useRef)(null),L=(0,n.useRef)(null),M=(0,n.useRef)(null);(0,n.useEffect)(()=>{const e=e=>{M.current&&!M.current.contains(e.target)&&(g(!1),p(!1),b(!1))};if(m)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]);const O=e=>{C(e),setTimeout(()=>C(null),3e3)};(0,n.useEffect)(()=>{t&&(E.current=new KS(t),A.current=new JS,_.current=new ZS,D())},[t]),(0,n.useEffect)(()=>{const e=()=>{R(),O("\u2705 Bookmark deleted successfully!")};return window.addEventListener("bookmarkDeleted",e),()=>window.removeEventListener("bookmarkDeleted",e)},[]);const D=()=>{if(_.current){const e=_.current.getRecent(5);v(e)}},R=()=>{if(A.current){const e=A.current.getBookmarks();w(e)}},P=(0,n.useCallback)(async(e,t)=>{if(e.trim()&&E.current){h(!0),g(!0);try{const r=await E.current.search(e,t);if(d(r),_.current&&r.length>0){const n={id:"search_".concat(Date.now()),query:e,type:t||"place",timestamp:new Date,results:r};_.current.addToHistory(n),D()}}catch(r){console.error("Search error:",r),d([])}finally{h(!1)}}},[]),F=()=>{j.forEach(e=>{e instanceof google.maps.Marker||e instanceof google.maps.Polyline||e instanceof google.maps.Polygon||e instanceof google.maps.Circle?e.setMap(null):e instanceof google.maps.InfoWindow&&e.close()}),N([])},I=()=>{s(""),d([]),g(!1),p(!1)},B=e=>{l(e),a.trim()&&P(a,e)};return(0,Vi.jsxs)("div",{className:"relative",ref:M,children:[S&&(0,Vi.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 animate-fade-in-down",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-2xl px-6 py-3 flex items-center gap-3",children:[(0,Vi.jsx)("span",{className:"text-lg",children:S.includes("\u2705")?"\u2705":"\u2139\ufe0f"}),(0,Vi.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.replace("\u2705 ","").replace("\u2139\ufe0f ","")})]})}),(0,Vi.jsx)("button",{onClick:()=>g(!m),className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Global Search",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),m&&(0,Vi.jsxs)("div",{className:"absolute left-0 top-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-5 w-[480px]",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Global Search"]}),(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("button",{onClick:()=>{b(!x),x||R(),p(!1),s(""),d([])},className:"".concat(x?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"text-gray-600 dark:text-gray-400"," hover:text-yellow-600 dark:hover:text-yellow-400 px-2 py-1 rounded hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors"),title:"View Bookmarks",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:x?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),j.length>0&&(0,Vi.jsx)("button",{onClick:F,className:"text-red-500 hover:text-red-700 dark:hover:text-red-400 px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Clear all markers from map",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,Vi.jsx)("button",{onClick:()=>{g(!1),s(""),d([]),p(!1),b(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Close",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,Vi.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("input",{ref:T,type:"text",value:a,onChange:e=>{const t=e.target.value;s(t),L.current&&clearTimeout(L.current),t.trim().length>=2?L.current=setTimeout(()=>{P(t,i)},500):d([])},onKeyDown:e=>{"Enter"===e.key&&a.trim()?(L.current&&clearTimeout(L.current),P(a,i)):"Escape"===e.key&&I()},onFocus:()=>p(!0),placeholder:"Search places, coordinates, data...",className:"flex-1 bg-transparent outline-none text-sm text-gray-900 dark:text-white placeholder-gray-400 px-2 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0}),a&&(0,Vi.jsx)("button",{onClick:I,className:"ml-2 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Clear",children:(0,Vi.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Vi.jsx)("button",{onClick:()=>p(!f),className:"ml-2 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Search History",children:(0,Vi.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,Vi.jsx)("div",{className:"p-3 space-y-2",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,Vi.jsx)("button",{onClick:()=>B("place"),className:"px-3 py-1.5 text-xs rounded-md whitespace-nowrap transition-colors ".concat("place"===i?"bg-blue-500 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"\ud83d\udd0d Places"}),(0,Vi.jsx)("button",{onClick:()=>B("coordinates"),className:"px-3 py-1.5 text-xs rounded-md whitespace-nowrap transition-colors ".concat("coordinates"===i?"bg-blue-500 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"\ud83d\udccd Coordinates"}),(0,Vi.jsx)("button",{onClick:()=>B("savedData"),className:"px-3 py-1.5 text-xs rounded-md whitespace-nowrap transition-colors ".concat("savedData"===i?"bg-blue-500 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"\ud83d\udcbe Saved"}),(0,Vi.jsx)("button",{onClick:()=>B("imported"),className:"px-3 py-1.5 text-xs rounded-md whitespace-nowrap transition-colors ".concat("imported"===i?"bg-blue-500 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"\ud83d\udcc1 Imported"})]})}),(0,Vi.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"max-h-[320px] overflow-y-auto",children:[u&&(0,Vi.jsxs)("div",{className:"p-4 text-center",children:[(0,Vi.jsx)("div",{className:"inline-block w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,Vi.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Searching..."})]}),!u&&x&&(0,Vi.jsxs)("div",{className:"p-2",children:[(0,Vi.jsxs)("p",{className:"px-2 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400 flex items-center justify-between",children:[(0,Vi.jsx)("span",{children:"\u2b50 Saved Bookmarks"}),(0,Vi.jsxs)("span",{className:"text-blue-500",children:[k.length," total"]})]}),0===k.length?(0,Vi.jsxs)("div",{className:"p-8 text-center",children:[(0,Vi.jsx)("div",{className:"text-4xl mb-2",children:"\u2b50"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No bookmarks yet"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:'Search for places and click "\u2b50 Bookmark" to save them'})]}):k.map(e=>(0,Vi.jsxs)("button",{onClick:()=>(e=>{F(),t&&(t.panTo(e.location),t.setZoom(15));const r={id:e.id,type:"Bookmark",name:e.name,createdAt:e.createdAt,data:(0,o.A)((0,o.A)({},e),{},{type:"Bookmark"})};if(t){const e=eC(r,t,A.current||void 0);N(e)}})(e),className:"w-full flex items-start gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-left border-b border-gray-100 dark:border-gray-700 last:border-0",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,Vi.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:(0,Vi.jsx)("span",{className:"text-white text-sm",children:"\u2b50"})})}),(0,Vi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vi.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,Vi.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:e.name}),e.category&&(0,Vi.jsx)("span",{className:"flex-shrink-0 px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",children:e.category})]}),e.description&&(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:e.description}),(0,Vi.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,Vi.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Vi.jsxs)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.location.lat.toFixed(4),","," ",e.location.lng.toFixed(4)]}),(0,Vi.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Vi.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(e.createdAt).toLocaleDateString()]})]})]})]},e.id))]}),!u&&!x&&f&&y.length>0&&0===c.length&&(0,Vi.jsxs)("div",{className:"p-2",children:[(0,Vi.jsx)("p",{className:"px-2 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400",children:"Recent Searches"}),y.map(e=>(0,Vi.jsxs)("button",{onClick:()=>{return s((t=e).query),l(t.type),P(t.query,t.type),void p(!1);var t},className:"w-full flex items-center gap-2 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-left",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Vi.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.query}),(0,Vi.jsxs)("span",{className:"ml-auto text-xs text-gray-400",children:[e.results.length," results"]})]},e.id))]}),!u&&c.length>0&&(0,Vi.jsxs)("div",{className:"p-2",children:[(0,Vi.jsxs)("p",{className:"px-2 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400",children:["Results (",c.length,")"]}),c.map(e=>(0,Vi.jsxs)("button",{onClick:()=>(e=>{if(F(),"saved"===e.source||"imported"===e.source){var n,a;const r={id:e.id,type:(null===(n=e.data)||void 0===n?void 0:n.type)||"Infrastructure",name:e.name,createdAt:(null===(a=e.data)||void 0===a?void 0:a.createdAt)||new Date,data:e.data};if(t){t.panTo(e.location);let n=15;if("Distance"===r.type||"Elevation"===r.type)n=12;else if("Polygon"===r.type)n=13;else if("Circle"===r.type){var s;const t=(null===(s=e.data)||void 0===s?void 0:s.radius)||1e3;n=t>1e4?10:t>5e3?11:13}t.setZoom(n);const a=eC(r,t,A.current||void 0);N(a)}}else{t&&(t.panTo(e.location),t.setZoom(15));const r=new google.maps.Marker({position:e.location,map:t,animation:google.maps.Animation.DROP,title:e.name,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"coordinates"===e.type?"#6366F1":"#3B82F6",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},label:{text:"coordinates"===e.type?"\ud83d\udccd":"\ud83d\udccc",color:"#FFFFFF",fontSize:"14px"}}),n=new google.maps.InfoWindow({content:'\n          <div style="padding: 12px; max-width: 350px; font-family: system-ui, -apple-system, sans-serif;">\n            <div style="background: linear-gradient(135deg, '.concat("coordinates"===e.type?"#6366F1 0%, #4F46E5":"#3B82F6 0%, #2563EB",' 100%); color: white; padding: 12px; margin: -12px -12px 12px -12px; border-radius: 8px 8px 0 0;">\n              <div style="display: flex; align-items: center; margin-bottom: 4px;">\n                <span style="font-size: 20px; margin-right: 8px;">').concat("coordinates"===e.type?"\ud83d\udccd":"\ud83d\udccc",'</span>\n                <h3 style="margin: 0; font-size: 18px; font-weight: 700;">').concat(e.name,'</h3>\n              </div>\n              <p style="margin: 0; font-size: 12px; opacity: 0.9;">').concat("coordinates"===e.type?"Coordinates":"Place","</p>\n            </div>\n            ").concat(e.address?'\n            <div style="background: #EFF6FF; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #3B82F6;">\n              <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udceb Address:</strong><br/>'.concat(e.address,"</p>\n            </div>\n            "):"","\n            ").concat(e.location?'\n            <div style="background: #F9FAFB; padding: 10px; border-radius: 6px; margin-bottom: 10px;">\n              <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px; font-size: 13px;">\n                <span style="color: #6B7280; font-weight: 500;">\ud83d\udccc Coordinates:</span>\n                <span style="color: #1F2937; font-weight: 600; font-family: monospace;">'.concat(e.location.lat.toFixed(6),", ").concat(e.location.lng.toFixed(6),"</span>\n              </div>\n            </div>\n            "):"",'\n            <div style="margin-top: 10px; display: flex; gap: 8px; justify-content: center;">\n              <button id="bookmark-btn-').concat(e.id,'" style="padding: 8px 16px; font-size: 13px; background: linear-gradient(135deg, #10B981 0%, #059669 100%); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);">\n                \u2b50 Bookmark\n              </button>\n            </div>\n            <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n              <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">Click on map to close</p>\n            </div>\n          </div>\n        ')});n.open(t,r),google.maps.event.addListenerOnce(n,"domready",()=>{const t=document.getElementById("bookmark-btn-".concat(e.id));t&&A.current&&t.addEventListener("click",()=>{var t;null===(t=A.current)||void 0===t||t.addBookmark({name:e.name,type:e.type,location:e.location,description:e.address}),O("\u2705 Bookmark added successfully!")})}),N([r])}r&&r(e)})(e),className:"w-full flex items-start gap-3 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-left",children:[(0,Vi.jsx)("div",{className:"mt-1",children:(0,Vi.jsx)("span",{className:"text-lg",children:"places"===e.source?"\ud83d\udccd":"coordinates"===e.source?"\ud83c\udfaf":"saved"===e.source?"\ud83d\udcbe":"\ud83d\udcc1"})}),(0,Vi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.name}),e.address&&(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.address})]}),e.distance&&(0,Vi.jsxs)("div",{className:"text-xs text-gray-400 whitespace-nowrap",children:[e.distance.toFixed(1)," km"]})]},e.id))]}),!u&&a&&0===c.length&&!f&&(0,Vi.jsx)("div",{className:"p-4 text-center",children:(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No results found"})})]})})]})]})},rC=e=>{let{map:t,onOpenSettings:r}=e;const[a,s]=(0,n.useState)(!1),[o,i]=(0,n.useState)("roadmap"),[l,c]=(0,n.useState)(!1),d=n.useRef(null);n.useEffect(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&s(!1)};if(a)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]);return(0,n.useEffect)(()=>{const e=()=>{c(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden flex",children:[(0,Vi.jsx)("button",{onClick:()=>{if(!t)return;const e=t.getZoom()||5;t.setZoom(e+1)},className:"w-10 h-10 flex items-center justify-center text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-r border-gray-200 dark:border-gray-700",title:"Zoom In",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,Vi.jsx)("button",{onClick:()=>{if(!t)return;const e=t.getZoom()||5;t.setZoom(e-1)},className:"w-10 h-10 flex items-center justify-center text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Zoom Out",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),(0,Vi.jsx)("button",{onClick:async()=>{if(!t)return;try{const e=await fetch("https://www.googleapis.com/geolocation/v1/geolocate?key=".concat("AIzaSyAT5j5Zy8q4XSHLi1arcpkce8CNvbljbUQ"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(e.ok){const r=await e.json(),n={lat:r.location.lat,lng:r.location.lng};return t.setCenter(n),t.setZoom(15),void new google.maps.Marker({position:n,map:t,title:"Your Location (Google Geolocation)",icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#4285F4",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2}})}}catch(e){console.warn("Google Maps Geolocation API failed, trying browser geolocation:",e)}navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const r={lat:e.coords.latitude,lng:e.coords.longitude};t.setCenter(r),t.setZoom(15),new google.maps.Marker({position:r,map:t,title:"Your Location (Browser Geolocation)",icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#4285F4",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2}})},()=>{alert("Error: Both Google Maps and browser geolocation services failed. Please check your location permissions and internet connection.")}):alert("Error: Your browser doesn't support geolocation.")},className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"My Location",children:(0,Vi.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Vi.jsx)("button",{onClick:()=>{if(!t)return;const e=new google.maps.LatLngBounds(new google.maps.LatLng(7,68.5),new google.maps.LatLng(35,97));t.fitBounds(e)},className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center text-orange-600 dark:text-orange-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Fit to India",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),(0,Vi.jsx)("button",{onClick:()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),c(!1)):(document.documentElement.requestFullscreen(),c(!0))},className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center text-purple-600 dark:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:l?"Exit Fullscreen":"Fullscreen",children:l?(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"})}):(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),(0,Vi.jsx)("button",{onClick:()=>{if(!t)return console.warn("\u26a0\ufe0f Map instance is missing - reloading page to recreate map"),void window.location.reload();console.log("\ud83d\udd04 Refreshing map...");const e=t.getCenter(),r=t.getZoom(),n=t.getMapTypeId();if(e&&r){google.maps.event.trigger(t,"resize");const a=r+.001;t.setZoom(a),setTimeout(()=>{t.setZoom(r),t.setCenter(e),n&&t.setMapTypeId(n),console.log("\u2705 Map refreshed successfully")},50)}},className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Refresh Map",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),r&&(0,Vi.jsx)("button",{onClick:r,className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center text-indigo-600 dark:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Boundary Settings",children:(0,Vi.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Vi.jsxs)("div",{className:"relative",ref:d,children:[(0,Vi.jsx)("button",{onClick:()=>s(!a),className:"w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Map Type",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})})}),a&&(0,Vi.jsx)("div",{className:"absolute top-12 left-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50 min-w-[140px]",children:[{id:"roadmap",name:"Roadmap",icon:"\ud83d\uddfa\ufe0f"},{id:"satellite",name:"Satellite",icon:"\ud83d\udef0\ufe0f"},{id:"hybrid",name:"Hybrid",icon:"\ud83c\udf0d"},{id:"terrain",name:"Terrain",icon:"\u26f0\ufe0f"}].map(e=>(0,Vi.jsxs)("button",{onClick:()=>{return r=e.id,void(t&&(t.setMapTypeId(r),i(r),s(!1)));var r},className:"w-full px-4 py-2 text-left text-sm flex items-center space-x-2 transition-colors ".concat(o===e.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[(0,Vi.jsx)("span",{children:e.icon}),(0,Vi.jsx)("span",{children:e.name})]},e.id))})]})]})},nC=e=>{let{map:t,layersState:r,onLayerToggle:a,onOpenSettings:s,onDataSaved:o}=e;const i=ci(),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),p=n.useRef(null),x=n.useRef(null);n.useEffect(()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&u(!1),x.current&&!x.current.contains(e.target)&&m(!1)};if(d||h)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d,h]);const b=()=>{c(null),i(Ta(null))},y=[{id:"Distance",name:"Distance",icon:"\ud83d\udccf",count:r.Distance.count,visible:r.Distance.visible},{id:"Polygon",name:"Polygon",icon:"\u2b21",count:r.Polygon.count,visible:r.Polygon.visible},{id:"Circle",name:"Circle",icon:"\u25cb",count:r.Circle.count,visible:r.Circle.visible},{id:"Elevation",name:"Elevation",icon:"\u26f0\ufe0f",count:r.Elevation.count,visible:r.Elevation.visible},{id:"Infrastructure",name:"Infrastructure",icon:"\ud83d\udce1",count:r.Infrastructure.count,visible:r.Infrastructure.visible},{id:"SectorRF",name:"Sector RF",icon:"\ud83d\udcf6",count:r.SectorRF.count,visible:r.SectorRF.visible}];return(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("div",{className:"absolute top-2 left-12 right-4 z-40 flex items-center justify-between gap-3 pointer-events-none",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-3 pointer-events-auto",children:[(0,Vi.jsxs)("div",{className:"relative",ref:p,children:[(0,Vi.jsxs)("button",{onClick:()=>{u(!d),m(!1)},className:"h-11 px-4 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ".concat(d?"ring-2 ring-blue-500":""),title:"GIS Analysis Suite",children:[(0,Vi.jsx)("span",{className:"text-lg",children:"\ud83c\udfaf"}),(0,Vi.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"GIS Tools"}),(0,Vi.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform ".concat(d?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&(0,Vi.jsxs)("div",{className:"absolute top-12 left-0 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[[{id:"distance",name:"Distance Measurement",icon:"\ud83d\udccf"},{id:"polygon",name:"Polygon Drawing",icon:"\u2b21"},{id:"circle",name:"Circle/Radius",icon:"\u25cb"},{id:"elevation",name:"Elevation Profile",icon:"\u26f0\ufe0f"},{id:"infrastructure",name:"Infrastructure Mgmt",icon:"\ud83d\udce1"},{id:"sectorRF",name:"Sector RF Coverage",icon:"\ud83d\udcf6"}].map(e=>(0,Vi.jsxs)("button",{onClick:()=>{return t=e.id,l===t?(c(null),i(Ta(null))):(c(t),i(Ta(t))),void u(!1);var t},className:"w-full px-4 py-3 text-left flex items-center gap-3 transition-colors ".concat(l===e.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,Vi.jsx)("span",{className:"text-xl",children:e.icon}),(0,Vi.jsx)("span",{className:"text-sm font-medium",children:e.name}),l===e.id&&(0,Vi.jsx)("svg",{className:"w-4 h-4 ml-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.id)),(0,Vi.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700"}),(0,Vi.jsxs)("button",{onClick:()=>{f(!0),u(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,Vi.jsx)("span",{className:"text-xl",children:"\ud83d\udcbe"}),(0,Vi.jsx)("span",{className:"text-sm font-medium",children:"Data Hub"})]})]})]}),(0,Vi.jsxs)("div",{className:"relative",ref:x,children:[(0,Vi.jsxs)("button",{onClick:()=>{m(!h),u(!1)},className:"h-11 px-4 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ".concat(h?"ring-2 ring-blue-500":""),title:"Map Layers Control",children:[(0,Vi.jsx)("span",{className:"text-lg",children:"\ud83d\udcca"}),(0,Vi.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Layers"}),(0,Vi.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform ".concat(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&(0,Vi.jsx)("div",{className:"absolute top-12 left-0 w-52 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:y.map(e=>(0,Vi.jsxs)("button",{onClick:()=>a(e.id),className:"w-full px-4 py-3 text-left flex items-center gap-3 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,Vi.jsx)("span",{className:"text-lg",children:e.icon}),(0,Vi.jsxs)("span",{className:"text-sm font-medium flex-1",children:[e.name," (",e.count,")"]}),(0,Vi.jsx)("div",{className:"w-5 h-5 rounded flex items-center justify-center ".concat(e.visible?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-600"),children:e.visible&&(0,Vi.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},e.id))})]}),(0,Vi.jsx)("div",{className:"flex-1 max-w-lg pointer-events-auto",children:(0,Vi.jsx)(tC,{map:t})}),(0,Vi.jsx)("div",{className:"pointer-events-auto",children:(0,Vi.jsx)(rC,{map:t,onOpenSettings:s})})]})}),"distance"===l&&(0,Vi.jsx)(mc,{map:t,onSave:o,onClose:b}),"polygon"===l&&(0,Vi.jsx)(gc,{map:t,onSave:o,onClose:b}),"circle"===l&&(0,Vi.jsx)(fc,{map:t,onSave:o,onClose:b}),"elevation"===l&&(0,Vi.jsx)(Kp,{map:t,onSave:o,onClose:b}),"infrastructure"===l&&(0,Vi.jsx)(Yp,{map:t,onSave:o,onClose:b}),"sectorRF"===l&&(0,Vi.jsx)(Jp,{map:t,onSave:o,onClose:b}),g&&(0,Vi.jsx)(VS,{map:t,onClose:()=>f(!1)})]})},aC=e=>{let{map:t}=e;const[r,a]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!t)return;const e=t.addListener("mousemove",e=>{e.latLng&&a({lat:e.latLng.lat(),lng:e.latLng.lng()})}),r=t.addListener("mouseout",()=>{a(null)});return()=>{google.maps.event.removeListener(e),google.maps.event.removeListener(r)}},[t]);const s=(e,t)=>{const r=t?e>=0?"N":"S":e>=0?"E":"W";return"".concat(Math.abs(e).toFixed(6),"\xb0 ").concat(r)};return r?(0,Vi.jsx)("div",{className:"fixed bottom-2 right-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 px-4 py-2 z-10",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-3 text-sm",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Vi.jsx)("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Lat:"}),(0,Vi.jsx)("span",{className:"text-gray-900 dark:text-white font-mono",children:s(r.lat,!0)})]}),(0,Vi.jsx)("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Vi.jsx)("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Lng:"}),(0,Vi.jsx)("span",{className:"text-gray-900 dark:text-white font-mono",children:s(r.lng,!1)})]})]})}):null},sC=e=>{let{isOpen:t,onClose:r,settings:a,onSettingsChange:s}=e;const[i,l]=(0,n.useState)(a);(0,n.useEffect)(()=>{l(a)},[a]);if(!t)return null;return(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[(0,Vi.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsxs)("svg",{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Boundary Settings"]}),(0,Vi.jsx)("button",{onClick:r,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Show Boundaries"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Display region boundaries on the map"})]}),(0,Vi.jsx)("button",{onClick:()=>l((0,o.A)((0,o.A)({},i),{},{enabled:!i.enabled})),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(i.enabled?"bg-blue-600":"bg-gray-300"),children:(0,Vi.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(i.enabled?"translate-x-6":"translate-x-1")})})]}),(0,Vi.jsxs)("div",{className:i.enabled?"":"opacity-50 pointer-events-none",children:[(0,Vi.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Boundary Color"}),(0,Vi.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[{name:"Blue",value:"#3B82F6"},{name:"Green",value:"#10B981"},{name:"Purple",value:"#8B5CF6"},{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F59E0B"},{name:"Pink",value:"#EC4899"},{name:"Cyan",value:"#06B6D4"},{name:"Indigo",value:"#6366F1"}].map(e=>(0,Vi.jsx)("button",{onClick:()=>l((0,o.A)((0,o.A)({},i),{},{color:e.value})),className:"h-12 rounded-lg border-2 transition-all ".concat(i.color===e.value?"border-gray-900 dark:border-white ring-2 ring-offset-2 ring-blue-500":"border-gray-300 dark:border-gray-600 hover:border-gray-400"),style:{backgroundColor:e.value},title:e.name},e.value))}),(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Custom:"}),(0,Vi.jsx)("input",{type:"color",value:i.color,onChange:e=>l((0,o.A)((0,o.A)({},i),{},{color:e.target.value})),className:"h-10 w-20 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),(0,Vi.jsx)("span",{className:"text-xs font-mono text-gray-600 dark:text-gray-400 ml-2",children:i.color})]})]}),(0,Vi.jsxs)("div",{className:i.enabled?"":"opacity-50 pointer-events-none",children:[(0,Vi.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:["Normal Opacity: ",Math.round(100*i.opacity),"%"]}),(0,Vi.jsx)("input",{type:"range",min:"0",max:"100",value:100*i.opacity,onChange:e=>l((0,o.A)((0,o.A)({},i),{},{opacity:parseInt(e.target.value)/100})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),(0,Vi.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(0,Vi.jsx)("span",{children:"Transparent"}),(0,Vi.jsx)("span",{children:"Opaque"})]})]}),(0,Vi.jsxs)("div",{className:i.enabled?"":"opacity-50 pointer-events-none",children:[(0,Vi.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Preview"}),(0,Vi.jsxs)("div",{className:"h-16 rounded-lg border-2 border-gray-300 dark:border-gray-600 relative overflow-hidden",children:[(0,Vi.jsx)("div",{className:"absolute inset-0",style:{backgroundColor:i.color,opacity:i.opacity}}),(0,Vi.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Vi.jsx)("span",{className:"text-sm font-medium text-white bg-black bg-opacity-50 px-3 py-1 rounded",children:"Normal View"})})]})]}),(0,Vi.jsx)("div",{className:i.enabled?"":"opacity-50 pointer-events-none",children:(0,Vi.jsxs)("div",{className:"flex items-start p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,Vi.jsx)("input",{type:"checkbox",checked:i.dimWhenToolActive,onChange:e=>l((0,o.A)((0,o.A)({},i),{},{dimWhenToolActive:e.target.checked})),className:"mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),(0,Vi.jsxs)("div",{className:"ml-3",children:[(0,Vi.jsx)("label",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Auto-Dim When Tool Active"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Reduce boundary opacity when using GIS tools to minimize distraction"})]})]})}),i.enabled&&i.dimWhenToolActive&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:["Dimmed Opacity (Tool Active): ",Math.round(100*i.dimmedOpacity),"%"]}),(0,Vi.jsx)("input",{type:"range",min:"0",max:"100",value:100*i.dimmedOpacity,onChange:e=>l((0,o.A)((0,o.A)({},i),{},{dimmedOpacity:parseInt(e.target.value)/100})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),(0,Vi.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(0,Vi.jsx)("span",{children:"Hidden"}),(0,Vi.jsx)("span",{children:"Subtle"})]}),(0,Vi.jsxs)("div",{className:"h-16 rounded-lg border-2 border-gray-300 dark:border-gray-600 relative overflow-hidden mt-2",children:[(0,Vi.jsx)("div",{className:"absolute inset-0",style:{backgroundColor:i.color,opacity:i.dimmedOpacity}}),(0,Vi.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Vi.jsx)("span",{className:"text-sm font-medium text-white bg-black bg-opacity-50 px-3 py-1 rounded",children:"Dimmed View"})})]})]})]}),(0,Vi.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 px-6 py-4 flex gap-3",children:[(0,Vi.jsx)("button",{onClick:()=>{l({enabled:!0,color:"#3B82F6",opacity:.5,dimWhenToolActive:!0,dimmedOpacity:.2})},className:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Reset to Default"}),(0,Vi.jsx)("button",{onClick:()=>{s(i),localStorage.setItem("mapBoundarySettings",JSON.stringify(i)),r()},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Save Changes"})]})]})})},oC=(e,t)=>{const r=[];return e.forEach(e=>{try{switch(e.type){case"Distance":const n=iC(e,t);r.push(...n);break;case"Polygon":const a=lC(e,t);a&&r.push(a);break;case"Circle":const s=cC(e,t);s&&r.push(s);break;case"Elevation":const o=dC(e,t);r.push(...o);break;case"Infrastructure":const i=uC(e,t);i&&r.push(i)}}catch(n){console.error("Error creating overlay for ".concat(e.type," #").concat(e.id,":"),n)}}),r},iC=(e,t)=>{const r=[],n=e.data;if(!n.points||n.points.length<2)return r;const a=n.points.map(e=>({lat:e.lat,lng:e.lng})),s=new google.maps.Polyline({path:a,strokeColor:n.color||"#3B82F6",strokeWeight:3,strokeOpacity:.8,map:null});return r.push({id:"".concat(e.id,"-line"),type:"Distance",overlay:s}),n.points.forEach((a,s)=>{const o=new google.maps.Marker({position:{lat:a.lat,lng:a.lng},label:{text:a.label||String.fromCharCode(65+s),color:"#FFFFFF",fontWeight:"bold"},icon:{path:google.maps.SymbolPath.CIRCLE,scale:12,fillColor:n.color||"#3B82F6",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2},map:null,title:"".concat(e.name," - Point ").concat(a.label||String.fromCharCode(65+s))}),i=new google.maps.InfoWindow({content:'\n        <div style="padding: 12px; max-width: 300px; font-family: system-ui, -apple-system, sans-serif;">\n          <div style="background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%); padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n            <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\ud83d\udccf '.concat(e.name,'</h3>\n          </div>\n          <div style="background: #EFF6FF; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #3B82F6;">\n            <p style="margin: 0 0 6px 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udccd Point ').concat(a.label||String.fromCharCode(65+s),'</strong></p>\n            <p style="margin: 0; font-size: 12px; color: #6B7280;">\n              <span style="font-family: monospace; background: #E5E7EB; padding: 2px 6px; border-radius: 3px; font-size: 11px;">\n                ').concat(a.lat.toFixed(6),", ").concat(a.lng.toFixed(6),'\n              </span>\n            </p>\n          </div>\n          <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n            <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\ud83d\udd35 Distance Measurement</p>\n          </div>\n        </div>\n      ')});o.addListener("click",()=>{i.open(t,o)}),r.push({id:"".concat(e.id,"-marker-").concat(s),type:"Distance",overlay:o,infoWindow:i})}),r},lC=(e,t)=>{const r=e.data;if(!r.vertices||r.vertices.length<3)return null;const n=r.vertices.map(e=>({lat:e.lat,lng:e.lng})),a=new google.maps.Polygon({paths:n,strokeColor:r.color||"#8B5CF6",strokeOpacity:.8,strokeWeight:r.strokeWeight||2,fillColor:r.color||"#8B5CF6",fillOpacity:r.fillOpacity||.35,map:null}),s=hC(n),o=new google.maps.InfoWindow({position:s,content:'\n      <div style="padding: 12px; max-width: 320px; font-family: system-ui, -apple-system, sans-serif;">\n        <div style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n          <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\u2b21 '.concat(e.name,'</h3>\n        </div>\n        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">\n          <div style="background: #F3E8FF; padding: 8px; border-radius: 6px;">\n            <p style="margin: 0; font-size: 10px; font-weight: 600; color: #6B21A8; text-transform: uppercase;">Area</p>\n            <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(gC(r.area),'</p>\n          </div>\n          <div style="background: #F3E8FF; padding: 8px; border-radius: 6px;">\n            <p style="margin: 0; font-size: 10px; font-weight: 600; color: #6B21A8; text-transform: uppercase;">Perimeter</p>\n            <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(mC(r.perimeter),"</p>\n          </div>\n        </div>\n        ").concat(r.description?'\n        <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n          <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(r.description,"</p>\n        </div>"):"",'\n        <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n          <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\ud83d\udfe3 Polygon Drawing</p>\n        </div>\n      </div>\n    ')});return a.addListener("click",()=>{o.open(t)}),{id:e.id,type:"Polygon",overlay:a,infoWindow:o}},cC=(e,t)=>{const r=e.data;if(!r.center||!r.radius)return null;const n=new google.maps.Circle({center:{lat:r.center.lat,lng:r.center.lng},radius:r.radius,strokeColor:r.color||"#10B981",strokeOpacity:.8,strokeWeight:r.strokeWeight||2,fillColor:r.color||"#10B981",fillOpacity:r.fillOpacity||.35,map:null}),a=new google.maps.InfoWindow({position:r.center,content:'\n      <div style="padding: 12px; max-width: 320px; font-family: system-ui, -apple-system, sans-serif;">\n        <div style="background: linear-gradient(135deg, #10B981 0%, #059669 100%); padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n          <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\u25cb '.concat(e.name,'</h3>\n        </div>\n        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">\n          <div style="background: #D1FAE5; padding: 8px; border-radius: 6px;">\n            <p style="margin: 0; font-size: 10px; font-weight: 600; color: #065F46; text-transform: uppercase;">Radius</p>\n            <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(mC(r.radius),'</p>\n          </div>\n          <div style="background: #D1FAE5; padding: 8px; border-radius: 6px;">\n            <p style="margin: 0; font-size: 10px; font-weight: 600; color: #065F46; text-transform: uppercase;">Area</p>\n            <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(gC(r.area),"</p>\n          </div>\n        </div>\n        ").concat(r.description?'\n        <div style="background: #FEF3C7; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #F59E0B;">\n          <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(r.description,"</p>\n        </div>"):"",'\n        <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n          <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\ud83d\udfe2 Circle/Radius Drawing</p>\n        </div>\n      </div>\n    ')});return n.addListener("click",()=>{a.open(t)}),{id:e.id,type:"Circle",overlay:n,infoWindow:a}},dC=(e,t)=>{const r=[],n=e.data;if(!n.points||n.points.length<2)return r;const a=n.points.map(e=>({lat:e.lat,lng:e.lng})),s=new google.maps.Polyline({path:a,strokeColor:"#F59E0B",strokeWeight:3,strokeOpacity:.8,map:null});if(r.push({id:"".concat(e.id,"-line"),type:"Elevation",overlay:s}),n.highPoint){const t=new google.maps.Marker({position:n.highPoint.location,icon:{path:google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,scale:6,fillColor:"#EF4444",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2,rotation:270},map:null,title:"Highest Point: ".concat(n.highPoint.elevation,"m")});r.push({id:"".concat(e.id,"-high"),type:"Elevation",overlay:t})}if(n.lowPoint){const t=new google.maps.Marker({position:n.lowPoint.location,icon:{path:google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,scale:6,fillColor:"#3B82F6",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2,rotation:90},map:null,title:"Lowest Point: ".concat(n.lowPoint.elevation,"m")});r.push({id:"".concat(e.id,"-low"),type:"Elevation",overlay:t})}return r},uC=(e,t)=>{const r=e.data;if(!r.location)return null;const n=new google.maps.Marker({position:r.location,icon:(()=>{const e="active"===r.status?"#10B981":"maintenance"===r.status?"#F59E0B":"#EF4444";return{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:e,fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2}})(),map:null,title:e.name}),a="active"===r.status?{bg:"#D1FAE5",text:"#065F46",gradient:"linear-gradient(135deg, #10B981 0%, #059669 100%)"}:"maintenance"===r.status?{bg:"#FEF3C7",text:"#92400E",gradient:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)"}:{bg:"#FEE2E2",text:"#991B1B",gradient:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)"},s=new google.maps.InfoWindow({content:'\n      <div style="padding: 12px; max-width: 320px; font-family: system-ui, -apple-system, sans-serif;">\n        <div style="background: '.concat(a.gradient,'; padding: 12px; border-radius: 8px; margin-bottom: 12px;">\n          <h3 style="margin: 0; font-size: 16px; font-weight: 700; color: white; text-align: center;">\ud83d\udce1 ').concat(e.name,'</h3>\n        </div>\n        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">\n          <div style="background: ').concat(a.bg,'; padding: 8px; border-radius: 6px;">\n            <p style="margin: 0; font-size: 10px; font-weight: 600; color: ').concat(a.text,'; text-transform: uppercase;">Type</p>\n            <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937;">').concat(r.type||"Infrastructure",'</p>\n          </div>\n          <div style="background: ').concat(a.bg,'; padding: 8px; border-radius: 6px;">\n            <p style="margin: 0; font-size: 10px; font-weight: 600; color: ').concat(a.text,'; text-transform: uppercase;">Status</p>\n            <p style="margin: 4px 0 0 0; font-size: 13px; font-weight: 600; color: #1F2937; text-transform: capitalize;">').concat(r.status||"unknown","</p>\n          </div>\n        </div>\n        ").concat(r.description?'\n        <div style="background: #F3F4F6; padding: 10px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #6B7280;">\n          <p style="margin: 0; font-size: 13px; color: #1F2937;"><strong>\ud83d\udcdd Description:</strong><br/>'.concat(r.description,"</p>\n        </div>"):"",'\n        <div style="border-top: 1px solid #E5E7EB; padding-top: 8px; margin-top: 8px;">\n          <p style="margin: 0; font-size: 11px; color: #9CA3AF; text-align: center;">\ud83c\udfe2 Infrastructure Management</p>\n        </div>\n      </div>\n    ')});return n.addListener("click",()=>{s.open(t,n)}),{id:e.id,type:"Infrastructure",overlay:n,infoWindow:s}},hC=e=>{const t=new google.maps.LatLngBounds;e.forEach(e=>t.extend(e));const r=t.getCenter();return{lat:r.lat(),lng:r.lng()}},mC=e=>e<1e3?"".concat(Math.round(e)," m"):"".concat((e/1e3).toFixed(2)," km"),gC=e=>e<1e4?"".concat(Math.round(e)," m\xb2"):"".concat((e/1e6).toFixed(2)," km\xb2"),fC=()=>{const e=(0,n.useRef)(null),t=(0,n.useRef)(null),{isLoaded:r,loadError:a,createMap:s}=(()=>{const e=(0,n.useContext)(El);if(void 0===e)throw new Error("useGoogleMaps must be used within a GoogleMapsProvider");return e})(),{mapInstance:i,isMapLoaded:l,activeGISTool:c}=di(e=>e.map),{user:d}=di(e=>e.auth),u=ci(),[h,m]=(0,n.useState)([]),[g,f]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[v,k]=(0,n.useState)([]),[w,j]=(0,n.useState)({enabled:!0,color:"#3B82F6",opacity:.5,dimWhenToolActive:!0,dimmedOpacity:.2}),[N,S]=(0,n.useState)(null),[C,E]=(0,n.useState)(!1),[A,_]=(0,n.useState)(null),[T,L]=(0,n.useState)(!1),[M,O]=(0,n.useState)(null),[D,R]=(0,n.useState)({Distance:{visible:!1,count:0,overlays:[]},Polygon:{visible:!1,count:0,overlays:[]},Circle:{visible:!1,count:0,overlays:[]},Elevation:{visible:!1,count:0,overlays:[]},Infrastructure:{visible:!1,count:0,overlays:[]},SectorRF:{visible:!1,count:0,overlays:[]}});(0,n.useEffect)(()=>{const e=async()=>{if(d){const e=await(async e=>{if(!e)return[];if("Admin"===e.role)return Tl;const t=e.assignedRegions||[];try{const e=await nl(),r=new Date,n=e.filter(e=>new Date(e.expiresAt)>r).map(e=>e.region);return Array.from(new Set([...t,...n]))}catch(r){return console.error("Error fetching temporary access:",r),t}})(d);console.log("\ud83d\uddfa\ufe0f Updated map regions:",e),m(e)}};e();const t=setInterval(e,1e4);return()=>clearInterval(t)},[d]),(0,n.useEffect)(()=>()=>{i&&(console.log("\ud83e\uddf9 Cleaning up map instance (navigating away from map page)"),u(pa(null)))},[i,u]),(0,n.useEffect)(()=>{const e=localStorage.getItem("mapBoundarySettings");if(e)try{j(JSON.parse(e))}catch(t){console.error("Failed to load boundary settings:",t)}},[]),(0,n.useEffect)(()=>{const e=sessionStorage.getItem("viewOnMapData");if(e&&i)try{const t=JSON.parse(e);console.log("\ud83d\uddfa\ufe0f View on Map data received:",t);const{data:r,type:n}=t;sessionStorage.removeItem("viewOnMapData");const a=P(r,n,i);S({overlays:a,type:n,data:r}),F(a,i),"elevation"===n&&r.elevation_data&&(O(r),L(!0)),u(Ya({type:"success",title:"View on Map",message:"Displaying ".concat(n," on map"),autoClose:!0,duration:3e3}))}catch(t){console.error("Error processing View on Map data:",t),u(Ya({type:"error",title:"View on Map Error",message:"Failed to display item on map",autoClose:!0,duration:3e3}))}},[i,u]),(0,n.useEffect)(()=>{z()},[]),(0,n.useEffect)(()=>{i&&v.length>0&&(console.log("\ud83d\udccd Map loaded, creating overlays for saved data..."),z())},[i]);const P=(e,t,r)=>{const n=[];switch(t){case"distance":{const t=e.points||[];if(t.length>0){const a=new google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:4,map:r,clickable:!0});n.push(a);const s=new google.maps.Marker({position:t[0],map:r,label:{text:"A",color:"white",fontWeight:"bold"},title:"Start Point"});n.push(s);const o=new google.maps.Marker({position:t[t.length-1],map:r,label:{text:"B",color:"white",fontWeight:"bold"},title:"End Point"});n.push(o);const i=t[Math.floor(t.length/2)],l=new google.maps.InfoWindow({content:'<div style="padding: 12px;">\n              <strong style="font-size: 14px;">'.concat(e.measurement_name||"Distance Measurement",'</strong><br/>\n              <div style="margin: 8px 0;">\n                <strong>Distance:</strong> ').concat(I(e.total_distance),"<br/>\n                ").concat(e.notes?'<em style="color: #666;">'.concat(e.notes,"</em><br/>"):"",'\n              </div>\n              <button\n                id="view360Button"\n                style="\n                  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                  color: white;\n                  border: none;\n                  padding: 8px 16px;\n                  border-radius: 6px;\n                  cursor: pointer;\n                  font-weight: 600;\n                  font-size: 13px;\n                  width: 100%;\n                  margin-top: 4px;\n                  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                  transition: transform 0.2s;\n                "\n                onmouseover="this.style.transform=\'scale(1.05)\'"\n                onmouseout="this.style.transform=\'scale(1)\'"\n                onclick="window.open360View(').concat(i.lat,", ").concat(i.lng,')"\n              >\n                \ud83c\udf10 View 360\xb0 Street View\n              </button>\n            </div>'),position:i});window.open360View=(e,t)=>{_({lat:e,lng:t}),E(!0)},l.open(r),n.push(l),a.addListener("click",()=>{l.open(r)}),s.addListener("click",()=>{l.open(r)}),o.addListener("click",()=>{l.open(r)})}break}case"elevation":{const t=e.start_point,a=e.end_point;if(t&&a){const s=new google.maps.Polyline({path:[t,a],geodesic:!0,strokeColor:"#8B4513",strokeOpacity:1,strokeWeight:4,map:r});n.push(s);const o=new google.maps.Marker({position:t,map:r,label:{text:"A",color:"white",fontWeight:"bold"},title:"Start Point"});n.push(o);const i=new google.maps.Marker({position:a,map:r,label:{text:"B",color:"white",fontWeight:"bold"},title:"End Point"});n.push(i);const l=new google.maps.InfoWindow({content:'<div style="padding: 8px;">\n              <strong>'.concat(e.profile_name||"Elevation Profile","</strong><br/>\n              <strong>Distance:</strong> ").concat(I(e.total_distance),"<br/>\n              <strong>Max Elevation:</strong> ").concat(e.max_elevation,"m<br/>\n              <strong>Min Elevation:</strong> ").concat(e.min_elevation,"m\n            </div>"),position:{lat:(t.lat+a.lat)/2,lng:(t.lng+a.lng)/2}});l.open(r),n.push(l)}break}case"polygon":{const t=e.coordinates||[];if(t.length>0){const a=new google.maps.Polygon({paths:t,strokeColor:e.stroke_color||"#000000",strokeOpacity:1,strokeWeight:2,fillColor:e.fill_color||"#FF0000",fillOpacity:e.opacity||.35,map:r});n.push(a);const s=new google.maps.LatLngBounds;t.forEach(e=>s.extend(e));const o=s.getCenter(),i=new google.maps.InfoWindow({content:'<div style="padding: 8px;">\n              <strong>'.concat(e.polygon_name||"Polygon","</strong><br/>\n              ").concat(e.area?"<strong>Area:</strong> ".concat(B(e.area),"<br/>"):"","\n              ").concat(e.notes?"<em>".concat(e.notes,"</em>"):"","\n            </div>"),position:o});i.open(r),n.push(i)}break}case"circle":{const t={lat:Number(e.center_lat),lng:Number(e.center_lng)},a=Number(e.radius);console.log("\u2b55 Creating circle:",{center:t,radius:a,strokeColor:e.stroke_color,fillColor:e.fill_color,opacity:e.opacity});const s=new google.maps.Circle({center:t,radius:a,strokeColor:e.stroke_color||"#4285F4",strokeOpacity:1,strokeWeight:3,fillColor:e.fill_color||"#4285F4",fillOpacity:Number(e.opacity)||.4,map:r,zIndex:2,clickable:!0,editable:!1});n.push(s),console.log("\u2705 Circle created and added to map");const o=new google.maps.Marker({position:t,map:r,title:e.circle_name||"Circle",zIndex:10,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#4CAF50",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:3},label:{text:"\u2b55",color:"#ffffff",fontSize:"16px",fontWeight:"bold"}});n.push(o);const i=new google.maps.InfoWindow({content:'<div style="padding: 8px;">\n            <strong>'.concat(e.circle_name||"Circle","</strong><br/>\n            <strong>Center:</strong> ").concat(t.lat.toFixed(4),", ").concat(t.lng.toFixed(4),"<br/>\n            <strong>Radius:</strong> ").concat(I(a),"<br/>\n            ").concat(e.notes?"<em>".concat(e.notes,"</em>"):"","\n          </div>"),position:t});i.open(r),n.push(i);break}case"sector":{const t={lat:Number(e.tower_lat),lng:Number(e.tower_lng)},a=e.azimuth,s=e.beamwidth,o=e.radius,i=[t],l=a+s/2;for(let e=a-s/2;e<=l;e+=1){const r=google.maps.geometry.spherical.computeOffset(new google.maps.LatLng(t.lat,t.lng),o,e);i.push({lat:r.lat(),lng:r.lng()})}i.push(t);const c=new google.maps.Polygon({paths:i,strokeColor:e.stroke_color||"#FF6B6B",strokeOpacity:1,strokeWeight:2,fillColor:e.fill_color||"#FF6B6B",fillOpacity:e.opacity||.35,map:r});n.push(c);const d=new google.maps.Marker({position:t,map:r,icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#FF6B6B",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},title:e.sector_name||"RF Sector"});n.push(d);const u=new google.maps.InfoWindow({content:'<div style="padding: 8px;">\n            <strong>'.concat(e.sector_name||"RF Sector","</strong><br/>\n            <strong>Azimuth:</strong> ").concat(a,"\xb0<br/>\n            <strong>Beamwidth:</strong> ").concat(s,"\xb0<br/>\n            <strong>Radius:</strong> ").concat(I(o),"<br/>\n            <strong>Frequency:</strong> ").concat(e.frequency," MHz\n          </div>"),position:t});u.open(r),n.push(u);break}}return n},F=(e,t)=>{const r=new google.maps.LatLngBounds;let n=!1;e.forEach(e=>{if(e instanceof google.maps.Polyline)e.getPath().forEach(e=>{r.extend(e),n=!0});else if(e instanceof google.maps.Polygon)e.getPath().forEach(e=>{r.extend(e),n=!0});else if(e instanceof google.maps.Circle)r.union(e.getBounds()),n=!0;else if(e instanceof google.maps.Marker){const t=e.getPosition();t&&(r.extend(t),n=!0)}}),n&&t.fitBounds(r)},I=e=>e<1e3?"".concat(e.toFixed(2)," m"):"".concat((e/1e3).toFixed(2)," km"),B=e=>e<1e6?"".concat(e.toFixed(2)," m\xb2"):"".concat((e/1e6).toFixed(2)," km\xb2"),z=async()=>{const e=await ic.getAllUserData({userId:"me"}),t=[];if(e.distanceMeasurements.forEach(e=>{var r;t.push({id:(null===(r=e.id)||void 0===r?void 0:r.toString())||"",type:"Distance",name:e.measurement_name,createdAt:e.created_at?new Date(e.created_at):new Date,savedAt:e.updated_at?new Date(e.updated_at):new Date,fileSize:0,source:"Manual",data:e})}),e.polygonDrawings.forEach(e=>{var r;t.push({id:(null===(r=e.id)||void 0===r?void 0:r.toString())||"",type:"Polygon",name:e.polygon_name,createdAt:e.created_at?new Date(e.created_at):new Date,savedAt:e.updated_at?new Date(e.updated_at):new Date,fileSize:0,source:"Manual",data:e})}),e.circleDrawings.forEach(e=>{var r;t.push({id:(null===(r=e.id)||void 0===r?void 0:r.toString())||"",type:"Circle",name:e.circle_name,createdAt:e.created_at?new Date(e.created_at):new Date,savedAt:e.updated_at?new Date(e.updated_at):new Date,fileSize:0,source:"Manual",data:e})}),e.elevationProfiles.forEach(e=>{var r;t.push({id:(null===(r=e.id)||void 0===r?void 0:r.toString())||"",type:"Elevation",name:e.profile_name,createdAt:e.created_at?new Date(e.created_at):new Date,savedAt:e.updated_at?new Date(e.updated_at):new Date,fileSize:0,source:"Manual",data:e})}),e.sectorRF.forEach(e=>{var r;t.push({id:(null===(r=e.id)||void 0===r?void 0:r.toString())||"",type:"SectorRF",name:e.sector_name,createdAt:e.created_at?new Date(e.created_at):new Date,savedAt:e.updated_at?new Date(e.updated_at):new Date,fileSize:0,source:"Manual",data:e})}),k(t),!i)return void console.warn("Map not loaded yet, will create overlays later");const r=t.filter(e=>"Distance"===e.type),n=t.filter(e=>"Polygon"===e.type),a=t.filter(e=>"Circle"===e.type),s=t.filter(e=>"Elevation"===e.type),l=t.filter(e=>"Infrastructure"===e.type),c=t.filter(e=>"SectorRF"===e.type),d=oC(r,i),u=oC(n,i),h=oC(a,i),m=oC(s,i),g=oC(l,i),f=oC(c,i);console.log("\ud83d\udcca Loaded layers:\n      Distance: ".concat(d.length," overlays\n      Polygon: ").concat(u.length," overlays\n      Circle: ").concat(h.length," overlays\n      Elevation: ").concat(m.length," overlays\n      Infrastructure: ").concat(g.length," overlays\n      SectorRF: ").concat(f.length," overlays")),R(e=>({Distance:(0,o.A)((0,o.A)({},e.Distance),{},{count:r.length,overlays:d}),Polygon:(0,o.A)((0,o.A)({},e.Polygon),{},{count:n.length,overlays:u}),Circle:(0,o.A)((0,o.A)({},e.Circle),{},{count:a.length,overlays:h}),Elevation:(0,o.A)((0,o.A)({},e.Elevation),{},{count:s.length,overlays:m}),Infrastructure:(0,o.A)((0,o.A)({},e.Infrastructure),{},{count:l.length,overlays:g}),SectorRF:(0,o.A)((0,o.A)({},e.SectorRF),{},{count:c.length,overlays:f})}))};return(0,n.useEffect)(()=>{if(r&&e.current&&window.google){if(!!i)return void console.log("\u2705 Map instance already exists, skipping creation");console.log("\ud83d\udd04 Map needs recreation (navigated back to page or first load)");const t=setTimeout(()=>{try{const t=s(e.current);t&&(console.log("\u2705 Map created successfully:",t),u(Ya({type:"success",title:"Map Loaded",message:"Google Maps loaded - All tools ready in India",autoClose:!0,duration:3e3})))}catch(t){console.error("\u274c Error creating map:",t),u(Ya({type:"error",title:"Map Load Error",message:"Failed to load Google Maps. Please refresh the page.",autoClose:!1}))}},100);return()=>clearTimeout(t)}},[r,e.current,i,s,u]),(0,n.useEffect)(()=>{if(i&&h.length>0){t.current||(t.current=new google.maps.Data({map:i}));const e=t.current;return e.getMap()!==i&&e.setMap(i),e.loadGeoJson("/india.json",{},e=>{console.log("Loaded features:",e.length),u(Ya({type:"info",title:"Regions Loaded",message:"Loaded ".concat(e.length," regions - ").concat(h.length," assigned to you"),autoClose:!0,duration:3e3}))}),e.setStyle(e=>{if(!w.enabled)return{visible:!1};const t=e.getProperty("NAME_1")||e.getProperty("ST_NM")||e.getProperty("st_nm")||e.getProperty("name"),r=String(t||""),n=h.some(e=>r.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(r.toLowerCase())||r.toLowerCase()===e.toLowerCase()),a=c&&w.dimWhenToolActive?w.dimmedOpacity:w.opacity;return n?{fillColor:w.color,fillOpacity:.6*a,strokeColor:w.color,strokeWeight:2,strokeOpacity:a,visible:!0,clickable:!c}:g?{visible:!1}:{fillColor:"#9CA3AF",fillOpacity:.2*a,strokeColor:"#D1D5DB",strokeWeight:.5,strokeOpacity:.5*a,visible:!0,clickable:!c}}),e.addListener("click",e=>{if(c)return;const t=e.feature.getProperty("NAME_1")||e.feature.getProperty("ST_NM")||e.feature.getProperty("st_nm")||e.feature.getProperty("name"),r=String(t||"Unknown Region"),n=h.some(e=>r.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(r.toLowerCase())||r.toLowerCase()===e.toLowerCase());if(n){new google.maps.InfoWindow({content:Ll(r,n),position:e.latLng}).open(i)}}),e.addListener("mouseover",t=>{if(c)return;const r=t.feature.getProperty("NAME_1")||t.feature.getProperty("ST_NM")||t.feature.getProperty("st_nm")||t.feature.getProperty("name"),n=String(r||"");h.some(e=>n.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(n.toLowerCase()))&&e.overrideStyle(t.feature,{fillOpacity:.7,strokeWeight:3})}),e.addListener("mouseout",t=>{c||e.revertStyle(t.feature)}),()=>{t.current&&(t.current.setMap(null),t.current=null)}}},[i,h,g,d,u,c,w]),a?(0,Vi.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center bg-red-100 rounded-lg mb-4",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Vi.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Map Loading Error"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:a}),(0,Vi.jsx)("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Retry Loading"})]})}):r?(0,Vi.jsxs)(bl,{className:"overflow-hidden",children:[(0,Vi.jsxs)("div",{className:"relative w-full h-full overflow-hidden",children:[(0,Vi.jsx)("div",{ref:e,className:"w-full h-full"}),l&&i&&(0,Vi.jsx)(nC,{map:i,layersState:D,onLayerToggle:e=>{R(t=>{const r=t[e],n=!r.visible;return console.log("\ud83d\udd04 Toggling ".concat(e," layer: ").concat(n?"SHOW":"HIDE"," (").concat(r.overlays.length," overlays)")),((e,t,r)=>{e.forEach(e=>{"setMap"in e.overlay&&e.overlay.setMap(t?r:null)})})(r.overlays,n,i),(0,o.A)((0,o.A)({},t),{},{[e]:(0,o.A)((0,o.A)({},r),{},{visible:n})})})},onOpenSettings:()=>y(!0),onDataSaved:z}),(0,Vi.jsx)("button",{onClick:()=>x(!0),className:"absolute bottom-2 left-2 w-10 h-10 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-10",title:"Help & Legend",children:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),!l&&r&&(0,Vi.jsx)("div",{className:"absolute inset-0 bg-gray-50 dark:bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Initializing map..."})]})}),p&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[(0,Vi.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Map Help & Legend"]}),(0,Vi.jsx)("button",{onClick:()=>x(!1),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Regions"]}),(0,Vi.jsxs)("div",{className:"space-y-2 ml-7",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-6 h-4 bg-blue-500 opacity-50 border-2 border-blue-700 rounded"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Assigned Regions (",h.length,")"]}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Regions you have access to manage"})]})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-6 h-4 bg-gray-300 opacity-20 border-2 border-gray-400 rounded"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Other Regions"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Regions outside your access"})]})]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})}),"Infrastructure Status"]}),(0,Vi.jsxs)("div",{className:"space-y-2 ml-7",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Active"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fully operational infrastructure"})]})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Maintenance"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Under maintenance or repair"})]})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Offline"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Not operational or disconnected"})]})]})]})]}),d&&(0,Vi.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Your Access"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,Vi.jsx)("strong",{children:d.name})," (",d.role,")"]}),(0,Vi.jsxs)("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:[h.length," assigned region",1!==h.length?"s":""]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Quick Tips"]}),(0,Vi.jsxs)("ul",{className:"space-y-2 ml-7 text-sm text-gray-600 dark:text-gray-400",children:[(0,Vi.jsxs)("li",{className:"flex items-start",children:[(0,Vi.jsx)("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:"\u2022"}),(0,Vi.jsx)("span",{children:"Click on assigned regions to view details"})]}),(0,Vi.jsxs)("li",{className:"flex items-start",children:[(0,Vi.jsx)("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:"\u2022"}),(0,Vi.jsx)("span",{children:"Use GIS Tools from the left panel for measurements and infrastructure management"})]}),(0,Vi.jsxs)("li",{className:"flex items-start",children:[(0,Vi.jsx)("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:"\u2022"}),(0,Vi.jsx)("span",{children:"Search for places using the global search in the top center"})]}),(0,Vi.jsxs)("li",{className:"flex items-start",children:[(0,Vi.jsx)("span",{className:"text-blue-600 dark:text-blue-400 mr-2",children:"\u2022"}),(0,Vi.jsx)("span",{children:"All your measurements and data are saved in the Data Hub"})]})]})]})]}),(0,Vi.jsx)("div",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 px-6 py-3",children:(0,Vi.jsx)("button",{onClick:()=>x(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Got it!"})})]})})]}),(0,Vi.jsx)(aC,{map:i}),(0,Vi.jsx)(sC,{isOpen:b,onClose:()=>y(!1),settings:w,onSettingsChange:e=>{j(e),localStorage.setItem("mapBoundarySettings",JSON.stringify(e))}}),C&&A&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[100] p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-6xl h-[80vh] flex flex-col",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("span",{className:"mr-2",children:"\ud83c\udf10"}),"360\xb0 Street View"]}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Location: ",A.lat.toFixed(6),", ",A.lng.toFixed(6)]})]}),(0,Vi.jsx)("button",{onClick:()=>{E(!1),_(null)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsx)("div",{className:"flex-1 relative",children:(0,Vi.jsx)("iframe",{src:"https://www.google.com/maps/embed/v1/streetview?key=".concat("AIzaSyAT5j5Zy8q4XSHLi1arcpkce8CNvbljbUQ","&location=").concat(A.lat,",").concat(A.lng,"&heading=0&pitch=0&fov=90"),className:"w-full h-full border-0",allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),(0,Vi.jsx)("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Use mouse to drag and explore the 360\xb0 view \u2022 Scroll to zoom in/out"})})]})}),T&&M&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[100] p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col overflow-hidden",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("span",{className:"mr-2",children:"\u26f0\ufe0f"}),M.profile_name||"Elevation Profile"]}),(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Interactive elevation graph with detailed statistics"})]}),(0,Vi.jsx)("button",{onClick:()=>{L(!1),O(null)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,Vi.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,Vi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Vi.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Distance"}),(0,Vi.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:I(M.total_distance)})]}),(0,Vi.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Max Elevation"}),(0,Vi.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:[M.max_elevation,"m"]})]}),(0,Vi.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Min Elevation"}),(0,Vi.jsxs)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:[M.min_elevation,"m"]})]}),(0,Vi.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Elevation Gain"}),(0,Vi.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:[((M.max_elevation||0)-(M.min_elevation||0)).toFixed(1),"m"]})]})]}),(0,Vi.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Elevation Profile Chart"}),(0,Vi.jsx)("div",{className:"h-96 flex items-center justify-center",children:M.elevation_data&&M.elevation_data.length>0?(0,Vi.jsx)("div",{className:"w-full h-full",children:(0,Vi.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 1000 300",preserveAspectRatio:"none",children:[(0,Vi.jsx)("defs",{children:(0,Vi.jsxs)("linearGradient",{id:"elevGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,Vi.jsx)("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.6"}),(0,Vi.jsx)("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.1"})]})}),(0,Vi.jsx)("path",{d:(()=>{const e=M.elevation_data,t=Math.max(...e.map(e=>e.elevation)),r=Math.min(...e.map(e=>e.elevation)),n=t-r||1;let a="M 0 300 ";return e.forEach((t,s)=>{const o=s/(e.length-1)*1e3,i=300-(t.elevation-r)/n*250;a+="L ".concat(o," ").concat(i," ")}),a+="L 1000 300 Z",a})(),fill:"url(#elevGradient)",stroke:"#3b82f6",strokeWidth:"2"}),(()=>{const e=M.elevation_data,t=Math.max(...e.map(e=>e.elevation)),r=Math.min(...e.map(e=>e.elevation)),n=t-r||1,a=e.findIndex(e=>e.elevation===t)/(e.length-1)*1e3,s=300-(t-r)/n*250;return(0,Vi.jsx)("circle",{cx:a,cy:s,r:"5",fill:"#10b981",stroke:"white",strokeWidth:"2"})})(),(()=>{const e=M.elevation_data,t=Math.max(...e.map(e=>e.elevation)),r=Math.min(...e.map(e=>e.elevation)),n=t-r||1,a=e.findIndex(e=>e.elevation===r)/(e.length-1)*1e3,s=300-(r-r)/n*250;return(0,Vi.jsx)("circle",{cx:a,cy:s,r:"5",fill:"#3b82f6",stroke:"white",strokeWidth:"2"})})()]})}):(0,Vi.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"No elevation data available"})}),(0,Vi.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-4 text-sm",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("div",{className:"w-4 h-4 rounded-full bg-green-500"}),(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Highest Point"})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Lowest Point"})]})]})]}),M.notes&&(0,Vi.jsxs)("div",{className:"mt-6 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Notes:"}),(0,Vi.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:M.notes})]})]}),(0,Vi.jsx)("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex justify-end",children:(0,Vi.jsx)("button",{onClick:()=>{L(!1),O(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Close"})})]})})]}):(0,Vi.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Vi.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Loading Maps"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Please wait while we load the Google Maps API..."})]})})};let pC=function(e){return e.GIS_TOOLS="GIS Tools",e.DATA_MANAGEMENT="Data Management",e.USER_MANAGEMENT="User Management",e.GROUP_MANAGEMENT="Group Management",e.SETTINGS="Settings",e.SEARCH="Search & Navigation",e}({});const xC=[{id:"gis.distance.use",name:"Use Distance Tool",description:"Allows user to use the distance measurement tool",category:pC.GIS_TOOLS,module:"distance",action:"use",isSystemPermission:!0},{id:"gis.distance.save",name:"Save Distance Measurements",description:"Allows user to save distance measurements",category:pC.GIS_TOOLS,module:"distance",action:"save",isSystemPermission:!0},{id:"gis.distance.delete.own",name:"Delete Own Distance Measurements",description:"Allows user to delete their own distance measurements",category:pC.GIS_TOOLS,module:"distance",action:"delete.own",isSystemPermission:!0},{id:"gis.distance.delete.any",name:"Delete Any Distance Measurements",description:"Allows user to delete any distance measurement",category:pC.GIS_TOOLS,module:"distance",action:"delete.any",isSystemPermission:!0},{id:"gis.polygon.use",name:"Use Polygon Tool",description:"Allows user to use the polygon drawing tool",category:pC.GIS_TOOLS,module:"polygon",action:"use",isSystemPermission:!0},{id:"gis.polygon.save",name:"Save Polygons",description:"Allows user to save polygons",category:pC.GIS_TOOLS,module:"polygon",action:"save",isSystemPermission:!0},{id:"gis.polygon.delete.own",name:"Delete Own Polygons",description:"Allows user to delete their own polygons",category:pC.GIS_TOOLS,module:"polygon",action:"delete.own",isSystemPermission:!0},{id:"gis.polygon.delete.any",name:"Delete Any Polygons",description:"Allows user to delete any polygon",category:pC.GIS_TOOLS,module:"polygon",action:"delete.any",isSystemPermission:!0},{id:"gis.circle.use",name:"Use Circle Tool",description:"Allows user to use the circle/radius tool",category:pC.GIS_TOOLS,module:"circle",action:"use",isSystemPermission:!0},{id:"gis.circle.save",name:"Save Circles",description:"Allows user to save circles",category:pC.GIS_TOOLS,module:"circle",action:"save",isSystemPermission:!0},{id:"gis.circle.delete.own",name:"Delete Own Circles",description:"Allows user to delete their own circles",category:pC.GIS_TOOLS,module:"circle",action:"delete.own",isSystemPermission:!0},{id:"gis.circle.delete.any",name:"Delete Any Circles",description:"Allows user to delete any circle",category:pC.GIS_TOOLS,module:"circle",action:"delete.any",isSystemPermission:!0},{id:"gis.elevation.use",name:"Use Elevation Tool",description:"Allows user to use the elevation profile tool",category:pC.GIS_TOOLS,module:"elevation",action:"use",isSystemPermission:!0},{id:"gis.elevation.save",name:"Save Elevation Profiles",description:"Allows user to save elevation profiles",category:pC.GIS_TOOLS,module:"elevation",action:"save",isSystemPermission:!0},{id:"gis.elevation.delete.own",name:"Delete Own Elevation Profiles",description:"Allows user to delete their own elevation profiles",category:pC.GIS_TOOLS,module:"elevation",action:"delete.own",isSystemPermission:!0},{id:"gis.elevation.delete.any",name:"Delete Any Elevation Profiles",description:"Allows user to delete any elevation profile",category:pC.GIS_TOOLS,module:"elevation",action:"delete.any",isSystemPermission:!0},{id:"gis.infrastructure.use",name:"Use Infrastructure Tool",description:"Allows user to use the infrastructure management tool",category:pC.GIS_TOOLS,module:"infrastructure",action:"use",isSystemPermission:!0},{id:"gis.infrastructure.save",name:"Save Infrastructure",description:"Allows user to add/edit infrastructure",category:pC.GIS_TOOLS,module:"infrastructure",action:"save",isSystemPermission:!0},{id:"gis.infrastructure.delete.own",name:"Delete Own Infrastructure",description:"Allows user to delete their own infrastructure entries",category:pC.GIS_TOOLS,module:"infrastructure",action:"delete.own",isSystemPermission:!0},{id:"gis.infrastructure.delete.any",name:"Delete Any Infrastructure",description:"Allows user to delete any infrastructure entry",category:pC.GIS_TOOLS,module:"infrastructure",action:"delete.any",isSystemPermission:!0},{id:"gis.infrastructure.import",name:"Import KML Files",description:"Allows user to import KML files for infrastructure",category:pC.GIS_TOOLS,module:"infrastructure",action:"import",isSystemPermission:!0},{id:"data.view.own",name:"View Own Data",description:"Allows user to view their own saved data",category:pC.DATA_MANAGEMENT,module:"data",action:"view.own",isSystemPermission:!0},{id:"data.view.all",name:"View All Data",description:"Allows user to view all saved data",category:pC.DATA_MANAGEMENT,module:"data",action:"view.all",isSystemPermission:!0},{id:"data.edit.own",name:"Edit Own Data",description:"Allows user to edit their own data",category:pC.DATA_MANAGEMENT,module:"data",action:"edit.own",isSystemPermission:!0},{id:"data.edit.all",name:"Edit All Data",description:"Allows user to edit any data",category:pC.DATA_MANAGEMENT,module:"data",action:"edit.all",isSystemPermission:!0},{id:"data.delete.own",name:"Delete Own Data",description:"Allows user to delete their own data",category:pC.DATA_MANAGEMENT,module:"data",action:"delete.own",isSystemPermission:!0},{id:"data.delete.all",name:"Delete All Data",description:"Allows user to delete any data",category:pC.DATA_MANAGEMENT,module:"data",action:"delete.all",isSystemPermission:!0},{id:"data.export",name:"Export Data",description:"Allows user to export data to various formats",category:pC.DATA_MANAGEMENT,module:"data",action:"export",isSystemPermission:!0},{id:"users.view",name:"View Users",description:"Allows user to view user list",category:pC.USER_MANAGEMENT,module:"users",action:"view",isSystemPermission:!0},{id:"users.create",name:"Create Users",description:"Allows user to create new users",category:pC.USER_MANAGEMENT,module:"users",action:"create",isSystemPermission:!0},{id:"users.edit",name:"Edit Users",description:"Allows user to edit user information",category:pC.USER_MANAGEMENT,module:"users",action:"edit",isSystemPermission:!0},{id:"users.delete",name:"Delete Users",description:"Allows user to delete users",category:pC.USER_MANAGEMENT,module:"users",action:"delete",isSystemPermission:!0},{id:"users.assign_regions",name:"Assign Regions to Users",description:"Allows user to assign regions to users",category:pC.USER_MANAGEMENT,module:"users",action:"assign_regions",isSystemPermission:!0},{id:"users.assign_groups",name:"Assign Groups to Users",description:"Allows user to add users to groups",category:pC.USER_MANAGEMENT,module:"users",action:"assign_groups",isSystemPermission:!0},{id:"groups.view",name:"View Groups",description:"Allows user to view user groups",category:pC.GROUP_MANAGEMENT,module:"groups",action:"view",isSystemPermission:!0},{id:"groups.create",name:"Create Groups",description:"Allows user to create new groups",category:pC.GROUP_MANAGEMENT,module:"groups",action:"create",isSystemPermission:!0},{id:"groups.edit",name:"Edit Groups",description:"Allows user to edit group details",category:pC.GROUP_MANAGEMENT,module:"groups",action:"edit",isSystemPermission:!0},{id:"groups.delete",name:"Delete Groups",description:"Allows user to delete groups",category:pC.GROUP_MANAGEMENT,module:"groups",action:"delete",isSystemPermission:!0},{id:"settings.view",name:"View Settings",description:"Allows user to view application settings",category:pC.SETTINGS,module:"settings",action:"view",isSystemPermission:!0},{id:"settings.boundary.edit",name:"Edit Boundary Settings",description:"Allows user to edit boundary visualization settings",category:pC.SETTINGS,module:"settings",action:"boundary.edit",isSystemPermission:!0},{id:"settings.map.edit",name:"Edit Map Settings",description:"Allows user to edit map settings",category:pC.SETTINGS,module:"settings",action:"map.edit",isSystemPermission:!0},{id:"search.use",name:"Use Search",description:"Allows user to use global search functionality",category:pC.SEARCH,module:"search",action:"use",isSystemPermission:!0},{id:"search.history.view",name:"View Search History",description:"Allows user to view search history",category:pC.SEARCH,module:"search",action:"history.view",isSystemPermission:!0},{id:"bookmarks.create",name:"Create Bookmarks",description:"Allows user to create location bookmarks",category:pC.SEARCH,module:"bookmarks",action:"create",isSystemPermission:!0}],bC={Admin:["*"],Manager:["gis.distance.use","gis.distance.save","gis.distance.delete.any","gis.polygon.use","gis.polygon.save","gis.polygon.delete.any","gis.circle.use","gis.circle.save","gis.circle.delete.any","gis.elevation.use","gis.elevation.save","gis.elevation.delete.any","gis.infrastructure.use","gis.infrastructure.save","gis.infrastructure.delete.any","gis.infrastructure.import","data.view.all","data.edit.all","data.delete.all","data.export","users.view","users.edit","users.assign_regions","users.assign_groups","groups.view","settings.view","settings.boundary.edit","settings.map.edit","search.use","search.history.view","bookmarks.create"],Technician:["gis.distance.use","gis.distance.save","gis.distance.delete.own","gis.polygon.use","gis.polygon.save","gis.polygon.delete.own","gis.circle.use","gis.circle.save","gis.circle.delete.own","gis.elevation.use","gis.elevation.save","gis.elevation.delete.own","gis.infrastructure.use","gis.infrastructure.save","gis.infrastructure.delete.own","data.view.own","data.edit.own","data.delete.own","settings.view","search.use","bookmarks.create"],User:["gis.distance.use","gis.polygon.use","gis.circle.use","data.view.own","search.use"]},yC=e=>{let{user:t,onSave:r,onClose:a}=e;const[s,o]=(0,n.useState)(t.directPermissions||[]),i=xC.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return(0,Vi.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto backdrop-blur-sm",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,Vi.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 transition-opacity",onClick:a,"aria-hidden":"true"}),(0,Vi.jsx)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-xl px-5 pt-4 pb-4 text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full",children:(0,Vi.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(t.id,s),a()},children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Permission Management"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,Vi.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t.name}),(0,Vi.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,Vi.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:t.email}),(0,Vi.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,Vi.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full font-medium ".concat("Admin"===t.role?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"Manager"===t.role?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:t.role})]})]})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsxs)("div",{className:"text-right",children:[(0,Vi.jsxs)("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:[s.length,(0,Vi.jsxs)("span",{className:"text-sm text-gray-500",children:["/",xC.length]})]}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Selected"})]}),(0,Vi.jsx)("button",{type:"button",onClick:a,className:"rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 p-1.5 transition-colors","aria-label":"Close",children:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,Vi.jsx)("div",{className:"px-1",children:(0,Vi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:Object.entries(i).map(e=>{let[t,r]=e;const n=(e=>({[pC.GIS_TOOLS]:{icon:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7",bgLight:"bg-orange-50",bgDark:"dark:bg-orange-900/20",borderLight:"border-orange-500",borderDark:"dark:border-orange-500",textLight:"text-orange-600",textDark:"dark:text-orange-400",hoverLight:"hover:bg-orange-100",hoverDark:"dark:hover:bg-orange-900/30",selectedBg:"bg-orange-100 dark:bg-orange-900/30",selectedBorder:"border-orange-300 dark:border-orange-700",checkboxColor:"text-orange-600 focus:ring-orange-500",buttonBg:"bg-orange-100 dark:bg-orange-900/40",buttonHover:"hover:bg-orange-200 dark:hover:bg-orange-900/60",buttonSelectedBg:"bg-orange-600",buttonSelectedHover:"hover:bg-orange-700"},[pC.DATA_MANAGEMENT]:{icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",bgLight:"bg-green-50",bgDark:"dark:bg-green-900/20",borderLight:"border-green-500",borderDark:"dark:border-green-500",textLight:"text-green-600",textDark:"dark:text-green-400",hoverLight:"hover:bg-green-100",hoverDark:"dark:hover:bg-green-900/30",selectedBg:"bg-green-100 dark:bg-green-900/30",selectedBorder:"border-green-300 dark:border-green-700",checkboxColor:"text-green-600 focus:ring-green-500",buttonBg:"bg-green-100 dark:bg-green-900/40",buttonHover:"hover:bg-green-200 dark:hover:bg-green-900/60",buttonSelectedBg:"bg-green-600",buttonSelectedHover:"hover:bg-green-700"},[pC.USER_MANAGEMENT]:{icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z",bgLight:"bg-blue-50",bgDark:"dark:bg-blue-900/20",borderLight:"border-blue-500",borderDark:"dark:border-blue-500",textLight:"text-blue-600",textDark:"dark:text-blue-400",hoverLight:"hover:bg-blue-100",hoverDark:"dark:hover:bg-blue-900/30",selectedBg:"bg-blue-100 dark:bg-blue-900/30",selectedBorder:"border-blue-300 dark:border-blue-700",checkboxColor:"text-blue-600 focus:ring-blue-500",buttonBg:"bg-blue-100 dark:bg-blue-900/40",buttonHover:"hover:bg-blue-200 dark:hover:bg-blue-900/60",buttonSelectedBg:"bg-blue-600",buttonSelectedHover:"hover:bg-blue-700"},[pC.GROUP_MANAGEMENT]:{icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z",bgLight:"bg-indigo-50",bgDark:"dark:bg-indigo-900/20",borderLight:"border-indigo-500",borderDark:"dark:border-indigo-500",textLight:"text-indigo-600",textDark:"dark:text-indigo-400",hoverLight:"hover:bg-indigo-100",hoverDark:"dark:hover:bg-indigo-900/30",selectedBg:"bg-indigo-100 dark:bg-indigo-900/30",selectedBorder:"border-indigo-300 dark:border-indigo-700",checkboxColor:"text-indigo-600 focus:ring-indigo-500",buttonBg:"bg-indigo-100 dark:bg-indigo-900/40",buttonHover:"hover:bg-indigo-200 dark:hover:bg-indigo-900/60",buttonSelectedBg:"bg-indigo-600",buttonSelectedHover:"hover:bg-indigo-700"},[pC.SETTINGS]:{icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",bgLight:"bg-purple-50",bgDark:"dark:bg-purple-900/20",borderLight:"border-purple-500",borderDark:"dark:border-purple-500",textLight:"text-purple-600",textDark:"dark:text-purple-400",hoverLight:"hover:bg-purple-100",hoverDark:"dark:hover:bg-purple-900/30",selectedBg:"bg-purple-100 dark:bg-purple-900/30",selectedBorder:"border-purple-300 dark:border-purple-700",checkboxColor:"text-purple-600 focus:ring-purple-500",buttonBg:"bg-purple-100 dark:bg-purple-900/40",buttonHover:"hover:bg-purple-200 dark:hover:bg-purple-900/60",buttonSelectedBg:"bg-purple-600",buttonSelectedHover:"hover:bg-purple-700"},[pC.SEARCH]:{icon:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",bgLight:"bg-pink-50",bgDark:"dark:bg-pink-900/20",borderLight:"border-pink-500",borderDark:"dark:border-pink-500",textLight:"text-pink-600",textDark:"dark:text-pink-400",hoverLight:"hover:bg-pink-100",hoverDark:"dark:hover:bg-pink-900/30",selectedBg:"bg-pink-100 dark:bg-pink-900/30",selectedBorder:"border-pink-300 dark:border-pink-700",checkboxColor:"text-pink-600 focus:ring-pink-500",buttonBg:"bg-pink-100 dark:bg-pink-900/40",buttonHover:"hover:bg-pink-200 dark:hover:bg-pink-900/60",buttonSelectedBg:"bg-pink-600",buttonSelectedHover:"hover:bg-pink-700"}}[e]))(t),a=r.every(e=>s.includes(e.id)),i=r.some(e=>s.includes(e.id))&&!a;return(0,Vi.jsxs)("div",{className:"border-2 rounded-lg transition-all hover:shadow-md flex flex-col h-[340px] overflow-hidden ".concat(a?"".concat(n.borderLight," ").concat(n.borderDark," ").concat(n.bgLight," ").concat(n.bgDark):i?"border-gray-300 dark:border-gray-600 ".concat(n.bgLight," ").concat(n.bgDark):"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between p-3 pb-2 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,Vi.jsx)("div",{className:"p-1 rounded ".concat(n.buttonBg),children:(0,Vi.jsx)("svg",{className:"h-4 w-4 ".concat(n.textLight," ").concat(n.textDark),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n.icon})})}),(0,Vi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vi.jsx)("h4",{className:"text-xs font-semibold text-gray-900 dark:text-white truncate",children:t}),(0,Vi.jsxs)("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:[r.filter(e=>s.includes(e.id)).length,"/",r.length]})]})]}),(0,Vi.jsx)("button",{type:"button",onClick:()=>(e=>{const t=xC.filter(t=>t.category===e).map(e=>e.id),r=t.every(e=>s.includes(e));o(r?e=>e.filter(e=>!t.includes(e)):e=>Array.from(new Set([...e,...t])))})(t),className:"px-2 py-1 rounded text-[10px] font-medium transition-colors whitespace-nowrap ".concat(a?"".concat(n.buttonSelectedBg," text-white ").concat(n.buttonSelectedHover):"".concat(n.buttonBg," ").concat(n.textLight," ").concat(n.textDark," ").concat(n.buttonHover)),children:a?"Deselect":"Select All"})]}),(0,Vi.jsx)("div",{className:"overflow-y-auto flex-1 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:(0,Vi.jsx)("div",{className:"space-y-1.5 p-3 pt-2",children:r.map(e=>(0,Vi.jsxs)("label",{htmlFor:"perm-".concat(e.id),className:"flex items-start p-2 rounded-md cursor-pointer transition-all ".concat(s.includes(e.id)?"".concat(n.selectedBg," border ").concat(n.selectedBorder):"bg-gray-50 dark:bg-gray-700/50 border border-transparent ".concat(n.hoverLight," ").concat(n.hoverDark)),children:[(0,Vi.jsx)("div",{className:"flex items-center h-4 mt-0.5",children:(0,Vi.jsx)("input",{id:"perm-".concat(e.id),type:"checkbox",checked:s.includes(e.id),onChange:()=>{return t=e.id,void o(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"h-4 w-4 rounded border-gray-300 ".concat(n.checkboxColor," focus:ring-2 cursor-pointer transition-all")})}),(0,Vi.jsxs)("div",{className:"ml-2 flex-1 min-w-0",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsx)("span",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate pr-1",children:e.name}),s.includes(e.id)&&(0,Vi.jsx)("svg",{className:"h-3.5 w-3.5 flex-shrink-0 ".concat(n.textLight," ").concat(n.textDark),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),(0,Vi.jsx)("p",{className:"text-[10px] text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-2",children:e.description})]})]},e.id))})})]},t)})})}),(0,Vi.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(0,Vi.jsx)("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:s.length})," ","permission",1!==s.length?"s":""," selected"]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-xs font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),(0,Vi.jsx)("button",{type:"submit",className:"px-4 py-2 border-2 border-transparent rounded-lg text-xs font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-md hover:shadow-lg",children:(0,Vi.jsxs)("span",{className:"flex items-center space-x-1.5",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Vi.jsx)("span",{children:"Save Permissions"})]})})]})]})]})})]})})},vC=e=>{let{isOpen:t,user:r,onConfirm:n,onCancel:a}=e;return t&&r?(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all animate-in zoom-in-95 duration-200",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 px-6 py-5",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center ring-4 ring-white/30",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-xl font-bold text-white",children:"Delete User"}),(0,Vi.jsx)("p",{className:"text-sm text-red-100 mt-0.5",children:"This action cannot be undone"})]})]})}),(0,Vi.jsxs)("div",{className:"px-6 py-6",children:[(0,Vi.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Are you sure you want to delete this user? This will permanently remove:"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700 mb-4",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-red-400 to-red-500 flex items-center justify-center text-white font-bold shadow-lg",children:r.name.substring(0,2).toUpperCase()}),(0,Vi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vi.jsx)("p",{className:"font-bold text-gray-900 dark:text-white truncate",children:r.name}),(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:r.email}),(0,Vi.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 mt-1",children:r.role})]})]})}),(0,Vi.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:(0,Vi.jsxs)("ul",{className:"space-y-2 text-sm text-red-700 dark:text-red-300",children:[(0,Vi.jsxs)("li",{className:"flex items-start",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,Vi.jsx)("span",{className:"font-medium",children:"All user data and settings"})]}),(0,Vi.jsxs)("li",{className:"flex items-start",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,Vi.jsx)("span",{className:"font-medium",children:"Region assignments and permissions"})]}),(0,Vi.jsxs)("li",{className:"flex items-start",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,Vi.jsx)("span",{className:"font-medium",children:"User activity history and logs"})]})]})})]}),(0,Vi.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3",children:[(0,Vi.jsx)("button",{onClick:a,className:"px-6 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm font-semibold text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-all duration-200 transform hover:scale-105",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:n,className:"px-6 py-2.5 bg-gradient-to-r from-red-500 to-red-600 rounded-lg text-sm font-bold text-white hover:from-red-600 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,Vi.jsx)("span",{children:"Delete User"})]})})]})]})}):null},kC=["title","titleId"];function wC(e,t){let{title:r,titleId:a}=e,o=s(e,kC);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const jC=n.forwardRef(wC),NC=e=>{let{isOpen:t,onClose:r,onConfirm:n,title:a,message:s,itemName:o,itemCount:i,isLoading:l=!1,type:c="danger"}=e;if(!t)return null;return(0,Vi.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),(0,Vi.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,Vi.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 transform transition-all",children:[(0,Vi.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",disabled:l,children:(0,Vi.jsx)(jC,{className:"h-6 w-6"})}),(0,Vi.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full ".concat("danger"===c?"bg-red-100 dark:bg-red-900":"bg-yellow-100 dark:bg-yellow-900"),children:(0,Vi.jsx)(Ul,{className:"h-6 w-6 ".concat("danger"===c?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400")})}),(0,Vi.jsxs)("div",{className:"mt-4 text-center",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:a}),(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:s}),o&&(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4",children:(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o})}),i&&i>1&&(0,Vi.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-4",children:(0,Vi.jsxs)("p",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:[(0,Vi.jsx)("span",{className:"font-bold",children:i})," items will be deleted"]})})]}),(0,Vi.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,Vi.jsx)("button",{type:"button",onClick:r,disabled:l,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",children:"Cancel"}),(0,Vi.jsx)("button",{type:"button",onClick:()=>{n()},disabled:l,className:"flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ".concat("danger"===c?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"),children:l?(0,Vi.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vi.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vi.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})})]})},SC=ui.A.create({baseURL:"http://localhost:5005/api",timeout:1e4,headers:{"Content-Type":"application/json"}});function CC(e){return e.startsWith("OCGID")?e.replace("OCGID","").replace(/^0+/,"")||"0":e}function EC(e){switch(null===e||void 0===e?void 0:e.toLowerCase()){case"admin":return"Admin";case"manager":return"Manager";case"engineer":case"technician":return"Technician";default:return"User"}}function AC(e){switch(e){case"Admin":return"admin";case"Manager":return"manager";case"Technician":return"engineer";default:return"viewer"}}function _C(e){var t;let r=[];if(e.assignedRegions&&Array.isArray(e.assignedRegions))r=e.assignedRegions;else if(e.regions)try{"string"===typeof e.regions?r=JSON.parse(e.regions):Array.isArray(e.regions)&&(r=e.regions.map(e=>e.name))}catch(JE){console.error("Error parsing regions:",JE),r=[]}const n=(null===(t=e.temporaryAccess)||void 0===t?void 0:t.map(e=>({id:e.id.toString(),region:e.region,expiresAt:new Date(e.expiresAt),grantedAt:new Date(e.grantedAt),grantedByName:e.grantedByName||"",reason:e.reason||"",secondsRemaining:e.secondsRemaining||0,timeRemaining:e.timeRemaining||{expired:!0,display:"Expired",days:0,hours:0,minutes:0,seconds:0,total_seconds:0}})))||[],a=n.filter(e=>{const t=new Date;return e.expiresAt>t&&!e.timeRemaining.expired}).map(e=>e.region),s=Array.from(new Set([...r,...a]));return{id:"OCGID".concat(String(e.id).padStart(3,"0")),username:e.username,name:e.full_name,email:e.email,password:"********",gender:e.gender||"Other",phoneNumber:e.phone||"",address:{street:e.street||"",city:e.city||"",state:e.state||"",pincode:e.pincode||""},officeLocation:e.office_location||"",department:e.department||"",assignedUnder:[],role:EC(e.role),assignedRegions:s,temporaryAccess:n,groups:[],status:e.is_active?"Active":"Inactive",loginHistory:[],company:"Opti Telemedia",permissions:[],lastLogin:e.updated_at||(new Date).toISOString()}}function TC(e){var t,r,n,a;return{username:e.username,email:e.email,full_name:e.name,gender:e.gender,phone:e.phoneNumber,department:e.department,office_location:e.officeLocation,street:null===(t=e.address)||void 0===t?void 0:t.street,city:null===(r=e.address)||void 0===r?void 0:r.city,state:null===(n=e.address)||void 0===n?void 0:n.state,pincode:null===(a=e.address)||void 0===a?void 0:a.pincode,role:e.role?AC(e.role):"viewer",is_active:"Active"===e.status,assignedRegions:e.assignedRegions||[]}}async function LC(){try{const e=await SC.get("/users",{params:{limit:1e3,page:1}});if(!e.data.success)throw new Error(e.data.message||"Failed to fetch users");return e.data.users.map(_C)}catch(r){var e,t;throw console.error("Error fetching users:",r),new Error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||r.message||"Failed to fetch users")}}SC.interceptors.request.use(e=>{const t=sessionStorage.getItem("opti_connect_token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e});const MC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;const t=zt(),r=Ht(e=>e.auth.user),a=Ht(e=>e.auth.isAuthenticated),s=(0,n.useRef)(null),o=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{if(!a||!r||!r.assignedRegions||0===r.assignedRegions.length)return;const n=async()=>{if(!o.current)try{o.current=!0;const e=await gi.get("/temporary-access/current-regions");if(e.data.success&&e.data.regions){const n=e.data.regions.map(e=>e.name),a=r.assignedRegions||[];(a.length!==n.length||!a.every(e=>n.includes(e)))&&(console.log("\ud83d\udd04 Temporary region access has changed"),console.log("   Previous regions:",a),console.log("   Current valid regions:",n),t(ma({assignedRegions:n})),console.log("\u23f0 Your temporary region access has expired"))}}catch(e){console.error("Error checking temporary regions:",e)}finally{o.current=!1}},i=setTimeout(()=>{n()},5e3);return s.current=setInterval(()=>{n()},e),console.log("\u2705 Temporary region monitor started (checking every ".concat(e/1e3,"s)")),()=>{i&&clearTimeout(i),s.current&&(clearInterval(s.current),s.current=null),console.log("\ud83d\uded1 Temporary region monitor stopped")}},[a,null===r||void 0===r?void 0:r.id,e,t]),null},OC=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],DC=()=>{var e,t,r,a,s,i,l,c,d;const[u,h]=(0,n.useState)([]),[m,g]=(0,n.useState)([]),[f,p]=(0,n.useState)(!1),[x,b]=(0,n.useState)("create"),[y,v]=(0,n.useState)(null),[k,w]=(0,n.useState)(null),[j,N]=(0,n.useState)(""),[S,C]=(0,n.useState)(""),[E,A]=(0,n.useState)(""),[_,T]=(0,n.useState)(!1),[L,M]=(0,n.useState)(null),[O,D]=(0,n.useState)(!1),[R,P]=(0,n.useState)(null),[F,I]=(0,n.useState)({isOpen:!1,count:0}),[B,z]=(0,n.useState)(!1),[W,U]=(0,n.useState)({username:"",name:"",email:"",password:"",gender:"",phoneNumber:"",address:{street:"",city:"",state:"",pincode:""},department:"",officeLocation:"",assignedUnder:[],role:"User",assignedRegions:[],status:"Active"}),[H,V]=(0,n.useState)({}),[G,q]=(0,n.useState)(""),$=[{id:"USER001",username:"admin_raj",name:"Rajesh Kumar",email:"rajesh.kumar@jio.com",password:"********",gender:"Male",phoneNumber:"+91-9876543210",address:{street:"123 Tech Park",city:"Mumbai",state:"Maharashtra",pincode:"400001"},officeLocation:"Mumbai HQ",assignedUnder:[],role:"Admin",assignedRegions:["Maharashtra","Gujarat"],groups:[],status:"Active",loginHistory:[{timestamp:new Date("2024-01-15T10:30:00"),location:"Mumbai, India"}]},{id:"USER002",username:"manager_priya",name:"Priya Sharma",email:"priya.sharma@airtel.com",password:"********",gender:"Female",phoneNumber:"+91-9876543211",address:{street:"456 Business District",city:"Delhi",state:"Delhi",pincode:"110001"},officeLocation:"Delhi Regional Office",assignedUnder:["USER001"],role:"Manager",assignedRegions:["Delhi","Punjab","Haryana"],groups:[],status:"Active",loginHistory:[{timestamp:new Date("2024-01-15T09:45:00"),location:"Delhi, India"}]},{id:"USER003",username:"tech_amit",name:"Amit Singh",email:"amit.singh@vi.com",password:"********",gender:"Male",phoneNumber:"+91-9876543212",address:{street:"789 Industrial Area",city:"Bangalore",state:"Karnataka",pincode:"560001"},officeLocation:"Bangalore Tech Center",assignedUnder:["USER002"],role:"Technician",assignedRegions:["Karnataka","Tamil Nadu"],groups:[],status:"Active",loginHistory:[{timestamp:new Date("2024-01-15T08:30:00"),location:"Bangalore, India"}]}];MC(3e4);const K=async()=>{D(!0),P(null);try{const e=await LC();h(e),console.log("\u2705 User Management: Users reloaded",e.length)}catch(e){console.error("Error loading users:",e),P(e.message||"Failed to load users"),h($)}finally{D(!1)}};(0,n.useEffect)(()=>{K()},[]);const Y=u.filter(e=>{const t=e.name.toLowerCase().includes(j.toLowerCase())||e.email.toLowerCase().includes(j.toLowerCase())||e.username.toLowerCase().includes(j.toLowerCase()),r=!S||e.role===S,n=!E||e.status===E;return t&&r&&n}),X=e=>{const{name:t,value:r}=e.target;if(t.startsWith("address.")){const e=t.split(".")[1];U(t=>(0,o.A)((0,o.A)({},t),{},{address:(0,o.A)((0,o.A)({},t.address),{},{[e]:r})}))}else U(e=>(0,o.A)((0,o.A)({},e),{},{[t]:r}));H[t]&&V(e=>(0,o.A)((0,o.A)({},e),{},{[t]:""}))},J=()=>{U({username:"",name:"",email:"",password:"",gender:"",phoneNumber:"",address:{street:"",city:"",state:"",pincode:""},department:"",officeLocation:"",assignedUnder:[],role:"User",assignedRegions:[],status:"Active"}),V({})},Q=async()=>{if((()=>{var e,t,r,n,a,s,o,i,l,c,d,h,m;const g={};null!==(e=W.username)&&void 0!==e&&e.trim()||(g.username="Username is required"),null!==(t=W.name)&&void 0!==t&&t.trim()||(g.name="Name is required"),null!==(r=W.email)&&void 0!==r&&r.trim()?/\S+@\S+\.\S+/.test(W.email)||(g.email="Email is invalid"):g.email="Email is required",null!==(n=W.phoneNumber)&&void 0!==n&&n.trim()||(g.phoneNumber="Phone number is required"),null!==(a=W.address)&&void 0!==a&&null!==(s=a.street)&&void 0!==s&&s.trim()||(g.street="Street is required"),null!==(o=W.address)&&void 0!==o&&null!==(i=o.city)&&void 0!==i&&i.trim()||(g.city="City is required"),null!==(l=W.address)&&void 0!==l&&null!==(c=l.state)&&void 0!==c&&c.trim()||(g.state="State is required"),null!==(d=W.address)&&void 0!==d&&null!==(h=d.pincode)&&void 0!==h&&h.trim()||(g.pincode="Pincode is required"),null!==(m=W.officeLocation)&&void 0!==m&&m.trim()||(g.officeLocation="Office location is required");const f=u.find(e=>(e.username===W.username||e.email===W.email)&&("create"===x||e.id!==(null===y||void 0===y?void 0:y.id)));return f&&(f.username===W.username&&(g.username="Username already exists"),f.email===W.email&&(g.email="Email already exists")),V(g),0===Object.keys(g).length})()){D(!0);try{"create"===x?await async function(e){try{const t=TC(e),r=(0,o.A)((0,o.A)({},t),{},{password:e.password||"ChangeMe@123"});console.log("=== FRONTEND CREATE USER DEBUG ==="),console.log("Original userData:",e),console.log("Transformed backendData:",t),console.log("Final createData:",r),console.log("assignedRegions:",r.assignedRegions),console.log("=================================");const n=await SC.post("/users",r);if(!n.data.success)throw new Error(n.data.message||"Failed to create user");return _C(n.data.user)}catch(n){var t,r;throw console.error("Error creating user:",n),new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||n.message||"Failed to create user")}}(W):"edit"===x&&y&&y.id&&await async function(e,t){try{const r=CC(e),n=TC(t);console.log("=== FRONTEND UPDATE USER DEBUG ==="),console.log("User ID:",e,"-> Numeric ID:",r),console.log("Original userData:",t),console.log("Transformed backendData:",n),console.log("Key fields:"),console.log("  - full_name:",n.full_name),console.log("  - email:",n.email),console.log("  - department:",n.department),console.log("=================================");const a=await SC.put("/users/".concat(r),n);if(!a.data.success)throw new Error(a.data.message||"Failed to update user");return _C(a.data.user)}catch(a){var r,n;throw console.error("Error updating user:",a),new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||a.message||"Failed to update user")}}(y.id,W),await K(),p(!1),J()}catch(e){console.error("Error saving user:",e),alert("Failed to save user: ".concat(e.message))}finally{D(!1)}}},Z=async e=>{D(!0);try{await async function(e,t){try{const r=e.map(e=>parseInt(CC(e))),n=await SC.patch("/users/bulk-status",{user_ids:r,is_active:"Active"===t});if(!n.data.success)throw new Error(n.data.message||"Failed to update user status");return n.data}catch(a){var r,n;throw console.error("Error bulk updating status:",a),new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||a.message||"Failed to update user status")}}(Array.from(m),e),await K(),g([])}catch(t){console.error("Error updating status:",t),alert("Failed to update status: ".concat(t.message))}finally{D(!1)}};return(0,Vi.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-6",children:(0,Vi.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-14 w-14 rounded-lg bg-violet-600 dark:bg-violet-500 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Management"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Manage system users with role-based access control"})]})]}),(0,Vi.jsxs)("button",{onClick:()=>{J(),v(null),b("create"),p(!0)},className:"inline-flex items-center px-5 py-2.5 border border-transparent shadow-sm text-sm font-semibold rounded-lg text-white bg-violet-600 hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500 transition-colors duration-200",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New User"]})]})}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-lg border-2 border-violet-100 dark:border-violet-900/30 p-6 mb-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center mr-3",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),(0,Vi.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Search & Filter Users"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-violet-700 dark:text-violet-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search Users"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"Search by name, email, or username...",className:"w-full pl-10 pr-3 py-2 border-2 border-violet-200 dark:border-violet-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 bg-white dark:bg-gray-700 dark:text-white"}),(0,Vi.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-violet-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Filter by Role"]}),(0,Vi.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border-2 border-blue-200 dark:border-blue-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium",children:[(0,Vi.jsx)("option",{value:"",children:"All Roles"}),(0,Vi.jsx)("option",{value:"Admin",children:"\ud83d\udee1\ufe0f Admin"}),(0,Vi.jsx)("option",{value:"Manager",children:"\ud83d\udcbc Manager"}),(0,Vi.jsx)("option",{value:"Technician",children:"\ud83d\udd27 Technician"}),(0,Vi.jsx)("option",{value:"User",children:"\ud83d\udc64 User"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Filter by Status"]}),(0,Vi.jsxs)("select",{value:E,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border-2 border-emerald-200 dark:border-emerald-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium",children:[(0,Vi.jsx)("option",{value:"",children:"All Status"}),(0,Vi.jsx)("option",{value:"Active",children:"\u2705 Active"}),(0,Vi.jsx)("option",{value:"Inactive",children:"\u26d4 Inactive"})]})]}),(0,Vi.jsx)("div",{className:"flex items-end",children:(0,Vi.jsxs)("button",{onClick:()=>{N(""),C(""),A("")},className:"w-full px-3 py-2 border-2 border-rose-200 dark:border-rose-700 rounded-lg bg-gradient-to-r from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-800/20 text-rose-700 dark:text-rose-300 font-semibold hover:from-rose-100 hover:to-rose-200 dark:hover:from-rose-900/30 dark:hover:to-rose-800/30 transition-all duration-200 flex items-center justify-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]})})]})]}),m.length>0&&(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-violet-50 to-violet-100 dark:from-violet-900/20 dark:to-violet-800/20 border-2 border-violet-200 dark:border-violet-700 rounded-xl p-5 mb-6 shadow-lg",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("span",{className:"text-lg font-bold text-violet-800 dark:text-violet-200",children:[m.length," user(s) selected"]}),(0,Vi.jsx)("p",{className:"text-xs text-violet-600 dark:text-violet-400",children:"Choose a bulk action"})]})]}),(0,Vi.jsxs)("div",{className:"flex gap-3",children:[(0,Vi.jsxs)("button",{onClick:()=>Z("Active"),className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg text-sm font-semibold hover:from-emerald-600 hover:to-emerald-700 shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:-translate-y-0.5",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Activate"]}),(0,Vi.jsxs)("button",{onClick:()=>Z("Inactive"),className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg text-sm font-semibold hover:from-amber-600 hover:to-amber-700 shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:-translate-y-0.5",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Deactivate"]}),(0,Vi.jsxs)("button",{onClick:()=>{0!==m.length?I({isOpen:!0,count:m.length}):alert("Please select users to delete")},className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg text-sm font-semibold hover:from-red-600 hover:to-red-700 shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:-translate-y-0.5",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-xl border-2 border-violet-100 dark:border-violet-900/30",children:[(0,Vi.jsx)("div",{className:"overflow-x-auto",children:(0,Vi.jsxs)("table",{className:"w-full",children:[(0,Vi.jsx)("thead",{className:"bg-gradient-to-r from-violet-100 to-violet-50 dark:from-violet-900/30 dark:to-violet-800/20",children:(0,Vi.jsxs)("tr",{children:[(0,Vi.jsx)("th",{className:"px-4 py-4 text-left",children:(0,Vi.jsx)("input",{type:"checkbox",checked:m.length===Y.length&&Y.length>0,onChange:()=>{m.length===Y.length?g([]):g(Y.map(e=>e.id))},className:"h-5 w-5 rounded border-violet-300 dark:border-violet-600 text-violet-600 focus:ring-violet-500"})}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),"User ID"]})}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Name"]})}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]})}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Role"]})}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Status"]})}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsxs)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Assigned Regions"]})}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Temporary Access"]})}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Actions"]})})]})}),(0,Vi.jsx)("tbody",{className:"divide-y divide-violet-100 dark:divide-violet-900/20",children:Y.map(e=>(0,Vi.jsxs)("tr",{className:"hover:bg-violet-50/50 dark:hover:bg-violet-900/10 transition-colors duration-150",children:[(0,Vi.jsx)("td",{className:"px-4 py-3",children:(0,Vi.jsx)("input",{type:"checkbox",checked:m.includes(e.id),onChange:()=>{return t=e.id,void g(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"rounded border-gray-300 dark:border-gray-600"})}),(0,Vi.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white",children:e.id}),(0,Vi.jsx)("td",{className:"px-4 py-3",children:(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,Vi.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",e.username]})]})}),(0,Vi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:e.email}),(0,Vi.jsxs)("td",{className:"px-4 py-3",children:["Admin"===e.role&&(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 border border-red-300 dark:border-red-700",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Admin"]}),"Manager"===e.role&&(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200 border border-blue-300 dark:border-blue-700",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Manager"]}),"Technician"===e.role&&(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200 border border-green-300 dark:border-green-700",children:[(0,Vi.jsxs)("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Technician"]}),"User"===e.role&&(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-200 border border-gray-300 dark:border-gray-700",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"User"]})]}),(0,Vi.jsx)("td",{className:"px-4 py-3",children:"Active"===e.status?(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200 border border-green-300 dark:border-green-700",children:[(0,Vi.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500 mr-2 animate-pulse"}),"Active"]}):(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-200 border border-gray-300 dark:border-gray-700",children:[(0,Vi.jsx)("span",{className:"h-2 w-2 rounded-full bg-gray-500 mr-2"}),"Inactive"]})}),(0,Vi.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:[e.assignedRegions.slice(0,2).join(", "),e.assignedRegions.length>2&&" +".concat(e.assignedRegions.length-2," more")]}),(0,Vi.jsx)("td",{className:"px-4 py-3 text-sm",children:e.temporaryAccess&&e.temporaryAccess.length>0?(0,Vi.jsxs)("div",{className:"flex flex-col gap-1",children:[e.temporaryAccess.slice(0,2).map(e=>(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:e.region}),(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(e.timeRemaining.days<=1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":e.timeRemaining.days<=7?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"),children:[(0,Vi.jsx)("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.timeRemaining.display]})]},e.id)),e.temporaryAccess.length>2&&(0,Vi.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",e.temporaryAccess.length-2," more"]})]}):(0,Vi.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"None"})}),(0,Vi.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,Vi.jsxs)("div",{className:"flex gap-2",children:[(0,Vi.jsx)("button",{onClick:()=>(e=>{v(e),b("view"),p(!0)})(e),className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors",title:"View Details",children:(0,Vi.jsxs)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,Vi.jsx)("button",{onClick:()=>(e=>{w(e)})(e),className:"p-2 rounded-lg bg-violet-50 dark:bg-violet-900/20 text-violet-600 dark:text-violet-400 hover:bg-violet-100 dark:hover:bg-violet-900/40 transition-colors",title:"Manage Permissions",children:(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Vi.jsx)("button",{onClick:()=>(e=>{U((0,o.A)({},e)),v(e),b("edit"),p(!0)})(e),className:"p-2 rounded-lg bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/40 transition-colors",title:"Edit User",children:(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,Vi.jsx)("button",{onClick:()=>(e=>{M(e),T(!0)})(e),className:"p-2 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors",title:"Delete User",children:(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id))})]})}),O&&(0,Vi.jsxs)("div",{className:"text-center py-12",children:[(0,Vi.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-violet-600"}),(0,Vi.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading users..."})]}),!O&&R&&(0,Vi.jsxs)("div",{className:"text-center py-8",children:[(0,Vi.jsx)("p",{className:"text-red-600 dark:text-red-400",children:R}),(0,Vi.jsx)("button",{onClick:K,className:"mt-4 px-4 py-2 bg-violet-600 text-white rounded-md hover:bg-violet-700",children:"Retry"})]}),!O&&!R&&0===Y.length&&(0,Vi.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No users found matching the current filters."})]}),(0,Vi.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl border-2 border-blue-200 dark:border-blue-700 p-5 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Total Users"}),(0,Vi.jsx)("svg",{className:"h-6 w-6 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]}),(0,Vi.jsx)("div",{className:"text-3xl font-bold text-blue-800 dark:text-blue-200",children:u.length})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 rounded-xl border-2 border-emerald-200 dark:border-emerald-700 p-5 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold text-emerald-700 dark:text-emerald-300",children:"Active Users"}),(0,Vi.jsx)("svg",{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,Vi.jsx)("div",{className:"text-3xl font-bold text-emerald-800 dark:text-emerald-200",children:u.filter(e=>"Active"===e.status).length})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-800/20 rounded-xl border-2 border-rose-200 dark:border-rose-700 p-5 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold text-rose-700 dark:text-rose-300",children:"Admins"}),(0,Vi.jsx)("svg",{className:"h-6 w-6 text-rose-600 dark:text-rose-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})]}),(0,Vi.jsx)("div",{className:"text-3xl font-bold text-rose-800 dark:text-rose-200",children:u.filter(e=>"Admin"===e.role).length})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-violet-50 to-violet-100 dark:from-violet-900/20 dark:to-violet-800/20 rounded-xl border-2 border-violet-200 dark:border-violet-700 p-5 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold text-violet-700 dark:text-violet-300",children:"Managers"}),(0,Vi.jsx)("svg",{className:"h-6 w-6 text-violet-600 dark:text-violet-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]}),(0,Vi.jsx)("div",{className:"text-3xl font-bold text-violet-800 dark:text-violet-200",children:u.filter(e=>"Manager"===e.role).length})]})]}),f&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:()=>p(!1),children:(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:(0,Vi.jsxs)("div",{className:"p-6",children:[(0,Vi.jsxs)("div",{className:"flex justify-between items-center mb-6 pb-4 border-b-2 border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:["view"===x&&(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsxs)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),("create"===x||"edit"===x)&&(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Vi.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"create"===x?"Create New User":"edit"===x?"Edit User":"User Details"})]}),(0,Vi.jsx)("button",{onClick:()=>p(!1),className:"h-10 w-10 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all",children:(0,Vi.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),"view"===x?(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-violet-50 to-violet-100/50 dark:from-violet-900/20 dark:to-violet-800/10 rounded-xl p-6 border-2 border-violet-200 dark:border-violet-700/50",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Vi.jsx)("h3",{className:"text-xl font-bold text-violet-900 dark:text-violet-100",children:"Basic Information"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-violet-200 dark:border-violet-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-violet-600 dark:text-violet-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),"User ID"]}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:null===y||void 0===y?void 0:y.id})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-violet-200 dark:border-violet-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-violet-600 dark:text-violet-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Username"]}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["@",null===y||void 0===y?void 0:y.username]})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-violet-200 dark:border-violet-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-violet-600 dark:text-violet-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Full Name"]}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:null===y||void 0===y?void 0:y.name})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-violet-200 dark:border-violet-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-violet-600 dark:text-violet-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white break-all",children:null===y||void 0===y?void 0:y.email})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-violet-200 dark:border-violet-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-violet-600 dark:text-violet-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Gender"]}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:(null===y||void 0===y?void 0:y.gender)||"Not specified"})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-violet-200 dark:border-violet-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-violet-600 dark:text-violet-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Phone Number"]}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:null===y||void 0===y?void 0:y.phoneNumber})]})]})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-800/10 rounded-xl p-6 border-2 border-blue-200 dark:border-blue-700/50",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,Vi.jsx)("h3",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:"Work Information"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-blue-200 dark:border-blue-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-blue-600 dark:text-blue-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Department"]}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:(null===y||void 0===y?void 0:y.department)||"Not assigned"})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-blue-200 dark:border-blue-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-blue-600 dark:text-blue-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsxs)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Office Location"]}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:null===y||void 0===y?void 0:y.officeLocation})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-blue-200 dark:border-blue-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-blue-600 dark:text-blue-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Role"]}),"Admin"===(null===y||void 0===y?void 0:y.role)&&(0,Vi.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 border border-red-300 dark:border-red-700",children:"\ud83d\udee1\ufe0f Admin"}),"Manager"===(null===y||void 0===y?void 0:y.role)&&(0,Vi.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200 border border-blue-300 dark:border-blue-700",children:"\ud83d\udcbc Manager"}),"Technician"===(null===y||void 0===y?void 0:y.role)&&(0,Vi.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200 border border-green-300 dark:border-green-700",children:"\ud83d\udd27 Technician"}),"User"===(null===y||void 0===y?void 0:y.role)&&(0,Vi.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-200 border border-gray-300 dark:border-gray-700",children:"\ud83d\udc64 User"})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-blue-200 dark:border-blue-700",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-xs font-semibold text-blue-600 dark:text-blue-400 mb-2 uppercase tracking-wider",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Status"]}),"Active"===(null===y||void 0===y?void 0:y.status)?(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200 border border-green-300 dark:border-green-700",children:[(0,Vi.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500 mr-2 animate-pulse"}),"Active"]}):(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-200 border border-gray-300 dark:border-gray-700",children:[(0,Vi.jsx)("span",{className:"h-2 w-2 rounded-full bg-gray-500 mr-2"}),"Inactive"]})]})]})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-900/20 dark:to-emerald-800/10 rounded-xl p-6 border-2 border-emerald-200 dark:border-emerald-700/50",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,Vi.jsx)("h3",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:"Address Information"})]}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-6 border border-emerald-200 dark:border-emerald-700",children:(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-semibold mb-1",children:"Street Address"}),(0,Vi.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:null===y||void 0===y||null===(e=y.address)||void 0===e?void 0:e.street})]})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-semibold mb-1",children:"City"}),(0,Vi.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:null===y||void 0===y||null===(t=y.address)||void 0===t?void 0:t.city})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-semibold mb-1",children:"State"}),(0,Vi.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:null===y||void 0===y||null===(r=y.address)||void 0===r?void 0:r.state})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-semibold mb-1",children:"Pincode"}),(0,Vi.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:null===y||void 0===y||null===(a=y.address)||void 0===a?void 0:a.pincode})]})]})]})})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100/50 dark:from-amber-900/20 dark:to-amber-800/10 rounded-xl p-6 border-2 border-amber-200 dark:border-amber-700/50",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),(0,Vi.jsx)("h3",{className:"text-xl font-bold text-amber-900 dark:text-amber-100",children:"Assigned Regions"})]}),(0,Vi.jsxs)("div",{className:"px-4 py-2 bg-gradient-to-r from-amber-600 to-amber-700 text-white rounded-lg shadow-lg flex items-center gap-2",children:[(0,Vi.jsx)("span",{className:"font-bold",children:(null===y||void 0===y||null===(s=y.assignedRegions)||void 0===s?void 0:s.length)||0}),(0,Vi.jsx)("span",{className:"text-sm",children:"Regions"})]})]}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-amber-200 dark:border-amber-700",children:null!==y&&void 0!==y&&y.assignedRegions&&y.assignedRegions.length>0?(0,Vi.jsx)("div",{className:"flex flex-wrap gap-2",children:y.assignedRegions.map(e=>(0,Vi.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-2 bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded-lg text-sm font-semibold border border-amber-300 dark:border-amber-700",children:[(0,Vi.jsxs)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e]},e))}):(0,Vi.jsxs)("div",{className:"text-center py-8 text-amber-600 dark:text-amber-400",children:[(0,Vi.jsx)("svg",{className:"h-12 w-12 mx-auto mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,Vi.jsx)("p",{className:"font-medium",children:"No regions assigned"})]})})]}),(0,Vi.jsx)("div",{className:"flex justify-end pt-4 border-t-2 border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("button",{onClick:()=>p(!1),className:"px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg font-bold hover:from-gray-700 hover:to-gray-800 shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Close"]})})]}):(0,Vi.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Q()},className:"space-y-8",children:[(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-violet-50 to-violet-100/50 dark:from-violet-900/20 dark:to-violet-800/10 rounded-xl p-6 border-2 border-violet-200 dark:border-violet-700/50",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Vi.jsx)("h3",{className:"text-xl font-bold text-violet-900 dark:text-violet-100",children:"Basic Information"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-violet-700 dark:text-violet-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Username *"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-violet-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Vi.jsx)("input",{type:"text",name:"username",value:W.username||"",onChange:X,className:"w-full pl-10 pr-3 py-3 border-2 ".concat(H.username?"border-red-400 dark:border-red-500":"border-violet-200 dark:border-violet-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 bg-white dark:bg-gray-700 dark:text-white transition-all"),placeholder:"Enter username"})]}),H.username&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.username]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-violet-700 dark:text-violet-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Full Name *"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-violet-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Vi.jsx)("input",{type:"text",name:"name",value:W.name||"",onChange:X,className:"w-full pl-10 pr-3 py-3 border-2 ".concat(H.name?"border-red-400 dark:border-red-500":"border-violet-200 dark:border-violet-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 bg-white dark:bg-gray-700 dark:text-white transition-all"),placeholder:"Enter full name"})]}),H.name&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.name]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-violet-700 dark:text-violet-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email *"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-violet-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Vi.jsx)("input",{type:"email",name:"email",value:W.email||"",onChange:X,className:"w-full pl-10 pr-3 py-3 border-2 ".concat(H.email?"border-red-400 dark:border-red-500":"border-violet-200 dark:border-violet-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 bg-white dark:bg-gray-700 dark:text-white transition-all"),placeholder:"user@example.com"})]}),H.email&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.email]})]}),"create"===x&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-violet-700 dark:text-violet-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Password *"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-violet-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),(0,Vi.jsx)("input",{type:"password",name:"password",value:W.password||"",onChange:X,className:"w-full pl-10 pr-3 py-3 border-2 border-violet-200 dark:border-violet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 bg-white dark:bg-gray-700 dark:text-white transition-all",placeholder:"Enter secure password"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-violet-700 dark:text-violet-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Phone Number *"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-violet-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,Vi.jsx)("input",{type:"tel",name:"phoneNumber",value:W.phoneNumber||"",onChange:X,className:"w-full pl-10 pr-3 py-3 border-2 ".concat(H.phoneNumber?"border-red-400 dark:border-red-500":"border-violet-200 dark:border-violet-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 bg-white dark:bg-gray-700 dark:text-white transition-all"),placeholder:"+91-XXXXXXXXXX"})]}),H.phoneNumber&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.phoneNumber]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-violet-700 dark:text-violet-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Gender"]}),(0,Vi.jsxs)("select",{name:"gender",value:W.gender||"",onChange:X,className:"w-full px-3 py-3 border-2 border-violet-200 dark:border-violet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium transition-all",children:[(0,Vi.jsx)("option",{value:"",children:"Select Gender"}),(0,Vi.jsx)("option",{value:"Male",children:"Male"}),(0,Vi.jsx)("option",{value:"Female",children:"Female"}),(0,Vi.jsx)("option",{value:"Other",children:"Other"})]})]})]})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-800/10 rounded-xl p-6 border-2 border-blue-200 dark:border-blue-700/50",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,Vi.jsx)("h3",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:"Work Information"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Department"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,Vi.jsx)("input",{type:"text",name:"department",value:W.department||"",onChange:X,className:"w-full pl-10 pr-3 py-3 border-2 border-blue-200 dark:border-blue-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white transition-all",placeholder:"Enter department"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2",children:[(0,Vi.jsxs)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Office Location *"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,Vi.jsx)("input",{type:"text",name:"officeLocation",value:W.officeLocation||"",onChange:X,className:"w-full pl-10 pr-3 py-3 border-2 ".concat(H.officeLocation?"border-red-400 dark:border-red-500":"border-blue-200 dark:border-blue-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white transition-all"),placeholder:"Enter office location"})]}),H.officeLocation&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.officeLocation]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Role *"]}),(0,Vi.jsxs)("select",{name:"role",value:W.role||"User",onChange:X,className:"w-full px-3 py-3 border-2 border-blue-200 dark:border-blue-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium transition-all",children:[(0,Vi.jsx)("option",{value:"Admin",children:"\ud83d\udee1\ufe0f Admin"}),(0,Vi.jsx)("option",{value:"Manager",children:"\ud83d\udcbc Manager"}),(0,Vi.jsx)("option",{value:"Technician",children:"\ud83d\udd27 Technician"}),(0,Vi.jsx)("option",{value:"User",children:"\ud83d\udc64 User"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Status *"]}),(0,Vi.jsxs)("select",{name:"status",value:W.status||"Active",onChange:X,className:"w-full px-3 py-3 border-2 border-blue-200 dark:border-blue-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium transition-all",children:[(0,Vi.jsx)("option",{value:"Active",children:"\u2705 Active"}),(0,Vi.jsx)("option",{value:"Inactive",children:"\u26d4 Inactive"})]})]})]})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-900/20 dark:to-emerald-800/10 rounded-xl p-6 border-2 border-emerald-200 dark:border-emerald-700/50",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,Vi.jsx)("h3",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:"Address Information"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Vi.jsxs)("div",{className:"md:col-span-2",children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"Street Address *"]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,Vi.jsx)("input",{type:"text",name:"address.street",value:(null===(i=W.address)||void 0===i?void 0:i.street)||"",onChange:X,className:"w-full pl-10 pr-3 py-3 border-2 ".concat(H.street?"border-red-400 dark:border-red-500":"border-emerald-200 dark:border-emerald-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 dark:text-white transition-all"),placeholder:"Enter street address"})]}),H.street&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.street]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"City *"]}),(0,Vi.jsx)("input",{type:"text",name:"address.city",value:(null===(l=W.address)||void 0===l?void 0:l.city)||"",onChange:X,className:"w-full px-3 py-3 border-2 ".concat(H.city?"border-red-400 dark:border-red-500":"border-emerald-200 dark:border-emerald-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 dark:text-white transition-all"),placeholder:"Enter city"}),H.city&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.city]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"State *"]}),(0,Vi.jsxs)("select",{name:"address.state",value:(null===(c=W.address)||void 0===c?void 0:c.state)||"",onChange:X,className:"w-full px-3 py-3 border-2 ".concat(H.state?"border-red-400 dark:border-red-500":"border-emerald-200 dark:border-emerald-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium transition-all"),children:[(0,Vi.jsx)("option",{value:"",children:"Select State"}),OC.map(e=>(0,Vi.jsx)("option",{value:e,children:e},e))]}),H.state&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.state]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),"Pincode *"]}),(0,Vi.jsx)("input",{type:"text",name:"address.pincode",value:(null===(d=W.address)||void 0===d?void 0:d.pincode)||"",onChange:X,className:"w-full px-3 py-3 border-2 ".concat(H.pincode?"border-red-400 dark:border-red-500":"border-emerald-200 dark:border-emerald-600"," rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 dark:text-white transition-all"),placeholder:"Enter pincode"}),H.pincode&&(0,Vi.jsxs)("p",{className:"flex items-center gap-1 text-red-600 dark:text-red-400 text-xs mt-1.5 font-medium",children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),H.pincode]})]})]})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100/50 dark:from-amber-900/20 dark:to-amber-800/10 rounded-xl p-6 border-2 border-amber-200 dark:border-amber-700/50",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-xl font-bold text-amber-900 dark:text-amber-100",children:"Assigned Regions"}),(0,Vi.jsx)("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Select states/territories for this user"})]})]}),(0,Vi.jsxs)("div",{className:"px-4 py-2 bg-gradient-to-r from-amber-600 to-amber-700 text-white rounded-lg shadow-lg flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),(0,Vi.jsx)("span",{className:"font-bold",children:(W.assignedRegions||[]).length}),(0,Vi.jsx)("span",{className:"text-sm",children:"Selected"})]})]}),(0,Vi.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,Vi.jsxs)("button",{type:"button",onClick:()=>U(e=>(0,o.A)((0,o.A)({},e),{},{assignedRegions:[...OC]})),className:"px-3 py-1.5 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg text-xs font-semibold hover:from-emerald-600 hover:to-emerald-700 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-1.5",children:[(0,Vi.jsx)("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Select All"]}),(0,Vi.jsxs)("button",{type:"button",onClick:()=>U(e=>(0,o.A)((0,o.A)({},e),{},{assignedRegions:[]})),className:"px-3 py-1.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg text-xs font-semibold hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-1.5",children:[(0,Vi.jsx)("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear All"]}),(0,Vi.jsxs)("button",{type:"button",onClick:()=>{const e=["Delhi","Haryana","Himachal Pradesh","Jammu and Kashmir","Ladakh","Punjab","Uttarakhand","Uttar Pradesh","Chandigarh"];U(t=>(0,o.A)((0,o.A)({},t),{},{assignedRegions:e}))},className:"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-xs font-semibold hover:from-blue-600 hover:to-blue-700 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-1.5",children:[(0,Vi.jsx)("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"North India"]}),(0,Vi.jsxs)("button",{type:"button",onClick:()=>{const e=["Andhra Pradesh","Karnataka","Kerala","Tamil Nadu","Telangana","Puducherry","Andaman and Nicobar Islands","Lakshadweep"];U(t=>(0,o.A)((0,o.A)({},t),{},{assignedRegions:e}))},className:"px-3 py-1.5 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg text-xs font-semibold hover:from-purple-600 hover:to-purple-700 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-1.5",children:[(0,Vi.jsx)("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"South India"]}),(0,Vi.jsxs)("button",{type:"button",onClick:()=>{const e=["Bihar","Jharkhand","Odisha","West Bengal","Assam","Arunachal Pradesh","Manipur","Meghalaya","Mizoram","Nagaland","Sikkim","Tripura"];U(t=>(0,o.A)((0,o.A)({},t),{},{assignedRegions:e}))},className:"px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-lg text-xs font-semibold hover:from-indigo-600 hover:to-indigo-700 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-1.5",children:[(0,Vi.jsx)("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"East India"]}),(0,Vi.jsxs)("button",{type:"button",onClick:()=>{const e=["Goa","Gujarat","Maharashtra","Rajasthan","Dadra and Nagar Haveli and Daman and Diu"];U(t=>(0,o.A)((0,o.A)({},t),{},{assignedRegions:e}))},className:"px-3 py-1.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg text-xs font-semibold hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-1.5",children:[(0,Vi.jsx)("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"West India"]}),(0,Vi.jsxs)("button",{type:"button",onClick:()=>{const e=["Chhattisgarh","Madhya Pradesh"];U(t=>(0,o.A)((0,o.A)({},t),{},{assignedRegions:e}))},className:"px-3 py-1.5 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-lg text-xs font-semibold hover:from-teal-600 hover:to-teal-700 shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-1.5",children:[(0,Vi.jsx)("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"Central India"]})]}),(0,Vi.jsx)("div",{className:"mb-4",children:(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Vi.jsx)("input",{type:"text",value:G,onChange:e=>q(e.target.value),placeholder:"Search states/territories...",className:"w-full pl-10 pr-10 py-3 border-2 border-amber-200 dark:border-amber-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 bg-white dark:bg-gray-700 dark:text-white transition-all"}),G&&(0,Vi.jsx)("button",{type:"button",onClick:()=>q(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-amber-400 hover:text-amber-600",children:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border-2 border-amber-200 dark:border-amber-600",children:(0,Vi.jsxs)("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:[OC.filter(e=>e.toLowerCase().includes(G.toLowerCase())).map(e=>(0,Vi.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 dark:hover:bg-amber-900/20 cursor-pointer transition-all duration-200 border border-amber-100 dark:border-amber-800/50 group hover:border-amber-300 dark:hover:border-amber-600 hover:shadow-md",children:[(0,Vi.jsx)("input",{type:"checkbox",checked:(W.assignedRegions||[]).includes(e),onChange:t=>{const r=W.assignedRegions||[],n=t.target.checked?[...r,e]:r.filter(t=>t!==e);U(e=>(0,o.A)((0,o.A)({},e),{},{assignedRegions:n}))},className:"h-5 w-5 rounded border-amber-300 dark:border-amber-600 text-amber-600 focus:ring-amber-500 cursor-pointer"}),(0,Vi.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,Vi.jsxs)("svg",{className:"h-4 w-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Vi.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-amber-700 dark:group-hover:text-amber-300 transition-colors",children:e})]}),(W.assignedRegions||[]).includes(e)&&(0,Vi.jsx)("svg",{className:"h-5 w-5 text-emerald-500 animate-pulse",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]},e)),0===OC.filter(e=>e.toLowerCase().includes(G.toLowerCase())).length&&(0,Vi.jsxs)("div",{className:"text-center py-8 text-amber-600 dark:text-amber-400",children:[(0,Vi.jsx)("svg",{className:"h-12 w-12 mx-auto mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Vi.jsxs)("p",{className:"font-medium",children:['No regions found matching "',G,'"']})]})]})})]}),(0,Vi.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t-2 border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("button",{type:"button",onClick:()=>p(!1),className:"px-6 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),(0,Vi.jsxs)("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-violet-700 text-white rounded-lg font-bold hover:from-violet-700 hover:to-violet-800 shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:-translate-y-0.5",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"create"===x?"Create User":"Update User"]})]})]})]})})}),k&&(0,Vi.jsx)(yC,{user:k,onSave:(e,t)=>{h(r=>r.map(r=>r.id===e?(0,o.A)((0,o.A)({},r),{},{directPermissions:t}):r))},onClose:()=>w(null)}),(0,Vi.jsx)(vC,{isOpen:_,user:L,onConfirm:async()=>{if(L){D(!0);try{await async function(e){try{const t=CC(e),r=await SC.delete("/users/".concat(t));if(!r.data.success)throw new Error(r.data.message||"Failed to delete user")}catch(n){var t,r;throw console.error("Error deleting user:",n),new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||n.message||"Failed to delete user")}}(L.id),await K(),T(!1),M(null)}catch(e){console.error("Error deleting user:",e),alert("Failed to delete user: ".concat(e.message))}finally{D(!1)}}},onCancel:()=>{T(!1),M(null)}}),(0,Vi.jsx)(NC,{isOpen:F.isOpen,onClose:()=>I({isOpen:!1,count:0}),onConfirm:async()=>{z(!0);try{await async function(e){try{const t=e.map(e=>parseInt(CC(e))),r=await SC.request({method:"DELETE",url:"/users/bulk-delete",data:{user_ids:t}});if(!r.data.success)throw new Error(r.data.message||"Failed to delete users");return r.data}catch(n){var t,r;throw console.error("Error bulk deleting users:",n),new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||n.message||"Failed to delete users")}}(Array.from(m)),await K(),g([]),I({isOpen:!1,count:0})}catch(e){console.error("Error deleting users:",e),alert("Failed to delete users: ".concat(e.message))}finally{z(!1)}},title:"Delete Multiple Users",message:"Are you sure you want to delete the selected users? This action cannot be undone and will permanently remove all associated data.",itemCount:F.count,isLoading:B,type:"danger"})]})},RC=()=>(0,Vi.jsx)(DC,{});function PC(e){if(!e)return{direct:[],fromGroups:[],all:new Set};const t=new Set;if("Admin"===e.role)return t.add("*"),{direct:["*"],fromGroups:[],all:t};const r=bC[e.role]||[];r.forEach(e=>t.add(e));const n=e.directPermissions||[];n.forEach(e=>t.add(e));const a=e.permissions||[];a.forEach(e=>t.add(e));const s=function(e){const t=function(e){if(!e.groups||0===e.groups.length)return[];try{const t=localStorage.getItem("user_groups");if(!t)return[];return JSON.parse(t).filter(t=>e.groups.includes(t.id))}catch(t){return console.error("Failed to load user groups:",t),[]}}(e),r=new Set;return t.forEach(e=>{e.isActive&&e.permissions.forEach(e=>r.add(e))}),Array.from(r)}(e);return s.forEach(e=>t.add(e)),{direct:[...r,...n,...a],fromGroups:s,all:t}}function FC(e,t){if(!e)return!1;const r=PC(e);if(r.all.has("*"))return!0;if(r.all.has(t))return!0;const n=t.split(".");for(let a=1;a<n.length;a++){const e=n.slice(0,a).join(".")+".*";if(r.all.has(e))return!0}return!1}function IC(){const{user:e}=di(e=>e.auth),t=(0,n.useMemo)(()=>PC(e),[e]);return{can:t=>FC(e,t),canAll:t=>function(e,t){return t.every(t=>FC(e,t))}(e,t),canAny:t=>function(e,t){return t.some(t=>FC(e,t))}(e,t),canWithOwnership:(t,r,n)=>function(e,t,r,n){if(!e)return{allowed:!1,reason:"User not authenticated",missingPermission:t};const a="".concat(t,".any");return FC(e,a)?{allowed:!0}:FC(e,"".concat(t,".own"))?r?r===e.id||null!==n&&void 0!==n&&n.allowTeam&&null!==n&&void 0!==n&&n.teamMemberIds&&n.teamMemberIds.includes(e.id)?{allowed:!0}:{allowed:!1,reason:"You can only perform this action on your own resources",missingPermission:a}:{allowed:!0}:{allowed:!1,reason:"Missing permission: ".concat(t),missingPermission:a}}(e,t,r,n),isAdmin:"Admin"===(null===e||void 0===e?void 0:e.role),isManager:"Admin"===(null===e||void 0===e?void 0:e.role)||"Manager"===(null===e||void 0===e?void 0:e.role),permissions:t.all}}const BC="user_groups";function zC(){try{const e=localStorage.getItem(BC);if(!e)return[];return JSON.parse(e).map(e=>(0,o.A)((0,o.A)({},e),{},{createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}catch(e){return console.error("Failed to load groups:",e),[]}}function WC(e){const t=zC(),r=(0,o.A)((0,o.A)({},e),{},{id:"group_".concat(Date.now()),createdAt:new Date,updatedAt:new Date});return t.push(r),HC(t),r}function UC(e,t){const r=zC(),n=r.findIndex(t=>t.id===e);return-1===n?(console.error("Group not found:",e),null):(r[n]=(0,o.A)((0,o.A)((0,o.A)({},r[n]),t),{},{id:r[n].id,createdAt:r[n].createdAt,createdBy:r[n].createdBy,updatedAt:new Date}),HC(r),r[n])}function HC(e){try{localStorage.setItem(BC,JSON.stringify(e))}catch(t){throw console.error("Failed to save groups:",t),t}}const VC=e=>{let{groups:t,selectedGroups:r=[],onSelectGroup:n,onSelectAll:a,onEdit:s,onDelete:o,onView:i}=e;return 0===t.length?(0,Vi.jsxs)("div",{className:"text-center py-12",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No groups found"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by creating a new group."})]}):(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-xl overflow-hidden rounded-xl border-2 border-amber-100 dark:border-amber-900/30",children:(0,Vi.jsxs)("ul",{className:"divide-y divide-amber-100 dark:divide-amber-900/20",children:[n&&(0,Vi.jsx)("li",{className:"bg-gradient-to-r from-amber-50 to-amber-100/50 dark:from-amber-900/20 dark:to-amber-800/10",children:(0,Vi.jsx)("div",{className:"px-4 py-3 sm:px-6",children:(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("input",{type:"checkbox",checked:r.length===t.length&&t.length>0,onChange:a,className:"h-5 w-5 text-amber-600 focus:ring-amber-500 border-amber-300 rounded"}),(0,Vi.jsxs)("span",{className:"ml-3 text-sm font-bold text-amber-800 dark:text-amber-200 flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Select All Groups"]})]})})}),t.map(e=>(0,Vi.jsx)("li",{children:(0,Vi.jsx)("div",{className:"px-4 py-4 sm:px-6 hover:bg-amber-50/50 dark:hover:bg-amber-900/10 transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex items-center flex-1",children:[n&&(0,Vi.jsx)("div",{className:"mr-4",children:(0,Vi.jsx)("input",{type:"checkbox",checked:r.includes(e.id),onChange:()=>n(e.id),className:"h-5 w-5 text-amber-600 focus:ring-amber-500 border-amber-300 rounded"})}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-amber-400 to-amber-500 flex items-center justify-center mr-3",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-base font-bold text-amber-800 dark:text-amber-200",children:e.name}),!e.isActive&&(0,Vi.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Inactive"})]})]}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400 font-medium",children:e.description}),(0,Vi.jsxs)("div",{className:"mt-3 flex items-center space-x-4 text-sm",children:[(0,Vi.jsxs)("div",{className:"flex items-center px-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,Vi.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,Vi.jsxs)("span",{className:"font-semibold text-blue-700 dark:text-blue-300",children:[e.members.length," members"]})]}),(0,Vi.jsxs)("div",{className:"flex items-center px-3 py-1 bg-violet-50 dark:bg-violet-900/20 rounded-lg",children:[(0,Vi.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-violet-600 dark:text-violet-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),(0,Vi.jsxs)("span",{className:"font-semibold text-violet-700 dark:text-violet-300",children:[e.permissions.length," permissions"]})]}),e.assignedRegions.length>0&&(0,Vi.jsxs)("div",{className:"flex items-center px-3 py-1 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[(0,Vi.jsxs)("svg",{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Vi.jsxs)("span",{className:"font-semibold text-emerald-700 dark:text-emerald-300",children:[e.assignedRegions.length," regions"]})]})]})]})]}),(0,Vi.jsxs)("div",{className:"ml-4 flex-shrink-0 flex space-x-2",children:[i&&(0,Vi.jsxs)("button",{onClick:()=>i(e),className:"inline-flex items-center px-3 py-2 rounded-lg shadow-sm text-sm font-semibold bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/40 border-2 border-blue-200 dark:border-blue-700 transition-all duration-200",title:"View Details",children:[(0,Vi.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),s&&(0,Vi.jsxs)("button",{onClick:()=>s(e),className:"inline-flex items-center px-3 py-2 rounded-lg shadow-sm text-sm font-semibold bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 hover:bg-amber-100 dark:hover:bg-amber-900/40 border-2 border-amber-200 dark:border-amber-700 transition-all duration-200",title:"Edit Group",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),o&&(0,Vi.jsxs)("button",{onClick:()=>o(e.id),className:"inline-flex items-center px-3 py-2 rounded-lg shadow-sm text-sm font-semibold bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/40 border-2 border-red-200 dark:border-red-700 transition-all duration-200",title:"Delete Group",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})})},e.id))]})})},GC=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],qC=e=>{let{group:t,onSave:r,onCancel:a}=e;const[s,i]=(0,n.useState)("basic"),[l,c]=(0,n.useState)({name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||"",isActive:void 0===(null===t||void 0===t?void 0:t.isActive)||t.isActive,permissions:(null===t||void 0===t?void 0:t.permissions)||[],members:(null===t||void 0===t?void 0:t.members)||[],managers:(null===t||void 0===t?void 0:t.managers)||[],assignedRegions:(null===t||void 0===t?void 0:t.assignedRegions)||[]}),[d,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{const e=await LC();u(e)}catch(e){console.error("Error loading users:",e)}})()},[]);const h=xC.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return(0,Vi.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),(0,Vi.jsx)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(l)},children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Vi.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?"Edit Group":"Create New Group"})]}),(0,Vi.jsx)("button",{type:"button",onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,Vi.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"basic",label:"Basic Info",icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"permissions",label:"Permissions (".concat(l.permissions.length,")"),icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},{id:"members",label:"Members (".concat(l.members.length,")"),icon:(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{id:"regions",label:"Regions (".concat(l.assignedRegions.length,")"),icon:(0,Vi.jsxs)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}].map(e=>(0,Vi.jsxs)("button",{type:"button",onClick:()=>i(e.id),className:"".concat(s===e.id?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-semibold text-sm inline-flex items-center gap-2"),children:[e.icon,e.label]},e.id))})}),(0,Vi.jsxs)("div",{className:"mt-6 max-h-96 overflow-y-auto px-1",children:["basic"===s&&(0,Vi.jsxs)("div",{className:"space-y-6 px-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Group Name ",(0,Vi.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Vi.jsx)("input",{type:"text",required:!0,value:l.name,onChange:e=>c((0,o.A)((0,o.A)({},l),{},{name:e.target.value})),className:"block w-full pl-10 pr-3 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"e.g., Field Engineers - Maharashtra"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,Vi.jsx)("div",{className:"relative",children:(0,Vi.jsx)("textarea",{rows:4,value:l.description,onChange:e=>c((0,o.A)((0,o.A)({},l),{},{description:e.target.value})),className:"block w-full px-3 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"Brief description of the group's purpose and responsibilities"})}),(0,Vi.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Provide a clear description to help users understand the group's role"})]}),(0,Vi.jsx)("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-200 dark:border-amber-800 rounded-lg p-4",children:(0,Vi.jsxs)("div",{className:"flex items-start",children:[(0,Vi.jsx)("input",{id:"isActive",type:"checkbox",checked:l.isActive,onChange:e=>c((0,o.A)((0,o.A)({},l),{},{isActive:e.target.checked})),className:"h-5 w-5 text-amber-600 focus:ring-amber-500 border-gray-300 rounded mt-0.5"}),(0,Vi.jsxs)("div",{className:"ml-3",children:[(0,Vi.jsx)("label",{htmlFor:"isActive",className:"block text-sm font-semibold text-gray-900 dark:text-white",children:"Active Group"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"When active, members inherit all permissions assigned to this group"})]})]})})]}),"permissions"===s&&(0,Vi.jsx)("div",{className:"space-y-6 px-4",children:Object.entries(h).map(e=>{let[t,r]=e;return(0,Vi.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("h4",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),t]}),(0,Vi.jsx)("button",{type:"button",onClick:()=>(e=>{const t=xC.filter(t=>t.category===e).map(e=>e.id),r=t.every(e=>l.permissions.includes(e));c(r?e=>(0,o.A)((0,o.A)({},e),{},{permissions:e.permissions.filter(e=>!t.includes(e))}):e=>(0,o.A)((0,o.A)({},e),{},{permissions:Array.from(new Set([...e.permissions,...t]))}))})(t),className:"text-xs font-semibold text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 px-3 py-1 rounded-md border border-amber-300 dark:border-amber-700 hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-colors",children:r.every(e=>l.permissions.includes(e.id))?"Deselect All":"Select All"})]}),(0,Vi.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,Vi.jsxs)("div",{className:"flex items-start p-3 rounded-lg hover:bg-white dark:hover:bg-gray-800 transition-colors border border-transparent hover:border-amber-200 dark:hover:border-amber-800",children:[(0,Vi.jsx)("div",{className:"flex items-center h-5 mt-0.5",children:(0,Vi.jsx)("input",{id:e.id,type:"checkbox",checked:l.permissions.includes(e.id),onChange:()=>{return t=e.id,void c(e=>(0,o.A)((0,o.A)({},e),{},{permissions:e.permissions.includes(t)?e.permissions.filter(e=>e!==t):[...e.permissions,t]}));var t},className:"h-5 w-5 text-amber-600 focus:ring-amber-500 border-gray-300 rounded"})}),(0,Vi.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Vi.jsx)("label",{htmlFor:e.id,className:"font-semibold text-sm text-gray-900 dark:text-white cursor-pointer block",children:e.name}),(0,Vi.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-0.5",children:e.description})]})]},e.id))})]},t)})}),"members"===s&&(0,Vi.jsx)("div",{className:"px-4",children:0===d.length?(0,Vi.jsxs)("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-900/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,Vi.jsx)("p",{className:"mt-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"No users available"}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Create users in User Management first"})]}):(0,Vi.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,Vi.jsx)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-white dark:hover:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-amber-300 dark:hover:border-amber-700 transition-all cursor-pointer",children:(0,Vi.jsxs)("div",{className:"flex items-center flex-1",children:[(0,Vi.jsx)("input",{id:"user-".concat(e.id),type:"checkbox",checked:l.members.includes(e.id),onChange:()=>{return t=e.id,void c(e=>(0,o.A)((0,o.A)({},e),{},{members:e.members.includes(t)?e.members.filter(e=>e!==t):[...e.members,t]}));var t},className:"h-5 w-5 text-amber-600 focus:ring-amber-500 border-gray-300 rounded"}),(0,Vi.jsx)("label",{htmlFor:"user-".concat(e.id),className:"ml-4 flex-1 cursor-pointer",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:e.name}),(0,Vi.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:e.email})]}),(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vi.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200 border border-blue-300 dark:border-blue-700",children:e.role}),(0,Vi.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.assignedRegions.length>0?"".concat(e.assignedRegions.length," regions"):"No regions"})]})]})})]})},e.id))})}),"regions"===s&&(0,Vi.jsxs)("div",{className:"px-4",children:[(0,Vi.jsx)("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-lg",children:(0,Vi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-200",children:"Select Indian States & Union Territories"}),(0,Vi.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["Choose the regions this group will have access to (",l.assignedRegions.length," selected)"]})]})]})}),(0,Vi.jsx)("div",{className:"grid grid-cols-2 gap-3",children:GC.map(e=>(0,Vi.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-900/50 hover:bg-white dark:hover:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-amber-300 dark:hover:border-amber-700 transition-all cursor-pointer",children:[(0,Vi.jsx)("input",{id:"state-".concat(e),type:"checkbox",checked:l.assignedRegions.includes(e),onChange:()=>{return t=e,void c(e=>(0,o.A)((0,o.A)({},e),{},{assignedRegions:e.assignedRegions.includes(t)?e.assignedRegions.filter(e=>e!==t):[...e.assignedRegions,t]}));var t},className:"h-5 w-5 text-amber-600 focus:ring-amber-500 border-gray-300 rounded"}),(0,Vi.jsx)("label",{htmlFor:"state-".concat(e),className:"ml-3 block text-sm font-medium text-gray-900 dark:text-white cursor-pointer flex-1",children:e})]},e))})]})]}),(0,Vi.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end space-x-3",children:[(0,Vi.jsxs)("button",{type:"button",onClick:a,className:"inline-flex items-center px-5 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),(0,Vi.jsxs)("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-lg shadow-sm text-sm font-semibold text-white bg-amber-600 hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-colors duration-200",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),t?"Update Group":"Create Group"]})]})]})})]})})},$C=e=>{let{group:t,onClose:r}=e;const[a,s]=(0,n.useState)([]),[o,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{const e=await LC();s(e)}catch(e){console.error("Error loading users:",e)}finally{i(!1)}})()},[]);const l=a.filter(e=>t.members.includes(e.id)),c=a.filter(e=>t.managers.includes(e.id)),d=xC.filter(e=>t.permissions.includes(e.id));return(0,Vi.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,Vi.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:r}),(0,Vi.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:t.name}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:t.description||"No description"})]}),(0,Vi.jsx)("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-500",children:(0,Vi.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"space-y-6 max-h-96 overflow-y-auto px-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Status"}),(0,Vi.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(t.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:t.isActive?"Active":"Inactive"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Created"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:new Date(t.createdAt).toLocaleDateString()})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Last Updated"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:new Date(t.updatedAt).toLocaleDateString()})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:["Managers (",c.length,")"]}),c.length>0?(0,Vi.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,Vi.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Vi.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:e.name}),(0,Vi.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["(",e.email,")"]})]},e.id))}):(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No managers assigned"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:["Members (",l.length,")"]}),l.length>0?(0,Vi.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:l.map(e=>(0,Vi.jsxs)("div",{className:"flex items-center justify-between text-sm py-1",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.name}),(0,Vi.jsxs)("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:["(",e.email,")"]})]}),(0,Vi.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.role})]},e.id))}):(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No members in this group"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:["Permissions (",d.length,")"]}),d.length>0?(0,Vi.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:d.map(e=>(0,Vi.jsxs)("div",{className:"text-sm",children:[(0,Vi.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.name}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]},e.id))}):(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No permissions assigned"})]}),t.assignedRegions.length>0&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:["Assigned Regions (",t.assignedRegions.length,")"]}),(0,Vi.jsx)("div",{className:"flex flex-wrap gap-2",children:t.assignedRegions.map(e=>(0,Vi.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:e},e))})]})]}),(0,Vi.jsx)("div",{className:"mt-6 flex items-center justify-end",children:(0,Vi.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Close"})})]})]})})},KC=e=>{let{isOpen:t,onClose:r,onConfirm:n,title:a,message:s,confirmText:o="Confirm",cancelText:i="Cancel",type:l="danger"}=e;if(!t)return null;return(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-md w-full transform transition-all animate-in fade-in zoom-in duration-200",children:[(0,Vi.jsx)("div",{className:"p-6",children:(0,Vi.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0 ".concat("danger"===l?"text-red-600":"warning"===l?"text-yellow-600":"text-blue-600"),children:(0,Vi.jsx)(Ul,{className:"h-12 w-12"})}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:a}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s})]}),(0,Vi.jsx)("button",{onClick:r,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,Vi.jsx)(jC,{className:"h-6 w-6"})})]})}),(0,Vi.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 px-6 py-4 flex space-x-3 justify-end rounded-b-lg",children:[(0,Vi.jsx)("button",{onClick:r,className:"px-4 py-2 rounded-lg font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:i}),(0,Vi.jsx)("button",{onClick:()=>{n(),r()},className:"px-4 py-2 rounded-lg font-medium text-white transition-colors ".concat("danger"===l?"bg-red-600 hover:bg-red-700":"warning"===l?"bg-yellow-600 hover:bg-yellow-700":"bg-blue-600 hover:bg-blue-700"),children:o})]})]})})},YC=()=>{const{user:e}=di(e=>e.auth),{can:t,isAdmin:r}=IC(),[a,s]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[m,g]=(0,n.useState)(null),[f,p]=(0,n.useState)(null),[x,b]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""});(0,n.useEffect)(()=>{if(y(),r&&e){0===zC().length&&(!function(e){if(zC().length>0)return;[{name:"Field Engineers - Maharashtra",description:"Field engineers working in Maharashtra region",permissions:["gis.distance.use","gis.distance.save","gis.polygon.use","gis.polygon.save","gis.circle.use","gis.circle.save","gis.elevation.use","gis.elevation.save","data.view.own","data.edit.own","search.use"],assignedRegions:["Maharashtra"],members:[],managers:[e],isActive:!0,createdBy:e},{name:"Data Analysts",description:"Analysts with view and export permissions",permissions:["data.view.all","data.export","search.use","search.history.view"],assignedRegions:[],members:[],managers:[e],isActive:!0,createdBy:e},{name:"Infrastructure Team",description:"Team managing infrastructure assets",permissions:["gis.infrastructure.use","gis.infrastructure.save","gis.infrastructure.delete.own","gis.infrastructure.import","data.view.own","data.edit.own","search.use"],assignedRegions:[],members:[],managers:[e],isActive:!0,createdBy:e}].forEach(e=>WC(e))}(e.id),y())}},[r,e]);const y=()=>{const e=zC();s(e)};return t("groups.view")?(0,Vi.jsx)(bl,{children:(0,Vi.jsxs)("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-14 w-14 rounded-lg bg-amber-600 dark:bg-amber-500 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Groups"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Manage user groups and permissions"})]})]}),t("groups.create")&&(0,Vi.jsxs)("button",{onClick:()=>{h(null),d(!0)},className:"inline-flex items-center px-5 py-2.5 border border-transparent shadow-sm text-sm font-semibold rounded-lg text-white bg-amber-600 hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-colors duration-200",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Group"]})]})}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg border border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("div",{className:"p-5",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 truncate mb-2",children:"Total Groups"}),(0,Vi.jsx)("dd",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.length})]}),(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})})]})})}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg border border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("div",{className:"p-5",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 truncate mb-2",children:"Active Groups"}),(0,Vi.jsx)("dd",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.filter(e=>e.isActive).length})]}),(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})})}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg border border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("div",{className:"p-5",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 truncate mb-2",children:"Total Members"}),(0,Vi.jsx)("dd",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.reduce((e,t)=>e+t.members.length,0)})]}),(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})})]})})})]}),i.length>0&&(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5 shadow-md",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[i.length," group(s) selected"]}),(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Choose a bulk action"})]})]}),(0,Vi.jsxs)("div",{className:"flex gap-3",children:[(0,Vi.jsxs)("button",{onClick:()=>{i.forEach(e=>{UC(e,{isActive:!0})}),b({isOpen:!0,type:"success",title:"Success",message:"".concat(i.length," group(s) activated")}),y(),l([])},className:"inline-flex items-center gap-2 px-4 py-2 border border-transparent shadow-sm text-sm font-semibold rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Activate"]}),(0,Vi.jsxs)("button",{onClick:()=>{i.forEach(e=>{UC(e,{isActive:!1})}),b({isOpen:!0,type:"success",title:"Success",message:"".concat(i.length," group(s) deactivated")}),y(),l([])},className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-semibold rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Deactivate"]})]})]})}),(0,Vi.jsx)(VC,{groups:a,selectedGroups:i,onSelectGroup:e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onSelectAll:()=>{i.length===a.length?l([]):l(a.map(e=>e.id))},onView:e=>{g(e)},onEdit:t("groups.edit")?e=>{h(e),d(!0)}:void 0,onDelete:t("groups.delete")?e=>{p(e)}:void 0}),c&&(0,Vi.jsx)(qC,{group:u,onSave:t=>{if(e)try{if(u){UC(u.id,t)&&b({isOpen:!0,type:"success",title:"Success",message:"Group updated successfully"})}else WC({name:t.name||"",description:t.description||"",permissions:t.permissions||[],assignedRegions:t.assignedRegions||[],members:t.members||[],managers:t.managers||[e.id],isActive:void 0===t.isActive||t.isActive,createdBy:e.id}),b({isOpen:!0,type:"success",title:"Success",message:"Group created successfully"});d(!1),h(null),y()}catch(r){b({isOpen:!0,type:"error",title:"Error",message:"Failed to save group"})}},onCancel:()=>{d(!1),h(null)}}),m&&(0,Vi.jsx)($C,{group:m,onClose:()=>g(null)}),(0,Vi.jsx)(KC,{isOpen:null!==f,title:"Delete Group",message:"Are you sure you want to delete this group? This action cannot be undone.",confirmText:"Delete",type:"danger",onConfirm:()=>{if(!f)return;const e=function(e){const t=zC(),r=t.filter(t=>t.id!==e);return r.length===t.length?(console.error("Group not found:",e),!1):(HC(r),!0)}(f);e?(b({isOpen:!0,type:"success",title:"Success",message:"Group deleted successfully"}),y()):b({isOpen:!0,type:"error",title:"Error",message:"Failed to delete group"}),p(null)},onClose:()=>p(null)}),(0,Vi.jsx)(ql,{isOpen:x.isOpen,type:x.type,title:x.title,message:x.message,onClose:()=>b((0,o.A)((0,o.A)({},x),{},{isOpen:!1}))})]})}):(0,Vi.jsx)(bl,{children:(0,Vi.jsx)("div",{className:"flex items-center justify-center h-96 ",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Access Denied"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You don't have permission to view user groups."})]})})})},XC=ui.A.create({baseURL:"http://localhost:5005/api",timeout:1e4,headers:{"Content-Type":"application/json"}});XC.interceptors.request.use(e=>{const t=sessionStorage.getItem("opti_connect_token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e});const JC=()=>{const{user:e}=di(e=>e.auth),[t,r]=(0,n.useState)([]),[a,s]=(0,n.useState)({}),[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),[f,p]=(0,n.useState)({isOpen:!1,logId:null}),[x,b]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),y="Admin"===(null===e||void 0===e?void 0:e.role);(0,n.useEffect)(()=>{y&&v()},[y]);const v=async()=>{g(!0);try{const e=await XC.get("/audit/logs",{params:{limit:100}});if(e.data.success){const t=e.data.logs.map(e=>{let t={};try{t=e.details?JSON.parse(e.details):{}}catch(JE){console.error("Failed to parse log details:",JE)}return{id:e.id.toString(),timestamp:new Date(e.created_at),userId:"OCGID".concat(String(e.user_id).padStart(3,"0")),userName:e.full_name||e.username,userEmail:"",userRole:"Unknown",eventType:e.resource_type||"USER_LOGIN",severity:t.severity||"info",region:t.resource_name||void 0,toolName:t.toolName||void 0,action:e.action,details:t,success:!1!==t.success,errorMessage:t.errorMessage||void 0}});r(t)}}catch(n){var e,t;console.error("Failed to load audit logs:",n),b({isOpen:!0,type:"error",title:"Failed to Load Logs",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Could not load audit logs"})}finally{g(!1)}},k=e=>{switch(e){case"info":return"text-blue-700 dark:text-blue-300 bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900/40 dark:to-blue-800/40 border border-blue-300 dark:border-blue-700 shadow-sm";case"warning":return"text-amber-700 dark:text-amber-300 bg-gradient-to-r from-amber-100 to-amber-200 dark:from-amber-900/40 dark:to-amber-800/40 border border-amber-300 dark:border-amber-700 shadow-sm";case"error":return"text-red-700 dark:text-red-300 bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/40 dark:to-red-800/40 border border-red-300 dark:border-red-700 shadow-sm";case"critical":return"text-purple-700 dark:text-purple-300 bg-gradient-to-r from-purple-100 to-purple-200 dark:from-purple-900/40 dark:to-purple-800/40 border border-purple-300 dark:border-purple-700 shadow-sm";default:return"text-gray-700 dark:text-gray-300 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-900/40 dark:to-gray-800/40 border border-gray-300 dark:border-gray-700 shadow-sm"}},w=e=>e?"text-emerald-700 dark:text-emerald-300 bg-gradient-to-r from-emerald-100 to-emerald-200 dark:from-emerald-900/40 dark:to-emerald-800/40 border border-emerald-300 dark:border-emerald-700 shadow-sm":"text-rose-700 dark:text-rose-300 bg-gradient-to-r from-rose-100 to-rose-200 dark:from-rose-900/40 dark:to-rose-800/40 border border-rose-300 dark:border-rose-700 shadow-sm";return y?(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-xl shadow-xl border-2 border-blue-100 dark:border-blue-900/30 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 dark:from-blue-400 dark:to-blue-600 bg-clip-text text-transparent",children:"Audit Logs"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-medium",children:["Track all user actions and system events (",t.length," entries)"]})]})]}),(0,Vi.jsxs)("div",{className:"flex space-x-2",children:[(0,Vi.jsxs)("button",{onClick:v,disabled:m,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg transition-all duration-200 text-sm font-semibold disabled:opacity-50",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),m?"Refreshing...":"Refresh"]}),(0,Vi.jsxs)("button",{onClick:()=>{const e=t.map(e=>[e.timestamp.toISOString(),e.userName,e.action,e.region||"-",e.severity,e.success?"Yes":"No"]),r=[["Timestamp","User","Action","Resource","Severity","Success"].join(","),...e.map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),n=new Blob([r],{type:"text/csv"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download="audit-logs-".concat((new Date).toISOString(),".csv"),s.click(),URL.revokeObjectURL(a)},disabled:0===t.length,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:from-emerald-600 hover:to-emerald-700 shadow-md hover:shadow-lg transition-all duration-200 text-sm font-semibold disabled:opacity-50",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]}),(0,Vi.jsxs)("button",{onClick:()=>h(!0),disabled:0===t.length,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg transition-all duration-200 text-sm font-semibold disabled:opacity-50",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear All Logs"]})]})]})}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-xl border-2 border-blue-100 dark:border-blue-900/30 overflow-hidden",children:m?(0,Vi.jsxs)("div",{className:"text-center py-12",children:[(0,Vi.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,Vi.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading audit logs..."})]}):0===t.length?(0,Vi.jsxs)("div",{className:"text-center py-12",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Vi.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"No audit logs found"})]}):(0,Vi.jsx)("div",{className:"overflow-x-auto",children:(0,Vi.jsxs)("table",{className:"w-full",children:[(0,Vi.jsx)("thead",{className:"bg-gradient-to-r from-blue-100 to-blue-50 dark:from-blue-900/30 dark:to-blue-800/20",children:(0,Vi.jsxs)("tr",{children:[(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wider",children:"ID"}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wider",children:"Timestamp"}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wider",children:"User"}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wider",children:"Action"}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wider",children:"Region"}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wider",children:"Severity"}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wider",children:"Status"}),(0,Vi.jsx)("th",{className:"px-4 py-4 text-left text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wider",children:"Actions"})]})}),(0,Vi.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(e=>(0,Vi.jsxs)("tr",{className:"hover:bg-blue-50 dark:hover:bg-blue-900/10 transition-all duration-150 border-b border-blue-100 dark:border-blue-900/20",children:[(0,Vi.jsxs)("td",{className:"px-4 py-4 text-sm text-gray-800 dark:text-gray-200 font-medium",children:["#",e.id]}),(0,Vi.jsx)("td",{className:"px-4 py-4 text-sm text-gray-800 dark:text-gray-200 font-medium",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4 text-cyan-500 dark:text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(e.timestamp).toLocaleString()]})}),(0,Vi.jsx)("td",{className:"px-4 py-4 text-sm",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-violet-400 to-violet-500 flex items-center justify-center",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("div",{className:"text-gray-900 dark:text-white font-bold",children:e.userName}),(0,Vi.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs font-medium",children:e.userRole})]})]})}),(0,Vi.jsx)("td",{className:"px-4 py-4 text-sm text-gray-800 dark:text-gray-200 font-semibold",children:e.action}),(0,Vi.jsx)("td",{className:"px-4 py-4 text-sm",children:e.region?(0,Vi.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 text-amber-700 dark:text-amber-300 rounded-lg font-semibold",children:[(0,Vi.jsxs)("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.region]}):(0,Vi.jsx)("span",{className:"text-gray-400 dark:text-gray-600",children:"-"})}),(0,Vi.jsx)("td",{className:"px-4 py-4",children:(0,Vi.jsx)("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-bold rounded-lg ".concat(k(e.severity)),children:e.severity.toUpperCase()})}),(0,Vi.jsx)("td",{className:"px-4 py-4",children:(0,Vi.jsx)("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-bold rounded-lg ".concat(w(e.success)),children:e.success?(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Success"]}):(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Failed"]})})}),(0,Vi.jsx)("td",{className:"px-4 py-4 text-sm",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsxs)("button",{onClick:t=>{t.stopPropagation(),d(e)},className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-lg hover:from-indigo-600 hover:to-indigo-700 shadow-sm hover:shadow-md transition-all duration-200 font-semibold text-xs",children:[(0,Vi.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),(0,Vi.jsxs)("button",{onClick:t=>{t.stopPropagation(),p({isOpen:!0,logId:e.id})},className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 shadow-sm hover:shadow-md transition-all duration-200 font-semibold text-xs",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]},e.id))})]})})}),c&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>d(null),children:(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,Vi.jsxs)("div",{className:"p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Audit Log Details"}),(0,Vi.jsx)("button",{onClick:()=>d(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,Vi.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"ID"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:["#",c.id]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Timestamp"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:new Date(c.timestamp).toLocaleString()})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:[c.userName," (",c.userEmail||"N/A",")"]}),(0,Vi.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Role: ",c.userRole]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Event Type"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:c.eventType})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Action"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:c.action})]}),c.region&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Region"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:c.region})]}),c.toolName&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tool"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:c.toolName})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),(0,Vi.jsx)("span",{className:"inline-block mt-1 px-2 py-1 text-xs font-semibold rounded-full ".concat(w(c.success)),children:c.success?"Success":"Failed"})]}),c.errorMessage&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Error Message"}),(0,Vi.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:c.errorMessage})]}),Object.keys(c.details).length>0&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Additional Details"}),(0,Vi.jsx)("pre",{className:"text-xs bg-gray-100 dark:bg-gray-900 p-3 rounded-lg overflow-x-auto",children:JSON.stringify(c.details,null,2)})]})]})]})})}),(0,Vi.jsx)(KC,{isOpen:f.isOpen,title:"Delete Audit Log",message:"Are you sure you want to delete this audit log entry? This action cannot be undone.",confirmText:"Delete Log",cancelText:"Cancel",onConfirm:()=>f.logId&&(async e=>{try{(await XC.delete("/audit/logs/".concat(e))).data.success&&(b({isOpen:!0,type:"success",title:"Log Deleted",message:"Audit log entry has been deleted"}),v())}catch(n){var t,r;b({isOpen:!0,type:"error",title:"Failed to Delete Log",message:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Could not delete audit log"})}finally{p({isOpen:!1,logId:null})}})(f.logId),onClose:()=>p({isOpen:!1,logId:null}),type:"danger"}),(0,Vi.jsx)(KC,{isOpen:u,title:"Clear All Audit Logs",message:"Are you sure you want to clear all audit logs? This action cannot be undone.",confirmText:"Clear All Logs",cancelText:"Cancel",onConfirm:async()=>{try{const e=await XC.delete("/audit/logs");e.data.success&&(b({isOpen:!0,type:"success",title:"Logs Cleared",message:e.data.message||"All audit logs have been cleared successfully"}),v())}catch(r){var e,t;b({isOpen:!0,type:"error",title:"Failed to Clear Logs",message:(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Could not clear audit logs"})}finally{h(!1)}},onClose:()=>h(!1),type:"danger"}),(0,Vi.jsx)(ql,{isOpen:x.isOpen,type:x.type,title:x.title,message:x.message,onClose:()=>b((0,o.A)((0,o.A)({},x),{},{isOpen:!1}))})]}):(0,Vi.jsx)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.732 16c-.77 1.333.192 3 1.732 3z"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Access Denied"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Only administrators can view audit logs."})]})})},QC=ui.A.create({baseURL:"http://localhost:5005/api",timeout:1e4,headers:{"Content-Type":"application/json"}});QC.interceptors.request.use(e=>{const t=sessionStorage.getItem("opti_connect_token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e});const ZC=async e=>{try{const t={};e&&(t.status=e);const r=(await QC.get("/region-requests",{params:t})).data;if(!r.success)throw new Error(r.message||"Failed to fetch region requests");console.log("\ud83d\udce5 Fetched region requests from backend:",r.requests);return r.requests.map(e=>({id:e.id.toString(),userId:"OCGID".concat(String(e.user_id).padStart(3,"0")),userName:e.full_name||e.username||"",userEmail:e.email||"",userRole:e.role||"User",requestedRegions:[e.region_name],reason:e.reason||"",status:e.status,createdAt:new Date(e.requested_at||e.created_at),updatedAt:new Date(e.updated_at||e.created_at),reviewedAt:e.reviewed_at?new Date(e.reviewed_at):void 0,reviewedBy:e.reviewed_by?"OCGID".concat(String(e.reviewed_by).padStart(3,"0")):void 0,reviewedByName:e.reviewed_by_name||void 0,reviewNotes:e.review_notes||void 0}))}catch(t){return console.error("Error fetching region requests from backend:",t),[]}},eE=async e=>(await ZC(e.status)).filter(t=>(!e.userId||t.userId===e.userId)&&!(e.region&&!t.requestedRegions.includes(e.region))),tE=async e=>{const t=e?await eE(e):await ZC(),r={},n={};let a=0,s=0,o=0;return t.forEach(e=>{const t="".concat(e.userName," (").concat(e.userEmail,")");r[t]=(r[t]||0)+1,e.requestedRegions.forEach(e=>{n[e]=(n[e]||0)+1}),"pending"===e.status?a++:"approved"===e.status?s++:"rejected"===e.status&&o++}),{totalRequests:t.length,pendingRequests:a,approvedRequests:s,rejectedRequests:o,requestsByUser:r,requestsByRegion:n}},rE=()=>{const{user:e}=di(e=>e.auth),[t,r]=(0,n.useState)([]),[a,s]=(0,n.useState)("all"),[i,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[m,g]=(0,n.useState)(null),[f,p]=(0,n.useState)({isOpen:!1,request:null}),[x,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),k="Admin"===(null===e||void 0===e?void 0:e.role),[w,j]=(0,n.useState)({totalRequests:0,pendingRequests:0,approvedRequests:0,rejectedRequests:0,requestsByUser:{},requestsByRegion:{}});(0,n.useEffect)(()=>{N()},[a]),(0,n.useEffect)(()=>{(async()=>{const e=await tE();j(e)})()},[t]);const N=async()=>{if("all"===a){const e=await ZC();r(e)}else{const e=await eE({status:a});r(e)}},S=(e,t,r)=>{v({isOpen:!0,type:e,title:t,message:r})};return k?(0,Vi.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-violet-50 dark:from-gray-800 dark:to-violet-900/20 rounded-xl shadow-xl border-2 border-violet-100 dark:border-violet-900/30 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-violet-800 dark:from-violet-400 dark:to-violet-600 bg-clip-text text-transparent mb-1",children:"Region Access Request Management"}),(0,Vi.jsx)("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Review and manage user requests for region access."})]})]})}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-indigo-50 dark:from-gray-800 dark:to-indigo-900/20 rounded-xl shadow-lg border-2 border-indigo-100 dark:border-indigo-900/30 p-5 hover:shadow-xl transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400 mb-1",children:"Total Requests"}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:w.totalRequests})]}),(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-amber-50 dark:from-gray-800 dark:to-amber-900/20 rounded-xl shadow-lg border-2 border-amber-100 dark:border-amber-900/30 p-5 hover:shadow-xl transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-amber-600 dark:text-amber-400 mb-1",children:"Pending"}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:w.pendingRequests})]}),(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-emerald-50 dark:from-gray-800 dark:to-emerald-900/20 rounded-xl shadow-lg border-2 border-emerald-100 dark:border-emerald-900/30 p-5 hover:shadow-xl transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-400 mb-1",children:"Approved"}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:w.approvedRequests})]}),(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-rose-50 dark:from-gray-800 dark:to-rose-900/20 rounded-xl shadow-lg border-2 border-rose-100 dark:border-rose-900/30 p-5 hover:shadow-xl transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-rose-600 dark:text-rose-400 mb-1",children:"Rejected"}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-rose-600 dark:text-rose-400",children:w.rejectedRequests})]}),(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-rose-500 to-rose-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-cyan-50 dark:from-gray-800 dark:to-cyan-900/20 rounded-xl shadow-lg border-2 border-cyan-100 dark:border-cyan-900/30 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),(0,Vi.jsx)("label",{className:"text-sm font-bold text-cyan-700 dark:text-cyan-300",children:"Filter by Status:"}),(0,Vi.jsxs)("select",{value:a,onChange:e=>s(e.target.value),className:"px-4 py-2 border-2 border-cyan-200 dark:border-cyan-700 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium shadow-sm hover:shadow-md transition-all duration-200","aria-label":"Filter requests by status",children:[(0,Vi.jsx)("option",{value:"all",children:"All Requests"}),(0,Vi.jsx)("option",{value:"pending",children:"Pending"}),(0,Vi.jsx)("option",{value:"approved",children:"Approved"}),(0,Vi.jsx)("option",{value:"rejected",children:"Rejected"}),(0,Vi.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,Vi.jsx)("div",{className:"flex-1 text-right",children:(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-cyan-100 to-cyan-200 dark:from-cyan-900/40 dark:to-cyan-800/40 text-cyan-700 dark:text-cyan-300 rounded-lg font-bold text-sm shadow-sm border border-cyan-300 dark:border-cyan-700",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Showing ",t.length," request",1!==t.length?"s":""]})})]})}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-xl border-2 border-violet-100 dark:border-violet-900/30 overflow-hidden",children:0===t.length?(0,Vi.jsxs)("div",{className:"p-8 text-center",children:[(0,Vi.jsx)("div",{className:"h-16 w-16 mx-auto rounded-xl bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center mb-4",children:(0,Vi.jsx)("svg",{className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Vi.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"No requests found"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"all"===a?"There are no region access requests yet.":"There are no ".concat(a," requests.")})]}):(0,Vi.jsx)("div",{className:"overflow-x-auto",children:(0,Vi.jsxs)("table",{className:"min-w-full divide-y-2 divide-violet-200 dark:divide-violet-900/30",children:[(0,Vi.jsx)("thead",{className:"bg-gradient-to-r from-violet-100 to-violet-50 dark:from-violet-900/30 dark:to-violet-800/20",children:(0,Vi.jsxs)("tr",{children:[(0,Vi.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"User"]})}),(0,Vi.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsxs)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Requested Regions"]})}),(0,Vi.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Reason"]})}),(0,Vi.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Status"]})}),(0,Vi.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Date"]})}),(0,Vi.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-violet-700 dark:text-violet-300 uppercase tracking-wider",children:(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Actions"]})})]})}),(0,Vi.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(e=>(0,Vi.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,Vi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Vi.jsxs)("div",{className:"flex flex-col",children:[(0,Vi.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.userName}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.userEmail}),(0,Vi.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:e.userRole})]})}),(0,Vi.jsx)("td",{className:"px-6 py-4",children:(0,Vi.jsx)("div",{className:"flex flex-wrap gap-1 max-w-xs",children:e.requestedRegions.map(e=>(0,Vi.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100 rounded text-xs font-medium",children:e},e))})}),(0,Vi.jsx)("td",{className:"px-6 py-4",children:(0,Vi.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 max-w-xs",children:e.reason.length>100?"".concat(e.reason.substring(0,100),"..."):e.reason})}),(0,Vi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Vi.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("pending"===e.status?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-100":"approved"===e.status?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100":"rejected"===e.status?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100":"bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-100"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),e.reviewedByName&&(0,Vi.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["by ",e.reviewedByName]}),e.reviewNotes&&(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 max-w-xs",children:e.reviewNotes})]}),(0,Vi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[(0,Vi.jsx)("div",{children:new Date(e.createdAt).toLocaleDateString()}),(0,Vi.jsx)("div",{className:"text-xs",children:new Date(e.createdAt).toLocaleTimeString()})]}),(0,Vi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:"pending"===e.status?(0,Vi.jsxs)("div",{className:"flex space-x-2",children:[(0,Vi.jsxs)("button",{onClick:()=>(e=>{l(e),g("approve"),d(""),h(!0)})(e),className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:from-emerald-600 hover:to-emerald-700 shadow-sm hover:shadow-md transition-all duration-200 font-semibold text-xs","aria-label":"Approve request from ".concat(e.userName),children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Approve"]}),(0,Vi.jsxs)("button",{onClick:()=>(e=>{l(e),g("reject"),d(""),h(!0)})(e),className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-rose-500 to-rose-600 text-white rounded-lg hover:from-rose-600 hover:to-rose-700 shadow-sm hover:shadow-md transition-all duration-200 font-semibold text-xs","aria-label":"Reject request from ".concat(e.userName),children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Reject"]})]}):(0,Vi.jsxs)("button",{onClick:()=>(e=>{p({isOpen:!0,request:e})})(e),className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 shadow-sm hover:shadow-md transition-all duration-200 font-semibold text-xs","aria-label":"Delete request from ".concat(e.userName),children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})})]},e.id))})]})})}),u&&i&&m&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-lg w-full",children:[(0,Vi.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["approve"===m?"Approve":"Reject"," Request"]})}),(0,Vi.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,Vi.jsx)("strong",{children:"User:"})," ",i.userName," (",i.userEmail,")"]}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:(0,Vi.jsx)("strong",{children:"Requested Regions:"})}),(0,Vi.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:i.requestedRegions.map(e=>(0,Vi.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100 rounded text-xs",children:e},e))}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[(0,Vi.jsx)("strong",{children:"Reason:"})," ",i.reason]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{htmlFor:"reviewNotes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Review Notes (Optional)"}),(0,Vi.jsx)("textarea",{id:"reviewNotes",value:c,onChange:e=>d(e.target.value),placeholder:"Add notes about your decision...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 dark:text-white resize-none",rows:3,"aria-label":"Review notes"})]})]}),(0,Vi.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3",children:[(0,Vi.jsx)("button",{onClick:()=>{h(!1),l(null),g(null),d("")},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,Vi.jsxs)("button",{onClick:async()=>{if(e&&i&&m)try{if("approve"===m){const t=await(async(e,t,r)=>{try{const n=(await QC.patch("/region-requests/".concat(e,"/approve"),{review_notes:r})).data;if(!n.success)throw new Error(n.message||"Failed to approve region request");const a=(await ZC()).find(t=>t.id===e);return a&&Qi(t,"REGION_ASSIGNED","Approved region request for ".concat(a.userName),{severity:"info",details:{requestId:e,requestedRegions:a.requestedRegions,requestedBy:a.userName,reviewNotes:r},success:!0}),a||null}catch(s){var n,a;throw console.error("Error approving region request:",s),new Error((null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)||s.message||"Failed to approve region request")}})(i.id,e,c);t&&S("success","Request Approved","Access to ".concat(i.requestedRegions.join(", ")," has been approved for ").concat(i.userName,"."))}else{const t=await(async(e,t,r)=>{try{const n=(await QC.patch("/region-requests/".concat(e,"/reject"),{review_notes:r})).data;if(!n.success)throw new Error(n.message||"Failed to reject region request");const a=(await ZC()).find(t=>t.id===e);return a&&Qi(t,"REGION_REVOKED","Rejected region request for ".concat(a.userName),{severity:"warning",details:{requestId:e,requestedRegions:a.requestedRegions,requestedBy:a.userName,reviewNotes:r},success:!0}),a||null}catch(s){var n,a;throw console.error("Error rejecting region request:",s),new Error((null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)||s.message||"Failed to reject region request")}})(i.id,e,c);t&&S("success","Request Rejected","Access request for ".concat(i.userName," has been rejected."))}await N(),h(!1),l(null),g(null),d("")}catch(t){S("error","Action Failed","Failed to process the request. Please try again."),console.error("Error processing request:",t)}},className:"px-4 py-2 rounded-lg text-white transition-colors ".concat("approve"===m?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"),children:["Confirm ","approve"===m?"Approval":"Rejection"]})]})]})}),(0,Vi.jsx)(NC,{isOpen:f.isOpen,onClose:()=>p({isOpen:!1,request:null}),onConfirm:async()=>{if(e&&f.request){b(!0);try{await(async(e,t)=>{try{const r=(await ZC()).find(t=>t.id===e);if(!r)throw new Error("Region request not found");if("Admin"!==t.role&&r.userId!==t.id)throw new Error("Permission denied: Only administrators or the requester can delete this request");const n=(await QC.delete("/region-requests/".concat(e))).data;if(!n.success)throw new Error(n.message||"Failed to delete region request");return console.log("\u2705 Deleted region request from database:",e),Qi(t,"REGION_ACCESS_DENIED","Deleted region access request",{severity:"info",details:{requestId:e,requestedRegions:r.requestedRegions,requestedBy:r.userName},success:!0}),!0}catch(a){var r,n;throw console.error("Error deleting region request:",a),new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||a.message||"Failed to delete region request")}})(f.request.id,e),S("success","Request Deleted","Region request deleted successfully from database."),p({isOpen:!1,request:null}),await N(),console.log("\u2705 Table refreshed after deletion")}catch(t){const e=t.message||"Failed to delete the request";S("error","Delete Failed",e),console.error("\u274c Delete failed:",t)}finally{b(!1)}}},title:"Delete Region Request",message:"Are you sure you want to delete this region access request? This action cannot be undone.",itemName:f.request?"".concat(f.request.userName," - ").concat(f.request.requestedRegions.join(", ")):"",isLoading:x,type:"danger"}),(0,Vi.jsx)(ql,{isOpen:y.isOpen,onClose:()=>{v((0,o.A)((0,o.A)({},y),{},{isOpen:!1}))},type:y.type,title:y.title,message:y.message,autoClose:"success"===y.type,autoCloseDelay:3e3})]}):(0,Vi.jsx)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.732 16c-.77 1.333.192 3 1.732 3z"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Access Denied"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Only administrators can manage region access requests."})]})})},nE=()=>{const{user:e}=di(e=>e.auth),[t,r]=(0,n.useState)([]),[a,s]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)("assign"),[u,h]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),m="Admin"===(null===e||void 0===e?void 0:e.role);MC(3e4),(0,n.useEffect)(()=>{g()},[]);const g=async()=>{try{const e=(await LC()).filter(e=>"Admin"!==e.role&&"admin"!==e.role).map(e=>{var t;return{id:(null===(t=e.id)||void 0===t?void 0:t.toString())||e.user_id||"",name:e.full_name||e.name||e.username||"",email:e.email||"",role:e.role||"User",assignedRegions:e.assignedRegions||e.regions||[]}});r(e),console.log("\ud83d\udcca Bulk Assignment: Loaded real users from backend:",e.length)}catch(e){console.error("Failed to load users from backend:",e),f()}},f=()=>{try{const e=localStorage.getItem("users");if(e){const t=JSON.parse(e);r(t.filter(e=>"Admin"!==e.role)),console.log("\ud83d\udcca Bulk Assignment: Using mock users from localStorage:",t.length)}}catch(e){console.error("Failed to load users from localStorage:",e)}};return m?(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-emerald-50 dark:from-gray-800 dark:to-emerald-900/20 rounded-xl shadow-xl border-2 border-emerald-100 dark:border-emerald-900/30 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-emerald-800 dark:from-emerald-400 dark:to-emerald-600 bg-clip-text text-transparent",children:"Bulk Region Assignment"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-medium",children:"Assign or revoke regions for multiple users at once"})]})]})}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-white to-indigo-50 dark:from-gray-800 dark:to-indigo-900/20 rounded-xl shadow-lg border-2 border-indigo-100 dark:border-indigo-900/30 p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center mb-5",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center mr-3 shadow-md",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),(0,Vi.jsx)("h3",{className:"text-lg font-bold bg-gradient-to-r from-indigo-600 to-indigo-800 dark:from-indigo-400 dark:to-indigo-600 bg-clip-text text-transparent",children:"Select Action"})]}),(0,Vi.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Vi.jsxs)("label",{className:"flex items-center px-4 py-3 bg-gradient-to-r from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border-2 border-emerald-200 dark:border-emerald-700 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200",children:[(0,Vi.jsx)("input",{type:"radio",name:"action",value:"assign",checked:"assign"===c,onChange:e=>d(e.target.value),className:"mr-3 h-5 w-5 text-emerald-600"}),(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-300",children:"Assign (Add to existing)"})]})]}),(0,Vi.jsxs)("label",{className:"flex items-center px-4 py-3 bg-gradient-to-r from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-800/20 border-2 border-rose-200 dark:border-rose-700 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200",children:[(0,Vi.jsx)("input",{type:"radio",name:"action",value:"revoke",checked:"revoke"===c,onChange:e=>d(e.target.value),className:"mr-3 h-5 w-5 text-rose-600"}),(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 text-rose-600 dark:text-rose-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-rose-700 dark:text-rose-300",children:"Revoke (Remove from existing)"})]})]}),(0,Vi.jsxs)("label",{className:"flex items-center px-4 py-3 bg-gradient-to-r from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 border-2 border-amber-200 dark:border-amber-700 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200",children:[(0,Vi.jsx)("input",{type:"radio",name:"action",value:"replace",checked:"replace"===c,onChange:e=>d(e.target.value),className:"mr-3 h-5 w-5 text-amber-600"}),(0,Vi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,Vi.jsx)("span",{className:"text-sm font-bold text-amber-700 dark:text-amber-300",children:"Replace (Override all)"})]})]})]})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-white to-violet-50 dark:from-gray-800 dark:to-violet-900/20 rounded-xl shadow-lg border-2 border-violet-100 dark:border-violet-900/30 p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,Vi.jsxs)("h3",{className:"text-lg font-bold bg-gradient-to-r from-violet-600 to-violet-800 dark:from-violet-400 dark:to-violet-600 bg-clip-text text-transparent",children:["Select Users (",a.length,"/",t.length,")"]})]}),(0,Vi.jsxs)("button",{onClick:()=>{a.length===t.length?s([]):s(t.map(e=>e.id))},className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-lg hover:from-violet-600 hover:to-violet-700 shadow-sm hover:shadow-md transition-all duration-200 text-sm font-semibold",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),a.length===t.length?"Deselect All":"Select All"]})]}),(0,Vi.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===t.length?(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No users available"}):t.map(e=>(0,Vi.jsxs)("label",{className:"flex items-center p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[(0,Vi.jsx)("input",{type:"checkbox",checked:a.includes(e.id),onChange:()=>{return t=e.id,void s(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"mr-3"}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,Vi.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.email," \u2022 ",e.role]}),(0,Vi.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[e.assignedRegions.length," region(s) assigned"]})]})]},e.id))})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-white to-amber-50 dark:from-gray-800 dark:to-amber-900/20 rounded-xl shadow-lg border-2 border-amber-100 dark:border-amber-900/30 p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-md",children:(0,Vi.jsxs)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Vi.jsxs)("h3",{className:"text-lg font-bold bg-gradient-to-r from-amber-600 to-amber-800 dark:from-amber-400 dark:to-amber-600 bg-clip-text text-transparent",children:["Select Regions (",i.length,"/",Tl.length,")"]})]}),(0,Vi.jsxs)("button",{onClick:()=>{i.length===Tl.length?l([]):l([...Tl])},className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 shadow-sm hover:shadow-md transition-all duration-200 text-sm font-semibold",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),i.length===Tl.length?"Deselect All":"Select All"]})]}),(0,Vi.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto",children:Tl.map(e=>(0,Vi.jsxs)("label",{className:"flex items-center p-2 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[(0,Vi.jsx)("input",{type:"checkbox",checked:i.includes(e),onChange:()=>(e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),className:"mr-3"}),(0,Vi.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:e})]},e))})]})]}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-cyan-50 dark:from-gray-800 dark:to-cyan-900/20 rounded-xl shadow-xl border-2 border-cyan-100 dark:border-cyan-900/30 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-semibold",children:["assign"===c&&"Add selected regions to selected users","revoke"===c&&"Remove selected regions from selected users","replace"===c&&"Replace all regions for selected users with selected regions"]}),a.length>0&&i.length>0&&(0,Vi.jsxs)("p",{className:"inline-flex items-center gap-1 text-sm font-bold text-cyan-700 dark:text-cyan-300 mt-2 px-3 py-1 bg-gradient-to-r from-cyan-100 to-cyan-200 dark:from-cyan-900/40 dark:to-cyan-800/40 rounded-lg shadow-sm border border-cyan-300 dark:border-cyan-700",children:[(0,Vi.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"This will affect ",a.length," user(s) and ",i.length," region(s)"]})]})]}),(0,Vi.jsxs)("button",{onClick:async()=>{if(0===a.length)return void h({isOpen:!0,type:"warning",title:"No Users Selected",message:"Please select at least one user."});if(0===i.length)return void h({isOpen:!0,type:"warning",title:"No Regions Selected",message:"Please select at least one region."});try{const t=await async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"assign";try{const n=e.map(e=>parseInt(CC(e))),a=(await SC.post("/users/bulk-assign-regions",{user_ids:n,region_names:t,action:r})).data;if(!a.success)throw new Error(a.message||"Failed to bulk assign regions");return a}catch(s){var n,a;throw console.error("Error bulk assigning regions:",s),new Error((null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)||s.message||"Failed to bulk assign regions")}}(a,i,c);console.log("\u2705 Bulk region assignment completed:",t),h({isOpen:!0,type:"success",title:"Bulk Assignment Completed",message:t.message||"Successfully ".concat(c,"ed ").concat(i.length," region(s) for ").concat(a.length," user(s).")}),await g(),s([]),l([]),e&&Qi(e,"REGION_ASSIGNED","Bulk ".concat(c," regions"),{severity:"info",details:{action:c,userCount:a.length,regionCount:i.length,regions:i},success:!0})}catch(t){console.error("Failed to apply bulk assignment:",t),h({isOpen:!0,type:"error",title:"Assignment Failed",message:t.message||"Failed to apply bulk assignment. Please try again."})}},disabled:0===a.length||0===i.length,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 shadow-md hover:shadow-lg transition-all duration-200 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed font-bold",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply Bulk ","assign"===c?"Assignment":"revoke"===c?"Revocation":"Replacement"]})]})}),(0,Vi.jsx)(ql,{isOpen:u.isOpen,type:u.type,title:u.title,message:u.message,onClose:()=>h((0,o.A)((0,o.A)({},u),{},{isOpen:!1}))})]}):(0,Vi.jsx)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.732 16c-.77 1.333.192 3 1.732 3z"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Access Denied"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Only administrators can use bulk region assignment."})]})})},aE=["title","titleId"];function sE(e,t){let{title:r,titleId:a}=e,o=s(e,aE);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const oE=n.forwardRef(sE),iE=["title","titleId"];function lE(e,t){let{title:r,titleId:a}=e,o=s(e,iE);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const cE=n.forwardRef(lE),dE=["title","titleId"];function uE(e,t){let{title:r,titleId:a}=e,o=s(e,dE);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const hE=n.forwardRef(uE),mE=["title","titleId"];function gE(e,t){let{title:r,titleId:a}=e,o=s(e,mE);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const fE=n.forwardRef(gE),pE=["title","titleId"];function xE(e,t){let{title:r,titleId:a}=e,o=s(e,pE);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const bE=n.forwardRef(xE),yE=()=>{const e=di(e=>e.auth.user),[t,r]=(0,n.useState)([]),[a,s]=(0,n.useState)([]),[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[m,g]=(0,n.useState)(""),[f,p]=(0,n.useState)(""),[x,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[k,w]=(0,n.useState)("all"),[j,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[E,A]=(0,n.useState)(null),[_,T]=(0,n.useState)(""),[L,M]=(0,n.useState)(""),[O,D]=(0,n.useState)({isOpen:!1,grant:null}),[R,P]=(0,n.useState)(!1),[F,I]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),[B,z]=(0,n.useState)({total:0,active:0,expired:0,revoked:0}),[W,U]=(0,n.useState)([]),H=e&&"Admin"===e.role;(0,n.useEffect)(()=>{H&&V()},[x,y,k,H]);const V=async()=>{l(!0);try{try{const t=(await LC()).filter(t=>{var r;return(null===(r=t.id)||void 0===r?void 0:r.toString())!==(null===e||void 0===e?void 0:e.id)&&"Admin"!==t.role&&"admin"!==t.role}).map(e=>{var t;return{id:(null===(t=e.id)||void 0===t?void 0:t.toString())||e.user_id||"",username:e.username||"",name:e.full_name||e.name||e.username||"",email:e.email||"",role:e.role||"User",isActive:void 0===e.is_active||e.is_active}});s(t),console.log("\ud83d\udcca Temporary Access: Loaded real users from backend:",t.length)}catch(o){var t;if(console.error("Failed to load users from backend:",o),401===(null===(t=o.response)||void 0===t?void 0:t.status))return void G("error","Authentication Required","Please log in to access this page.");s([])}let i;const l={};x&&(l.userId=x),y&&(l.region=y),"active"===k&&(l.isActive=!0);try{i=x||y||"all"!==k?await al(l):await rl();const e=new Date;"expired"===k?i=i.filter(t=>!t.revokedAt&&t.expiresAt<e):"revoked"===k&&(i=i.filter(e=>e.revokedAt)),r(i)}catch(o){var n;if(console.error("Failed to load grants:",o),401===(null===(n=o.response)||void 0===n?void 0:n.status))return void G("error","Authentication Required","Please log in to access temporary access data.");r([])}try{const e=await sl();z({total:e.totalGrants,active:e.activeGrants,expired:e.expiredGrants,revoked:e.revokedGrants})}catch(o){var a;console.error("Failed to load stats:",o),401!==(null===(a=o.response)||void 0===a?void 0:a.status)&&z({total:0,active:0,expired:0,revoked:0})}try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;const t=await rl(),r=new Date,n=new Date;return n.setDate(n.getDate()+e),t.filter(e=>e.isActive&&!e.revokedAt&&e.expiresAt>r&&e.expiresAt<=n)}(7);U(e)}catch(o){console.error("Failed to load expiring grants:",o),U([])}}finally{l(!1)}},G=(e,t,r)=>{I({isOpen:!0,type:e,title:t,message:r})},q=e=>{const t=new Date;return e.revokedAt?(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:[(0,Vi.jsx)(Bl,{className:"h-4 w-4 mr-1"}),"Revoked"]}):e.expiresAt<t?(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:[(0,Vi.jsx)(oE,{className:"h-4 w-4 mr-1"}),"Expired"]}):e.isActive?(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:[(0,Vi.jsx)(Pl,{className:"h-4 w-4 mr-1"}),"Active"]}):(0,Vi.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"Inactive"})},$=e=>new Date(e).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return H?(0,Vi.jsxs)("div",{className:"space-y-6 p-6",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-amber-50 dark:from-gray-800 dark:to-amber-900/20 rounded-xl shadow-xl border-2 border-amber-100 dark:border-amber-900/30 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)(oE,{className:"h-7 w-7 text-white"})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-amber-800 dark:from-amber-400 dark:to-amber-600 bg-clip-text text-transparent",children:"Temporary Access Management"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-medium",children:"Grant and manage temporary region access for users"})]})]})}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-indigo-50 dark:from-gray-800 dark:to-indigo-900/20 rounded-xl shadow-lg border-2 border-indigo-100 dark:border-indigo-900/30 p-5 hover:shadow-xl transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400 mb-1",children:"Total Grants"}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:B.total})]}),(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)(cE,{className:"h-7 w-7 text-white"})})]})}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-emerald-50 dark:from-gray-800 dark:to-emerald-900/20 rounded-xl shadow-lg border-2 border-emerald-100 dark:border-emerald-900/30 p-5 hover:shadow-xl transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-400 mb-1",children:"Active"}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:B.active})]}),(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)(Pl,{className:"h-7 w-7 text-white"})})]})}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-lg border-2 border-gray-100 dark:border-gray-900/30 p-5 hover:shadow-xl transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Expired"}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-gray-600 dark:text-gray-400",children:B.expired})]}),(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-gray-500 to-gray-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)(oE,{className:"h-7 w-7 text-white"})})]})}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-rose-50 dark:from-gray-800 dark:to-rose-900/20 rounded-xl shadow-lg border-2 border-rose-100 dark:border-rose-900/30 p-5 hover:shadow-xl transition-all duration-200",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-semibold text-rose-600 dark:text-rose-400 mb-1",children:"Revoked"}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-rose-600 dark:text-rose-400",children:B.revoked})]}),(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-rose-500 to-rose-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)(Bl,{className:"h-7 w-7 text-white"})})]})})]}),W.length>0&&(0,Vi.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,Vi.jsxs)("div",{className:"flex items-start",children:[(0,Vi.jsx)(Ul,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mr-3 flex-shrink-0"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200",children:"Expiring Soon"}),(0,Vi.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:[W.length," grant",1!==W.length?"s":""," expiring within 7 days"]})]})]})}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,Vi.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Grant Temporary Access"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select User *"}),(0,Vi.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,Vi.jsx)("option",{value:"",children:"-- Select User --"}),a.map(e=>(0,Vi.jsxs)("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Region *"}),(0,Vi.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,Vi.jsx)("option",{value:"",children:"-- Select Region --"}),Tl.map(e=>(0,Vi.jsx)("option",{value:e,children:e},e))]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expiration Date & Time *"}),(0,Vi.jsx)("input",{type:"datetime-local",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason *"}),(0,Vi.jsx)("textarea",{value:f,onChange:e=>p(e.target.value),rows:3,placeholder:"Enter reason for temporary access...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white"})]})]}),(0,Vi.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Vi.jsx)("button",{onClick:async()=>{if(!c||!u||!m||!f)return void G("error","Validation Error","Please fill in all required fields.");const t=a.find(e=>e.id===c);if(!t)return void G("error","Error","Selected user not found.");if(!e)return void G("error","Error","User not authenticated.");const r=new Date(m);if(r<=new Date)G("error","Validation Error","Expiration date must be in the future.");else{l(!0);try{await(async(e,t,r,n,a)=>{try{const s=e.id.replace("OCGID","").replace(/^0+/,"")||"0",o=(await tl.post("/temporary-access",{user_id:parseInt(s),region_name:t,expires_at:r.toISOString(),reason:n})).data;if(!o.success)throw new Error(o.message||"Failed to grant temporary access");const i=o.grant,l={id:i.id.toString(),userId:e.id,userName:e.name,userEmail:e.email,region:t,grantedBy:a.id,grantedByName:a.name,grantedAt:new Date(i.granted_at),expiresAt:new Date(i.expires_at),reason:i.reason,isActive:"active"===i.status};return Qi(a,"REGION_ASSIGNED","Granted temporary access to ".concat(t," for ").concat(e.name),{severity:"info",region:t,details:{targetUserId:e.id,targetUserName:e.name,expiresAt:r.toISOString(),reason:n},success:!0}),l}catch(c){var s,o,i,l;console.error("Error granting temporary access from backend:",c);const e=(null===(s=c.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.error)||(null===(i=c.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)||c.message||"Failed to grant temporary access";throw new Error(e)}})(t,u,r,f,e),G("success","Access Granted","Temporary access to ".concat(u," granted to ").concat(t.name,".")),d(""),h(""),g(""),p(""),await V()}catch(n){G("error","Error","Failed to grant temporary access.")}finally{l(!1)}}},disabled:i,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Granting...":"Grant Access"})})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,Vi.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Filter Grants"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"User"}),(0,Vi.jsxs)("select",{value:x,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,Vi.jsx)("option",{value:"",children:"All Users"}),a.map(e=>(0,Vi.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Region"}),(0,Vi.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,Vi.jsx)("option",{value:"",children:"All Regions"}),Tl.map(e=>(0,Vi.jsx)("option",{value:e,children:e},e))]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,Vi.jsxs)("select",{value:k,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,Vi.jsx)("option",{value:"all",children:"All Status"}),(0,Vi.jsx)("option",{value:"active",children:"Active"}),(0,Vi.jsx)("option",{value:"expired",children:"Expired"}),(0,Vi.jsx)("option",{value:"revoked",children:"Revoked"})]})]})]})]}),(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,Vi.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Temporary Access Grants (",t.length,")"]})}),(0,Vi.jsx)("div",{className:"overflow-x-auto",children:(0,Vi.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,Vi.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,Vi.jsxs)("tr",{children:[(0,Vi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),(0,Vi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Region"}),(0,Vi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Granted By / Date"}),(0,Vi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Expires At"}),(0,Vi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,Vi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,Vi.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===t.length?(0,Vi.jsx)("tr",{children:(0,Vi.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:"No temporary access grants found"})}):t.map(e=>{var t;return(0,Vi.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,Vi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Vi.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.userName}),(0,Vi.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.userEmail})]}),(0,Vi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Vi.jsxs)("div",{className:"flex items-center text-sm text-gray-900 dark:text-white",children:[(0,Vi.jsx)(hE,{className:"h-4 w-4 mr-2 text-gray-400"}),e.region]})}),(0,Vi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.grantedByName}),(0,Vi.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:$(e.grantedAt)})]}),(0,Vi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Vi.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:$(e.expiresAt)}),e.timeRemaining&&!e.timeRemaining.expired?(0,Vi.jsx)("div",{className:"mt-1",children:(0,Vi.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(e.timeRemaining.days<=1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":e.timeRemaining.days<=7?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"),children:[(0,Vi.jsx)(oE,{className:"h-3 w-3 mr-1"}),e.timeRemaining.display," remaining"]})}):null!==(t=e.timeRemaining)&&void 0!==t&&t.expired&&!e.revokedAt?(0,Vi.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 mt-1",children:"Time expired"}):null]}),(0,Vi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:q(e)}),(0,Vi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.isActive&&!e.revokedAt&&e.expiresAt>new Date&&(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("button",{onClick:()=>{A(e),T(""),N(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Extend",children:(0,Vi.jsx)(fE,{className:"h-5 w-5"})}),(0,Vi.jsx)("button",{onClick:()=>{A(e),M(""),C(!0)},className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Revoke",children:(0,Vi.jsx)(Bl,{className:"h-5 w-5"})})]}),(0,Vi.jsx)("button",{onClick:()=>(e=>{D({isOpen:!0,grant:e})})(e),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:(0,Vi.jsx)(bE,{className:"h-5 w-5"})})]})]},e.id)})})]})})]}),j&&E&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,Vi.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Extend Temporary Access"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Extending access for ",(0,Vi.jsx)("span",{className:"font-semibold",children:E.userName})," to"," ",(0,Vi.jsx)("span",{className:"font-semibold",children:E.region})]}),(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Current Expiration: ",$(E.expiresAt)]}),(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Expiration Date & Time *"}),(0,Vi.jsx)("input",{type:"datetime-local",value:_,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,Vi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Vi.jsx)("button",{onClick:()=>{N(!1),A(null),T("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(!E||!_)return void G("error","Validation Error","Please select a new expiration date.");if(!e)return void G("error","Error","User not authenticated.");const t=new Date(_);if(t<=new Date)G("error","Validation Error","New expiration date must be in the future.");else{l(!0);try{await(async(e,t,r)=>{const n=await rl(),a=n.find(t=>t.id===e);if(!a||!a.isActive||a.revokedAt)return null;const s=a.expiresAt;return a.expiresAt=t,ol(n),Qi(r,"REGION_ASSIGNED","Extended temporary access to ".concat(a.region," for ").concat(a.userName),{severity:"info",region:a.region,details:{targetUserId:a.userId,targetUserName:a.userName,grantId:e,oldExpiration:s.toISOString(),newExpiration:t.toISOString()},success:!0}),a})(E.id,t,e),G("success","Access Extended","Temporary access extended to ".concat(t.toLocaleDateString(),".")),N(!1),A(null),T(""),await V()}catch(r){G("error","Error","Failed to extend temporary access.")}finally{l(!1)}}},disabled:i||!_,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Extending...":"Extend"})]})]})}),S&&E&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,Vi.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Revoke Temporary Access"}),(0,Vi.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Revoking access for ",(0,Vi.jsx)("span",{className:"font-semibold",children:E.userName})," to"," ",(0,Vi.jsx)("span",{className:"font-semibold",children:E.region})]}),(0,Vi.jsxs)("div",{className:"mb-4",children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason for Revocation (Optional)"}),(0,Vi.jsx)("textarea",{value:L,onChange:e=>M(e.target.value),rows:3,placeholder:"Enter reason for revocation...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white"})]}),(0,Vi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Vi.jsx)("button",{onClick:()=>{C(!1),A(null),M("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(E)if(e){l(!0);try{await(async(e,t,r)=>{try{const n=(await tl.request({method:"DELETE",url:"/temporary-access/".concat(e),data:{reason:r}})).data;if(!n.success)throw new Error(n.message||"Failed to revoke temporary access");const a=(await rl()).find(t=>t.id===e);return a?(Qi(t,"REGION_REVOKED","Revoked temporary access to ".concat(a.region," for ").concat(a.userName),{severity:"warning",region:a.region,details:{targetUserId:a.userId,targetUserName:a.userName,grantId:e,reason:r},success:!0}),a):null}catch(n){throw console.error("Error revoking temporary access from backend:",n),n}})(E.id,e,L||void 0),G("success","Access Revoked","Temporary access to ".concat(E.region," revoked for ").concat(E.userName,".")),C(!1),A(null),M(""),await V()}catch(t){G("error","Error","Failed to revoke temporary access.")}finally{l(!1)}}else G("error","Error","User not authenticated.")},disabled:i,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Revoking...":"Revoke"})]})]})}),(0,Vi.jsx)(NC,{isOpen:O.isOpen,onClose:()=>D({isOpen:!1,grant:null}),onConfirm:async()=>{if(O.grant&&e){P(!0);try{await(async(e,t)=>{try{if("Admin"!==t.role)throw new Error("Only administrators can delete temporary access grants");const r=(await rl()).find(t=>t.id===e);if(!r)throw new Error("Temporary access grant not found");const n=(await tl.delete("/temporary-access/".concat(e))).data;if(!n.success)throw new Error(n.message||"Failed to delete temporary access grant");return console.log("\u2705 Deleted temporary access grant from database:",e),Qi(t,"REGION_REVOKED","Deleted temporary access grant for ".concat(r.userName),{severity:"warning",region:r.region,details:{targetUserId:r.userId,targetUserName:r.userName,grantId:e},success:!0}),!0}catch(a){var r,n;throw console.error("Error deleting temporary access grant:",a),new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||a.message||"Failed to delete temporary access grant")}})(O.grant.id,e),G("success","Grant Deleted","Temporary access grant deleted successfully from database."),D({isOpen:!1,grant:null}),await V(),console.log("\u2705 Table refreshed after deletion")}catch(t){const e=t.message||"Failed to delete temporary access grant";G("error","Delete Failed",e),console.error("\u274c Delete failed:",t)}finally{P(!1)}}else G("error","Error","User not authenticated.")},title:"Delete Temporary Access Grant",message:"Are you sure you want to delete this temporary access grant? This action cannot be undone.",itemName:O.grant?"".concat(O.grant.userName," - ").concat(O.grant.region):"",isLoading:R,type:"danger"}),(0,Vi.jsx)(ql,{isOpen:F.isOpen,onClose:()=>I((0,o.A)((0,o.A)({},F),{},{isOpen:!1})),type:F.type,title:F.title,message:F.message,autoClose:!0,autoCloseDelay:3e3})]}):(0,Vi.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.732 16c-.77 1.333.192 3 1.732 3z"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Access Denied"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Only administrators can access this page."})]})})},vE=()=>{var e;const{user:t}=di(e=>e.auth),[a,s]=(0,n.useState)("comprehensive"),[i,l]=(0,n.useState)("csv"),[c,d]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),u="Admin"===(null===t||void 0===t?void 0:t.role),h=[{type:"region_usage",name:"Region Usage Report",description:"Statistics on region access patterns and usage"},{type:"user_activity",name:"User Activity Report",description:"User-specific region access activity and patterns"},{type:"access_denials",name:"Access Denials Report",description:"Regions with denied access attempts"},{type:"audit_logs",name:"Audit Logs Report",description:"Complete audit trail of all system events"},{type:"temporary_access",name:"Temporary Access Report",description:"Time-limited region access grants"},{type:"region_requests",name:"Region Requests Report",description:"User requests for region access"},{type:"zone_assignments",name:"Zone Assignments Report",description:"User assignments to regional zones"},{type:"comprehensive",name:"Comprehensive Report",description:"All data combined into one comprehensive report"}],m=()=>{try{(async(e,t)=>{try{{const n=(await r.e(821).then(r.bind(r,821))).default,a="http://localhost:5005/api",s=n.create({baseURL:a,timeout:3e4,headers:{"Content-Type":"application/json"}}),o=sessionStorage.getItem("opti_connect_token");o&&(s.defaults.headers.common.Authorization="Bearer ".concat(o));const i=e.type.replace(/_/g,"-"),l=await s.get("/reports/".concat(i),{params:{format:e.format},responseType:"json"===e.format?"json":"blob"});if("json"===e.format){const r=JSON.stringify(l.data,null,2),n=new Blob([r],{type:"application/json"}),a=URL.createObjectURL(n),s=document.createElement("a");return s.href=a,s.download=t||"".concat(e.type,"_report_").concat((new Date).toISOString().split("T")[0],".json"),s.click(),void URL.revokeObjectURL(a)}const c=l.data,d=URL.createObjectURL(c),u=document.createElement("a");u.href=d;const h=l.headers["content-disposition"];let m=t;if(!m&&h){const e=h.match(/filename="?([^"]+)"?/);e&&(m=e[1])}if(!m){const t="xlsx"===e.format?"xlsx":"csv";m="".concat(e.type,"_report_").concat((new Date).toISOString().split("T")[0],".").concat(t)}u.download=m,u.click(),URL.revokeObjectURL(d)}}catch(s){var n,a;throw console.error("Download report error:",s),new Error((null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)||s.message||"Failed to download report")}})({type:a,format:i}),d({isOpen:!0,type:"success",title:"Report Exported",message:"".concat(a," report has been downloaded successfully.")})}catch(e){console.error("Failed to export report:",e),d({isOpen:!0,type:"error",title:"Export Failed",message:"Failed to generate report. Please try again."})}};return u?(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-cyan-50 dark:from-gray-800 dark:to-cyan-900/20 rounded-xl shadow-xl border-2 border-cyan-100 dark:border-cyan-900/30 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-600 to-cyan-800 dark:from-cyan-400 dark:to-cyan-600 bg-clip-text text-transparent",children:"Export Region Reports"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-medium",children:"Generate and download comprehensive reports on region management and usage"})]})]})}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-white to-indigo-50 dark:from-gray-800 dark:to-indigo-900/20 rounded-xl shadow-lg border-2 border-indigo-100 dark:border-indigo-900/30 p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center mb-5",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center mr-3 shadow-md",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Vi.jsx)("h3",{className:"text-lg font-bold bg-gradient-to-r from-indigo-600 to-indigo-800 dark:from-indigo-400 dark:to-indigo-600 bg-clip-text text-transparent",children:"Select Report Type"})]}),(0,Vi.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,Vi.jsxs)("label",{className:"flex items-start p-4 border-2 rounded-lg cursor-pointer transition-colors ".concat(a===e.type?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[(0,Vi.jsx)("input",{type:"radio",name:"reportType",value:e.type,checked:a===e.type,onChange:e=>s(e.target.value),className:"mt-1 mr-3 text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-400 dark:bg-gray-700 dark:border-gray-600"}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.description})]})]},e.type))})]}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-white to-emerald-50 dark:from-gray-800 dark:to-emerald-900/20 rounded-xl shadow-lg border-2 border-emerald-100 dark:border-emerald-900/30 p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center mb-5",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center mr-3 shadow-md",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Vi.jsx)("h3",{className:"text-lg font-bold bg-gradient-to-r from-emerald-600 to-emerald-800 dark:from-emerald-400 dark:to-emerald-600 bg-clip-text text-transparent",children:"Select Format"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Vi.jsxs)("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors ".concat("csv"===i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"),children:[(0,Vi.jsx)("input",{type:"radio",name:"format",value:"csv",checked:"csv"===i,onChange:()=>l("csv"),className:"mr-3 text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-400 dark:bg-gray-700 dark:border-gray-600"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"CSV"}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Comma-separated values"})]})]}),(0,Vi.jsxs)("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors ".concat("xlsx"===i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"),children:[(0,Vi.jsx)("input",{type:"radio",name:"format",value:"xlsx",checked:"xlsx"===i,onChange:()=>l("xlsx"),className:"mr-3 text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-400 dark:bg-gray-700 dark:border-gray-600"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"XLSX"}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Excel format (recommended)"})]})]}),(0,Vi.jsxs)("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors ".concat("json"===i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"),children:[(0,Vi.jsx)("input",{type:"radio",name:"format",value:"json",checked:"json"===i,onChange:()=>l("json"),className:"mr-3 text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-400 dark:bg-gray-700 dark:border-gray-600"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"JSON"}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Structured data format"})]})]})]})]}),(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-xl shadow-xl border-2 border-blue-100 dark:border-blue-900/30 p-6",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-md",children:(0,Vi.jsx)("svg",{className:"h-7 w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-semibold",children:["Ready to export: ",(0,Vi.jsx)("strong",{className:"text-blue-700 dark:text-blue-300",children:null===(e=h.find(e=>e.type===a))||void 0===e?void 0:e.name})]}),(0,Vi.jsxs)("p",{className:"inline-flex items-center gap-1 text-xs font-bold text-blue-700 dark:text-blue-300 mt-1 px-2 py-0.5 bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900/40 dark:to-blue-800/40 rounded-md shadow-sm border border-blue-300 dark:border-blue-700",children:["Format: ",i.toUpperCase()]})]})]}),(0,Vi.jsxs)("button",{onClick:m,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 shadow-md hover:shadow-lg transition-all duration-200 font-bold",children:[(0,Vi.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Report"]})]})}),(0,Vi.jsxs)("div",{className:"bg-gradient-to-br from-white to-violet-50 dark:from-gray-800 dark:to-violet-900/20 rounded-xl shadow-lg border-2 border-violet-100 dark:border-violet-900/30 p-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center mb-5",children:[(0,Vi.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center mr-3 shadow-md",children:(0,Vi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,Vi.jsx)("h3",{className:"text-lg font-bold bg-gradient-to-r from-violet-600 to-violet-800 dark:from-violet-400 dark:to-violet-600 bg-clip-text text-transparent",children:"Quick Export"})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,Vi.jsxs)("button",{onClick:()=>{s("region_usage"),l("csv"),setTimeout(m,100)},className:"inline-flex items-center justify-center px-4 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:from-emerald-600 hover:to-emerald-700 shadow-sm hover:shadow-md transition-all duration-200 text-sm font-semibold",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Region Usage (CSV)"]}),(0,Vi.jsxs)("button",{onClick:()=>{s("user_activity"),l("csv"),setTimeout(m,100)},className:"inline-flex items-center justify-center px-4 py-3 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-lg hover:from-indigo-600 hover:to-indigo-700 shadow-sm hover:shadow-md transition-all duration-200 text-sm font-semibold",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"User Activity (CSV)"]}),(0,Vi.jsxs)("button",{onClick:()=>{s("audit_logs"),l("csv"),setTimeout(m,100)},className:"inline-flex items-center justify-center px-4 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 shadow-sm hover:shadow-md transition-all duration-200 text-sm font-semibold",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Audit Logs (CSV)"]}),(0,Vi.jsxs)("button",{onClick:()=>{s("comprehensive"),l("json"),setTimeout(m,100)},className:"inline-flex items-center justify-center px-4 py-3 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white rounded-lg hover:from-cyan-600 hover:to-cyan-700 shadow-sm hover:shadow-md transition-all duration-200 text-sm font-semibold",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Full Report (JSON)"]})]})]}),(0,Vi.jsx)(ql,{isOpen:c.isOpen,type:c.type,title:c.title,message:c.message,onClose:()=>d((0,o.A)((0,o.A)({},c),{},{isOpen:!1}))})]}):(0,Vi.jsx)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Access Denied"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Only administrators can export reports."})]})})},kE=()=>{var e;const{user:t}=di(e=>e.auth),[r,a]=(0,n.useState)("audit-logs");if(!("Admin"===(null===t||void 0===t?void 0:t.role)))return(0,Vi.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L3.732 16c-.77 1.333.192 3 1.732 3z"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Access Denied"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You must be an administrator to access this page."})]})});const s=[{id:"audit-logs",name:"Audit Logs",color:"blue",iconColor:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-500",icon:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),description:"View system activity and user actions"},{id:"region-requests",name:"Region Requests",color:"violet",iconColor:"text-violet-600 dark:text-violet-400",bgColor:"bg-violet-50 dark:bg-violet-900/20",borderColor:"border-violet-500",icon:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),description:"Approve or reject user access requests"},{id:"bulk-assignment",name:"Bulk Assignment",color:"emerald",iconColor:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",borderColor:"border-emerald-500",icon:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),description:"Assign regions to multiple users at once"},{id:"temporary-access",name:"Temporary Access",color:"amber",iconColor:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-900/20",borderColor:"border-amber-500",icon:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),description:"Grant time-limited region access"},{id:"reports",name:"Export Reports",color:"cyan",iconColor:"text-cyan-600 dark:text-cyan-400",bgColor:"bg-cyan-50 dark:bg-cyan-900/20",borderColor:"border-cyan-500",icon:(0,Vi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),description:"Download analytics and reports"}];return(0,Vi.jsx)(bl,{children:(0,Vi.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Vi.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"h-14 w-14 rounded-lg bg-red-600 dark:bg-red-500 flex items-center justify-center shadow-lg",children:(0,Vi.jsxs)("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Administration"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"System administration and region management"})]})]}),(0,Vi.jsx)("div",{className:"flex items-center space-x-2",children:(0,Vi.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-semibold bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 border border-red-300 dark:border-red-700",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Administrator"]})})]}),(0,Vi.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-6",children:(0,Vi.jsx)("nav",{className:"-mb-px flex space-x-1 overflow-x-auto pt-4",children:s.map(e=>(0,Vi.jsxs)("button",{onClick:()=>a(e.id),className:"\n                      inline-flex items-center gap-2 px-4 py-2.5 border-b-2 font-semibold text-sm whitespace-nowrap transition-colors duration-200\n                      ".concat(r===e.id?"border-red-500 ".concat(e.iconColor):"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-600","\n                    "),children:[(0,Vi.jsx)("span",{className:r===e.id?e.iconColor:"text-gray-500 dark:text-gray-400",children:e.icon}),(0,Vi.jsx)("span",{children:e.name})]},e.id))})})]})}),(0,Vi.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Vi.jsx)("div",{className:"mb-6",children:(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:null===(e=s.find(e=>e.id===r))||void 0===e?void 0:e.description})}),(0,Vi.jsxs)("div",{className:"bg-transparent",children:["audit-logs"===r&&(0,Vi.jsx)(JC,{}),"region-requests"===r&&(0,Vi.jsx)(rE,{}),"bulk-assignment"===r&&(0,Vi.jsx)(nE,{}),"temporary-access"===r&&(0,Vi.jsx)(yE,{}),"reports"===r&&(0,Vi.jsx)(vE,{})]})]})]})})},wE=e=>{let{card:t}=e;const r=t.trend?(e=>{switch(e){case"up":return{icon:"\u2191",color:"text-green-600"};case"down":return{icon:"\u2193",color:"text-red-600"};case"stable":return{icon:"\u2192",color:"text-gray-600"}}})(t.trend.direction):null;return(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-200 overflow-hidden",children:[(0,Vi.jsxs)("div",{className:"".concat(t.bgColor," p-4 flex items-center justify-between"),children:[(0,Vi.jsx)("div",{className:t.color,children:t.icon}),t.trend&&(0,Vi.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Vi.jsx)("span",{className:"text-sm font-medium ".concat(null===r||void 0===r?void 0:r.color),children:null===r||void 0===r?void 0:r.icon}),(0,Vi.jsxs)("span",{className:"text-xs font-semibold ".concat(null===r||void 0===r?void 0:r.color),children:[t.trend.value,"%"]})]})]}),(0,Vi.jsxs)("div",{className:"p-4",children:[(0,Vi.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t.title}),(0,Vi.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:t.value}),(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.subtitle})]}),(0,Vi.jsx)("div",{className:"".concat(t.bgColor," h-1"),children:(0,Vi.jsx)("div",{className:"h-full ".concat(t.color.replace("text-","bg-")),style:{width:"".concat(t.trend?60+t.trend.value:50,"%")}})})]})},jE=e=>{let{metrics:t,loading:r=!1}=e;if(r||!t)return(0,Vi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-pulse",children:[(0,Vi.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-3"}),(0,Vi.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),(0,Vi.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full"})]},e))});const n=t.activeUsers+t.inactiveUsers,a=Object.keys(t.toolUsage).length,s=Object.keys(t.regionalActivity).length,o=Object.values(t.toolUsage).reduce((e,t)=>e+t,0),i=(((e,t)=>{0===t||Math.round(e/t*100)})(t.activeUsers,n),((e,t)=>0===t?0:Math.round(e/t*100))(a,5)),l=[{title:"Users",value:n,subtitle:"".concat(t.activeUsers," active, ").concat(t.inactiveUsers," inactive"),icon:(0,Vi.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),trend:{direction:"up",value:12},color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20"},{title:"Tool Usage",value:"".concat(i,"%"),subtitle:"".concat(o," total uses across ").concat(a," tools"),icon:(0,Vi.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),trend:{direction:"up",value:5},color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{title:"Regions",value:s,subtitle:"".concat(Math.round(s/28*100),"% coverage"),icon:(0,Vi.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),trend:{direction:"stable",value:0},color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20"},{title:"System Health",value:"healthy"===t.systemHealth.apiStatus?"Good":"degraded"===t.systemHealth.apiStatus?"Fair":"Poor",subtitle:"".concat(t.systemHealth.latency,"ms latency, ").concat(t.systemHealth.cpu,"% CPU"),icon:(0,Vi.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),trend:t.systemHealth.latency<100?{direction:"up",value:5}:{direction:"down",value:3},color:"healthy"===t.systemHealth.apiStatus?"text-green-600":"degraded"===t.systemHealth.apiStatus?"text-yellow-600":"text-red-600",bgColor:"healthy"===t.systemHealth.apiStatus?"bg-green-50 dark:bg-green-900/20":"degraded"===t.systemHealth.apiStatus?"bg-yellow-50 dark:bg-yellow-900/20":"bg-red-50 dark:bg-red-900/20"}];return(0,Vi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map((e,t)=>(0,Vi.jsx)(wE,{card:e},t))})},NE=e=>{let{user:t}=e;return(0,Vi.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,Vi.jsx)("div",{className:"w-10 h-10 rounded-full ".concat((e=>{const t=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-yellow-500","bg-red-500","bg-indigo-500","bg-orange-500"];return t[e.charCodeAt(0)%t.length]})(t.name)," flex items-center justify-center text-white font-semibold text-sm"),children:(r=t.name,r.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))}),(0,Vi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.name}),(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.email||t.role})]}),(0,Vi.jsx)("div",{className:"flex items-center",children:(0,Vi.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"})})]});var r},SE=e=>{let{statistics:t,loading:r=!1}=e;const[a,s]=(0,n.useState)("");if(r||!t)return(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-pulse",children:[(0,Vi.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-4"}),(0,Vi.jsx)("div",{className:"space-y-3",children:[1,2,3,4].map(e=>(0,Vi.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"},e))})]});const o=t.loggedIn.filter(e=>{var t;return e.name.toLowerCase().includes(a.toLowerCase())||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))});return(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"User Statistics"]})}),(0,Vi.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Users"}),(0,Vi.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.total})]}),(0,Vi.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active"}),(0,Vi.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.active})]}),(0,Vi.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive"}),(0,Vi.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:t.inactive})]}),(0,Vi.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New This Week"}),(0,Vi.jsx)("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.newThisWeek})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,Vi.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Currently Online (",t.loggedIn.length,")"]})}),t.loggedIn.length>5&&(0,Vi.jsx)("div",{className:"mb-3",children:(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("input",{type:"text",placeholder:"Search users...",value:a,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 pl-10 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Vi.jsx)("svg",{className:"w-4 h-4 absolute left-3 top-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,Vi.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===o.length?(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:a?"No users found":"No users currently online"}):o.map(e=>(0,Vi.jsx)(NE,{user:e},e.id))})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Activity Trend (Last 7 Days)"}),(0,Vi.jsx)("div",{className:"flex items-end justify-between space-x-2 h-24",children:t.trend.daily.map((e,r)=>{const n=e/Math.max(...t.trend.daily)*100,a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][((new Date).getDay()-6+r)%7];return(0,Vi.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,Vi.jsx)("div",{className:"w-full bg-blue-500 rounded-t hover:bg-blue-600 transition-colors cursor-pointer relative group",style:{height:"".concat(n,"%")},title:"".concat(e," active users"),children:(0,Vi.jsxs)("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:[e," users"]})}),(0,Vi.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a})]},r)})})]})]})]})};$g.register(op,dp,bf,cf,uf,Uf,np,zf,Pf);const CE=e=>{var t;let{toolStats:r,loading:a=!1}=e;const[s,o]=(0,n.useState)("bar"),[i,l]=(0,n.useState)("week");if(a)return(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:(0,Vi.jsxs)("div",{className:"animate-pulse",children:[(0,Vi.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),(0,Vi.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})});if(0===r.length)return(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Tool Usage Analytics"]})}),(0,Vi.jsxs)("div",{className:"p-12 text-center",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),(0,Vi.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-white",children:"No Tool Usage Data Yet"}),(0,Vi.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 max-w-md mx-auto",children:"Start using GIS tools on the Map page to see analytics here. Try Distance Measurement, Polygon Drawing, or any other tool."}),(0,Vi.jsx)("div",{className:"mt-6",children:(0,Vi.jsxs)("a",{href:"/map",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Go to Map"]})})]})]});const c=[...r].sort((e,t)=>t.totalUsage-e.totalUsage),d={labels:c.map(e=>e.displayName),datasets:[{label:"Usage Count",data:c.map(e=>e.totalUsage),backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2,fill:"line"===s,tension:.4}]},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleColor:"#fff",bodyColor:"#fff",callbacks:{afterLabel:e=>{var t;const r=c[e.dataIndex];return r?["Avg Duration: ".concat((null===(t=r.averageDuration)||void 0===t?void 0:t.toFixed(1))||0," min"),"Users: ".concat(r.userCount||0),"Trend: ".concat("up"===r.trend?"\u2191":"down"===r.trend?"\u2193":"\u2192"," ").concat(r.trendPercentage||0,"%")]:[]}}}},scales:{y:{beginAtZero:!0,ticks:{color:"#6B7280",stepSize:1,precision:0},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1}},x:{ticks:{color:"#6B7280",maxRotation:45,minRotation:45},grid:{display:!1,drawBorder:!1}}}};return(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Tool Usage Analytics"]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsxs)("div",{className:"flex items-center bg-white/20 backdrop-blur-sm rounded-lg p-1",children:[(0,Vi.jsx)("button",{onClick:()=>o("bar"),className:"px-3 py-1 text-xs font-medium rounded transition-colors ".concat("bar"===s?"bg-white text-blue-600":"text-white hover:bg-white/10"),children:"Bar"}),(0,Vi.jsx)("button",{onClick:()=>o("line"),className:"px-3 py-1 text-xs font-medium rounded transition-colors ".concat("line"===s?"bg-white text-blue-600":"text-white hover:bg-white/10"),children:"Line"})]}),(0,Vi.jsxs)("select",{value:i,onChange:e=>l(e.target.value),className:"px-3 py-1 text-xs font-medium bg-white/20 backdrop-blur-sm text-white rounded-lg border-none focus:ring-2 focus:ring-white/50",children:[(0,Vi.jsx)("option",{value:"day",className:"text-gray-900",children:"Today"}),(0,Vi.jsx)("option",{value:"week",className:"text-gray-900",children:"This Week"}),(0,Vi.jsx)("option",{value:"month",className:"text-gray-900",children:"This Month"})]})]})]})}),(0,Vi.jsx)("div",{className:"p-6",children:(0,Vi.jsx)("div",{className:"h-80 min-h-[320px] w-full",children:"bar"===s?(0,Vi.jsx)($p,{data:d,options:u},"bar-".concat(r.length)):(0,Vi.jsx)(qp,{data:d,options:u},"line-".concat(r.length))})}),(0,Vi.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Uses"}),(0,Vi.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:c.reduce((e,t)=>e+(t.totalUsage||0),0)})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Most Used"}),(0,Vi.jsx)("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400 truncate",children:(null===(t=c[0])||void 0===t?void 0:t.displayName)||"N/A"})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Duration"}),(0,Vi.jsxs)("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:[c.length>0?(c.reduce((e,t)=>e+(t.averageDuration||0),0)/c.length).toFixed(1):"0.0"," min"]})]})]})})]})},EE=e=>{let{label:t,value:r,max:n,unit:a,color:s,threshold:o}=e;const i=r/n*100;return(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Vi.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),(0,Vi.jsxs)("span",{className:"text-lg font-bold ".concat((()=>{if(r>=o.critical)return"text-red-600 dark:text-red-400";if(r>=o.warning)return"text-yellow-600 dark:text-yellow-400";switch(s){case"blue":default:return"text-blue-600 dark:text-blue-400";case"purple":return"text-purple-600 dark:text-purple-400";case"orange":return"text-orange-600 dark:text-orange-400";case"green":return"text-green-600 dark:text-green-400"}})()),children:[r,a]})]}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,Vi.jsx)("div",{className:"h-full ".concat((()=>{if(r>=o.critical)return"bg-red-500";if(r>=o.warning)return"bg-yellow-500";switch(s){case"blue":default:return"bg-blue-500";case"purple":return"bg-purple-500";case"orange":return"bg-orange-500";case"green":return"bg-green-500"}})()," transition-all duration-500 ease-out relative"),style:{width:"".concat(Math.min(i,100),"%")},children:(0,Vi.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})}),(0,Vi.jsxs)("div",{className:"absolute top-0 h-3 w-full pointer-events-none",children:[(0,Vi.jsx)("div",{className:"absolute top-0 h-full w-0.5 bg-yellow-400 opacity-50",style:{left:"".concat(o.warning/n*100,"%")}}),(0,Vi.jsx)("div",{className:"absolute top-0 h-full w-0.5 bg-red-400 opacity-50",style:{left:"".concat(o.critical/n*100,"%")}})]})]}),r>=o.critical&&(0,Vi.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"\u26a0\ufe0f Critical level reached"}),r>=o.warning&&r<o.critical&&(0,Vi.jsx)("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"\u26a0 Warning level reached"})]})},AE=e=>{let{health:t,loading:r=!1,autoRefresh:a=!0,onRefresh:s}=e;const[o,i]=(0,n.useState)(new Date);if((0,n.useEffect)(()=>{if(a&&s){const e=setInterval(()=>{s(),i(new Date)},3e4);return()=>clearInterval(e)}},[a,s]),r||!t)return(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-pulse",children:[(0,Vi.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-4"}),(0,Vi.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,Vi.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},e))})]});return(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 p-4",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"System Health"]}),s&&(0,Vi.jsx)("button",{onClick:s,className:"px-3 py-1 text-xs font-medium bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-colors",children:"Refresh"})]})}),(0,Vi.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Vi.jsx)("div",{className:"".concat((e=>{switch(e){case"healthy":return"bg-green-50 dark:bg-green-900/20";case"degraded":return"bg-yellow-50 dark:bg-yellow-900/20";case"down":return"bg-red-50 dark:bg-red-900/20"}})(t.apiStatus)," rounded-lg p-4"),children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"System Status"}),(0,Vi.jsx)("p",{className:"text-2xl font-bold ".concat((e=>{switch(e){case"healthy":return"text-green-600 dark:text-green-400";case"degraded":return"text-yellow-600 dark:text-yellow-400";case"down":return"text-red-600 dark:text-red-400"}})(t.apiStatus)),children:t.apiStatus.charAt(0).toUpperCase()+t.apiStatus.slice(1)})]}),(0,Vi.jsx)("div",{className:"flex items-center space-x-2",children:(0,Vi.jsx)("span",{className:"w-4 h-4 rounded-full ".concat("healthy"===t.apiStatus?"bg-green-500 animate-pulse":"degraded"===t.apiStatus?"bg-yellow-500 animate-pulse":"bg-red-500 animate-pulse")})})]})}),(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsx)(EE,{label:"CPU Usage",value:t.cpu,max:100,unit:"%",color:"blue",threshold:{warning:70,critical:90}}),(0,Vi.jsx)(EE,{label:"Memory Usage",value:t.memory,max:100,unit:"%",color:"purple",threshold:{warning:75,critical:90}}),(0,Vi.jsx)(EE,{label:"API Latency",value:t.latency,max:1e3,unit:"ms",color:"orange",threshold:{warning:300,critical:700}})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Uptime"}),(0,Vi.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return"".concat(t,"h ").concat(r,"m")})(t.uptime)})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Error Rate"}),(0,Vi.jsxs)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[t.errorRate,"%"]})]})]}),(0,Vi.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Last updated: ",o.toLocaleTimeString()]})]})]})},_E=()=>{const{user:e}=di(e=>e.auth),[t,r]=(0,n.useState)(null),[a,s]=(0,n.useState)(!0),[o,i]=(0,n.useState)(!0),[l,c]=(0,n.useState)(new Date),[d,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{sessionStorage.getItem("session_start")||sessionStorage.setItem("session_start",Date.now().toString())},[]);const h=()=>{var t;return[{id:"1",username:(null===e||void 0===e||null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"admin",name:(null===e||void 0===e?void 0:e.name)||"Admin User",email:(null===e||void 0===e?void 0:e.email)||"admin@example.com",password:"********",gender:"Other",phoneNumber:"+91-9876543210",address:{street:"123 Main Street",city:"New Delhi",state:"Delhi",pincode:"110001"},officeLocation:"Head Office",assignedUnder:[],role:(null===e||void 0===e?void 0:e.role)||"Admin",assignedRegions:["Delhi","Mumbai","Bangalore"],status:"Active",loginHistory:[{timestamp:new Date,location:"Delhi"}]},...Array.from({length:124},(e,t)=>({id:"user-".concat(t+2),username:"user".concat(t+2),name:"User ".concat(t+2),email:"user".concat(t+2,"@example.com"),password:"********",gender:t%2===0?"Male":"Female",phoneNumber:"+91-98765".concat(43210+t),address:{street:"".concat(t+1," Street"),city:["Delhi","Mumbai","Bangalore","Chennai","Kolkata"][t%5],state:["Delhi","Maharashtra","Karnataka","Tamil Nadu","West Bengal"][t%5],pincode:"".concat(110001+t)},officeLocation:["Delhi Office","Mumbai Office","Bangalore Office"][t%3],assignedUnder:["1"],role:"User",assignedRegions:[["Delhi","Mumbai","Bangalore","Chennai","Kolkata"][t%5]],status:"Active",loginHistory:[]}))]},m=async()=>{try{s(!0);let t=[];if(!0)try{const e=await LC();t=e,console.log("\ud83d\udcca Loaded real users from backend:",e.length)}catch(e){console.error("Failed to load users from backend, falling back to mock data:",e),t=h()}else t=h(),console.log("\ud83d\udcca Using mock users data:",t.length);u(t);const n=await(async t=>{try{const e=ec(t),r=Yl(),n=Ql(),a=await Zl(),s={};r.forEach(e=>{s[e.toolName]=e.totalUsage});const o={};return n.forEach(e=>{o[e.regionName]=e.activityScore}),{activeUsers:e.active,inactiveUsers:e.inactive,currentlyLoggedIn:e.loggedIn,toolUsage:s,regionalActivity:o,systemHealth:a,lastUpdated:new Date}}catch(e){throw console.error("Error getting dashboard metrics:",e),e}})(t);r(n),c(new Date)}catch(e){console.error("Error loading dashboard data:",e)}finally{s(!1)}};(0,n.useEffect)(()=>{m()},[e]),(0,n.useEffect)(()=>{if(o){const e=setInterval(()=>{m()},6e4);return()=>clearInterval(e)}},[o]);const g=()=>{m()},f=Yl(),p=t?ec(d.length>0?d:h()):null;return(0,Vi.jsx)(bl,{children:(0,Vi.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("div",{className:"h-14 w-14 rounded-xl bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-600 to-cyan-800 dark:from-cyan-400 dark:to-cyan-600 bg-clip-text text-transparent",children:"Dashboard & Analytics"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium mt-1",children:"Real-time metrics and system insights"})]})]}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vi.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Auto-refresh"}),(0,Vi.jsx)("button",{onClick:()=>i(!o),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(o?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"),"aria-label":"Toggle auto-refresh",children:(0,Vi.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ".concat(o?"translate-x-6":"translate-x-1")})})]}),(0,Vi.jsxs)("button",{onClick:g,disabled:a,className:"px-4 py-2 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white rounded-lg hover:from-cyan-700 hover:to-cyan-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0",children:[(0,Vi.jsx)("svg",{className:"w-4 h-4 ".concat(a?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,Vi.jsx)("span",{className:"font-semibold",children:"Refresh"})]}),(0,Vi.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated: ",l.toLocaleTimeString()]})]})]})})}),(0,Vi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Vi.jsxs)("div",{className:"space-y-8",children:[(0,Vi.jsx)("section",{children:(0,Vi.jsx)(jE,{metrics:t,loading:a})}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Vi.jsx)("div",{className:"lg:col-span-1",children:(0,Vi.jsx)(SE,{statistics:p,loading:a})}),(0,Vi.jsx)("div",{className:"lg:col-span-2",children:(0,Vi.jsx)(CE,{toolStats:f,loading:a})})]}),(0,Vi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Vi.jsx)("div",{className:"lg:col-span-1",children:(0,Vi.jsx)(AE,{health:(null===t||void 0===t?void 0:t.systemHealth)||null,loading:a,autoRefresh:o,onRefresh:g})}),(0,Vi.jsx)("div",{className:"lg:col-span-2",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,Vi.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Recent Activity"]})}),(0,Vi.jsx)("div",{className:"space-y-3",children:[{time:"2 minutes ago",user:(null===e||void 0===e?void 0:e.name)||"Admin",action:"Used Distance Measurement tool",region:"Delhi"},{time:"15 minutes ago",user:"Jane Smith",action:"Completed Polygon Drawing",region:"Mumbai"},{time:"32 minutes ago",user:"Mike Johnson",action:"Viewed Elevation Profile",region:"Bangalore"},{time:"1 hour ago",user:"Sarah Williams",action:"Managed Infrastructure",region:"Chennai"},{time:"2 hours ago",user:"David Brown",action:"Drew Circle on map",region:"Kolkata"}].map((e,t)=>(0,Vi.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,Vi.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsxs)("p",{className:"text-sm text-gray-900 dark:text-white",children:[(0,Vi.jsx)("span",{className:"font-medium",children:e.user})," ",e.action]}),(0,Vi.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.region," \u2022 ",e.time]})]})]},t))})]})})]})]})})]})})},TE=()=>(0,Vi.jsx)(_E,{}),LE=()=>{const{login:e,isLoading:t,error:r,clearError:a}=$i(),{isAuthenticated:s}=di(e=>e.auth),[i,l]=(0,n.useState)({username:"",password:""}),[c,d]=(0,n.useState)(!1);if(s)return(0,Vi.jsx)(_e,{to:"/map",replace:!0});const u=e=>{const{name:t,value:n}=e.target;l(e=>(0,o.A)((0,o.A)({},e),{},{[t]:n})),r&&a()};return(0,Vi.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-900/20 dark:to-purple-900/20 px-4 sm:px-6 lg:px-8",children:[(0,Vi.jsxs)("div",{className:"max-w-md w-full",children:[(0,Vi.jsxs)("div",{className:"text-center mb-6",children:[(0,Vi.jsx)("div",{className:"mx-auto h-16 w-16 flex items-center justify-center bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-700 rounded-2xl shadow-xl transform hover:scale-110 hover:rotate-3 transition-all duration-300 ring-4 ring-blue-400/30 dark:ring-blue-500/30",children:(0,Vi.jsx)("svg",{className:"h-9 w-9 text-white drop-shadow-lg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),(0,Vi.jsx)("h2",{className:"mt-5 text-3xl font-extrabold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent tracking-tight",children:"Opti Connect"}),(0,Vi.jsx)("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300 font-semibold",children:"Network Infrastructure Management"}),(0,Vi.jsxs)("div",{className:"mt-2 flex items-center justify-center space-x-1.5",children:[(0,Vi.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500 animate-pulse"}),(0,Vi.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"System Online"})]})]}),(0,Vi.jsxs)("form",{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm p-6 rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 ring-1 ring-blue-500/10 dark:ring-blue-400/10",onSubmit:async t=>{if(t.preventDefault(),i.username&&i.password)try{await e({email:i.username,password:i.password})}catch(r){}},children:[(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{htmlFor:"username",className:"flex items-center text-sm font-bold text-gray-900 dark:text-white mb-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),(0,Vi.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:"Email / Username / User ID"})]}),(0,Vi.jsxs)("div",{className:"relative group",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-gray-500 dark:text-gray-400 group-focus-within:text-blue-600 dark:group-focus-within:text-blue-400 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,Vi.jsx)("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:i.username,onChange:u,className:"appearance-none block w-full pl-10 pr-3 py-3 border-2 border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 hover:border-gray-400 dark:hover:border-gray-500 transition-all duration-200 text-sm font-medium",placeholder:"Email, username, or user ID"})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsxs)("label",{htmlFor:"password",className:"flex items-center text-sm font-bold text-gray-900 dark:text-white mb-2",children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),(0,Vi.jsx)("span",{className:"text-gray-900 dark:text-gray-100",children:"Password"})]}),(0,Vi.jsxs)("div",{className:"relative group",children:[(0,Vi.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-gray-500 dark:text-gray-400 group-focus-within:text-blue-600 dark:group-focus-within:text-blue-400 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),(0,Vi.jsx)("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"current-password",required:!0,value:i.password,onChange:u,className:"appearance-none block w-full pl-10 pr-12 py-3 border-2 border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 hover:border-gray-400 dark:hover:border-gray-500 transition-all duration-200 text-sm font-medium",placeholder:"Enter your password"}),(0,Vi.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:scale-110 transition-transform duration-200",onClick:()=>d(!c),"aria-label":c?"Hide password":"Show password",children:c?(0,Vi.jsx)("svg",{className:"h-5 w-5 text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,Vi.jsxs)("svg",{className:"h-5 w-5 text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),r&&(0,Vi.jsx)("div",{className:"mt-4 rounded-lg bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 p-3 animate-shake",children:(0,Vi.jsxs)("div",{className:"flex",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("svg",{className:"h-5 w-5 text-red-500 dark:text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Vi.jsx)("div",{className:"ml-2",children:(0,Vi.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:r})})]})}),(0,Vi.jsx)("div",{className:"mt-6",children:(0,Vi.jsx)("button",{type:"submit",disabled:t||!i.username||!i.password,className:"group relative w-full flex justify-center items-center py-3 px-4 border border-transparent text-sm font-bold rounded-xl text-white bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 hover:from-blue-700 hover:via-blue-800 hover:to-indigo-800 focus:outline-none focus:ring-4 focus:ring-blue-500/50 dark:focus:ring-blue-400/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 hover:scale-[1.02] active:translate-y-0 active:scale-100",children:t?(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vi.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign in to Dashboard"]})})}),(0,Vi.jsx)("div",{className:"mt-5 p-3.5 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 dark:from-blue-900/30 dark:via-indigo-900/30 dark:to-purple-900/30 border-2 border-blue-200 dark:border-blue-700 rounded-xl shadow-sm",children:(0,Vi.jsxs)("div",{className:"flex items-center",children:[(0,Vi.jsx)("svg",{className:"h-6 w-6 text-blue-600 dark:text-blue-400 flex-shrink-0 animate-pulse",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,Vi.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Vi.jsx)("p",{className:"text-sm font-bold text-blue-900 dark:text-blue-100",children:"Development Mode"}),(0,Vi.jsx)("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mt-0.5",children:"Use any credentials to sign in"})]})]})})]})]}),(0,Vi.jsx)(xl,{position:"bottom-right"})]})},ME=()=>{const[e]=yt(),t=he(),[r,a]=(0,n.useState)("verifying"),[s,o]=(0,n.useState)("Verifying your email address..."),[i,l]=(0,n.useState)(5);(0,n.useEffect)(()=>{c()},[]),(0,n.useEffect)(()=>{if("success"===r||"already-verified"===r){if(i>0){const e=setTimeout(()=>l(i-1),1e3);return()=>clearTimeout(e)}t("/login")}},[i,r,t]);const c=async()=>{const t=e.get("token");if(!t)return a("error"),void o("Invalid verification link. No token found.");try{const e="http://localhost:5005/api",r=await ui.A.get("".concat(e,"/auth/verify-email/").concat(t));r.data.success?r.data.alreadyVerified?(a("already-verified"),o("Your email is already verified!")):(a("success"),o("Email verified successfully!")):(a("error"),o(r.data.error||"Email verification failed."))}catch(s){var r,n;a("error"),o((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||"Email verification failed. The link may have expired or is invalid.")}};return(0,Vi.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:(0,Vi.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8",children:[(0,Vi.jsxs)("div",{className:"text-center mb-8",children:[(0,Vi.jsx)("div",{className:"inline-block p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-4",children:(0,Vi.jsx)("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,Vi.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Email Verification"}),(0,Vi.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"OptiConnect GIS"})]}),(0,Vi.jsxs)("div",{className:"text-center",children:["verifying"===r&&(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsx)("div",{className:"flex justify-center",children:(0,Vi.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})}),(0,Vi.jsx)("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:s})]}),"success"===r&&(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsx)("div",{className:"flex justify-center",children:(0,Vi.jsx)("div",{className:"rounded-full bg-green-100 dark:bg-green-900 p-4",children:(0,Vi.jsx)("svg",{className:"w-16 h-16 text-green-500 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,Vi.jsx)("h2",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:s}),(0,Vi.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Your account is now fully activated. You can now log in and start using OptiConnect GIS."}),(0,Vi.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,Vi.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Redirecting to login page in ",(0,Vi.jsx)("span",{className:"font-bold",children:i})," seconds..."]})}),(0,Vi.jsx)("button",{onClick:()=>t("/login"),className:"mt-4 w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg",children:"Go to Login Now"})]}),"already-verified"===r&&(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsx)("div",{className:"flex justify-center",children:(0,Vi.jsx)("div",{className:"rounded-full bg-yellow-100 dark:bg-yellow-900 p-4",children:(0,Vi.jsx)("svg",{className:"w-16 h-16 text-yellow-500 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,Vi.jsx)("h2",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),(0,Vi.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Your account was already verified. You can proceed to login."}),(0,Vi.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,Vi.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Redirecting to login page in ",(0,Vi.jsx)("span",{className:"font-bold",children:i})," seconds..."]})}),(0,Vi.jsx)("button",{onClick:()=>t("/login"),className:"mt-4 w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg",children:"Go to Login Now"})]}),"error"===r&&(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsx)("div",{className:"flex justify-center",children:(0,Vi.jsx)("div",{className:"rounded-full bg-red-100 dark:bg-red-900 p-4",children:(0,Vi.jsx)("svg",{className:"w-16 h-16 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),(0,Vi.jsx)("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:"Verification Failed"}),(0,Vi.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:s}),(0,Vi.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,Vi.jsx)("button",{onClick:()=>t("/login"),className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg",children:"Go to Login"}),(0,Vi.jsx)("button",{onClick:()=>t("/resend-verification"),className:"w-full px-6 py-3 border-2 border-blue-500 text-blue-500 dark:text-blue-400 rounded-lg font-medium hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:"Request New Verification Link"})]})]})]}),(0,Vi.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 text-center",children:(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\xa9 2024 OptiConnect GIS. All rights reserved."})})]})})},OE=()=>{const e=he(),[t,r]=(0,n.useState)(""),[a,s]=(0,n.useState)("idle"),[o,i]=(0,n.useState)("");return(0,Vi.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:(0,Vi.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8",children:[(0,Vi.jsxs)("div",{className:"text-center mb-8",children:[(0,Vi.jsx)("div",{className:"inline-block p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-4",children:(0,Vi.jsx)("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,Vi.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Resend Verification Email"}),(0,Vi.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter your email to receive a new verification link"})]}),"success"===a&&(0,Vi.jsx)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,Vi.jsxs)("div",{className:"flex items-start",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 text-green-500 dark:text-green-400 mt-0.5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h3",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Email Sent Successfully!"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-green-700 dark:text-green-300",children:o}),(0,Vi.jsx)("p",{className:"mt-2 text-xs text-green-600 dark:text-green-400",children:"Please check your email inbox (and spam folder) for the verification link."})]})]})}),"error"===a&&(0,Vi.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,Vi.jsxs)("div",{className:"flex items-start",children:[(0,Vi.jsx)("svg",{className:"w-6 h-6 text-red-500 dark:text-red-400 mt-0.5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:o})]})]})}),"success"!==a&&(0,Vi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!t)return s("error"),void i("Please enter your email address");s("loading"),i("");try{const e="http://localhost:5005/api",r=await ui.A.post("".concat(e,"/auth/resend-verification"),{email:t});r.data.success?(s("success"),i(r.data.message||"Verification email sent! Please check your inbox.")):(s("error"),i(r.data.error||"Failed to send verification email"))}catch(a){var r,n;s("error"),i((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||"Failed to send verification email. Please try again.")}},className:"space-y-6",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,Vi.jsx)("input",{id:"email",type:"email",value:t,onChange:e=>r(e.target.value),placeholder:"your.email@example.com",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent dark:bg-gray-700 dark:text-white transition-all duration-200",disabled:"loading"===a,required:!0})]}),(0,Vi.jsx)("button",{type:"submit",disabled:"loading"===a,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:"loading"===a?(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Vi.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vi.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Verification Email"})]}),(0,Vi.jsx)("div",{className:"mt-6 space-y-3",children:(0,Vi.jsx)("button",{onClick:()=>e("/login"),className:"w-full px-6 py-3 border-2 border-blue-500 text-blue-500 dark:text-blue-400 rounded-lg font-medium hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:"Back to Login"})}),(0,Vi.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,Vi.jsx)("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"\ud83d\udca1 Helpful Tips"}),(0,Vi.jsxs)("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[(0,Vi.jsx)("li",{children:"Check your spam/junk folder if you don't see the email"}),(0,Vi.jsx)("li",{children:"Verification links expire after 24 hours"}),(0,Vi.jsx)("li",{children:"You can request a new link as many times as needed"}),(0,Vi.jsx)("li",{children:"Make sure you entered the correct email address"})]})]}),(0,Vi.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 text-center",children:(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\xa9 2024 OptiConnect GIS. All rights reserved."})})]})})},DE=["title","titleId"];function RE(e,t){let{title:r,titleId:a}=e,o=s(e,DE);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const PE=n.forwardRef(RE),FE=["title","titleId"];function IE(e,t){let{title:r,titleId:a}=e,o=s(e,FE);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const BE=n.forwardRef(IE),zE=["title","titleId"];function WE(e,t){let{title:r,titleId:a}=e,o=s(e,zE);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const UE=n.forwardRef(WE),HE=e=>{let{onSubmit:t}=e;const[r,a]=(0,n.useState)(""),[s,i]=(0,n.useState)("access"),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)({isOpen:!1,type:"info",title:"",message:""}),g=(e,t,r)=>{m({isOpen:!0,type:e,title:t,message:r})};return(0,Vi.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-xl shadow-xl border-2 border-blue-100 dark:border-blue-900/30 p-6 mb-6",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:(0,Vi.jsx)(hE,{className:"h-7 w-7 text-white"})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 dark:from-blue-400 dark:to-blue-600 bg-clip-text text-transparent",children:"Request Region Access"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-medium",children:"Submit a request to access, modify, or create a new region"})]})]})}),(0,Vi.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:(0,Vi.jsxs)("div",{className:"flex items-start",children:[(0,Vi.jsx)(PE,{className:"h-6 w-6 text-blue-600 dark:text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:"Request Types"}),(0,Vi.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 mt-2 space-y-1",children:[(0,Vi.jsxs)("li",{children:[(0,Vi.jsx)("strong",{children:"Access:"})," Request permission to view or edit region data"]}),(0,Vi.jsxs)("li",{children:[(0,Vi.jsx)("strong",{children:"Modification:"})," Request changes to existing region boundaries or attributes"]}),(0,Vi.jsxs)("li",{children:[(0,Vi.jsx)("strong",{children:"Creation:"})," Request creation of a new region or sub-region"]})]})]})]})}),(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:(0,Vi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r&&l.trim()){u(!0);try{const e=sessionStorage.getItem("opti_connect_token"),n="http://localhost:5005/api",o=await fetch("".concat(n,"/region-requests"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({region_name:r,request_type:s,reason:l.trim()})}),d=await o.json();if(!o.ok||!d.success)throw new Error(d.error||"Failed to submit region request");g("success","Request Submitted","Your ".concat(s," request for ").concat(r," has been submitted successfully. An administrator will review it soon.")),a(""),i("access"),c(""),t&&t()}catch(n){console.error("Error submitting region request:",n),g("error","Submission Failed",n.message||"Failed to submit region request. Please try again.")}finally{u(!1)}}else g("error","Validation Error","Please select a region and provide a reason.")},className:"space-y-6",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Request Type *"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Vi.jsxs)("button",{type:"button",onClick:()=>i("access"),className:"p-3 rounded-lg border-2 transition-all ".concat("access"===s?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-700"),children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold",children:"Access"}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"View/Edit region"})]}),(0,Vi.jsxs)("button",{type:"button",onClick:()=>i("modification"),className:"p-3 rounded-lg border-2 transition-all ".concat("modification"===s?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-700"),children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold",children:"Modification"}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Change region"})]}),(0,Vi.jsxs)("button",{type:"button",onClick:()=>i("creation"),className:"p-3 rounded-lg border-2 transition-all ".concat("creation"===s?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-700"),children:[(0,Vi.jsx)("div",{className:"text-sm font-semibold",children:"Creation"}),(0,Vi.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"New region"})]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Region *"}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)(hE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,Vi.jsxs)("select",{value:r,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,Vi.jsx)("option",{value:"",children:"-- Select Region --"}),Tl.map(e=>(0,Vi.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason for Request *"}),(0,Vi.jsxs)("div",{className:"relative",children:[(0,Vi.jsx)(BE,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,Vi.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),rows:5,placeholder:"Please provide a detailed reason for your request...",className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",required:!0})]}),(0,Vi.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Provide specific details about why you need this access or what changes you want to make."})]}),(0,Vi.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,Vi.jsx)("button",{type:"button",onClick:()=>{a(""),i("access"),c("")},className:"px-6 py-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Clear"}),(0,Vi.jsxs)("button",{type:"submit",disabled:d,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 shadow-lg",children:[(0,Vi.jsx)(UE,{className:"h-5 w-5"}),(0,Vi.jsx)("span",{children:d?"Submitting...":"Submit Request"})]})]})]})}),(0,Vi.jsx)(ql,{isOpen:h.isOpen,onClose:()=>m((0,o.A)((0,o.A)({},h),{},{isOpen:!1})),type:h.type,title:h.title,message:h.message,autoClose:!0,autoCloseDelay:5e3})]})},VE=e=>{var t;let{onFilterChange:r,defaultValue:a="me",className:s="",showLabel:o=!0}=e;const{user:i}=di(e=>e.auth),[l,c]=(0,n.useState)(a),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(!1),g="Admin"===(null===i||void 0===i?void 0:i.role)||"Manager"===(null===i||void 0===i?void 0:i.role);(0,n.useEffect)(()=>{g&&f()},[g]);const f=async()=>{m(!0);try{const e=await LC();u(e)}catch(e){console.error("Error fetching users:",e)}finally{m(!1)}},p=e=>{const t="all"===e||"me"===e?e:parseInt(e);c(t),r(t)};return g?(0,Vi.jsxs)("div",{className:"flex flex-col space-y-2 ".concat(s),children:[o&&(0,Vi.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"View Data By:"}),(0,Vi.jsx)("div",{className:"space-y-2",children:(0,Vi.jsxs)("div",{className:"space-y-2",children:[(0,Vi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,Vi.jsx)("input",{type:"radio",name:"userFilter",value:"me",checked:"me"===l,onChange:e=>p(e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700"}),(0,Vi.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"My Data Only"})]}),(0,Vi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,Vi.jsx)("input",{type:"radio",name:"userFilter",value:"all",checked:"all"===l,onChange:e=>p(e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700"}),(0,Vi.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"All Users (Combined)"})]}),(0,Vi.jsxs)("div",{className:"space-y-1",children:[(0,Vi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,Vi.jsx)("input",{type:"radio",name:"userFilter",value:"specific",checked:"number"===typeof l,onChange:()=>{if(d.length>0){const e=parseInt(d[0].id.replace("OCGID",""));p(e.toString())}},className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700"}),(0,Vi.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Specific User:"})]}),"number"===typeof l&&(0,Vi.jsx)("div",{className:"ml-6",children:(0,Vi.jsx)("select",{value:"number"===typeof l?l:"",onChange:e=>p(e.target.value),disabled:h,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white text-gray-900 dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:h?(0,Vi.jsx)("option",{children:"Loading users..."}):0===d.length?(0,Vi.jsx)("option",{children:"No users found"}):(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("option",{value:"",children:"Select a user"}),d.map(e=>(0,Vi.jsxs)("option",{value:parseInt(e.id.replace("OCGID","")),children:[e.name," (",e.username,") - ",e.role]},e.id))]})})})]})]})}),(0,Vi.jsx)("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:(0,Vi.jsxs)("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:["me"===l&&"\ud83d\udcca Viewing only your GIS data","all"===l&&"\ud83c\udf10 Viewing all users' GIS data combined","number"===typeof l&&(0,Vi.jsxs)(Vi.Fragment,{children:["\ud83d\udc64 Viewing data for:"," ",(0,Vi.jsx)("strong",{children:(null===(t=d.find(e=>parseInt(e.id.replace("OCGID",""))===l))||void 0===t?void 0:t.name)||"Unknown User"})]})]})})]}):null},GE=()=>{var e,t,r,a,s,i;const l=he(),{user:c}=di(e=>e.auth),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)("me"),[g,f]=(0,n.useState)("all"),[p,x]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[v,k]=(0,n.useState)([]),[w,j]=(0,n.useState)([]),[N,S]=(0,n.useState)([]),[C,E]=(0,n.useState)({isOpen:!1,data:null,type:""}),[A,_]=(0,n.useState)({isOpen:!1,data:null,type:""}),[T,L]=(0,n.useState)({isOpen:!1,type:"",id:null,itemName:"",userId:void 0}),[M,O]=(0,n.useState)({total:0,distanceMeasurements:0,polygonDrawings:0,circleDrawings:0,sectorRF:0,elevationProfiles:0});(0,n.useEffect)(()=>{D()},[h]);const D=async()=>{u(!0);try{console.log("\ud83d\udd0d Loading GIS data with filter:",{selectedUserId:h,userInfo:null===c||void 0===c?void 0:c.id});const e={userId:h},t=await ic.getAllUserData(e);console.log("\ud83d\udcca Received GIS data:",{total:t.total,distanceMeasurements:t.distanceMeasurements.length,polygonDrawings:t.polygonDrawings.length,circleDrawings:t.circleDrawings.length,sectorRF:t.sectorRF.length,elevationProfiles:t.elevationProfiles.length,sampleData:t.distanceMeasurements[0]||t.polygonDrawings[0]||t.circleDrawings[0]||"No data"}),x(t.distanceMeasurements),y(t.polygonDrawings),k(t.circleDrawings),j(t.sectorRF),S(t.elevationProfiles),O({total:t.total,distanceMeasurements:t.distanceMeasurements.length,polygonDrawings:t.polygonDrawings.length,circleDrawings:t.circleDrawings.length,sectorRF:t.sectorRF.length,elevationProfiles:t.elevationProfiles.length})}catch(e){console.error("Error loading GIS data:",e)}finally{u(!1)}},R=e=>{if(null===c||void 0===c||!c.id)return!1;return e===parseInt(c.id.replace("OCGID",""))},P=(e,t)=>{E({isOpen:!0,data:e,type:t})},F=(e,t)=>{sessionStorage.setItem("viewOnMapData",JSON.stringify({data:e,type:t})),l("/map")},I=(e,t)=>{_({isOpen:!0,data:e,type:t})},B=(e,t,r,n)=>{R(n)?L({isOpen:!0,type:e,id:t,itemName:r,userId:n}):alert("You can only delete your own data!")},z=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",W=e=>{const t=parseFloat(String(e||0));return isNaN(t)?"N/A":t<1e3?"".concat(t.toFixed(2)," m"):"".concat((t/1e3).toFixed(2)," km")},U=e=>{const t=parseFloat(String(e||0));return isNaN(t)?"N/A":t<1e6?"".concat(t.toFixed(2)," m\xb2"):"".concat((t/1e6).toFixed(2)," km\xb2")};return(0,Vi.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow",children:(0,Vi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"GIS Data Hub"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Centralized repository for all your GIS tool data"})]}),(0,Vi.jsx)("button",{onClick:D,disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Loading...":"Refresh Data"})]})})}),(0,Vi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,Vi.jsx)("div",{className:"lg:col-span-1",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 sticky top-4",children:[(0,Vi.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Filters"}),(0,Vi.jsx)(VE,{onFilterChange:e=>m(e),defaultValue:"me",showLabel:!0}),(0,Vi.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,Vi.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Statistics"}),(0,Vi.jsxs)("div",{className:"space-y-2",children:[(0,Vi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Items:"}),(0,Vi.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:M.total})]}),(0,Vi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Distance:"}),(0,Vi.jsx)("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:M.distanceMeasurements})]}),(0,Vi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Polygons:"}),(0,Vi.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-400",children:M.polygonDrawings})]}),(0,Vi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Circles:"}),(0,Vi.jsx)("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:M.circleDrawings})]}),(0,Vi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"RF Sectors:"}),(0,Vi.jsx)("span",{className:"font-semibold text-orange-600 dark:text-orange-400",children:M.sectorRF})]}),(0,Vi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Elevation:"}),(0,Vi.jsx)("span",{className:"font-semibold text-red-600 dark:text-red-400",children:M.elevationProfiles})]})]})]})]})}),(0,Vi.jsxs)("div",{className:"lg:col-span-3",children:[(0,Vi.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6",children:(0,Vi.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("nav",{className:"flex -mb-px overflow-x-auto",children:[{id:"all",label:"All Data",count:M.total},{id:"distance",label:"Distance",count:M.distanceMeasurements},{id:"polygon",label:"Polygons",count:M.polygonDrawings},{id:"circle",label:"Circles",count:M.circleDrawings},{id:"sector",label:"RF Sectors",count:M.sectorRF},{id:"elevation",label:"Elevation",count:M.elevationProfiles}].map(e=>(0,Vi.jsxs)("button",{onClick:()=>f(e.id),className:"\n                        whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm\n                        ".concat(g===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300","\n                      "),children:[e.label,(0,Vi.jsx)("span",{className:"ml-2 py-0.5 px-2 rounded-full text-xs bg-gray-100 dark:bg-gray-700",children:e.count})]},e.id))})})}),(0,Vi.jsx)("div",{className:"space-y-4",children:d?(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[(0,Vi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Vi.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading data..."})]}):(0,Vi.jsxs)(Vi.Fragment,{children:[("all"===g||"distance"===g)&&p.length>0&&(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,Vi.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\ud83d\udccf Distance Measurements (",p.length,")"]})}),(0,Vi.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:p.map(e=>{var t;return(0,Vi.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.measurement_name}),(0,Vi.jsxs)("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,Vi.jsxs)("span",{children:["\ud83d\udccd ",(null===(t=e.points)||void 0===t?void 0:t.length)||0," points"]}),(0,Vi.jsxs)("span",{children:["\ud83d\udcd0 ",W(e.total_distance)]}),(0,Vi.jsxs)("span",{children:["\ud83d\udd50 ",z(e.created_at)]}),e.username&&(0,Vi.jsxs)("span",{children:["\ud83d\udc64 ",e.username]})]}),e.notes&&(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:e.notes})]}),(0,Vi.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>P(e,"distance"),className:"px-3 py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded border border-blue-300 dark:border-blue-700",title:"View Details",children:"\ud83d\udccb Details"}),(0,Vi.jsx)("button",{onClick:()=>F(e,"distance"),className:"px-3 py-1.5 text-xs font-medium text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20 rounded border border-green-300 dark:border-green-700",title:"View on Map",children:"\ud83d\uddfa\ufe0f Map"}),R(e.user_id)&&(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("button",{onClick:()=>I(e,"distance"),className:"px-3 py-1.5 text-xs font-medium text-amber-600 hover:bg-amber-50 dark:text-amber-400 dark:hover:bg-amber-900/20 rounded border border-amber-300 dark:border-amber-700",title:"Edit",children:"\u270f\ufe0f Edit"}),(0,Vi.jsx)("button",{onClick:()=>B("distance",e.id,e.measurement_name,e.user_id),className:"px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded border border-red-300 dark:border-red-700",title:"Delete",children:"\ud83d\uddd1\ufe0f Delete"})]})]})]})},e.id)})})]}),("all"===g||"polygon"===g)&&b.length>0&&(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,Vi.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\u25ad Polygon Drawings (",b.length,")"]})}),(0,Vi.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:b.map(e=>{var t;return(0,Vi.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.polygon_name}),(0,Vi.jsxs)("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,Vi.jsxs)("span",{children:["\ud83d\udccd ",(null===(t=e.coordinates)||void 0===t?void 0:t.length)||0," vertices"]}),e.area&&(0,Vi.jsxs)("span",{children:["\ud83d\udcd0 ",U(e.area)]}),(0,Vi.jsx)("span",{className:"inline-block w-4 h-4 rounded",style:{backgroundColor:e.fill_color},title:"Color: ".concat(e.fill_color)}),(0,Vi.jsxs)("span",{children:["\ud83d\udd50 ",z(e.created_at)]}),e.username&&(0,Vi.jsxs)("span",{children:["\ud83d\udc64 ",e.username]})]})]}),(0,Vi.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>P(e,"polygon"),className:"px-3 py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded border border-blue-300 dark:border-blue-700",children:"\ud83d\udccb Details"}),(0,Vi.jsx)("button",{onClick:()=>F(e,"polygon"),className:"px-3 py-1.5 text-xs font-medium text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20 rounded border border-green-300 dark:border-green-700",children:"\ud83d\uddfa\ufe0f Map"}),R(e.user_id)&&(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("button",{onClick:()=>I(e,"polygon"),className:"px-3 py-1.5 text-xs font-medium text-amber-600 hover:bg-amber-50 dark:text-amber-400 dark:hover:bg-amber-900/20 rounded border border-amber-300 dark:border-amber-700",children:"\u270f\ufe0f Edit"}),(0,Vi.jsx)("button",{onClick:()=>B("polygon",e.id,e.polygon_name,e.user_id),className:"px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded border border-red-300 dark:border-red-700",children:"\ud83d\uddd1\ufe0f Delete"})]})]})]})},e.id)})})]}),("all"===g||"circle"===g)&&v.length>0&&(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,Vi.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\u2b55 Circle Drawings (",v.length,")"]})}),(0,Vi.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:v.map(e=>(0,Vi.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.circle_name}),(0,Vi.jsxs)("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,Vi.jsxs)("span",{children:["\ud83d\udccd (",Number(e.center_lat).toFixed(4),", ",Number(e.center_lng).toFixed(4),")"]}),(0,Vi.jsxs)("span",{children:["\ud83d\udccf Radius: ",W(e.radius)]}),(0,Vi.jsx)("span",{className:"inline-block w-4 h-4 rounded-full",style:{backgroundColor:e.fill_color}}),(0,Vi.jsxs)("span",{children:["\ud83d\udd50 ",z(e.created_at)]}),e.username&&(0,Vi.jsxs)("span",{children:["\ud83d\udc64 ",e.username]})]})]}),(0,Vi.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>P(e,"circle"),className:"px-3 py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded border border-blue-300 dark:border-blue-700",children:"\ud83d\udccb Details"}),(0,Vi.jsx)("button",{onClick:()=>F(e,"circle"),className:"px-3 py-1.5 text-xs font-medium text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20 rounded border border-green-300 dark:border-green-700",children:"\ud83d\uddfa\ufe0f Map"}),R(e.user_id)&&(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("button",{onClick:()=>I(e,"circle"),className:"px-3 py-1.5 text-xs font-medium text-amber-600 hover:bg-amber-50 dark:text-amber-400 dark:hover:bg-amber-900/20 rounded border border-amber-300 dark:border-amber-700",children:"\u270f\ufe0f Edit"}),(0,Vi.jsx)("button",{onClick:()=>B("circle",e.id,e.circle_name,e.user_id),className:"px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded border border-red-300 dark:border-red-700",children:"\ud83d\uddd1\ufe0f Delete"})]})]})]})},e.id))})]}),("all"===g||"sector"===g)&&w.length>0&&(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,Vi.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\ud83d\udce1 RF Sectors (",w.length,")"]})}),(0,Vi.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:w.map(e=>(0,Vi.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.sector_name}),(0,Vi.jsxs)("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,Vi.jsxs)("span",{children:["\ud83d\udccd (",Number(e.tower_lat).toFixed(4),", ",Number(e.tower_lng).toFixed(4),")"]}),(0,Vi.jsxs)("span",{children:["\ud83d\udd06 Azimuth: ",e.azimuth,"\xb0"]}),(0,Vi.jsxs)("span",{children:["\ud83d\udcd0 Beamwidth: ",e.beamwidth,"\xb0"]}),(0,Vi.jsxs)("span",{children:["\ud83d\udccf ",W(e.radius)]}),(0,Vi.jsxs)("span",{children:["\ud83d\udcfb ",e.frequency," MHz"]}),(0,Vi.jsxs)("span",{children:["\ud83d\udd50 ",z(e.created_at)]}),e.username&&(0,Vi.jsxs)("span",{children:["\ud83d\udc64 ",e.username]})]})]}),(0,Vi.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>P(e,"sector"),className:"px-3 py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded border border-blue-300 dark:border-blue-700",children:"\ud83d\udccb Details"}),(0,Vi.jsx)("button",{onClick:()=>F(e,"sector"),className:"px-3 py-1.5 text-xs font-medium text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20 rounded border border-green-300 dark:border-green-700",children:"\ud83d\uddfa\ufe0f Map"}),R(e.user_id)&&(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("button",{onClick:()=>I(e,"sector"),className:"px-3 py-1.5 text-xs font-medium text-amber-600 hover:bg-amber-50 dark:text-amber-400 dark:hover:bg-amber-900/20 rounded border border-amber-300 dark:border-amber-700",children:"\u270f\ufe0f Edit"}),(0,Vi.jsx)("button",{onClick:()=>B("sector",e.id,e.sector_name,e.user_id),className:"px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded border border-red-300 dark:border-red-700",children:"\ud83d\uddd1\ufe0f Delete"})]})]})]})},e.id))})]}),("all"===g||"elevation"===g)&&N.length>0&&(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,Vi.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\u26f0\ufe0f Elevation Profiles (",N.length,")"]})}),(0,Vi.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:N.map(e=>(0,Vi.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700",children:(0,Vi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vi.jsxs)("div",{className:"flex-1",children:[(0,Vi.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.profile_name}),(0,Vi.jsxs)("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,Vi.jsxs)("span",{children:["\ud83d\udccf ",W(e.total_distance)]}),(0,Vi.jsxs)("span",{children:["\u2b06\ufe0f Max: ",e.max_elevation,"m"]}),(0,Vi.jsxs)("span",{children:["\u2b07\ufe0f Min: ",e.min_elevation,"m"]}),(0,Vi.jsxs)("span",{children:["\ud83d\udd50 ",z(e.created_at)]}),e.username&&(0,Vi.jsxs)("span",{children:["\ud83d\udc64 ",e.username]})]})]}),(0,Vi.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>P(e,"elevation"),className:"px-3 py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded border border-blue-300 dark:border-blue-700",children:"\ud83d\udccb Details"}),(0,Vi.jsx)("button",{onClick:()=>F(e,"elevation"),className:"px-3 py-1.5 text-xs font-medium text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20 rounded border border-green-300 dark:border-green-700",children:"\ud83d\uddfa\ufe0f Map"}),R(e.user_id)&&(0,Vi.jsxs)(Vi.Fragment,{children:[(0,Vi.jsx)("button",{onClick:()=>I(e,"elevation"),className:"px-3 py-1.5 text-xs font-medium text-amber-600 hover:bg-amber-50 dark:text-amber-400 dark:hover:bg-amber-900/20 rounded border border-amber-300 dark:border-amber-700",children:"\u270f\ufe0f Edit"}),(0,Vi.jsx)("button",{onClick:()=>B("elevation",e.id,e.profile_name,e.user_id),className:"px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded border border-red-300 dark:border-red-700",children:"\ud83d\uddd1\ufe0f Delete"})]})]})]})},e.id))})]}),0===M.total&&!d&&(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[(0,Vi.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,Vi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No data found"}),(0,Vi.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by using the GIS tools on the map to create measurements and drawings."})]})]})})]})]})}),C.isOpen&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full max-h-[85vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center z-10",children:[(0,Vi.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["\ud83d\udccb ",C.type.charAt(0).toUpperCase()+C.type.slice(1)," Details"]}),(0,Vi.jsx)("button",{onClick:()=>E({isOpen:!1,data:null,type:""}),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"\u2715"})]}),(0,Vi.jsxs)("div",{className:"px-6 py-6",children:["distance"===C.type&&(e=>{const t=C.data;return(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"\ud83d\udccf Basic Information"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Measurement Name"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:t.measurement_name})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Distance"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:W(t.total_distance)})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Number of Points"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:(null===(e=t.points)||void 0===e?void 0:e.length)||0})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:z(t.created_at)})]}),t.username&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created By"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["\ud83d\udc64 ",t.username]})]})]}),t.notes&&(0,Vi.jsxs)("div",{className:"mt-4 pt-4 border-t border-blue-200 dark:border-blue-800",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Notes"}),(0,Vi.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.notes})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83d\udccd Coordinates"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700 max-h-60 overflow-y-auto",children:t.points&&t.points.map((e,t)=>(0,Vi.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[(0,Vi.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Point ",t+1]}),(0,Vi.jsxs)("span",{className:"text-sm font-mono text-gray-600 dark:text-gray-400",children:[Number(e.lat).toFixed(6),", ",Number(e.lng).toFixed(6)]})]},t))})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\u2699\ufe0f Technical Properties"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:t.id})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"User ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:t.user_id})]}),t.region_id&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Region ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:t.region_id})]})]})})]})]})})(),"polygon"===C.type&&(e=>{const t=C.data;return(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100 mb-3",children:"\u25ad Basic Information"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Polygon Name"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:t.polygon_name})]}),t.area&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Area"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:U(t.area)})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Vertices"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:(null===(e=t.coordinates)||void 0===e?void 0:e.length)||0})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:z(t.created_at)})]}),t.username&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created By"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["\ud83d\udc64 ",t.username]})]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83c\udfa8 Styling"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Fill Color"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-12 h-12 rounded border-2 border-gray-300 dark:border-gray-600",style:{backgroundColor:t.fill_color}}),(0,Vi.jsx)("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:t.fill_color})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Stroke Color"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-12 h-12 rounded border-2",style:{backgroundColor:t.stroke_color}}),(0,Vi.jsx)("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:t.stroke_color})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Opacity"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[(100*Number(t.opacity)).toFixed(0),"%"]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Stroke Weight"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[t.stroke_weight,"px"]})]})]})})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83d\udccd Coordinates"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700 max-h-60 overflow-y-auto",children:t.coordinates&&t.coordinates.map((e,t)=>(0,Vi.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[(0,Vi.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Vertex ",t+1]}),(0,Vi.jsxs)("span",{className:"text-sm font-mono text-gray-600 dark:text-gray-400",children:[Number(e.lat).toFixed(6),", ",Number(e.lng).toFixed(6)]})]},t))})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\u2699\ufe0f Technical Properties"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:t.id})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"User ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:t.user_id})]}),t.region_id&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Region ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:t.region_id})]})]})})]})]})})(),"circle"===C.type&&(()=>{const e=C.data;return(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100 mb-3",children:"\u2b55 Basic Information"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Circle Name"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:e.circle_name})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Radius"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:W(e.radius)})]}),(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Center Coordinates"}),(0,Vi.jsxs)("p",{className:"text-base font-mono font-semibold text-gray-900 dark:text-white",children:[Number(e.center_lat).toFixed(6),", ",Number(e.center_lng).toFixed(6)]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:z(e.created_at)})]}),e.username&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created By"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["\ud83d\udc64 ",e.username]})]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83c\udfa8 Styling"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Fill Color"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-gray-300 dark:border-gray-600",style:{backgroundColor:e.fill_color}}),(0,Vi.jsx)("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:e.fill_color})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Stroke Color"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-12 h-12 rounded-full border-2",style:{backgroundColor:e.stroke_color}}),(0,Vi.jsx)("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:e.stroke_color})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Opacity"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[(100*Number(e.opacity)).toFixed(0),"%"]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Stroke Weight"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[e.stroke_weight,"px"]})]})]})})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\u2699\ufe0f Technical Properties"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.id})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"User ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.user_id})]}),e.region_id&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Region ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.region_id})]})]})})]})]})})(),"sector"===C.type&&(()=>{const e=C.data;return(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-orange-900 dark:text-orange-100 mb-3",children:"\ud83d\udce1 Basic Information"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sector Name"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:e.sector_name})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Radius"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:W(e.radius)})]}),(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Tower Coordinates"}),(0,Vi.jsxs)("p",{className:"text-base font-mono font-semibold text-gray-900 dark:text-white",children:[Number(e.tower_lat).toFixed(6),", ",Number(e.tower_lng).toFixed(6)]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:z(e.created_at)})]}),e.username&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created By"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["\ud83d\udc64 ",e.username]})]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83d\udcfb RF Configuration"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Azimuth"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[e.azimuth,"\xb0"]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Beamwidth"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[e.beamwidth,"\xb0"]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Frequency"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[e.frequency," MHz"]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Technology"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:e.technology||"N/A"})]})]})})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83c\udfa8 Styling"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Fill Color"}),(0,Vi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vi.jsx)("div",{className:"w-12 h-12 rounded border-2 border-gray-300 dark:border-gray-600",style:{backgroundColor:e.fill_color}}),(0,Vi.jsx)("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300",children:e.fill_color})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Opacity"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[(100*Number(e.opacity)).toFixed(0),"%"]})]})]})})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\u2699\ufe0f Technical Properties"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.id})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"User ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.user_id})]}),e.region_id&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Region ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.region_id})]})]})})]})]})})(),"elevation"===C.type&&(()=>{const e=C.data;return(0,Vi.jsxs)("div",{className:"space-y-6",children:[(0,Vi.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-3",children:"\u26f0\ufe0f Basic Information"}),(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Profile Name"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:e.profile_name})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Distance"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:W(e.total_distance)})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Max Elevation"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[e.max_elevation,"m"]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Min Elevation"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[e.min_elevation,"m"]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Elevation Gain"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[e.elevation_gain||"N/A","m"]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created"}),(0,Vi.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:z(e.created_at)})]}),e.username&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created By"}),(0,Vi.jsxs)("p",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["\ud83d\udc64 ",e.username]})]})]})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83d\udcca Elevation Data"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700 max-h-60 overflow-y-auto",children:e.elevation_data&&e.elevation_data.length>0?e.elevation_data.map((e,t)=>(0,Vi.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[(0,Vi.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Point ",t+1]}),(0,Vi.jsxs)("div",{className:"text-sm font-mono text-gray-600 dark:text-gray-400",children:[(0,Vi.jsxs)("span",{className:"mr-4",children:[Number(e.lat).toFixed(6),", ",Number(e.lng).toFixed(6)]}),(0,Vi.jsxs)("span",{className:"font-semibold text-red-600 dark:text-red-400",children:[e.elevation,"m"]}),(0,Vi.jsxs)("span",{className:"ml-4 text-gray-500 dark:text-gray-500",children:["(",e.distance.toFixed(0),"m)"]})]})]},t)):(0,Vi.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No elevation data available"})})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\u2699\ufe0f Technical Properties"}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.id})]}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"User ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.user_id})]}),e.region_id&&(0,Vi.jsxs)("div",{className:"col-span-2",children:[(0,Vi.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Region ID:"}),(0,Vi.jsx)("span",{className:"ml-2 font-mono text-gray-900 dark:text-white",children:e.region_id})]})]})})]})]})})()]}),(0,Vi.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-end sticky bottom-0 bg-white dark:bg-gray-800",children:(0,Vi.jsx)("button",{onClick:()=>E({isOpen:!1,data:null,type:""}),className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors",children:"Close"})})]})}),A.isOpen&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[(0,Vi.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center",children:[(0,Vi.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["\u270f\ufe0f Edit ",A.type.charAt(0).toUpperCase()+A.type.slice(1)]}),(0,Vi.jsx)("button",{onClick:()=>_({isOpen:!1,data:null,type:""}),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,Vi.jsxs)("div",{className:"px-6 py-4 space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),(0,Vi.jsx)("input",{type:"text",value:"distance"===A.type?null===(e=A.data)||void 0===e?void 0:e.measurement_name:"polygon"===A.type?null===(t=A.data)||void 0===t?void 0:t.polygon_name:"circle"===A.type?null===(r=A.data)||void 0===r?void 0:r.circle_name:"sector"===A.type?null===(a=A.data)||void 0===a?void 0:a.sector_name:(null===(s=A.data)||void 0===s?void 0:s.profile_name)||"",onChange:e=>{const t="distance"===A.type?"measurement_name":"polygon"===A.type?"polygon_name":"circle"===A.type?"circle_name":"sector"===A.type?"sector_name":"profile_name";_((0,o.A)((0,o.A)({},A),{},{data:(0,o.A)((0,o.A)({},A.data),{},{[t]:e.target.value})}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),"distance"===A.type&&(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),(0,Vi.jsx)("textarea",{value:(null===(i=A.data)||void 0===i?void 0:i.notes)||"",onChange:e=>_((0,o.A)((0,o.A)({},A),{},{data:(0,o.A)((0,o.A)({},A.data),{},{notes:e.target.value})})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),(0,Vi.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-end space-x-2",children:[(0,Vi.jsx)("button",{onClick:()=>_({isOpen:!1,data:null,type:""}),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{if(A.data&&A.type)try{let e=!1;const t=A.data.id;switch(A.type){case"distance":e=await ic.distanceMeasurements.update(t,A.data);break;case"polygon":e=await ic.polygonDrawings.update(t,A.data);break;case"circle":e=await ic.circleDrawings.update(t,A.data);break;case"sector":e=await ic.sectorRF.update(t,A.data);break;case"elevation":e=await ic.elevationProfiles.update(t,A.data)}e?(alert("Item updated successfully!"),_({isOpen:!1,data:null,type:""}),D()):alert("Failed to update item")}catch(e){console.error("Error updating item:",e),alert("Error updating item")}},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Changes"})]})]})}),T.isOpen&&(0,Vi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Vi.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[(0,Vi.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,Vi.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,Vi.jsx)("span",{className:"text-red-600 dark:text-red-400 mr-2",children:"\u26a0\ufe0f"}),"Confirm Delete"]})}),(0,Vi.jsxs)("div",{className:"px-6 py-4",children:[(0,Vi.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Are you sure you want to delete this item?"}),(0,Vi.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[(0,Vi.jsxs)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:[T.type.charAt(0).toUpperCase()+T.type.slice(1),":"]}),(0,Vi.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:T.itemName})]}),(0,Vi.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 mt-4",children:"\u26a0\ufe0f This action cannot be undone."})]}),(0,Vi.jsxs)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3",children:[(0,Vi.jsx)("button",{onClick:()=>L({isOpen:!1,type:"",id:null,itemName:"",userId:void 0}),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-medium transition-colors",children:"Cancel"}),(0,Vi.jsx)("button",{onClick:async()=>{const{type:e,id:t,userId:r}=T;if(t)try{let r=!1;switch(e){case"distance":r=await ic.distanceMeasurements.delete(t);break;case"polygon":r=await ic.polygonDrawings.delete(t);break;case"circle":r=await ic.circleDrawings.delete(t);break;case"sector":r=await ic.sectorRF.delete(t);break;case"elevation":r=await ic.elevationProfiles.delete(t)}r?(L({isOpen:!1,type:"",id:null,itemName:"",userId:void 0}),D()):alert("Failed to delete item")}catch(n){console.error("Error deleting item:",n),alert("Error deleting item")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors",children:"Delete"})]})]})})]})};class qE extends n.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:(0,Vi.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4",children:(0,Vi.jsxs)("div",{className:"max-w-2xl w-full bg-white dark:bg-gray-800 shadow-2xl rounded-lg overflow-hidden",children:[(0,Vi.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 px-6 py-8",children:(0,Vi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Vi.jsx)("div",{className:"flex-shrink-0",children:(0,Vi.jsx)("svg",{className:"h-12 w-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Something went wrong"}),(0,Vi.jsx)("p",{className:"text-red-100 mt-1",children:"An unexpected error occurred in the application"})]})]})}),(0,Vi.jsxs)("div",{className:"px-6 py-6",children:[(0,Vi.jsxs)("div",{className:"space-y-4",children:[(0,Vi.jsxs)("div",{children:[(0,Vi.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Error Message:"}),(0,Vi.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,Vi.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200 font-mono",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"Unknown error"})})]}),!1,!1,(0,Vi.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,Vi.jsx)("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"What you can do:"}),(0,Vi.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-1 list-disc list-inside",children:[(0,Vi.jsx)("li",{children:"Try reloading the page"}),(0,Vi.jsx)("li",{children:"Clear your browser cache"}),(0,Vi.jsx)("li",{children:"Check your internet connection"}),(0,Vi.jsx)("li",{children:"Contact support if the problem persists"})]})]})]}),(0,Vi.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[(0,Vi.jsx)("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Try Again"}),(0,Vi.jsx)("button",{onClick:this.handleReload,className:"flex-1 px-4 py-2.5 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Reload Page"}),(0,Vi.jsx)("button",{onClick:()=>window.history.back(),className:"flex-1 px-4 py-2.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-lg transition-colors",children:"Go Back"})]})]}),(0,Vi.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:(0,Vi.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"If this error persists, please contact technical support"})})]})}):this.props.children}}const $E=qE,KE=e=>{let{children:t,allowedRoles:r}=e;const{isAuthenticated:n,user:a}=di(e=>e.auth);return n?r&&null!==a&&void 0!==a&&a.role&&!r.includes(a.role)?(0,Vi.jsx)(_e,{to:"/dashboard",replace:!0}):(0,Vi.jsx)(Vi.Fragment,{children:t}):(0,Vi.jsx)(_e,{to:"/login",replace:!0})},YE=()=>(MC(3e4),null),XE=()=>((0,n.useEffect)(()=>{const e=(()=>{const e=gl(),t=[];return e.maps.apiKey||t.push("Google Maps API key is not configured (REACT_APP_GOOGLE_MAPS_API_KEY)"),"production"===e.app.environment&&(e.api.baseUrl.startsWith("https://")||t.push("Production API URL must use HTTPS"),e.monitoring.sentry.enabled&&!e.monitoring.sentry.dsn&&t.push("Sentry DSN is required when Sentry monitoring is enabled"),e.monitoring.analytics.enabled&&!e.monitoring.analytics.trackingId&&t.push("Analytics tracking ID is required when analytics is enabled")),{valid:0===t.length,errors:t}})();e.valid||(console.error("Environment validation failed:",e.errors),e.errors.forEach(e=>{console.error("\u274c ".concat(e))})),function(e){const t=gl();if(t.app.debug){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];console.log("[".concat(t.app.mode.toUpperCase(),"] ").concat(e),...n)}}("Application starting...",{mode:pl.app.mode,environment:pl.app.environment,version:pl.app.version,debug:pl.app.debug,buildDate:pl.app.buildDate});const t=e=>{console.error("Unhandled promise rejection:",e.reason)},r=e=>{console.error("Global error:",e.error)};return window.addEventListener("unhandledrejection",t),window.addEventListener("error",r),()=>{window.removeEventListener("unhandledrejection",t),window.removeEventListener("error",r)}},[]),(0,Vi.jsx)($E,{onError:(e,t)=>{console.error("React Error Boundary caught an error:",e,t)},children:(0,Vi.jsx)(Dt,{store:ii,children:(0,Vi.jsx)(Xt,{loading:null,persistor:li,children:(0,Vi.jsx)(Yi,{children:(0,Vi.jsx)(_l,{children:(0,Vi.jsx)(qi,{children:(0,Vi.jsx)(ht,{children:(0,Vi.jsxs)("div",{className:"App min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,Vi.jsx)(YE,{}),(0,Vi.jsx)(il,{}),(0,Vi.jsxs)(Me,{children:[(0,Vi.jsx)(Te,{path:"/login",element:(0,Vi.jsx)(LE,{})}),(0,Vi.jsx)(Te,{path:"/verify-email",element:(0,Vi.jsx)(ME,{})}),(0,Vi.jsx)(Te,{path:"/resend-verification",element:(0,Vi.jsx)(OE,{})}),(0,Vi.jsx)(Te,{path:"/dashboard",element:(0,Vi.jsx)(KE,{allowedRoles:["Admin","Manager","Technician","User"],children:(0,Vi.jsx)("main",{className:"pt-16",children:(0,Vi.jsx)(vl,{})})})}),(0,Vi.jsx)(Te,{path:"/map",element:(0,Vi.jsx)(KE,{allowedRoles:["Admin","Manager","Technician","User"],children:(0,Vi.jsx)("main",{className:"pt-16",children:(0,Vi.jsx)(fC,{})})})}),(0,Vi.jsx)(Te,{path:"/users",element:(0,Vi.jsx)(KE,{allowedRoles:["Admin","Manager"],children:(0,Vi.jsx)("main",{className:"pt-16",children:(0,Vi.jsx)(RC,{})})})}),(0,Vi.jsx)(Te,{path:"/groups",element:(0,Vi.jsx)(KE,{allowedRoles:["Admin","Manager"],children:(0,Vi.jsx)("main",{className:"pt-16",children:(0,Vi.jsx)(YC,{})})})}),(0,Vi.jsx)(Te,{path:"/admin",element:(0,Vi.jsx)(KE,{allowedRoles:["Admin"],children:(0,Vi.jsx)("main",{className:"pt-16",children:(0,Vi.jsx)(kE,{})})})}),(0,Vi.jsx)(Te,{path:"/analytics",element:(0,Vi.jsx)(KE,{allowedRoles:["Admin","Manager"],children:(0,Vi.jsx)("main",{className:"pt-16",children:(0,Vi.jsx)(TE,{})})})}),(0,Vi.jsx)(Te,{path:"/gis-data-hub",element:(0,Vi.jsx)(KE,{allowedRoles:["Admin","Manager","Technician","User"],children:(0,Vi.jsx)("main",{className:"pt-16",children:(0,Vi.jsx)(GE,{})})})}),(0,Vi.jsx)(Te,{path:"/request-region",element:(0,Vi.jsx)(KE,{allowedRoles:["Admin","Manager","Technician","User"],children:(0,Vi.jsx)("main",{className:"pt-16",children:(0,Vi.jsx)(HE,{})})})}),(0,Vi.jsx)(Te,{path:"/",element:(0,Vi.jsx)(_e,{to:"/dashboard",replace:!0})}),(0,Vi.jsx)(Te,{path:"*",element:(0,Vi.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,Vi.jsxs)("div",{className:"text-center",children:[(0,Vi.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Page Not Found"}),(0,Vi.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The page you're looking for doesn't exist."}),(0,Vi.jsx)(_e,{to:"/dashboard",replace:!0})]})})})]})]})})})})})})})}));a.createRoot(document.getElementById("root")).render((0,Vi.jsx)(n.StrictMode,{children:(0,Vi.jsx)(XE,{})}))})();
//# sourceMappingURL=main.ffe7a8fa.js.map