const fs=require("fs");const {pool}=require("./src/config/database");async function runMigration(){try{console.log("Running infrastructure migration...");const sql=fs.readFileSync("./migrations/001_infrastructure_management.sql","utf8");const statements=sql.split(";").filter(s=>s.trim()&&!s.includes("DELIMITER")&&!s.trim().startsWith("USE"));for(const stmt of statements){if(stmt.trim()){try{await pool.query(stmt);console.log("✅ Executed statement");}catch(e){if(e.errno===1050||e.errno===1060||e.errno===1304){console.log("⚠️ Already exists - skipping");}else{console.error("Error:",e.message);}}}}console.log("
✅ Migration completed!");process.exit(0);}catch(error){console.error("Migration failed:",error);process.exit(1);}}runMigration();